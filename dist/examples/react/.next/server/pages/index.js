/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/index";
exports.ids = ["pages/index"];
exports.modules = {

/***/ "./components/Content.tsx":
/*!********************************!*\
  !*** ./components/Content.tsx ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! near-api-js */ \"near-api-js\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(near_api_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_WalletSelectorContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contexts/WalletSelectorContext */ \"./contexts/WalletSelectorContext.tsx\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../constants */ \"./constants.ts\");\n/* harmony import */ var _SignIn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SignIn */ \"./components/SignIn.tsx\");\n/* harmony import */ var _Form__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Form */ \"./components/Form.tsx\");\n/* harmony import */ var _Messages__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Messages */ \"./components/Messages.tsx\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Form__WEBPACK_IMPORTED_MODULE_5__]);\n_Form__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\nvar _jsxFileName = \"/Users/campv/Documents/Projects/wallet-selector/examples/react/components/Content.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\nconst SUGGESTED_DONATION = \"0\";\nconst BOATLOAD_OF_GAS = near_api_js__WEBPACK_IMPORTED_MODULE_1__.utils.format.parseNearAmount(\"0.00000000003\");\n\nconst Content = () => {\n  const {\n    selector,\n    modal,\n    accounts,\n    accountId\n  } = (0,_contexts_WalletSelectorContext__WEBPACK_IMPORTED_MODULE_2__.useWalletSelector)();\n  const {\n    0: account,\n    1: setAccount\n  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const {\n    0: messages,\n    1: setMessages\n  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const getAccount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async () => {\n    if (!accountId) {\n      return null;\n    }\n\n    const {\n      network\n    } = selector.options;\n    const provider = new near_api_js__WEBPACK_IMPORTED_MODULE_1__.providers.JsonRpcProvider({\n      url: network.nodeUrl\n    });\n    return provider.query({\n      request_type: \"view_account\",\n      finality: \"final\",\n      account_id: accountId\n    }).then(data => _objectSpread(_objectSpread({}, data), {}, {\n      account_id: accountId\n    }));\n  }, [accountId, selector.options]);\n  const getMessages = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    const {\n      network\n    } = selector.options;\n    const provider = new near_api_js__WEBPACK_IMPORTED_MODULE_1__.providers.JsonRpcProvider({\n      url: network.nodeUrl\n    });\n    return provider.query({\n      request_type: \"call_function\",\n      account_id: _constants__WEBPACK_IMPORTED_MODULE_3__.CONTRACT_ID,\n      method_name: \"getMessages\",\n      args_base64: \"\",\n      finality: \"optimistic\"\n    }).then(res => JSON.parse(Buffer.from(res.result).toString()));\n  }, [selector]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // TODO: don't just fetch once; subscribe!\n    getMessages().then(setMessages);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!accountId) {\n      return setAccount(null);\n    }\n\n    setLoading(true);\n    getAccount().then(nextAccount => {\n      setAccount(nextAccount);\n      setLoading(false);\n    });\n  }, [accountId, getAccount]);\n\n  const handleSignIn = () => {\n    modal.show();\n  };\n\n  const handleSignOut = async () => {\n    const wallet = await selector.wallet();\n    wallet.signOut().catch(err => {\n      console.log(\"Failed to sign out\");\n      console.error(err);\n    });\n  };\n\n  const handleSwitchWallet = () => {\n    modal.show();\n  };\n\n  const handleSwitchAccount = () => {\n    const currentIndex = accounts.findIndex(x => x.accountId === accountId);\n    const nextIndex = currentIndex < accounts.length - 1 ? currentIndex + 1 : 0;\n    const nextAccountId = accounts[nextIndex].accountId;\n    selector.setActiveAccount(nextAccountId);\n    alert(\"Switched account to \" + nextAccountId);\n  };\n\n  const addMessages = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (message, donation, multiple) => {\n    const {\n      contract\n    } = selector.store.getState();\n    const wallet = await selector.wallet();\n\n    if (!multiple) {\n      return wallet.signAndSendTransaction({\n        signerId: accountId,\n        actions: [{\n          type: \"FunctionCall\",\n          params: {\n            methodName: \"addMessage\",\n            args: {\n              text: message\n            },\n            gas: BOATLOAD_OF_GAS,\n            deposit: near_api_js__WEBPACK_IMPORTED_MODULE_1__.utils.format.parseNearAmount(donation)\n          }\n        }]\n      }).catch(err => {\n        alert(\"Failed to add message\");\n        console.log(\"Failed to add message\");\n        throw err;\n      });\n    }\n\n    const transactions = [];\n\n    for (let i = 0; i < 2; i += 1) {\n      transactions.push({\n        signerId: accountId,\n        receiverId: contract.contractId,\n        actions: [{\n          type: \"FunctionCall\",\n          params: {\n            methodName: \"addMessage\",\n            args: {\n              text: `${message} (${i + 1}/2)`\n            },\n            gas: BOATLOAD_OF_GAS,\n            deposit: near_api_js__WEBPACK_IMPORTED_MODULE_1__.utils.format.parseNearAmount(donation)\n          }\n        }]\n      });\n    }\n\n    return wallet.signAndSendTransactions({\n      transactions\n    }).catch(err => {\n      alert(\"Failed to add messages exception \" + err);\n      console.log(\"Failed to add messages\");\n      throw err;\n    });\n  }, [selector, accountId]);\n\n  const handleVerifyOwner = async () => {\n    const wallet = await selector.wallet();\n\n    try {\n      const owner = await wallet.verifyOwner({\n        message: \"test message for verification\"\n      });\n\n      if (owner) {\n        alert(`Signature for verification: ${JSON.stringify(owner)}`);\n      }\n    } catch (err) {\n      const message = err instanceof Error ? err.message : \"Something went wrong\";\n      alert(message);\n    }\n  };\n\n  const handleSubmit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async e => {\n    e.preventDefault(); // TODO: Fix the typing so that target.elements exists..\n    // @ts-ignore.\n\n    const {\n      fieldset,\n      message,\n      donation,\n      multiple\n    } = e.target.elements;\n    fieldset.disabled = true;\n    return addMessages(message.value, donation.value || \"0\", multiple.checked).then(() => {\n      return getMessages().then(nextMessages => {\n        setMessages(nextMessages);\n        message.value = \"\";\n        donation.value = SUGGESTED_DONATION;\n        fieldset.disabled = false;\n        message.focus();\n      }).catch(err => {\n        alert(\"Failed to refresh messages\");\n        console.log(\"Failed to refresh messages\");\n        throw err;\n      });\n    }).catch(err => {\n      console.error(err);\n      fieldset.disabled = false;\n    });\n  }, [addMessages, getMessages]);\n\n  if (loading) {\n    return null;\n  }\n\n  if (!account) {\n    return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(\"div\", {\n        children: /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(\"button\", {\n          onClick: handleSignIn,\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, undefined)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(_SignIn__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, undefined)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, undefined);\n  }\n\n  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(\"div\", {\n      children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(\"button\", {\n        onClick: handleSignOut,\n        children: \"Log out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(\"button\", {\n        onClick: handleSwitchWallet,\n        children: \"Switch Wallet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(\"button\", {\n        onClick: handleVerifyOwner,\n        children: \"Verify Owner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, undefined), accounts.length > 1 && /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(\"button\", {\n        onClick: handleSwitchAccount,\n        children: \"Switch Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, undefined)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(_Form__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n      account: account,\n      onSubmit: e => handleSubmit(e)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxDEV)(_Messages__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n      messages: messages\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, undefined)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, undefined);\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Content);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFBO01BQUE7TUFBQTtNQUFBO0lBQUEsYUFERjtFQVFEOztFQUVELG9CQUNFLDhEQUFDLDJDQUFEO0lBQUEsd0JBQ0U7TUFBQSx3QkFDRTtRQUFRLE9BQU8sRUFBRUUsYUFBakI7UUFBQTtNQUFBO1FBQUE7UUFBQTtRQUFBO01BQUEsYUFERixlQUVFO1FBQVEsT0FBTyxFQUFFUSxrQkFBakI7UUFBQTtNQUFBO1FBQUE7UUFBQTtRQUFBO01BQUEsYUFGRixlQUdFO1FBQVEsT0FBTyxFQUFFaUMsaUJBQWpCO1FBQUE7TUFBQTtRQUFBO1FBQUE7UUFBQTtNQUFBLGFBSEYsRUFJRzNFLFFBQVEsQ0FBQ2dELE1BQVQsR0FBa0IsQ0FBbEIsaUJBQ0M7UUFBUSxPQUFPLEVBQUVMLG1CQUFqQjtRQUFBO01BQUE7UUFBQTtRQUFBO1FBQUE7TUFBQSxhQUxKO0lBQUE7TUFBQTtNQUFBO01BQUE7SUFBQSxhQURGLGVBU0UsOERBQUMsNkNBQUQ7TUFDRSxPQUFPLEVBQUV6QyxPQURYO01BRUUsUUFBUSxFQUFHK0UsQ0FBRCxJQUFPRCxZQUFZLENBQUNDLENBQUQ7SUFGL0I7TUFBQTtNQUFBO01BQUE7SUFBQSxhQVRGLGVBYUUsOERBQUMsaURBQUQ7TUFBVSxRQUFRLEVBQUU3RTtJQUFwQjtNQUFBO01BQUE7TUFBQTtJQUFBLGFBYkY7RUFBQTtJQUFBO0lBQUE7SUFBQTtFQUFBLGFBREY7QUFpQkQsQ0F6T0Q7O0FBMk9BLGlFQUFlUCxPQUFmLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL0NvbnRlbnQudHN4PzU3MDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IEZyYWdtZW50LCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcHJvdmlkZXJzLCB1dGlscyB9IGZyb20gXCJuZWFyLWFwaS1qc1wiO1xuaW1wb3J0IHR5cGUge1xuICBBY2NvdW50VmlldyxcbiAgQ29kZVJlc3VsdCxcbn0gZnJvbSBcIm5lYXItYXBpLWpzL2xpYi9wcm92aWRlcnMvcHJvdmlkZXJcIjtcbmltcG9ydCB7IFRyYW5zYWN0aW9uIH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9jb3JlXCI7XG5cbmltcG9ydCB0eXBlIHsgQWNjb3VudCwgTWVzc2FnZSB9IGZyb20gXCIuLi9pbnRlcmZhY2VzXCI7XG5pbXBvcnQgeyB1c2VXYWxsZXRTZWxlY3RvciB9IGZyb20gXCIuLi9jb250ZXh0cy9XYWxsZXRTZWxlY3RvckNvbnRleHRcIjtcbmltcG9ydCB7IENPTlRSQUNUX0lEIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IFNpZ25JbiBmcm9tIFwiLi9TaWduSW5cIjtcbmltcG9ydCBGb3JtIGZyb20gXCIuL0Zvcm1cIjtcbmltcG9ydCBNZXNzYWdlcyBmcm9tIFwiLi9NZXNzYWdlc1wiO1xuXG5jb25zdCBTVUdHRVNURURfRE9OQVRJT04gPSBcIjBcIjtcbmNvbnN0IEJPQVRMT0FEX09GX0dBUyA9IHV0aWxzLmZvcm1hdC5wYXJzZU5lYXJBbW91bnQoXCIwLjAwMDAwMDAwMDAzXCIpITtcblxuY29uc3QgQ29udGVudDogUmVhY3QuRkMgPSAoKSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0b3IsIG1vZGFsLCBhY2NvdW50cywgYWNjb3VudElkIH0gPSB1c2VXYWxsZXRTZWxlY3RvcigpO1xuICBjb25zdCBbYWNjb3VudCwgc2V0QWNjb3VudF0gPSB1c2VTdGF0ZTxBY2NvdW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8QXJyYXk8TWVzc2FnZT4+KFtdKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIGNvbnN0IGdldEFjY291bnQgPSB1c2VDYWxsYmFjayhhc3luYyAoKTogUHJvbWlzZTxBY2NvdW50IHwgbnVsbD4gPT4ge1xuICAgIGlmICghYWNjb3VudElkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB7IG5ldHdvcmsgfSA9IHNlbGVjdG9yLm9wdGlvbnM7XG4gICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgcHJvdmlkZXJzLkpzb25ScGNQcm92aWRlcih7IHVybDogbmV0d29yay5ub2RlVXJsIH0pO1xuXG4gICAgcmV0dXJuIHByb3ZpZGVyXG4gICAgICAucXVlcnk8QWNjb3VudFZpZXc+KHtcbiAgICAgICAgcmVxdWVzdF90eXBlOiBcInZpZXdfYWNjb3VudFwiLFxuICAgICAgICBmaW5hbGl0eTogXCJmaW5hbFwiLFxuICAgICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKGRhdGEpID0+ICh7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICAgIH0pKTtcbiAgfSwgW2FjY291bnRJZCwgc2VsZWN0b3Iub3B0aW9uc10pO1xuXG4gIGNvbnN0IGdldE1lc3NhZ2VzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHsgbmV0d29yayB9ID0gc2VsZWN0b3Iub3B0aW9ucztcbiAgICBjb25zdCBwcm92aWRlciA9IG5ldyBwcm92aWRlcnMuSnNvblJwY1Byb3ZpZGVyKHsgdXJsOiBuZXR3b3JrLm5vZGVVcmwgfSk7XG5cbiAgICByZXR1cm4gcHJvdmlkZXJcbiAgICAgIC5xdWVyeTxDb2RlUmVzdWx0Pih7XG4gICAgICAgIHJlcXVlc3RfdHlwZTogXCJjYWxsX2Z1bmN0aW9uXCIsXG4gICAgICAgIGFjY291bnRfaWQ6IENPTlRSQUNUX0lELFxuICAgICAgICBtZXRob2RfbmFtZTogXCJnZXRNZXNzYWdlc1wiLFxuICAgICAgICBhcmdzX2Jhc2U2NDogXCJcIixcbiAgICAgICAgZmluYWxpdHk6IFwib3B0aW1pc3RpY1wiLFxuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IEpTT04ucGFyc2UoQnVmZmVyLmZyb20ocmVzLnJlc3VsdCkudG9TdHJpbmcoKSkpO1xuICB9LCBbc2VsZWN0b3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFRPRE86IGRvbid0IGp1c3QgZmV0Y2ggb25jZTsgc3Vic2NyaWJlIVxuICAgIGdldE1lc3NhZ2VzKCkudGhlbihzZXRNZXNzYWdlcyk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYWNjb3VudElkKSB7XG4gICAgICByZXR1cm4gc2V0QWNjb3VudChudWxsKTtcbiAgICB9XG5cbiAgICBzZXRMb2FkaW5nKHRydWUpO1xuXG4gICAgZ2V0QWNjb3VudCgpLnRoZW4oKG5leHRBY2NvdW50KSA9PiB7XG4gICAgICBzZXRBY2NvdW50KG5leHRBY2NvdW50KTtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xuICB9LCBbYWNjb3VudElkLCBnZXRBY2NvdW50XSk7XG5cbiAgY29uc3QgaGFuZGxlU2lnbkluID0gKCkgPT4ge1xuICAgIG1vZGFsLnNob3coKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTaWduT3V0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHdhbGxldCA9IGF3YWl0IHNlbGVjdG9yLndhbGxldCgpO1xuXG4gICAgd2FsbGV0LnNpZ25PdXQoKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBzaWduIG91dFwiKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTd2l0Y2hXYWxsZXQgPSAoKSA9PiB7XG4gICAgbW9kYWwuc2hvdygpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVN3aXRjaEFjY291bnQgPSAoKSA9PiB7XG4gICAgY29uc3QgY3VycmVudEluZGV4ID0gYWNjb3VudHMuZmluZEluZGV4KCh4KSA9PiB4LmFjY291bnRJZCA9PT0gYWNjb3VudElkKTtcbiAgICBjb25zdCBuZXh0SW5kZXggPSBjdXJyZW50SW5kZXggPCBhY2NvdW50cy5sZW5ndGggLSAxID8gY3VycmVudEluZGV4ICsgMSA6IDA7XG5cbiAgICBjb25zdCBuZXh0QWNjb3VudElkID0gYWNjb3VudHNbbmV4dEluZGV4XS5hY2NvdW50SWQ7XG5cbiAgICBzZWxlY3Rvci5zZXRBY3RpdmVBY2NvdW50KG5leHRBY2NvdW50SWQpO1xuXG4gICAgYWxlcnQoXCJTd2l0Y2hlZCBhY2NvdW50IHRvIFwiICsgbmV4dEFjY291bnRJZCk7XG4gIH07XG5cbiAgY29uc3QgYWRkTWVzc2FnZXMgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAobWVzc2FnZTogc3RyaW5nLCBkb25hdGlvbjogc3RyaW5nLCBtdWx0aXBsZTogYm9vbGVhbikgPT4ge1xuICAgICAgY29uc3QgeyBjb250cmFjdCB9ID0gc2VsZWN0b3Iuc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgIGNvbnN0IHdhbGxldCA9IGF3YWl0IHNlbGVjdG9yLndhbGxldCgpO1xuXG4gICAgICBpZiAoIW11bHRpcGxlKSB7XG4gICAgICAgIHJldHVybiB3YWxsZXRcbiAgICAgICAgICAuc2lnbkFuZFNlbmRUcmFuc2FjdGlvbih7XG4gICAgICAgICAgICBzaWduZXJJZDogYWNjb3VudElkISxcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiRnVuY3Rpb25DYWxsXCIsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBcImFkZE1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICAgIGFyZ3M6IHsgdGV4dDogbWVzc2FnZSB9LFxuICAgICAgICAgICAgICAgICAgZ2FzOiBCT0FUTE9BRF9PRl9HQVMsXG4gICAgICAgICAgICAgICAgICBkZXBvc2l0OiB1dGlscy5mb3JtYXQucGFyc2VOZWFyQW1vdW50KGRvbmF0aW9uKSEsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgYWxlcnQoXCJGYWlsZWQgdG8gYWRkIG1lc3NhZ2VcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBhZGQgbWVzc2FnZVwiKTtcblxuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbnM6IEFycmF5PFRyYW5zYWN0aW9uPiA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkgKz0gMSkge1xuICAgICAgICB0cmFuc2FjdGlvbnMucHVzaCh7XG4gICAgICAgICAgc2lnbmVySWQ6IGFjY291bnRJZCEsXG4gICAgICAgICAgcmVjZWl2ZXJJZDogY29udHJhY3QhLmNvbnRyYWN0SWQsXG4gICAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcIkZ1bmN0aW9uQ2FsbFwiLFxuICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBcImFkZE1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBgJHttZXNzYWdlfSAoJHtpICsgMX0vMilgLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2FzOiBCT0FUTE9BRF9PRl9HQVMsXG4gICAgICAgICAgICAgICAgZGVwb3NpdDogdXRpbHMuZm9ybWF0LnBhcnNlTmVhckFtb3VudChkb25hdGlvbikhLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHdhbGxldC5zaWduQW5kU2VuZFRyYW5zYWN0aW9ucyh7IHRyYW5zYWN0aW9ucyB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGFsZXJ0KFwiRmFpbGVkIHRvIGFkZCBtZXNzYWdlcyBleGNlcHRpb24gXCIgKyBlcnIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBhZGQgbWVzc2FnZXNcIik7XG5cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbc2VsZWN0b3IsIGFjY291bnRJZF1cbiAgKTtcblxuICBjb25zdCBoYW5kbGVWZXJpZnlPd25lciA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB3YWxsZXQgPSBhd2FpdCBzZWxlY3Rvci53YWxsZXQoKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3duZXIgPSBhd2FpdCB3YWxsZXQudmVyaWZ5T3duZXIoe1xuICAgICAgICBtZXNzYWdlOiBcInRlc3QgbWVzc2FnZSBmb3IgdmVyaWZpY2F0aW9uXCIsXG4gICAgICB9KTtcblxuICAgICAgaWYgKG93bmVyKSB7XG4gICAgICAgIGFsZXJ0KGBTaWduYXR1cmUgZm9yIHZlcmlmaWNhdGlvbjogJHtKU09OLnN0cmluZ2lmeShvd25lcil9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIjtcbiAgICAgIGFsZXJ0KG1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAoZTogU3VibWl0RXZlbnQpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgLy8gVE9ETzogRml4IHRoZSB0eXBpbmcgc28gdGhhdCB0YXJnZXQuZWxlbWVudHMgZXhpc3RzLi5cbiAgICAgIC8vIEB0cy1pZ25vcmUuXG4gICAgICBjb25zdCB7IGZpZWxkc2V0LCBtZXNzYWdlLCBkb25hdGlvbiwgbXVsdGlwbGUgfSA9IGUudGFyZ2V0LmVsZW1lbnRzO1xuXG4gICAgICBmaWVsZHNldC5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgIHJldHVybiBhZGRNZXNzYWdlcyhtZXNzYWdlLnZhbHVlLCBkb25hdGlvbi52YWx1ZSB8fCBcIjBcIiwgbXVsdGlwbGUuY2hlY2tlZClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBnZXRNZXNzYWdlcygpXG4gICAgICAgICAgICAudGhlbigobmV4dE1lc3NhZ2VzKSA9PiB7XG4gICAgICAgICAgICAgIHNldE1lc3NhZ2VzKG5leHRNZXNzYWdlcyk7XG4gICAgICAgICAgICAgIG1lc3NhZ2UudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICBkb25hdGlvbi52YWx1ZSA9IFNVR0dFU1RFRF9ET05BVElPTjtcbiAgICAgICAgICAgICAgZmllbGRzZXQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgbWVzc2FnZS5mb2N1cygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIGFsZXJ0KFwiRmFpbGVkIHRvIHJlZnJlc2ggbWVzc2FnZXNcIik7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIHJlZnJlc2ggbWVzc2FnZXNcIik7XG5cbiAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuXG4gICAgICAgICAgZmllbGRzZXQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBbYWRkTWVzc2FnZXMsIGdldE1lc3NhZ2VzXVxuICApO1xuXG4gIGlmIChsb2FkaW5nKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoIWFjY291bnQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEZyYWdtZW50PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlU2lnbklufT5Mb2cgaW48L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxTaWduSW4gLz5cbiAgICAgIDwvRnJhZ21lbnQ+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEZyYWdtZW50PlxuICAgICAgPGRpdj5cbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVTaWduT3V0fT5Mb2cgb3V0PC9idXR0b24+XG4gICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlU3dpdGNoV2FsbGV0fT5Td2l0Y2ggV2FsbGV0PC9idXR0b24+XG4gICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlVmVyaWZ5T3duZXJ9PlZlcmlmeSBPd25lcjwvYnV0dG9uPlxuICAgICAgICB7YWNjb3VudHMubGVuZ3RoID4gMSAmJiAoXG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVTd2l0Y2hBY2NvdW50fT5Td2l0Y2ggQWNjb3VudDwvYnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8Rm9ybVxuICAgICAgICBhY2NvdW50PXthY2NvdW50fVxuICAgICAgICBvblN1Ym1pdD17KGUpID0+IGhhbmRsZVN1Ym1pdChlIGFzIHVua25vd24gYXMgU3VibWl0RXZlbnQpfVxuICAgICAgLz5cbiAgICAgIDxNZXNzYWdlcyBtZXNzYWdlcz17bWVzc2FnZXN9IC8+XG4gICAgPC9GcmFnbWVudD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENvbnRlbnQ7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJGcmFnbWVudCIsInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJwcm92aWRlcnMiLCJ1dGlscyIsInVzZVdhbGxldFNlbGVjdG9yIiwiQ09OVFJBQ1RfSUQiLCJTaWduSW4iLCJGb3JtIiwiTWVzc2FnZXMiLCJTVUdHRVNURURfRE9OQVRJT04iLCJCT0FUTE9BRF9PRl9HQVMiLCJmb3JtYXQiLCJwYXJzZU5lYXJBbW91bnQiLCJDb250ZW50Iiwic2VsZWN0b3IiLCJtb2RhbCIsImFjY291bnRzIiwiYWNjb3VudElkIiwiYWNjb3VudCIsInNldEFjY291bnQiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwibG9hZGluZyIsInNldExvYWRpbmciLCJnZXRBY2NvdW50IiwibmV0d29yayIsIm9wdGlvbnMiLCJwcm92aWRlciIsIkpzb25ScGNQcm92aWRlciIsInVybCIsIm5vZGVVcmwiLCJxdWVyeSIsInJlcXVlc3RfdHlwZSIsImZpbmFsaXR5IiwiYWNjb3VudF9pZCIsInRoZW4iLCJkYXRhIiwiZ2V0TWVzc2FnZXMiLCJtZXRob2RfbmFtZSIsImFyZ3NfYmFzZTY0IiwicmVzIiwiSlNPTiIsInBhcnNlIiwiQnVmZmVyIiwiZnJvbSIsInJlc3VsdCIsInRvU3RyaW5nIiwibmV4dEFjY291bnQiLCJoYW5kbGVTaWduSW4iLCJzaG93IiwiaGFuZGxlU2lnbk91dCIsIndhbGxldCIsInNpZ25PdXQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImhhbmRsZVN3aXRjaFdhbGxldCIsImhhbmRsZVN3aXRjaEFjY291bnQiLCJjdXJyZW50SW5kZXgiLCJmaW5kSW5kZXgiLCJ4IiwibmV4dEluZGV4IiwibGVuZ3RoIiwibmV4dEFjY291bnRJZCIsInNldEFjdGl2ZUFjY291bnQiLCJhbGVydCIsImFkZE1lc3NhZ2VzIiwibWVzc2FnZSIsImRvbmF0aW9uIiwibXVsdGlwbGUiLCJjb250cmFjdCIsInN0b3JlIiwiZ2V0U3RhdGUiLCJzaWduQW5kU2VuZFRyYW5zYWN0aW9uIiwic2lnbmVySWQiLCJhY3Rpb25zIiwidHlwZSIsInBhcmFtcyIsIm1ldGhvZE5hbWUiLCJhcmdzIiwidGV4dCIsImdhcyIsImRlcG9zaXQiLCJ0cmFuc2FjdGlvbnMiLCJpIiwicHVzaCIsInJlY2VpdmVySWQiLCJjb250cmFjdElkIiwic2lnbkFuZFNlbmRUcmFuc2FjdGlvbnMiLCJoYW5kbGVWZXJpZnlPd25lciIsIm93bmVyIiwidmVyaWZ5T3duZXIiLCJzdHJpbmdpZnkiLCJFcnJvciIsImhhbmRsZVN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImZpZWxkc2V0IiwidGFyZ2V0IiwiZWxlbWVudHMiLCJkaXNhYmxlZCIsInZhbHVlIiwiY2hlY2tlZCIsIm5leHRNZXNzYWdlcyIsImZvY3VzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/Content.tsx\n");

/***/ }),

/***/ "./components/Form.tsx":
/*!*****************************!*\
  !*** ./components/Form.tsx ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var big_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! big.js */ \"big.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([big_js__WEBPACK_IMPORTED_MODULE_1__]);\nbig_js__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\nvar _jsxFileName = \"/Users/campv/Documents/Projects/wallet-selector/examples/react/components/Form.tsx\";\n\n\n\n\nconst Form = ({\n  account,\n  onSubmit\n}) => {\n  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"form\", {\n    onSubmit: onSubmit,\n    children: /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"fieldset\", {\n      id: \"fieldset\",\n      children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"p\", {\n        children: [\"Sign the guest book, \", account.account_id, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 9\n      }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"p\", {\n        className: \"highlight\",\n        children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"label\", {\n          htmlFor: \"message\",\n          children: \"Message:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 11\n        }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"input\", {\n          autoComplete: \"off\",\n          autoFocus: true,\n          id: \"message\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 11\n        }, undefined)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 9\n      }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"p\", {\n        children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"label\", {\n          htmlFor: \"donation\",\n          children: \"Donation (optional):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"input\", {\n          autoComplete: \"off\",\n          defaultValue: \"0\",\n          id: \"donation\",\n          max: (0,big_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(account.amount).div(10 ** 24).toString(),\n          min: \"0\",\n          step: \"0.01\",\n          type: \"number\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 11\n        }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"span\", {\n          title: \"NEAR Tokens\",\n          children: \"\\u24C3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, undefined)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 9\n      }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"p\", {\n        children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"label\", {\n          htmlFor: \"multiple\",\n          children: \"Multiple Transactions:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 11\n        }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"input\", {\n          id: \"multiple\",\n          type: \"checkbox\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, undefined)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxDEV)(\"button\", {\n        type: \"submit\",\n        children: \"Sign\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, undefined)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, undefined)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, undefined);\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Form);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0Zvcm0udHN4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFTQSxNQUFNRSxJQUF5QixHQUFHLENBQUM7RUFBRUMsT0FBRjtFQUFXQztBQUFYLENBQUQsS0FBMkI7RUFDM0Qsb0JBQ0U7SUFBTSxRQUFRLEVBQUVBLFFBQWhCO0lBQUEsdUJBQ0U7TUFBVSxFQUFFLEVBQUMsVUFBYjtNQUFBLHdCQUNFO1FBQUEsb0NBQXlCRCxPQUFPLENBQUNFLFVBQWpDO01BQUE7UUFBQTtRQUFBO1FBQUE7TUFBQSxhQURGLGVBRUU7UUFBRyxTQUFTLEVBQUMsV0FBYjtRQUFBLHdCQUNFO1VBQU8sT0FBTyxFQUFDLFNBQWY7VUFBQTtRQUFBO1VBQUE7VUFBQTtVQUFBO1FBQUEsYUFERixlQUVFO1VBQU8sWUFBWSxFQUFDLEtBQXBCO1VBQTBCLFNBQVMsTUFBbkM7VUFBb0MsRUFBRSxFQUFDLFNBQXZDO1VBQWlELFFBQVE7UUFBekQ7VUFBQTtVQUFBO1VBQUE7UUFBQSxhQUZGO01BQUE7UUFBQTtRQUFBO1FBQUE7TUFBQSxhQUZGLGVBTUU7UUFBQSx3QkFDRTtVQUFPLE9BQU8sRUFBQyxVQUFmO1VBQUE7UUFBQTtVQUFBO1VBQUE7VUFBQTtRQUFBLGFBREYsZUFFRTtVQUNFLFlBQVksRUFBQyxLQURmO1VBRUUsWUFBWSxFQUFFLEdBRmhCO1VBR0UsRUFBRSxFQUFDLFVBSEw7VUFJRSxHQUFHLEVBQUVKLGtEQUFHLENBQUNFLE9BQU8sQ0FBQ0csTUFBVCxDQUFILENBQ0ZDLEdBREUsQ0FDRSxNQUFNLEVBRFIsRUFFRkMsUUFGRSxFQUpQO1VBT0UsR0FBRyxFQUFDLEdBUE47VUFRRSxJQUFJLEVBQUMsTUFSUDtVQVNFLElBQUksRUFBQztRQVRQO1VBQUE7VUFBQTtVQUFBO1FBQUEsYUFGRixlQWFFO1VBQU0sS0FBSyxFQUFDLGFBQVo7VUFBQTtRQUFBO1VBQUE7VUFBQTtVQUFBO1FBQUEsYUFiRjtNQUFBO1FBQUE7UUFBQTtRQUFBO01BQUEsYUFORixlQXFCRTtRQUFBLHdCQUNFO1VBQU8sT0FBTyxFQUFDLFVBQWY7VUFBQTtRQUFBO1VBQUE7VUFBQTtVQUFBO1FBQUEsYUFERixlQUVFO1VBQU8sRUFBRSxFQUFDLFVBQVY7VUFBcUIsSUFBSSxFQUFDO1FBQTFCO1VBQUE7VUFBQTtVQUFBO1FBQUEsYUFGRjtNQUFBO1FBQUE7UUFBQTtRQUFBO01BQUEsYUFyQkYsZUF5QkU7UUFBUSxJQUFJLEVBQUMsUUFBYjtRQUFBO01BQUE7UUFBQTtRQUFBO1FBQUE7TUFBQSxhQXpCRjtJQUFBO01BQUE7TUFBQTtNQUFBO0lBQUE7RUFERjtJQUFBO0lBQUE7SUFBQTtFQUFBLGFBREY7QUErQkQsQ0FoQ0Q7O0FBa0NBLGlFQUFlTixJQUFmLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL0Zvcm0udHN4P2VlZDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IEZvcm1FdmVudEhhbmRsZXIgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBCaWcgZnJvbSBcImJpZy5qc1wiO1xuXG5pbXBvcnQgdHlwZSB7IEFjY291bnQgfSBmcm9tIFwiLi4vaW50ZXJmYWNlc1wiO1xuXG5pbnRlcmZhY2UgRm9ybVByb3BzIHtcbiAgYWNjb3VudDogQWNjb3VudDtcbiAgb25TdWJtaXQ6IEZvcm1FdmVudEhhbmRsZXI7XG59XG5cbmNvbnN0IEZvcm06IFJlYWN0LkZDPEZvcm1Qcm9wcz4gPSAoeyBhY2NvdW50LCBvblN1Ym1pdCB9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGZvcm0gb25TdWJtaXQ9e29uU3VibWl0fT5cbiAgICAgIDxmaWVsZHNldCBpZD1cImZpZWxkc2V0XCI+XG4gICAgICAgIDxwPlNpZ24gdGhlIGd1ZXN0IGJvb2ssIHthY2NvdW50LmFjY291bnRfaWR9ITwvcD5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwiaGlnaGxpZ2h0XCI+XG4gICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJtZXNzYWdlXCI+TWVzc2FnZTo8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dCBhdXRvQ29tcGxldGU9XCJvZmZcIiBhdXRvRm9jdXMgaWQ9XCJtZXNzYWdlXCIgcmVxdWlyZWQgLz5cbiAgICAgICAgPC9wPlxuICAgICAgICA8cD5cbiAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImRvbmF0aW9uXCI+RG9uYXRpb24gKG9wdGlvbmFsKTo8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XCIwXCJ9XG4gICAgICAgICAgICBpZD1cImRvbmF0aW9uXCJcbiAgICAgICAgICAgIG1heD17QmlnKGFjY291bnQuYW1vdW50KVxuICAgICAgICAgICAgICAuZGl2KDEwICoqIDI0KVxuICAgICAgICAgICAgICAudG9TdHJpbmcoKX1cbiAgICAgICAgICAgIG1pbj1cIjBcIlxuICAgICAgICAgICAgc3RlcD1cIjAuMDFcIlxuICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgLz5cbiAgICAgICAgICA8c3BhbiB0aXRsZT1cIk5FQVIgVG9rZW5zXCI+4pODPC9zcGFuPlxuICAgICAgICA8L3A+XG4gICAgICAgIDxwPlxuICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwibXVsdGlwbGVcIj5NdWx0aXBsZSBUcmFuc2FjdGlvbnM6PC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXQgaWQ9XCJtdWx0aXBsZVwiIHR5cGU9XCJjaGVja2JveFwiIC8+XG4gICAgICAgIDwvcD5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+U2lnbjwvYnV0dG9uPlxuICAgICAgPC9maWVsZHNldD5cbiAgICA8L2Zvcm0+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBGb3JtO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiQmlnIiwiRm9ybSIsImFjY291bnQiLCJvblN1Ym1pdCIsImFjY291bnRfaWQiLCJhbW91bnQiLCJkaXYiLCJ0b1N0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/Form.tsx\n");

/***/ }),

/***/ "./components/Messages.tsx":
/*!*********************************!*\
  !*** ./components/Messages.tsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__);\nvar _jsxFileName = \"/Users/campv/Documents/Projects/wallet-selector/examples/react/components/Messages.tsx\";\n\n\n\n\nconst Messages = ({\n  messages\n}) => {\n  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"h2\", {\n      children: \"Messages\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, undefined), messages.map((message, i) =>\n    /*#__PURE__*/\n    // TODO: format as cards, add timestamp\n    (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"p\", {\n      className: message.premium ? \"is-premium\" : \"\",\n      children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"strong\", {\n        children: message.sender\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 11\n      }, undefined), \":\", /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 45\n      }, undefined), message.text]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 9\n    }, undefined))]\n  }, void 0, true);\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Messages);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL01lc3NhZ2VzLnRzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7OztBQU9BLE1BQU1DLFFBQWlDLEdBQUcsQ0FBQztFQUFFQztBQUFGLENBQUQsS0FBa0I7RUFDMUQsb0JBQ0U7SUFBQSx3QkFDRTtNQUFBO0lBQUE7TUFBQTtNQUFBO01BQUE7SUFBQSxhQURGLEVBRUdBLFFBQVEsQ0FBQ0MsR0FBVCxDQUFhLENBQUNDLE9BQUQsRUFBVUMsQ0FBVjtJQUFBO0lBQ1o7SUFDQTtNQUFXLFNBQVMsRUFBRUQsT0FBTyxDQUFDRSxPQUFSLEdBQWtCLFlBQWxCLEdBQWlDLEVBQXZEO01BQUEsd0JBQ0U7UUFBQSxVQUFTRixPQUFPLENBQUNHO01BQWpCO1FBQUE7UUFBQTtRQUFBO01BQUEsYUFERixvQkFDb0M7UUFBQTtRQUFBO1FBQUE7TUFBQSxhQURwQyxFQUVHSCxPQUFPLENBQUNJLElBRlg7SUFBQSxHQUFRSCxDQUFSO01BQUE7TUFBQTtNQUFBO0lBQUEsYUFGRCxDQUZIO0VBQUEsZ0JBREY7QUFZRCxDQWJEOztBQWVBLGlFQUFlSixRQUFmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9NZXNzYWdlcy50c3g/NGZjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdHlwZSB7IE1lc3NhZ2UgfSBmcm9tIFwiLi4vaW50ZXJmYWNlc1wiO1xuXG5pbnRlcmZhY2UgTWVzc2FnZXNQcm9wcyB7XG4gIG1lc3NhZ2VzOiBBcnJheTxNZXNzYWdlPjtcbn1cblxuY29uc3QgTWVzc2FnZXM6IFJlYWN0LkZDPE1lc3NhZ2VzUHJvcHM+ID0gKHsgbWVzc2FnZXMgfSkgPT4ge1xuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8aDI+TWVzc2FnZXM8L2gyPlxuICAgICAge21lc3NhZ2VzLm1hcCgobWVzc2FnZSwgaSkgPT4gKFxuICAgICAgICAvLyBUT0RPOiBmb3JtYXQgYXMgY2FyZHMsIGFkZCB0aW1lc3RhbXBcbiAgICAgICAgPHAga2V5PXtpfSBjbGFzc05hbWU9e21lc3NhZ2UucHJlbWl1bSA/IFwiaXMtcHJlbWl1bVwiIDogXCJcIn0+XG4gICAgICAgICAgPHN0cm9uZz57bWVzc2FnZS5zZW5kZXJ9PC9zdHJvbmc+OjxiciAvPlxuICAgICAgICAgIHttZXNzYWdlLnRleHR9XG4gICAgICAgIDwvcD5cbiAgICAgICkpfVxuICAgIDwvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTWVzc2FnZXM7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJNZXNzYWdlcyIsIm1lc3NhZ2VzIiwibWFwIiwibWVzc2FnZSIsImkiLCJwcmVtaXVtIiwic2VuZGVyIiwidGV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/Messages.tsx\n");

/***/ }),

/***/ "./components/SignIn.tsx":
/*!*******************************!*\
  !*** ./components/SignIn.tsx ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__);\nvar _jsxFileName = \"/Users/campv/Documents/Projects/wallet-selector/examples/react/components/SignIn.tsx\";\n\n\n\nconst SignIn = () => {\n  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"p\", {\n      children: \"This app demonstrates a key element of NEAR\\u2019s UX: once an app has permission to make calls on behalf of a user (that is, once a user signs in), the app can make calls to the blockchain for them without prompting extra confirmation. So you\\u2019ll see that if you don\\u2019t include a donation, your message gets posted right to the guest book.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 6,\n      columnNumber: 7\n    }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"p\", {\n      children: \"But if you do add a donation, then NEAR will double-check that you\\u2019re ok with sending money to this app.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"p\", {\n      children: \"Go ahead and sign in to try it out!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, undefined)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 5,\n    columnNumber: 5\n  }, undefined);\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SignIn);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL1NpZ25Jbi50c3guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7OztBQUVBLE1BQU1FLE1BQWdCLEdBQUcsTUFBTTtFQUM3QixvQkFDRSw4REFBQywyQ0FBRDtJQUFBLHdCQUNFO01BQUE7SUFBQTtNQUFBO01BQUE7TUFBQTtJQUFBLGFBREYsZUFRRTtNQUFBO0lBQUE7TUFBQTtNQUFBO01BQUE7SUFBQSxhQVJGLGVBWUU7TUFBQTtJQUFBO01BQUE7TUFBQTtNQUFBO0lBQUEsYUFaRjtFQUFBO0lBQUE7SUFBQTtJQUFBO0VBQUEsYUFERjtBQWdCRCxDQWpCRDs7QUFtQkEsaUVBQWVBLE1BQWYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL1NpZ25Jbi50c3g/Mjc1YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgRnJhZ21lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuY29uc3QgU2lnbkluOiBSZWFjdC5GQyA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8RnJhZ21lbnQ+XG4gICAgICA8cD5cbiAgICAgICAgVGhpcyBhcHAgZGVtb25zdHJhdGVzIGEga2V5IGVsZW1lbnQgb2YgTkVBUuKAmXMgVVg6IG9uY2UgYW4gYXBwIGhhc1xuICAgICAgICBwZXJtaXNzaW9uIHRvIG1ha2UgY2FsbHMgb24gYmVoYWxmIG9mIGEgdXNlciAodGhhdCBpcywgb25jZSBhIHVzZXIgc2lnbnNcbiAgICAgICAgaW4pLCB0aGUgYXBwIGNhbiBtYWtlIGNhbGxzIHRvIHRoZSBibG9ja2NoYWluIGZvciB0aGVtIHdpdGhvdXQgcHJvbXB0aW5nXG4gICAgICAgIGV4dHJhIGNvbmZpcm1hdGlvbi4gU28geW914oCZbGwgc2VlIHRoYXQgaWYgeW91IGRvbuKAmXQgaW5jbHVkZSBhIGRvbmF0aW9uLFxuICAgICAgICB5b3VyIG1lc3NhZ2UgZ2V0cyBwb3N0ZWQgcmlnaHQgdG8gdGhlIGd1ZXN0IGJvb2suXG4gICAgICA8L3A+XG4gICAgICA8cD5cbiAgICAgICAgQnV0IGlmIHlvdSBkbyBhZGQgYSBkb25hdGlvbiwgdGhlbiBORUFSIHdpbGwgZG91YmxlLWNoZWNrIHRoYXQgeW914oCZcmUgb2tcbiAgICAgICAgd2l0aCBzZW5kaW5nIG1vbmV5IHRvIHRoaXMgYXBwLlxuICAgICAgPC9wPlxuICAgICAgPHA+R28gYWhlYWQgYW5kIHNpZ24gaW4gdG8gdHJ5IGl0IG91dCE8L3A+XG4gICAgPC9GcmFnbWVudD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNpZ25JbjtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIkZyYWdtZW50IiwiU2lnbkluIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/SignIn.tsx\n");

/***/ }),

/***/ "./constants.ts":
/*!**********************!*\
  !*** ./constants.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CONTRACT_ID\": () => (/* binding */ CONTRACT_ID)\n/* harmony export */ });\nconst CONTRACT_ID = \"guest-book.testnet\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb25zdGFudHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLFdBQVcsR0FBRyxvQkFBcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb25zdGFudHMudHM/ZGQ0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgQ09OVFJBQ1RfSUQgPSBcImd1ZXN0LWJvb2sudGVzdG5ldFwiO1xuIl0sIm5hbWVzIjpbIkNPTlRSQUNUX0lEIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./constants.ts\n");

/***/ }),

/***/ "./contexts/WalletSelectorContext.tsx":
/*!********************************************!*\
  !*** ./contexts/WalletSelectorContext.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"WalletSelectorContextProvider\": () => (/* binding */ WalletSelectorContextProvider),\n/* harmony export */   \"useWalletSelector\": () => (/* binding */ useWalletSelector)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ \"rxjs\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rxjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @near-wallet-selector/core */ \"../../packages/core/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_modal_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @near-wallet-selector/modal-ui */ \"../../dist/packages/modal-ui/index.js\");\n/* harmony import */ var _near_wallet_selector_default_wallets__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @near-wallet-selector/default-wallets */ \"../../packages/default-wallets/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_near_wallet__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @near-wallet-selector/near-wallet */ \"../../packages/near-wallet/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_sender__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @near-wallet-selector/sender */ \"../../packages/sender/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_math_wallet__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @near-wallet-selector/math-wallet */ \"../../packages/math-wallet/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_nightly__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @near-wallet-selector/nightly */ \"../../packages/nightly/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_meteor_wallet__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @near-wallet-selector/meteor-wallet */ \"../../packages/meteor-wallet/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_nightly_connect__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @near-wallet-selector/nightly-connect */ \"../../packages/nightly-connect/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_nearfi__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @near-wallet-selector/nearfi */ \"../../packages/nearfi/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_wallet_connect__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @near-wallet-selector/wallet-connect */ \"../../packages/wallet-connect/src/index.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../constants */ \"./constants.ts\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__);\nvar _jsxFileName = \"/Users/campv/Documents/Projects/wallet-selector/examples/react/contexts/WalletSelectorContext.tsx\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst WalletSelectorContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createContext(null);\nconst WalletSelectorContextProvider = ({\n  children\n}) => {\n  const {\n    0: selector,\n    1: setSelector\n  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const {\n    0: modal,\n    1: setModal\n  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const {\n    0: accounts,\n    1: setAccounts\n  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const init = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async () => {\n    const _selector = await (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_2__.setupWalletSelector)({\n      network: \"testnet\",\n      debug: true,\n      modules: [...(await (0,_near_wallet_selector_default_wallets__WEBPACK_IMPORTED_MODULE_4__.setupDefaultWallets)()), (0,_near_wallet_selector_near_wallet__WEBPACK_IMPORTED_MODULE_5__.setupNearWallet)(), (0,_near_wallet_selector_sender__WEBPACK_IMPORTED_MODULE_6__.setupSender)(), (0,_near_wallet_selector_nearfi__WEBPACK_IMPORTED_MODULE_11__.setupNearFi)(), (0,_near_wallet_selector_math_wallet__WEBPACK_IMPORTED_MODULE_7__.setupMathWallet)(), (0,_near_wallet_selector_nightly__WEBPACK_IMPORTED_MODULE_8__.setupNightly)(), (0,_near_wallet_selector_meteor_wallet__WEBPACK_IMPORTED_MODULE_9__.setupMeteorWallet)(), (0,_near_wallet_selector_wallet_connect__WEBPACK_IMPORTED_MODULE_12__.setupWalletConnect)({\n        projectId: \"test...\",\n        metadata: {\n          name: \"NEAR Wallet Selector\",\n          description: \"Example dApp used by NEAR Wallet Selector\",\n          url: \"https://github.com/near/wallet-selector\",\n          icons: [\"https://avatars.githubusercontent.com/u/37784886\"]\n        }\n      }), (0,_near_wallet_selector_nightly_connect__WEBPACK_IMPORTED_MODULE_10__.setupNightlyConnect)({\n        url: \"wss://ncproxy.nightly.app/app\",\n        appMetadata: {\n          additionalInfo: \"\",\n          application: \"NEAR Wallet Selector\",\n          description: \"Example dApp used by NEAR Wallet Selector\",\n          icon: \"https://near.org/wp-content/uploads/2020/09/cropped-favicon-192x192.png\"\n        }\n      })]\n    });\n\n    const _modal = (0,_near_wallet_selector_modal_ui__WEBPACK_IMPORTED_MODULE_3__.setupModal)(_selector, {\n      contractId: _constants__WEBPACK_IMPORTED_MODULE_13__.CONTRACT_ID\n    });\n\n    const state = _selector.store.getState();\n\n    setAccounts(state.accounts);\n    window.selector = _selector;\n    window.modal = _modal;\n    setSelector(_selector);\n    setModal(_modal);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    init().catch(err => {\n      console.error(err);\n      alert(\"Failed to initialise wallet selector\");\n    });\n  }, [init]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!selector) {\n      return;\n    }\n\n    const subscription = selector.store.observable.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.accounts), (0,rxjs__WEBPACK_IMPORTED_MODULE_1__.distinctUntilChanged)()).subscribe(nextAccounts => {\n      console.log(\"Accounts Update\", nextAccounts);\n      setAccounts(nextAccounts);\n    });\n    return () => subscription.unsubscribe();\n  }, [selector]);\n\n  if (!selector || !modal) {\n    return null;\n  }\n\n  const accountId = accounts.find(account => account.active)?.accountId || null;\n  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(WalletSelectorContext.Provider, {\n    value: {\n      selector,\n      modal,\n      accounts,\n      accountId\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, undefined);\n};\nfunction useWalletSelector() {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(WalletSelectorContext);\n\n  if (!context) {\n    throw new Error(\"useWalletSelector must be used within a WalletSelectorContextProvider\");\n  }\n\n  return context;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RXlDLEtBQUQsSUFBV0EsS0FBSyxDQUFDbkIsUUFBbEIsQ0FGYyxFQUdqQnJCLDBEQUFvQixFQUhILEVBS2xCb0QsU0FMa0IsQ0FLUEMsWUFBRCxJQUFrQjtNQUMzQlAsT0FBTyxDQUFDUSxHQUFSLENBQVksaUJBQVosRUFBK0JELFlBQS9CO01BRUEvQixXQUFXLENBQUMrQixZQUFELENBQVg7SUFDRCxDQVRrQixDQUFyQjtJQVdBLE9BQU8sTUFBTUosWUFBWSxDQUFDTSxXQUFiLEVBQWI7RUFDRCxDQWpCUSxFQWlCTixDQUFDdEMsUUFBRCxDQWpCTSxDQUFUOztFQW1CQSxJQUFJLENBQUNBLFFBQUQsSUFBYSxDQUFDRSxLQUFsQixFQUF5QjtJQUN2QixPQUFPLElBQVA7RUFDRDs7RUFFRCxNQUFNcUMsU0FBUyxHQUNibkMsUUFBUSxDQUFDb0MsSUFBVCxDQUFlQyxPQUFELElBQWFBLE9BQU8sQ0FBQ0MsTUFBbkMsR0FBNENILFNBQTVDLElBQXlELElBRDNEO0VBR0Esb0JBQ0UsK0RBQUMscUJBQUQsQ0FBdUIsUUFBdkI7SUFDRSxLQUFLLEVBQUU7TUFDTHZDLFFBREs7TUFFTEUsS0FGSztNQUdMRSxRQUhLO01BSUxtQztJQUpLLENBRFQ7SUFBQSxVQVFHeEM7RUFSSDtJQUFBO0lBQUE7SUFBQTtFQUFBLGFBREY7QUFZRCxDQTdGTTtBQStGQSxTQUFTNEMsaUJBQVQsR0FBNkI7RUFDbEMsTUFBTUMsT0FBTyxHQUFHakUsaURBQVUsQ0FBQ2lCLHFCQUFELENBQTFCOztFQUVBLElBQUksQ0FBQ2dELE9BQUwsRUFBYztJQUNaLE1BQU0sSUFBSUMsS0FBSixDQUNKLHVFQURJLENBQU47RUFHRDs7RUFFRCxPQUFPRCxPQUFQO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb250ZXh0cy9XYWxsZXRTZWxlY3RvckNvbnRleHQudHN4P2M2ZjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBtYXAsIGRpc3RpbmN0VW50aWxDaGFuZ2VkIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IHNldHVwV2FsbGV0U2VsZWN0b3IgfSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcbmltcG9ydCB0eXBlIHsgV2FsbGV0U2VsZWN0b3IsIEFjY291bnRTdGF0ZSB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3IvY29yZVwiO1xuaW1wb3J0IHsgc2V0dXBNb2RhbCB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3IvbW9kYWwtdWlcIjtcbmltcG9ydCB0eXBlIHsgV2FsbGV0U2VsZWN0b3JNb2RhbCB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3IvbW9kYWwtdWlcIjtcbmltcG9ydCB7IHNldHVwRGVmYXVsdFdhbGxldHMgfSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2RlZmF1bHQtd2FsbGV0c1wiO1xuaW1wb3J0IHsgc2V0dXBOZWFyV2FsbGV0IH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9uZWFyLXdhbGxldFwiO1xuaW1wb3J0IHsgc2V0dXBTZW5kZXIgfSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL3NlbmRlclwiO1xuaW1wb3J0IHsgc2V0dXBNYXRoV2FsbGV0IH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9tYXRoLXdhbGxldFwiO1xuaW1wb3J0IHsgc2V0dXBOaWdodGx5IH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9uaWdodGx5XCI7XG5pbXBvcnQgeyBzZXR1cE1ldGVvcldhbGxldCB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3IvbWV0ZW9yLXdhbGxldFwiO1xuaW1wb3J0IHsgc2V0dXBOaWdodGx5Q29ubmVjdCB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3IvbmlnaHRseS1jb25uZWN0XCI7XG5pbXBvcnQgeyBzZXR1cE5lYXJGaSB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3IvbmVhcmZpXCI7XG5pbXBvcnQgeyBzZXR1cFdhbGxldENvbm5lY3QgfSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL3dhbGxldC1jb25uZWN0XCI7XG5pbXBvcnQgeyBDT05UUkFDVF9JRCB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICBzZWxlY3RvcjogV2FsbGV0U2VsZWN0b3I7XG4gICAgbW9kYWw6IFdhbGxldFNlbGVjdG9yTW9kYWw7XG4gIH1cbn1cblxuaW50ZXJmYWNlIFdhbGxldFNlbGVjdG9yQ29udGV4dFZhbHVlIHtcbiAgc2VsZWN0b3I6IFdhbGxldFNlbGVjdG9yO1xuICBtb2RhbDogV2FsbGV0U2VsZWN0b3JNb2RhbDtcbiAgYWNjb3VudHM6IEFycmF5PEFjY291bnRTdGF0ZT47XG4gIGFjY291bnRJZDogc3RyaW5nIHwgbnVsbDtcbn1cblxuY29uc3QgV2FsbGV0U2VsZWN0b3JDb250ZXh0ID1cbiAgUmVhY3QuY3JlYXRlQ29udGV4dDxXYWxsZXRTZWxlY3RvckNvbnRleHRWYWx1ZSB8IG51bGw+KG51bGwpO1xuXG5leHBvcnQgY29uc3QgV2FsbGV0U2VsZWN0b3JDb250ZXh0UHJvdmlkZXI6IFJlYWN0LkZDID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICBjb25zdCBbc2VsZWN0b3IsIHNldFNlbGVjdG9yXSA9IHVzZVN0YXRlPFdhbGxldFNlbGVjdG9yIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFttb2RhbCwgc2V0TW9kYWxdID0gdXNlU3RhdGU8V2FsbGV0U2VsZWN0b3JNb2RhbCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbYWNjb3VudHMsIHNldEFjY291bnRzXSA9IHVzZVN0YXRlPEFycmF5PEFjY291bnRTdGF0ZT4+KFtdKTtcblxuICBjb25zdCBpbml0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IF9zZWxlY3RvciA9IGF3YWl0IHNldHVwV2FsbGV0U2VsZWN0b3Ioe1xuICAgICAgbmV0d29yazogXCJ0ZXN0bmV0XCIsXG4gICAgICBkZWJ1ZzogdHJ1ZSxcbiAgICAgIG1vZHVsZXM6IFtcbiAgICAgICAgLi4uKGF3YWl0IHNldHVwRGVmYXVsdFdhbGxldHMoKSksXG4gICAgICAgIHNldHVwTmVhcldhbGxldCgpLFxuICAgICAgICBzZXR1cFNlbmRlcigpLFxuICAgICAgICBzZXR1cE5lYXJGaSgpLFxuICAgICAgICBzZXR1cE1hdGhXYWxsZXQoKSxcbiAgICAgICAgc2V0dXBOaWdodGx5KCksXG4gICAgICAgIHNldHVwTWV0ZW9yV2FsbGV0KCksXG4gICAgICAgIHNldHVwV2FsbGV0Q29ubmVjdCh7XG4gICAgICAgICAgcHJvamVjdElkOiBcInRlc3QuLi5cIixcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgbmFtZTogXCJORUFSIFdhbGxldCBTZWxlY3RvclwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiRXhhbXBsZSBkQXBwIHVzZWQgYnkgTkVBUiBXYWxsZXQgU2VsZWN0b3JcIixcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2dpdGh1Yi5jb20vbmVhci93YWxsZXQtc2VsZWN0b3JcIixcbiAgICAgICAgICAgIGljb25zOiBbXCJodHRwczovL2F2YXRhcnMuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3UvMzc3ODQ4ODZcIl0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICAgIHNldHVwTmlnaHRseUNvbm5lY3Qoe1xuICAgICAgICAgIHVybDogXCJ3c3M6Ly9uY3Byb3h5Lm5pZ2h0bHkuYXBwL2FwcFwiLFxuICAgICAgICAgIGFwcE1ldGFkYXRhOiB7XG4gICAgICAgICAgICBhZGRpdGlvbmFsSW5mbzogXCJcIixcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uOiBcIk5FQVIgV2FsbGV0IFNlbGVjdG9yXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJFeGFtcGxlIGRBcHAgdXNlZCBieSBORUFSIFdhbGxldCBTZWxlY3RvclwiLFxuICAgICAgICAgICAgaWNvbjogXCJodHRwczovL25lYXIub3JnL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIwLzA5L2Nyb3BwZWQtZmF2aWNvbi0xOTJ4MTkyLnBuZ1wiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgXSxcbiAgICB9KTtcbiAgICBjb25zdCBfbW9kYWwgPSBzZXR1cE1vZGFsKF9zZWxlY3RvciwgeyBjb250cmFjdElkOiBDT05UUkFDVF9JRCB9KTtcbiAgICBjb25zdCBzdGF0ZSA9IF9zZWxlY3Rvci5zdG9yZS5nZXRTdGF0ZSgpO1xuICAgIHNldEFjY291bnRzKHN0YXRlLmFjY291bnRzKTtcblxuICAgIHdpbmRvdy5zZWxlY3RvciA9IF9zZWxlY3RvcjtcbiAgICB3aW5kb3cubW9kYWwgPSBfbW9kYWw7XG5cbiAgICBzZXRTZWxlY3Rvcihfc2VsZWN0b3IpO1xuICAgIHNldE1vZGFsKF9tb2RhbCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGluaXQoKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICBhbGVydChcIkZhaWxlZCB0byBpbml0aWFsaXNlIHdhbGxldCBzZWxlY3RvclwiKTtcbiAgICB9KTtcbiAgfSwgW2luaXRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBzZWxlY3Rvci5zdG9yZS5vYnNlcnZhYmxlXG4gICAgICAucGlwZShcbiAgICAgICAgbWFwKChzdGF0ZSkgPT4gc3RhdGUuYWNjb3VudHMpLFxuICAgICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKChuZXh0QWNjb3VudHMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBY2NvdW50cyBVcGRhdGVcIiwgbmV4dEFjY291bnRzKTtcblxuICAgICAgICBzZXRBY2NvdW50cyhuZXh0QWNjb3VudHMpO1xuICAgICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4gc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtzZWxlY3Rvcl0pO1xuXG4gIGlmICghc2VsZWN0b3IgfHwgIW1vZGFsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBhY2NvdW50SWQgPVxuICAgIGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnQuYWN0aXZlKT8uYWNjb3VudElkIHx8IG51bGw7XG5cbiAgcmV0dXJuIChcbiAgICA8V2FsbGV0U2VsZWN0b3JDb250ZXh0LlByb3ZpZGVyXG4gICAgICB2YWx1ZT17e1xuICAgICAgICBzZWxlY3RvcixcbiAgICAgICAgbW9kYWwsXG4gICAgICAgIGFjY291bnRzLFxuICAgICAgICBhY2NvdW50SWQsXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1dhbGxldFNlbGVjdG9yQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VXYWxsZXRTZWxlY3RvcigpIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoV2FsbGV0U2VsZWN0b3JDb250ZXh0KTtcblxuICBpZiAoIWNvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcInVzZVdhbGxldFNlbGVjdG9yIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBXYWxsZXRTZWxlY3RvckNvbnRleHRQcm92aWRlclwiXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBjb250ZXh0O1xufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlQ2FsbGJhY2siLCJ1c2VDb250ZXh0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJtYXAiLCJkaXN0aW5jdFVudGlsQ2hhbmdlZCIsInNldHVwV2FsbGV0U2VsZWN0b3IiLCJzZXR1cE1vZGFsIiwic2V0dXBEZWZhdWx0V2FsbGV0cyIsInNldHVwTmVhcldhbGxldCIsInNldHVwU2VuZGVyIiwic2V0dXBNYXRoV2FsbGV0Iiwic2V0dXBOaWdodGx5Iiwic2V0dXBNZXRlb3JXYWxsZXQiLCJzZXR1cE5pZ2h0bHlDb25uZWN0Iiwic2V0dXBOZWFyRmkiLCJzZXR1cFdhbGxldENvbm5lY3QiLCJDT05UUkFDVF9JRCIsIldhbGxldFNlbGVjdG9yQ29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJXYWxsZXRTZWxlY3RvckNvbnRleHRQcm92aWRlciIsImNoaWxkcmVuIiwic2VsZWN0b3IiLCJzZXRTZWxlY3RvciIsIm1vZGFsIiwic2V0TW9kYWwiLCJhY2NvdW50cyIsInNldEFjY291bnRzIiwiaW5pdCIsIl9zZWxlY3RvciIsIm5ldHdvcmsiLCJkZWJ1ZyIsIm1vZHVsZXMiLCJwcm9qZWN0SWQiLCJtZXRhZGF0YSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInVybCIsImljb25zIiwiYXBwTWV0YWRhdGEiLCJhZGRpdGlvbmFsSW5mbyIsImFwcGxpY2F0aW9uIiwiaWNvbiIsIl9tb2RhbCIsImNvbnRyYWN0SWQiLCJzdGF0ZSIsInN0b3JlIiwiZ2V0U3RhdGUiLCJ3aW5kb3ciLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImFsZXJ0Iiwic3Vic2NyaXB0aW9uIiwib2JzZXJ2YWJsZSIsInBpcGUiLCJzdWJzY3JpYmUiLCJuZXh0QWNjb3VudHMiLCJsb2ciLCJ1bnN1YnNjcmliZSIsImFjY291bnRJZCIsImZpbmQiLCJhY2NvdW50IiwiYWN0aXZlIiwidXNlV2FsbGV0U2VsZWN0b3IiLCJjb250ZXh0IiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./contexts/WalletSelectorContext.tsx\n");

/***/ }),

/***/ "./pages/index.tsx":
/*!*************************!*\
  !*** ./pages/index.tsx ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _contexts_WalletSelectorContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contexts/WalletSelectorContext */ \"./contexts/WalletSelectorContext.tsx\");\n/* harmony import */ var _components_Content__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Content */ \"./components/Content.tsx\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_components_Content__WEBPACK_IMPORTED_MODULE_2__]);\n_components_Content__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\nvar _jsxFileName = \"/Users/campv/Documents/Projects/wallet-selector/examples/react/pages/index.tsx\";\n\n\n\n\n\nconst Home = () => {\n  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxDEV)(\"h1\", {\n      children: \"NEAR Guest Book\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 7\n    }, undefined), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxDEV)(_contexts_WalletSelectorContext__WEBPACK_IMPORTED_MODULE_1__.WalletSelectorContextProvider, {\n      children: /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxDEV)(_components_Content__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 9\n      }, undefined)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 7\n    }, undefined)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 5\n  }, undefined);\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Home);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC50c3guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBLE1BQU1HLElBQWMsR0FBRyxNQUFNO0VBQzNCLG9CQUNFLDhEQUFDLDJDQUFEO0lBQUEsd0JBQ0U7TUFBQTtJQUFBO01BQUE7TUFBQTtNQUFBO0lBQUEsYUFERixlQUVFLDhEQUFDLDBGQUFEO01BQUEsdUJBQ0UsOERBQUMsMkRBQUQ7UUFBQTtRQUFBO1FBQUE7TUFBQTtJQURGO01BQUE7TUFBQTtNQUFBO0lBQUEsYUFGRjtFQUFBO0lBQUE7SUFBQTtJQUFBO0VBQUEsYUFERjtBQVFELENBVEQ7O0FBV0EsaUVBQWVBLElBQWYsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2luZGV4LnRzeD8wN2ZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dFBhZ2UgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHsgRnJhZ21lbnQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFdhbGxldFNlbGVjdG9yQ29udGV4dFByb3ZpZGVyIH0gZnJvbSBcIi4uL2NvbnRleHRzL1dhbGxldFNlbGVjdG9yQ29udGV4dFwiO1xuaW1wb3J0IENvbnRlbnQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ29udGVudFwiO1xuXG5jb25zdCBIb21lOiBOZXh0UGFnZSA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8RnJhZ21lbnQ+XG4gICAgICA8aDE+TkVBUiBHdWVzdCBCb29rPC9oMT5cbiAgICAgIDxXYWxsZXRTZWxlY3RvckNvbnRleHRQcm92aWRlcj5cbiAgICAgICAgPENvbnRlbnQgLz5cbiAgICAgIDwvV2FsbGV0U2VsZWN0b3JDb250ZXh0UHJvdmlkZXI+XG4gICAgPC9GcmFnbWVudD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEhvbWU7XG4iXSwibmFtZXMiOlsiRnJhZ21lbnQiLCJXYWxsZXRTZWxlY3RvckNvbnRleHRQcm92aWRlciIsIkNvbnRlbnQiLCJIb21lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/index.tsx\n");

/***/ }),

/***/ "../../packages/core/src/index.ts":
/*!****************************************!*\
  !*** ../../packages/core/src/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getActiveAccount\": () => (/* reexport safe */ _lib_helpers__WEBPACK_IMPORTED_MODULE_1__.getActiveAccount),\n/* harmony export */   \"setupWalletSelector\": () => (/* reexport safe */ _lib_wallet_selector__WEBPACK_IMPORTED_MODULE_0__.setupWalletSelector),\n/* harmony export */   \"waitFor\": () => (/* reexport safe */ _lib_helpers__WEBPACK_IMPORTED_MODULE_1__.waitFor)\n/* harmony export */ });\n/* harmony import */ var _lib_wallet_selector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/wallet-selector */ \"../../packages/core/src/lib/wallet-selector.ts\");\n/* harmony import */ var _lib_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/helpers */ \"../../packages/core/src/lib/helpers/index.ts\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvaW5kZXgudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFNQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9pbmRleC50cz8zYjk3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIHtcbiAgV2FsbGV0U2VsZWN0b3IsXG4gIFdhbGxldFNlbGVjdG9yUGFyYW1zLFxuICBXYWxsZXRTZWxlY3RvckV2ZW50cyxcbiAgV2FsbGV0U2VsZWN0b3JTdG9yZSxcbn0gZnJvbSBcIi4vbGliL3dhbGxldC1zZWxlY3Rvci50eXBlc1wiO1xuZXhwb3J0IHsgc2V0dXBXYWxsZXRTZWxlY3RvciB9IGZyb20gXCIuL2xpYi93YWxsZXQtc2VsZWN0b3JcIjtcblxuZXhwb3J0IHR5cGUgeyBOZXR3b3JrLCBOZXR3b3JrSWQgfSBmcm9tIFwiLi9saWIvb3B0aW9ucy50eXBlc1wiO1xuZXhwb3J0IHR5cGUge1xuICBTdWJzY3JpcHRpb24sXG4gIFN0b3JhZ2VTZXJ2aWNlLFxuICBKc29uU3RvcmFnZVNlcnZpY2UsXG59IGZyb20gXCIuL2xpYi9zZXJ2aWNlc1wiO1xuZXhwb3J0IHR5cGUgeyBPcHRpb25hbCB9IGZyb20gXCIuL2xpYi91dGlscy50eXBlc1wiO1xuXG5leHBvcnQgdHlwZSB7XG4gIFdhbGxldFNlbGVjdG9yU3RhdGUsXG4gIENvbnRyYWN0U3RhdGUsXG4gIE1vZHVsZVN0YXRlLFxuICBBY2NvdW50U3RhdGUsXG59IGZyb20gXCIuL2xpYi9zdG9yZS50eXBlc1wiO1xuXG5leHBvcnQgdHlwZSB7XG4gIFdhbGxldE1vZHVsZUZhY3RvcnksXG4gIFdhbGxldE1vZHVsZSxcbiAgV2FsbGV0QmVoYXZpb3VyRmFjdG9yeSxcbiAgV2FsbGV0QmVoYXZpb3VyT3B0aW9ucyxcbiAgV2FsbGV0LFxuICBXYWxsZXRUeXBlLFxuICBXYWxsZXRNZXRhZGF0YSxcbiAgV2FsbGV0RXZlbnRzLFxuICBTaWduSW5QYXJhbXMsXG4gIEJyb3dzZXJXYWxsZXRNZXRhZGF0YSxcbiAgQnJvd3NlcldhbGxldEJlaGF2aW91cixcbiAgQnJvd3NlcldhbGxldCxcbiAgSW5qZWN0ZWRXYWxsZXRNZXRhZGF0YSxcbiAgSW5qZWN0ZWRXYWxsZXRCZWhhdmlvdXIsXG4gIEluamVjdGVkV2FsbGV0LFxuICBIYXJkd2FyZVdhbGxldE1ldGFkYXRhLFxuICBIYXJkd2FyZVdhbGxldFNpZ25JblBhcmFtcyxcbiAgSGFyZHdhcmVXYWxsZXRCZWhhdmlvdXIsXG4gIEhhcmR3YXJlV2FsbGV0LFxuICBIYXJkd2FyZVdhbGxldEFjY291bnQsXG4gIEJyaWRnZVdhbGxldE1ldGFkYXRhLFxuICBCcmlkZ2VXYWxsZXRCZWhhdmlvdXIsXG4gIEJyaWRnZVdhbGxldCxcbiAgVmVyaWZpZWRPd25lcixcbiAgVmVyaWZ5T3duZXJQYXJhbXMsXG4gIEFjY291bnQsXG4gIFRyYW5zYWN0aW9uLFxuICBBY3Rpb24sXG4gIEFjdGlvblR5cGUsXG4gIENyZWF0ZUFjY291bnRBY3Rpb24sXG4gIERlcGxveUNvbnRyYWN0QWN0aW9uLFxuICBGdW5jdGlvbkNhbGxBY3Rpb24sXG4gIFRyYW5zZmVyQWN0aW9uLFxuICBTdGFrZUFjdGlvbixcbiAgQWRkS2V5QWN0aW9uLFxuICBEZWxldGVLZXlBY3Rpb24sXG4gIERlbGV0ZUFjY291bnRBY3Rpb24sXG4gIEFkZEtleVBlcm1pc3Npb24sXG59IGZyb20gXCIuL2xpYi93YWxsZXRcIjtcblxuZXhwb3J0IHR5cGUgeyBGaW5hbEV4ZWN1dGlvbk91dGNvbWUgfSBmcm9tIFwibmVhci1hcGktanMvbGliL3Byb3ZpZGVyc1wiO1xuXG5leHBvcnQgeyB3YWl0Rm9yLCBnZXRBY3RpdmVBY2NvdW50IH0gZnJvbSBcIi4vbGliL2hlbHBlcnNcIjtcbiJdLCJuYW1lcyI6WyJzZXR1cFdhbGxldFNlbGVjdG9yIiwid2FpdEZvciIsImdldEFjdGl2ZUFjY291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/core/src/index.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/constants.ts":
/*!************************************************!*\
  !*** ../../packages/core/src/lib/constants.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CONTRACT\": () => (/* binding */ CONTRACT),\n/* harmony export */   \"PACKAGE_NAME\": () => (/* binding */ PACKAGE_NAME),\n/* harmony export */   \"PENDING_CONTRACT\": () => (/* binding */ PENDING_CONTRACT),\n/* harmony export */   \"PENDING_SELECTED_WALLET_ID\": () => (/* binding */ PENDING_SELECTED_WALLET_ID),\n/* harmony export */   \"SELECTED_WALLET_ID\": () => (/* binding */ SELECTED_WALLET_ID)\n/* harmony export */ });\nconst PACKAGE_NAME = \"near-wallet-selector\";\nconst CONTRACT = \"contract\";\nconst PENDING_CONTRACT = \"contract:pending\";\nconst SELECTED_WALLET_ID = `selectedWalletId`;\nconst PENDING_SELECTED_WALLET_ID = `selectedWalletId:pending`;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL2NvbnN0YW50cy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFPLE1BQU1BLFlBQVksR0FBRyxzQkFBckI7QUFFQSxNQUFNQyxRQUFRLEdBQUcsVUFBakI7QUFDQSxNQUFNQyxnQkFBZ0IsR0FBRyxrQkFBekI7QUFFQSxNQUFNQyxrQkFBa0IsR0FBSSxrQkFBNUI7QUFDQSxNQUFNQywwQkFBMEIsR0FBSSwwQkFBcEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL2NvbnN0YW50cy50cz8xNTQ5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBQQUNLQUdFX05BTUUgPSBcIm5lYXItd2FsbGV0LXNlbGVjdG9yXCI7XG5cbmV4cG9ydCBjb25zdCBDT05UUkFDVCA9IFwiY29udHJhY3RcIjtcbmV4cG9ydCBjb25zdCBQRU5ESU5HX0NPTlRSQUNUID0gXCJjb250cmFjdDpwZW5kaW5nXCI7XG5cbmV4cG9ydCBjb25zdCBTRUxFQ1RFRF9XQUxMRVRfSUQgPSBgc2VsZWN0ZWRXYWxsZXRJZGA7XG5leHBvcnQgY29uc3QgUEVORElOR19TRUxFQ1RFRF9XQUxMRVRfSUQgPSBgc2VsZWN0ZWRXYWxsZXRJZDpwZW5kaW5nYDtcbiJdLCJuYW1lcyI6WyJQQUNLQUdFX05BTUUiLCJDT05UUkFDVCIsIlBFTkRJTkdfQ09OVFJBQ1QiLCJTRUxFQ1RFRF9XQUxMRVRfSUQiLCJQRU5ESU5HX1NFTEVDVEVEX1dBTExFVF9JRCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/constants.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/helpers/getActiveAccount.ts":
/*!***************************************************************!*\
  !*** ../../packages/core/src/lib/helpers/getActiveAccount.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getActiveAccount\": () => (/* binding */ getActiveAccount)\n/* harmony export */ });\nconst getActiveAccount = state => {\n  return state.accounts.find(account => account.active) || null;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL2hlbHBlcnMvZ2V0QWN0aXZlQWNjb3VudC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sTUFBTUEsZ0JBQWdCLEdBQzNCQyxLQUQ4QixJQUVOO0VBQ3hCLE9BQU9BLEtBQUssQ0FBQ0MsUUFBTixDQUFlQyxJQUFmLENBQXFCQyxPQUFELElBQWFBLE9BQU8sQ0FBQ0MsTUFBekMsS0FBb0QsSUFBM0Q7QUFDRCxDQUpNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL3BhY2thZ2VzL2NvcmUvc3JjL2xpYi9oZWxwZXJzL2dldEFjdGl2ZUFjY291bnQudHM/MmQyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFjY291bnRTdGF0ZSwgV2FsbGV0U2VsZWN0b3JTdGF0ZSB9IGZyb20gXCIuLi9zdG9yZS50eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgZ2V0QWN0aXZlQWNjb3VudCA9IChcbiAgc3RhdGU6IFdhbGxldFNlbGVjdG9yU3RhdGVcbik6IEFjY291bnRTdGF0ZSB8IG51bGwgPT4ge1xuICByZXR1cm4gc3RhdGUuYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5hY3RpdmUpIHx8IG51bGw7XG59O1xuIl0sIm5hbWVzIjpbImdldEFjdGl2ZUFjY291bnQiLCJzdGF0ZSIsImFjY291bnRzIiwiZmluZCIsImFjY291bnQiLCJhY3RpdmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/helpers/getActiveAccount.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/helpers/index.ts":
/*!****************************************************!*\
  !*** ../../packages/core/src/lib/helpers/index.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _waitFor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./waitFor */ \"../../packages/core/src/lib/helpers/waitFor.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _waitFor__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _waitFor__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getActiveAccount__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getActiveAccount */ \"../../packages/core/src/lib/helpers/getActiveAccount.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getActiveAccount__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getActiveAccount__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL2hlbHBlcnMvaW5kZXgudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL2hlbHBlcnMvaW5kZXgudHM/ZDQ4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi93YWl0Rm9yXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXRBY3RpdmVBY2NvdW50XCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/helpers/index.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/helpers/waitFor.ts":
/*!******************************************************!*\
  !*** ../../packages/core/src/lib/helpers/waitFor.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"waitFor\": () => (/* binding */ waitFor)\n/* harmony export */ });\nconst wait = ms => {\n  return new Promise(resolve => setTimeout(resolve, ms));\n};\n\nconst poll = async (cb, interval, remaining) => {\n  const result = cb();\n\n  if (result) {\n    return result;\n  }\n\n  if (!remaining) {\n    throw new Error(\"Exceeded timeout\");\n  }\n\n  return wait(interval).then(() => poll(cb, interval, remaining - 1));\n};\n\nconst waitFor = async (cb, opts = {}) => {\n  const {\n    timeout = 200,\n    interval = 50\n  } = opts;\n  return Promise.race([wait(timeout).then(() => {\n    throw new Error(\"Exceeded timeout\");\n  }), poll(cb, interval, Math.floor(timeout / interval))]);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL2hlbHBlcnMvd2FpdEZvci50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTUEsSUFBSSxHQUFJQyxFQUFELElBQWdCO0VBQzNCLE9BQU8sSUFBSUMsT0FBSixDQUFhQyxPQUFELElBQWFDLFVBQVUsQ0FBQ0QsT0FBRCxFQUFVRixFQUFWLENBQW5DLENBQVA7QUFDRCxDQUZEOztBQUlBLE1BQU1JLElBQUksR0FBRyxPQUNYQyxFQURXLEVBRVhDLFFBRlcsRUFHWEMsU0FIVyxLQUlVO0VBQ3JCLE1BQU1DLE1BQU0sR0FBR0gsRUFBRSxFQUFqQjs7RUFFQSxJQUFJRyxNQUFKLEVBQVk7SUFDVixPQUFPQSxNQUFQO0VBQ0Q7O0VBRUQsSUFBSSxDQUFDRCxTQUFMLEVBQWdCO0lBQ2QsTUFBTSxJQUFJRSxLQUFKLENBQVUsa0JBQVYsQ0FBTjtFQUNEOztFQUVELE9BQU9WLElBQUksQ0FBQ08sUUFBRCxDQUFKLENBQWVJLElBQWYsQ0FBb0IsTUFBTU4sSUFBSSxDQUFDQyxFQUFELEVBQUtDLFFBQUwsRUFBZUMsU0FBUyxHQUFHLENBQTNCLENBQTlCLENBQVA7QUFDRCxDQWhCRDs7QUFrQk8sTUFBTUksT0FBTyxHQUFHLE9BQ3JCTixFQURxQixFQUVyQk8sSUFBNkMsR0FBRyxFQUYzQixLQUdsQjtFQUNILE1BQU07SUFBRUMsT0FBTyxHQUFHLEdBQVo7SUFBaUJQLFFBQVEsR0FBRztFQUE1QixJQUFtQ00sSUFBekM7RUFFQSxPQUFPWCxPQUFPLENBQUNhLElBQVIsQ0FBYSxDQUNsQmYsSUFBSSxDQUFDYyxPQUFELENBQUosQ0FBY0gsSUFBZCxDQUFtQixNQUFNO0lBQ3ZCLE1BQU0sSUFBSUQsS0FBSixDQUFVLGtCQUFWLENBQU47RUFDRCxDQUZELENBRGtCLEVBSWxCTCxJQUFJLENBQUNDLEVBQUQsRUFBS0MsUUFBTCxFQUFlUyxJQUFJLENBQUNDLEtBQUwsQ0FBV0gsT0FBTyxHQUFHUCxRQUFyQixDQUFmLENBSmMsQ0FBYixDQUFQO0FBTUQsQ0FaTSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9saWIvaGVscGVycy93YWl0Rm9yLnRzP2I0MzkiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgd2FpdCA9IChtczogbnVtYmVyKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufTtcblxuY29uc3QgcG9sbCA9IGFzeW5jIChcbiAgY2I6ICgpID0+IGJvb2xlYW4sXG4gIGludGVydmFsOiBudW1iZXIsXG4gIHJlbWFpbmluZzogbnVtYmVyXG4pOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gY2IoKTtcblxuICBpZiAocmVzdWx0KSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmICghcmVtYWluaW5nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXhjZWVkZWQgdGltZW91dFwiKTtcbiAgfVxuXG4gIHJldHVybiB3YWl0KGludGVydmFsKS50aGVuKCgpID0+IHBvbGwoY2IsIGludGVydmFsLCByZW1haW5pbmcgLSAxKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgd2FpdEZvciA9IGFzeW5jIChcbiAgY2I6ICgpID0+IGJvb2xlYW4sXG4gIG9wdHM6IHsgdGltZW91dD86IG51bWJlcjsgaW50ZXJ2YWw/OiBudW1iZXIgfSA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyB0aW1lb3V0ID0gMjAwLCBpbnRlcnZhbCA9IDUwIH0gPSBvcHRzO1xuXG4gIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgIHdhaXQodGltZW91dCkudGhlbigoKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeGNlZWRlZCB0aW1lb3V0XCIpO1xuICAgIH0pLFxuICAgIHBvbGwoY2IsIGludGVydmFsLCBNYXRoLmZsb29yKHRpbWVvdXQgLyBpbnRlcnZhbCkpLFxuICBdKTtcbn07XG4iXSwibmFtZXMiOlsid2FpdCIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicG9sbCIsImNiIiwiaW50ZXJ2YWwiLCJyZW1haW5pbmciLCJyZXN1bHQiLCJFcnJvciIsInRoZW4iLCJ3YWl0Rm9yIiwib3B0cyIsInRpbWVvdXQiLCJyYWNlIiwiTWF0aCIsImZsb29yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/helpers/waitFor.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/options.ts":
/*!**********************************************!*\
  !*** ../../packages/core/src/lib/options.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getNetworkPreset\": () => (/* binding */ getNetworkPreset),\n/* harmony export */   \"resolveNetwork\": () => (/* binding */ resolveNetwork),\n/* harmony export */   \"resolveOptions\": () => (/* binding */ resolveOptions)\n/* harmony export */ });\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./services */ \"../../packages/core/src/lib/services/index.ts\");\n\nconst getNetworkPreset = networkId => {\n  switch (networkId) {\n    case \"mainnet\":\n      return {\n        networkId,\n        nodeUrl: \"https://rpc.mainnet.near.org\",\n        helperUrl: \"https://helper.mainnet.near.org\",\n        explorerUrl: \"https://explorer.near.org\",\n        indexerUrl: \"https://api.kitwallet.app\"\n      };\n\n    case \"testnet\":\n      return {\n        networkId,\n        nodeUrl: \"https://rpc.testnet.near.org\",\n        helperUrl: \"https://helper.testnet.near.org\",\n        explorerUrl: \"https://explorer.testnet.near.org\",\n        indexerUrl: \"https://testnet-api.kitwallet.app\"\n      };\n\n    default:\n      throw Error(`Failed to find config for: '${networkId}'`);\n  }\n};\nconst resolveNetwork = network => {\n  return typeof network === \"string\" ? getNetworkPreset(network) : network;\n};\nconst resolveOptions = params => {\n  const options = {\n    network: resolveNetwork(params.network),\n    debug: params.debug || false\n  };\n  return {\n    options,\n    storage: params.storage || new _services__WEBPACK_IMPORTED_MODULE_0__.WebStorageService()\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL29wdGlvbnMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBO0FBRU8sTUFBTUMsZ0JBQWdCLEdBQUlDLFNBQUQsSUFBbUM7RUFDakUsUUFBUUEsU0FBUjtJQUNFLEtBQUssU0FBTDtNQUNFLE9BQU87UUFDTEEsU0FESztRQUVMQyxPQUFPLEVBQUUsOEJBRko7UUFHTEMsU0FBUyxFQUFFLGlDQUhOO1FBSUxDLFdBQVcsRUFBRSwyQkFKUjtRQUtMQyxVQUFVLEVBQUU7TUFMUCxDQUFQOztJQU9GLEtBQUssU0FBTDtNQUNFLE9BQU87UUFDTEosU0FESztRQUVMQyxPQUFPLEVBQUUsOEJBRko7UUFHTEMsU0FBUyxFQUFFLGlDQUhOO1FBSUxDLFdBQVcsRUFBRSxtQ0FKUjtRQUtMQyxVQUFVLEVBQUU7TUFMUCxDQUFQOztJQU9GO01BQ0UsTUFBTUMsS0FBSyxDQUFFLCtCQUE4QkwsU0FBVSxHQUExQyxDQUFYO0VBbEJKO0FBb0JELENBckJNO0FBdUJBLE1BQU1NLGNBQWMsR0FBSUMsT0FBRCxJQUEyQztFQUN2RSxPQUFPLE9BQU9BLE9BQVAsS0FBbUIsUUFBbkIsR0FBOEJSLGdCQUFnQixDQUFDUSxPQUFELENBQTlDLEdBQTBEQSxPQUFqRTtBQUNELENBRk07QUFJQSxNQUFNQyxjQUFjLEdBQUlDLE1BQUQsSUFBa0M7RUFDOUQsTUFBTUMsT0FBZ0IsR0FBRztJQUN2QkgsT0FBTyxFQUFFRCxjQUFjLENBQUNHLE1BQU0sQ0FBQ0YsT0FBUixDQURBO0lBRXZCSSxLQUFLLEVBQUVGLE1BQU0sQ0FBQ0UsS0FBUCxJQUFnQjtFQUZBLENBQXpCO0VBS0EsT0FBTztJQUNMRCxPQURLO0lBRUxFLE9BQU8sRUFBRUgsTUFBTSxDQUFDRyxPQUFQLElBQWtCLElBQUlkLHdEQUFKO0VBRnRCLENBQVA7QUFJRCxDQVZNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL3BhY2thZ2VzL2NvcmUvc3JjL2xpYi9vcHRpb25zLnRzPzk4YzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBXYWxsZXRTZWxlY3RvclBhcmFtcyB9IGZyb20gXCIuL3dhbGxldC1zZWxlY3Rvci50eXBlc1wiO1xuaW1wb3J0IHR5cGUgeyBPcHRpb25zLCBOZXR3b3JrLCBOZXR3b3JrSWQgfSBmcm9tIFwiLi9vcHRpb25zLnR5cGVzXCI7XG5pbXBvcnQgeyBXZWJTdG9yYWdlU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VzXCI7XG5cbmV4cG9ydCBjb25zdCBnZXROZXR3b3JrUHJlc2V0ID0gKG5ldHdvcmtJZDogTmV0d29ya0lkKTogTmV0d29yayA9PiB7XG4gIHN3aXRjaCAobmV0d29ya0lkKSB7XG4gICAgY2FzZSBcIm1haW5uZXRcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5ldHdvcmtJZCxcbiAgICAgICAgbm9kZVVybDogXCJodHRwczovL3JwYy5tYWlubmV0Lm5lYXIub3JnXCIsXG4gICAgICAgIGhlbHBlclVybDogXCJodHRwczovL2hlbHBlci5tYWlubmV0Lm5lYXIub3JnXCIsXG4gICAgICAgIGV4cGxvcmVyVXJsOiBcImh0dHBzOi8vZXhwbG9yZXIubmVhci5vcmdcIixcbiAgICAgICAgaW5kZXhlclVybDogXCJodHRwczovL2FwaS5raXR3YWxsZXQuYXBwXCIsXG4gICAgICB9O1xuICAgIGNhc2UgXCJ0ZXN0bmV0XCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuZXR3b3JrSWQsXG4gICAgICAgIG5vZGVVcmw6IFwiaHR0cHM6Ly9ycGMudGVzdG5ldC5uZWFyLm9yZ1wiLFxuICAgICAgICBoZWxwZXJVcmw6IFwiaHR0cHM6Ly9oZWxwZXIudGVzdG5ldC5uZWFyLm9yZ1wiLFxuICAgICAgICBleHBsb3JlclVybDogXCJodHRwczovL2V4cGxvcmVyLnRlc3RuZXQubmVhci5vcmdcIixcbiAgICAgICAgaW5kZXhlclVybDogXCJodHRwczovL3Rlc3RuZXQtYXBpLmtpdHdhbGxldC5hcHBcIixcbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IEVycm9yKGBGYWlsZWQgdG8gZmluZCBjb25maWcgZm9yOiAnJHtuZXR3b3JrSWR9J2ApO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcmVzb2x2ZU5ldHdvcmsgPSAobmV0d29yazogTmV0d29ya0lkIHwgTmV0d29yayk6IE5ldHdvcmsgPT4ge1xuICByZXR1cm4gdHlwZW9mIG5ldHdvcmsgPT09IFwic3RyaW5nXCIgPyBnZXROZXR3b3JrUHJlc2V0KG5ldHdvcmspIDogbmV0d29yaztcbn07XG5cbmV4cG9ydCBjb25zdCByZXNvbHZlT3B0aW9ucyA9IChwYXJhbXM6IFdhbGxldFNlbGVjdG9yUGFyYW1zKSA9PiB7XG4gIGNvbnN0IG9wdGlvbnM6IE9wdGlvbnMgPSB7XG4gICAgbmV0d29yazogcmVzb2x2ZU5ldHdvcmsocGFyYW1zLm5ldHdvcmspLFxuICAgIGRlYnVnOiBwYXJhbXMuZGVidWcgfHwgZmFsc2UsXG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBvcHRpb25zLFxuICAgIHN0b3JhZ2U6IHBhcmFtcy5zdG9yYWdlIHx8IG5ldyBXZWJTdG9yYWdlU2VydmljZSgpLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6WyJXZWJTdG9yYWdlU2VydmljZSIsImdldE5ldHdvcmtQcmVzZXQiLCJuZXR3b3JrSWQiLCJub2RlVXJsIiwiaGVscGVyVXJsIiwiZXhwbG9yZXJVcmwiLCJpbmRleGVyVXJsIiwiRXJyb3IiLCJyZXNvbHZlTmV0d29yayIsIm5ldHdvcmsiLCJyZXNvbHZlT3B0aW9ucyIsInBhcmFtcyIsIm9wdGlvbnMiLCJkZWJ1ZyIsInN0b3JhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/options.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/event-emitter/event-emitter.service.ts":
/*!***********************************************************************************!*\
  !*** ../../packages/core/src/lib/services/event-emitter/event-emitter.service.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EventEmitter\": () => (/* binding */ EventEmitter)\n/* harmony export */ });\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \"events\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass EventEmitter {\n  constructor() {\n    _defineProperty(this, \"emitter\", new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter());\n  }\n\n  on(eventName, callback) {\n    this.emitter.on(eventName, callback);\n    return {\n      remove: () => this.emitter.off(eventName, callback)\n    };\n  }\n\n  off(eventName, callback) {\n    this.emitter.off(eventName, callback);\n  }\n\n  emit(eventName, event) {\n    this.emitter.emit(eventName, event);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL2V2ZW50LWVtaXR0ZXIvZXZlbnQtZW1pdHRlci5zZXJ2aWNlLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFHTyxNQUFNQSxZQUFOLENBRVA7RUFBQTtJQUFBLGlDQUNvQixJQUFJQyxnREFBSixFQURwQjtFQUFBOztFQUdFQyxFQUFFLENBQ0FDLFNBREEsRUFFQUMsUUFGQSxFQUdjO0lBQ2QsS0FBS0MsT0FBTCxDQUFhSCxFQUFiLENBQWdCQyxTQUFoQixFQUFxQ0MsUUFBckM7SUFFQSxPQUFPO01BQ0xFLE1BQU0sRUFBRSxNQUFNLEtBQUtELE9BQUwsQ0FBYUUsR0FBYixDQUFpQkosU0FBakIsRUFBc0NDLFFBQXRDO0lBRFQsQ0FBUDtFQUdEOztFQUVERyxHQUFHLENBQ0RKLFNBREMsRUFFREMsUUFGQyxFQUdEO0lBQ0EsS0FBS0MsT0FBTCxDQUFhRSxHQUFiLENBQWlCSixTQUFqQixFQUFzQ0MsUUFBdEM7RUFDRDs7RUFFREksSUFBSSxDQUE2QkwsU0FBN0IsRUFBK0NNLEtBQS9DLEVBQXFFO0lBQ3ZFLEtBQUtKLE9BQUwsQ0FBYUcsSUFBYixDQUFrQkwsU0FBbEIsRUFBdUNNLEtBQXZDO0VBQ0Q7O0FBdkJIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL3BhY2thZ2VzL2NvcmUvc3JjL2xpYi9zZXJ2aWNlcy9ldmVudC1lbWl0dGVyL2V2ZW50LWVtaXR0ZXIuc2VydmljZS50cz9iODNhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciBhcyBORXZlbnRFbWl0dGVyIH0gZnJvbSBcImV2ZW50c1wiO1xuaW1wb3J0IHR5cGUgeyBFdmVudEVtaXR0ZXJTZXJ2aWNlLCBTdWJzY3JpcHRpb24gfSBmcm9tIFwiLi9ldmVudC1lbWl0dGVyLnR5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXI8RXZlbnRzIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+XG4gIGltcGxlbWVudHMgRXZlbnRFbWl0dGVyU2VydmljZTxFdmVudHM+XG57XG4gIHByaXZhdGUgZW1pdHRlciA9IG5ldyBORXZlbnRFbWl0dGVyKCk7XG5cbiAgb248RXZlbnQgZXh0ZW5kcyBrZXlvZiBFdmVudHM+KFxuICAgIGV2ZW50TmFtZTogRXZlbnQsXG4gICAgY2FsbGJhY2s6IChldmVudDogRXZlbnRzW0V2ZW50XSkgPT4gdm9pZFxuICApOiBTdWJzY3JpcHRpb24ge1xuICAgIHRoaXMuZW1pdHRlci5vbihldmVudE5hbWUgYXMgc3RyaW5nLCBjYWxsYmFjayk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVtb3ZlOiAoKSA9PiB0aGlzLmVtaXR0ZXIub2ZmKGV2ZW50TmFtZSBhcyBzdHJpbmcsIGNhbGxiYWNrKSxcbiAgICB9O1xuICB9XG5cbiAgb2ZmPEV2ZW50IGV4dGVuZHMga2V5b2YgRXZlbnRzPihcbiAgICBldmVudE5hbWU6IEV2ZW50LFxuICAgIGNhbGxiYWNrOiAoZXZlbnQ6IEV2ZW50c1tFdmVudF0pID0+IHZvaWRcbiAgKSB7XG4gICAgdGhpcy5lbWl0dGVyLm9mZihldmVudE5hbWUgYXMgc3RyaW5nLCBjYWxsYmFjayk7XG4gIH1cblxuICBlbWl0PEV2ZW50IGV4dGVuZHMga2V5b2YgRXZlbnRzPihldmVudE5hbWU6IEV2ZW50LCBldmVudDogRXZlbnRzW0V2ZW50XSkge1xuICAgIHRoaXMuZW1pdHRlci5lbWl0KGV2ZW50TmFtZSBhcyBzdHJpbmcsIGV2ZW50KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkV2ZW50RW1pdHRlciIsIk5FdmVudEVtaXR0ZXIiLCJvbiIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwiZW1pdHRlciIsInJlbW92ZSIsIm9mZiIsImVtaXQiLCJldmVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/event-emitter/event-emitter.service.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/event-emitter/event-emitter.types.ts":
/*!*********************************************************************************!*\
  !*** ../../packages/core/src/lib/services/event-emitter/event-emitter.types.ts ***!
  \*********************************************************************************/
/***/ (() => {

eval("//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL2V2ZW50LWVtaXR0ZXIvZXZlbnQtZW1pdHRlci50eXBlcy50cy5qcyIsIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9saWIvc2VydmljZXMvZXZlbnQtZW1pdHRlci9ldmVudC1lbWl0dGVyLnR5cGVzLnRzP2IyODkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBTdWJzY3JpcHRpb24ge1xuICByZW1vdmU6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnRFbWl0dGVyU2VydmljZTxFdmVudHMgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4ge1xuICBvbjxFdmVudE5hbWUgZXh0ZW5kcyBrZXlvZiBFdmVudHM+KFxuICAgIGV2ZW50TmFtZTogRXZlbnROYW1lLFxuICAgIGNhbGxiYWNrOiAoZXZlbnQ6IEV2ZW50c1tFdmVudE5hbWVdKSA9PiB2b2lkXG4gICk6IFN1YnNjcmlwdGlvbjtcblxuICBvZmY8RXZlbnROYW1lIGV4dGVuZHMga2V5b2YgRXZlbnRzPihcbiAgICBldmVudE5hbWU6IEV2ZW50TmFtZSxcbiAgICBjYWxsYmFjazogKGV2ZW50OiBFdmVudHNbRXZlbnROYW1lXSkgPT4gdm9pZFxuICApOiB2b2lkO1xuXG4gIGVtaXQ8RXZlbnROYW1lIGV4dGVuZHMga2V5b2YgRXZlbnRzPihcbiAgICBldmVudE5hbWU6IEV2ZW50TmFtZSxcbiAgICBldmVudDogRXZlbnRzW0V2ZW50TmFtZV1cbiAgKTogdm9pZDtcbn1cbiJdLCJtYXBwaW5ncyI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/event-emitter/event-emitter.types.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/index.ts":
/*!*****************************************************!*\
  !*** ../../packages/core/src/lib/services/index.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _provider_provider_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./provider/provider.service */ \"../../packages/core/src/lib/services/provider/provider.service.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _provider_provider_service__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _provider_provider_service__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _provider_provider_service_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./provider/provider.service.types */ \"../../packages/core/src/lib/services/provider/provider.service.types.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _provider_provider_service_types__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _provider_provider_service_types__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _storage_storage_service_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./storage/storage.service.types */ \"../../packages/core/src/lib/services/storage/storage.service.types.ts\");\n/* harmony import */ var _storage_storage_service_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_storage_storage_service_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _storage_storage_service_types__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _storage_storage_service_types__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _storage_json_storage_service_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./storage/json-storage.service.types */ \"../../packages/core/src/lib/services/storage/json-storage.service.types.ts\");\n/* harmony import */ var _storage_json_storage_service_types__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_storage_json_storage_service_types__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _storage_json_storage_service_types__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _storage_json_storage_service_types__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _storage_json_storage_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./storage/json-storage.service */ \"../../packages/core/src/lib/services/storage/json-storage.service.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _storage_json_storage_service__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _storage_json_storage_service__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _storage_web_storage_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./storage/web-storage.service */ \"../../packages/core/src/lib/services/storage/web-storage.service.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _storage_web_storage_service__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _storage_web_storage_service__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _logger_logger_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./logger/logger.service */ \"../../packages/core/src/lib/services/logger/logger.service.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _logger_logger_service__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _logger_logger_service__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _logger_logger_service_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./logger/logger.service.types */ \"../../packages/core/src/lib/services/logger/logger.service.types.ts\");\n/* harmony import */ var _logger_logger_service_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_logger_logger_service_types__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _logger_logger_service_types__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _logger_logger_service_types__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _wallet_modules_wallet_modules_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./wallet-modules/wallet-modules.service */ \"../../packages/core/src/lib/services/wallet-modules/wallet-modules.service.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _wallet_modules_wallet_modules_service__WEBPACK_IMPORTED_MODULE_8__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _wallet_modules_wallet_modules_service__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _event_emitter_event_emitter_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./event-emitter/event-emitter.service */ \"../../packages/core/src/lib/services/event-emitter/event-emitter.service.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _event_emitter_event_emitter_service__WEBPACK_IMPORTED_MODULE_9__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _event_emitter_event_emitter_service__WEBPACK_IMPORTED_MODULE_9__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _event_emitter_event_emitter_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./event-emitter/event-emitter.types */ \"../../packages/core/src/lib/services/event-emitter/event-emitter.types.ts\");\n/* harmony import */ var _event_emitter_event_emitter_types__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_event_emitter_event_emitter_types__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _event_emitter_event_emitter_types__WEBPACK_IMPORTED_MODULE_10__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _event_emitter_event_emitter_types__WEBPACK_IMPORTED_MODULE_10__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL2luZGV4LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9saWIvc2VydmljZXMvaW5kZXgudHM/MmNlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9wcm92aWRlci9wcm92aWRlci5zZXJ2aWNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wcm92aWRlci9wcm92aWRlci5zZXJ2aWNlLnR5cGVzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zdG9yYWdlL3N0b3JhZ2Uuc2VydmljZS50eXBlc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3RvcmFnZS9qc29uLXN0b3JhZ2Uuc2VydmljZS50eXBlc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3RvcmFnZS9qc29uLXN0b3JhZ2Uuc2VydmljZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3RvcmFnZS93ZWItc3RvcmFnZS5zZXJ2aWNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9sb2dnZXIvbG9nZ2VyLnNlcnZpY2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2xvZ2dlci9sb2dnZXIuc2VydmljZS50eXBlc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vd2FsbGV0LW1vZHVsZXMvd2FsbGV0LW1vZHVsZXMuc2VydmljZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZXZlbnQtZW1pdHRlci9ldmVudC1lbWl0dGVyLnNlcnZpY2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2V2ZW50LWVtaXR0ZXIvZXZlbnQtZW1pdHRlci50eXBlc1wiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/index.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/logger/logger.service.ts":
/*!*********************************************************************!*\
  !*** ../../packages/core/src/lib/services/logger/logger.service.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Logger\": () => (/* binding */ Logger),\n/* harmony export */   \"logger\": () => (/* binding */ logger)\n/* harmony export */ });\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass Logger {\n  constructor(namespace) {\n    _defineProperty(this, \"namespace\", void 0);\n\n    this.namespace = namespace;\n  }\n\n  emit(method, ...params) {\n    if (!Logger.debug) {\n      return;\n    }\n\n    if (this.namespace && method !== \"error\") {\n      // eslint-disable-next-line no-console\n      console[method](this.namespace, ...params);\n      return;\n    } // eslint-disable-next-line no-console\n\n\n    console[method](...params);\n  }\n\n  log(...params) {\n    this.emit(\"log\", ...params);\n  }\n\n  info(...params) {\n    this.emit(\"info\", ...params);\n  }\n\n  warn(...params) {\n    this.emit(\"warn\", ...params);\n  }\n\n  error(...params) {\n    this.emit(\"error\", ...params);\n  }\n\n}\n\n_defineProperty(Logger, \"debug\", false);\n\nconst logger = new Logger();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL2xvZ2dlci9sb2dnZXIuc2VydmljZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBSU8sTUFBTUEsTUFBTixDQUFzQztFQUszQ0MsV0FBVyxDQUFDQyxTQUFELEVBQXFCO0lBQUE7O0lBQzlCLEtBQUtBLFNBQUwsR0FBaUJBLFNBQWpCO0VBQ0Q7O0VBRU9DLElBQUksQ0FBQ0MsTUFBRCxFQUEwQixHQUFHQyxNQUE3QixFQUFxRDtJQUMvRCxJQUFJLENBQUNMLE1BQU0sQ0FBQ00sS0FBWixFQUFtQjtNQUNqQjtJQUNEOztJQUVELElBQUksS0FBS0osU0FBTCxJQUFrQkUsTUFBTSxLQUFLLE9BQWpDLEVBQTBDO01BQ3hDO01BQ0FHLE9BQU8sQ0FBQ0gsTUFBRCxDQUFQLENBQWdCLEtBQUtGLFNBQXJCLEVBQWdDLEdBQUdHLE1BQW5DO01BRUE7SUFDRCxDQVY4RCxDQVkvRDs7O0lBQ0FFLE9BQU8sQ0FBQ0gsTUFBRCxDQUFQLENBQWdCLEdBQUdDLE1BQW5CO0VBQ0Q7O0VBRURHLEdBQUcsQ0FBQyxHQUFHSCxNQUFKLEVBQTRCO0lBQzdCLEtBQUtGLElBQUwsQ0FBVSxLQUFWLEVBQWlCLEdBQUdFLE1BQXBCO0VBQ0Q7O0VBRURJLElBQUksQ0FBQyxHQUFHSixNQUFKLEVBQTRCO0lBQzlCLEtBQUtGLElBQUwsQ0FBVSxNQUFWLEVBQWtCLEdBQUdFLE1BQXJCO0VBQ0Q7O0VBRURLLElBQUksQ0FBQyxHQUFHTCxNQUFKLEVBQTRCO0lBQzlCLEtBQUtGLElBQUwsQ0FBVSxNQUFWLEVBQWtCLEdBQUdFLE1BQXJCO0VBQ0Q7O0VBRURNLEtBQUssQ0FBQyxHQUFHTixNQUFKLEVBQTRCO0lBQy9CLEtBQUtGLElBQUwsQ0FBVSxPQUFWLEVBQW1CLEdBQUdFLE1BQXRCO0VBQ0Q7O0FBdkMwQzs7Z0JBQWhDTCxpQkFDSTs7QUF5Q1YsTUFBTVksTUFBTSxHQUFHLElBQUlaLE1BQUosRUFBZiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9saWIvc2VydmljZXMvbG9nZ2VyL2xvZ2dlci5zZXJ2aWNlLnRzP2U2MDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBMb2dnZXJTZXJ2aWNlIH0gZnJvbSBcIi4vbG9nZ2VyLnNlcnZpY2UudHlwZXNcIjtcblxudHlwZSBTdXBwb3J0ZWRNZXRob2QgPSBcImxvZ1wiIHwgXCJpbmZvXCIgfCBcIndhcm5cIiB8IFwiZXJyb3JcIjtcblxuZXhwb3J0IGNsYXNzIExvZ2dlciBpbXBsZW1lbnRzIExvZ2dlclNlcnZpY2Uge1xuICBzdGF0aWMgZGVidWcgPSBmYWxzZTtcblxuICBuYW1lc3BhY2U/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IobmFtZXNwYWNlPzogc3RyaW5nKSB7XG4gICAgdGhpcy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG4gIH1cblxuICBwcml2YXRlIGVtaXQobWV0aG9kOiBTdXBwb3J0ZWRNZXRob2QsIC4uLnBhcmFtczogQXJyYXk8dW5rbm93bj4pIHtcbiAgICBpZiAoIUxvZ2dlci5kZWJ1Zykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm5hbWVzcGFjZSAmJiBtZXRob2QgIT09IFwiZXJyb3JcIikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGVbbWV0aG9kXSh0aGlzLm5hbWVzcGFjZSwgLi4ucGFyYW1zKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZVttZXRob2RdKC4uLnBhcmFtcyk7XG4gIH1cblxuICBsb2coLi4ucGFyYW1zOiBBcnJheTx1bmtub3duPikge1xuICAgIHRoaXMuZW1pdChcImxvZ1wiLCAuLi5wYXJhbXMpO1xuICB9XG5cbiAgaW5mbyguLi5wYXJhbXM6IEFycmF5PHVua25vd24+KSB7XG4gICAgdGhpcy5lbWl0KFwiaW5mb1wiLCAuLi5wYXJhbXMpO1xuICB9XG5cbiAgd2FybiguLi5wYXJhbXM6IEFycmF5PHVua25vd24+KSB7XG4gICAgdGhpcy5lbWl0KFwid2FyblwiLCAuLi5wYXJhbXMpO1xuICB9XG5cbiAgZXJyb3IoLi4ucGFyYW1zOiBBcnJheTx1bmtub3duPikge1xuICAgIHRoaXMuZW1pdChcImVycm9yXCIsIC4uLnBhcmFtcyk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcbiJdLCJuYW1lcyI6WyJMb2dnZXIiLCJjb25zdHJ1Y3RvciIsIm5hbWVzcGFjZSIsImVtaXQiLCJtZXRob2QiLCJwYXJhbXMiLCJkZWJ1ZyIsImNvbnNvbGUiLCJsb2ciLCJpbmZvIiwid2FybiIsImVycm9yIiwibG9nZ2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/logger/logger.service.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/logger/logger.service.types.ts":
/*!***************************************************************************!*\
  !*** ../../packages/core/src/lib/services/logger/logger.service.types.ts ***!
  \***************************************************************************/
/***/ (() => {

eval("//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL2xvZ2dlci9sb2dnZXIuc2VydmljZS50eXBlcy50cy5qcyIsIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9saWIvc2VydmljZXMvbG9nZ2VyL2xvZ2dlci5zZXJ2aWNlLnR5cGVzLnRzPzdmYjgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBMb2dnZXJTZXJ2aWNlIHtcbiAgbG9nKC4uLnBhcmFtczogQXJyYXk8dW5rbm93bj4pOiB2b2lkO1xuICBpbmZvKC4uLnBhcmFtczogQXJyYXk8dW5rbm93bj4pOiB2b2lkO1xuICB3YXJuKC4uLnBhcmFtczogQXJyYXk8dW5rbm93bj4pOiB2b2lkO1xuICBlcnJvciguLi5wYXJhbXM6IEFycmF5PHVua25vd24+KTogdm9pZDtcbn1cbiJdLCJtYXBwaW5ncyI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/logger/logger.service.types.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/provider/provider.service.ts":
/*!*************************************************************************!*\
  !*** ../../packages/core/src/lib/services/provider/provider.service.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Provider\": () => (/* binding */ Provider)\n/* harmony export */ });\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! near-api-js */ \"near-api-js\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(near_api_js__WEBPACK_IMPORTED_MODULE_0__);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass Provider {\n  constructor(url) {\n    _defineProperty(this, \"provider\", void 0);\n\n    this.provider = new near_api_js__WEBPACK_IMPORTED_MODULE_0__.providers.JsonRpcProvider({\n      url\n    });\n  }\n\n  query(params) {\n    return this.provider.query(params);\n  }\n\n  viewAccessKey({\n    accountId,\n    publicKey\n  }) {\n    return this.query({\n      request_type: \"view_access_key\",\n      finality: \"final\",\n      account_id: accountId,\n      public_key: publicKey\n    });\n  }\n\n  block(reference) {\n    return this.provider.block(reference);\n  }\n\n  sendTransaction(signedTransaction) {\n    return this.provider.sendTransaction(signedTransaction);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL3Byb3ZpZGVyL3Byb3ZpZGVyLnNlcnZpY2UudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQWFPLE1BQU1DLFFBQU4sQ0FBMEM7RUFHL0NDLFdBQVcsQ0FBQ0MsR0FBRCxFQUFjO0lBQUE7O0lBQ3ZCLEtBQUtDLFFBQUwsR0FBZ0IsSUFBSUosa0VBQUosQ0FBOEI7TUFBRUc7SUFBRixDQUE5QixDQUFoQjtFQUNEOztFQUVERyxLQUFLLENBQXFDQyxNQUFyQyxFQUEwRDtJQUM3RCxPQUFPLEtBQUtILFFBQUwsQ0FBY0UsS0FBZCxDQUE4QkMsTUFBOUIsQ0FBUDtFQUNEOztFQUVEQyxhQUFhLENBQUM7SUFBRUMsU0FBRjtJQUFhQztFQUFiLENBQUQsRUFBZ0Q7SUFDM0QsT0FBTyxLQUFLSixLQUFMLENBQTBCO01BQy9CSyxZQUFZLEVBQUUsaUJBRGlCO01BRS9CQyxRQUFRLEVBQUUsT0FGcUI7TUFHL0JDLFVBQVUsRUFBRUosU0FIbUI7TUFJL0JLLFVBQVUsRUFBRUo7SUFKbUIsQ0FBMUIsQ0FBUDtFQU1EOztFQUVESyxLQUFLLENBQUNDLFNBQUQsRUFBNEI7SUFDL0IsT0FBTyxLQUFLWixRQUFMLENBQWNXLEtBQWQsQ0FBb0JDLFNBQXBCLENBQVA7RUFDRDs7RUFFREMsZUFBZSxDQUFDQyxpQkFBRCxFQUF1QztJQUNwRCxPQUFPLEtBQUtkLFFBQUwsQ0FBY2EsZUFBZCxDQUE4QkMsaUJBQTlCLENBQVA7RUFDRDs7QUExQjhDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL3BhY2thZ2VzL2NvcmUvc3JjL2xpYi9zZXJ2aWNlcy9wcm92aWRlci9wcm92aWRlci5zZXJ2aWNlLnRzP2ZmNTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJvdmlkZXJzIH0gZnJvbSBcIm5lYXItYXBpLWpzXCI7XG5pbXBvcnQgdHlwZSB7XG4gIEFjY2Vzc0tleVZpZXcsXG4gIEJsb2NrUmVmZXJlbmNlLFxuICBRdWVyeVJlc3BvbnNlS2luZCxcbn0gZnJvbSBcIm5lYXItYXBpLWpzL2xpYi9wcm92aWRlcnMvcHJvdmlkZXJcIjtcbmltcG9ydCB7IFNpZ25lZFRyYW5zYWN0aW9uIH0gZnJvbSBcIm5lYXItYXBpLWpzL2xpYi90cmFuc2FjdGlvblwiO1xuaW1wb3J0IHR5cGUge1xuICBQcm92aWRlclNlcnZpY2UsXG4gIFF1ZXJ5UGFyYW1zLFxuICBWaWV3QWNjZXNzS2V5UGFyYW1zLFxufSBmcm9tIFwiLi9wcm92aWRlci5zZXJ2aWNlLnR5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBQcm92aWRlciBpbXBsZW1lbnRzIFByb3ZpZGVyU2VydmljZSB7XG4gIHByaXZhdGUgcHJvdmlkZXI6IHByb3ZpZGVycy5Kc29uUnBjUHJvdmlkZXI7XG5cbiAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb3ZpZGVyID0gbmV3IHByb3ZpZGVycy5Kc29uUnBjUHJvdmlkZXIoeyB1cmwgfSk7XG4gIH1cblxuICBxdWVyeTxSZXNwb25zZSBleHRlbmRzIFF1ZXJ5UmVzcG9uc2VLaW5kPihwYXJhbXM6IFF1ZXJ5UGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvdmlkZXIucXVlcnk8UmVzcG9uc2U+KHBhcmFtcyk7XG4gIH1cblxuICB2aWV3QWNjZXNzS2V5KHsgYWNjb3VudElkLCBwdWJsaWNLZXkgfTogVmlld0FjY2Vzc0tleVBhcmFtcykge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5PEFjY2Vzc0tleVZpZXc+KHtcbiAgICAgIHJlcXVlc3RfdHlwZTogXCJ2aWV3X2FjY2Vzc19rZXlcIixcbiAgICAgIGZpbmFsaXR5OiBcImZpbmFsXCIsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgICBwdWJsaWNfa2V5OiBwdWJsaWNLZXksXG4gICAgfSk7XG4gIH1cblxuICBibG9jayhyZWZlcmVuY2U6IEJsb2NrUmVmZXJlbmNlKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvdmlkZXIuYmxvY2socmVmZXJlbmNlKTtcbiAgfVxuXG4gIHNlbmRUcmFuc2FjdGlvbihzaWduZWRUcmFuc2FjdGlvbjogU2lnbmVkVHJhbnNhY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy5wcm92aWRlci5zZW5kVHJhbnNhY3Rpb24oc2lnbmVkVHJhbnNhY3Rpb24pO1xuICB9XG59XG4iXSwibmFtZXMiOlsicHJvdmlkZXJzIiwiUHJvdmlkZXIiLCJjb25zdHJ1Y3RvciIsInVybCIsInByb3ZpZGVyIiwiSnNvblJwY1Byb3ZpZGVyIiwicXVlcnkiLCJwYXJhbXMiLCJ2aWV3QWNjZXNzS2V5IiwiYWNjb3VudElkIiwicHVibGljS2V5IiwicmVxdWVzdF90eXBlIiwiZmluYWxpdHkiLCJhY2NvdW50X2lkIiwicHVibGljX2tleSIsImJsb2NrIiwicmVmZXJlbmNlIiwic2VuZFRyYW5zYWN0aW9uIiwic2lnbmVkVHJhbnNhY3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/provider/provider.service.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/provider/provider.service.types.ts":
/*!*******************************************************************************!*\
  !*** ../../packages/core/src/lib/services/provider/provider.service.types.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);


/***/ }),

/***/ "../../packages/core/src/lib/services/storage/json-storage.service.ts":
/*!****************************************************************************!*\
  !*** ../../packages/core/src/lib/services/storage/json-storage.service.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"JsonStorage\": () => (/* binding */ JsonStorage)\n/* harmony export */ });\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst KEY_DELIMITER = \":\";\nclass JsonStorage {\n  constructor(storage, namespace) {\n    _defineProperty(this, \"storage\", void 0);\n\n    _defineProperty(this, \"namespace\", void 0);\n\n    this.storage = storage;\n    this.namespace = Array.isArray(namespace) ? namespace.join(KEY_DELIMITER) : namespace;\n  }\n\n  resolveKey(key) {\n    return [this.namespace, key].join(KEY_DELIMITER);\n  }\n\n  getItem(key) {\n    return this.storage.getItem(this.resolveKey(key)).then(item => {\n      return typeof item === \"string\" ? JSON.parse(item) : null;\n    });\n  }\n\n  setItem(key, value) {\n    return this.storage.setItem(this.resolveKey(key), JSON.stringify(value));\n  }\n\n  removeItem(key) {\n    return this.storage.removeItem(this.resolveKey(key));\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL3N0b3JhZ2UvanNvbi1zdG9yYWdlLnNlcnZpY2UudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBR0EsTUFBTUEsYUFBYSxHQUFHLEdBQXRCO0FBRU8sTUFBTUMsV0FBTixDQUFnRDtFQUlyREMsV0FBVyxDQUFDQyxPQUFELEVBQTBCQyxTQUExQixFQUE2RDtJQUFBOztJQUFBOztJQUN0RSxLQUFLRCxPQUFMLEdBQWVBLE9BQWY7SUFDQSxLQUFLQyxTQUFMLEdBQWlCQyxLQUFLLENBQUNDLE9BQU4sQ0FBY0YsU0FBZCxJQUNiQSxTQUFTLENBQUNHLElBQVYsQ0FBZVAsYUFBZixDQURhLEdBRWJJLFNBRko7RUFHRDs7RUFFT0ksVUFBVSxDQUFDQyxHQUFELEVBQWM7SUFDOUIsT0FBTyxDQUFDLEtBQUtMLFNBQU4sRUFBaUJLLEdBQWpCLEVBQXNCRixJQUF0QixDQUEyQlAsYUFBM0IsQ0FBUDtFQUNEOztFQUVEVSxPQUFPLENBQVFELEdBQVIsRUFBNEM7SUFDakQsT0FBTyxLQUFLTixPQUFMLENBQWFPLE9BQWIsQ0FBcUIsS0FBS0YsVUFBTCxDQUFnQkMsR0FBaEIsQ0FBckIsRUFBMkNFLElBQTNDLENBQWlEQyxJQUFELElBQVU7TUFDL0QsT0FBTyxPQUFPQSxJQUFQLEtBQWdCLFFBQWhCLEdBQTRCQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0YsSUFBWCxDQUE1QixHQUF5RCxJQUFoRTtJQUNELENBRk0sQ0FBUDtFQUdEOztFQUVERyxPQUFPLENBQVFOLEdBQVIsRUFBcUJPLEtBQXJCLEVBQWtEO0lBQ3ZELE9BQU8sS0FBS2IsT0FBTCxDQUFhWSxPQUFiLENBQXFCLEtBQUtQLFVBQUwsQ0FBZ0JDLEdBQWhCLENBQXJCLEVBQTJDSSxJQUFJLENBQUNJLFNBQUwsQ0FBZUQsS0FBZixDQUEzQyxDQUFQO0VBQ0Q7O0VBRURFLFVBQVUsQ0FBQ1QsR0FBRCxFQUE2QjtJQUNyQyxPQUFPLEtBQUtOLE9BQUwsQ0FBYWUsVUFBYixDQUF3QixLQUFLVixVQUFMLENBQWdCQyxHQUFoQixDQUF4QixDQUFQO0VBQ0Q7O0FBM0JvRCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9saWIvc2VydmljZXMvc3RvcmFnZS9qc29uLXN0b3JhZ2Uuc2VydmljZS50cz80NTE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgU3RvcmFnZVNlcnZpY2UgfSBmcm9tIFwiLi9zdG9yYWdlLnNlcnZpY2UudHlwZXNcIjtcbmltcG9ydCB0eXBlIHsgSnNvblN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSBcIi4vanNvbi1zdG9yYWdlLnNlcnZpY2UudHlwZXNcIjtcblxuY29uc3QgS0VZX0RFTElNSVRFUiA9IFwiOlwiO1xuXG5leHBvcnQgY2xhc3MgSnNvblN0b3JhZ2UgaW1wbGVtZW50cyBKc29uU3RvcmFnZVNlcnZpY2Uge1xuICBzdG9yYWdlOiBTdG9yYWdlU2VydmljZTtcbiAgbmFtZXNwYWNlOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioc3RvcmFnZTogU3RvcmFnZVNlcnZpY2UsIG5hbWVzcGFjZTogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPikge1xuICAgIHRoaXMuc3RvcmFnZSA9IHN0b3JhZ2U7XG4gICAgdGhpcy5uYW1lc3BhY2UgPSBBcnJheS5pc0FycmF5KG5hbWVzcGFjZSlcbiAgICAgID8gbmFtZXNwYWNlLmpvaW4oS0VZX0RFTElNSVRFUilcbiAgICAgIDogbmFtZXNwYWNlO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNvbHZlS2V5KGtleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIFt0aGlzLm5hbWVzcGFjZSwga2V5XS5qb2luKEtFWV9ERUxJTUlURVIpO1xuICB9XG5cbiAgZ2V0SXRlbTxWYWx1ZT4oa2V5OiBzdHJpbmcpOiBQcm9taXNlPFZhbHVlIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnJlc29sdmVLZXkoa2V5KSkudGhlbigoaXRlbSkgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiID8gKEpTT04ucGFyc2UoaXRlbSkgYXMgVmFsdWUpIDogbnVsbDtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEl0ZW08VmFsdWU+KGtleTogc3RyaW5nLCB2YWx1ZTogVmFsdWUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy5yZXNvbHZlS2V5KGtleSksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gIH1cblxuICByZW1vdmVJdGVtKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMucmVzb2x2ZUtleShrZXkpKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIktFWV9ERUxJTUlURVIiLCJKc29uU3RvcmFnZSIsImNvbnN0cnVjdG9yIiwic3RvcmFnZSIsIm5hbWVzcGFjZSIsIkFycmF5IiwiaXNBcnJheSIsImpvaW4iLCJyZXNvbHZlS2V5Iiwia2V5IiwiZ2V0SXRlbSIsInRoZW4iLCJpdGVtIiwiSlNPTiIsInBhcnNlIiwic2V0SXRlbSIsInZhbHVlIiwic3RyaW5naWZ5IiwicmVtb3ZlSXRlbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/storage/json-storage.service.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/storage/json-storage.service.types.ts":
/*!**********************************************************************************!*\
  !*** ../../packages/core/src/lib/services/storage/json-storage.service.types.ts ***!
  \**********************************************************************************/
/***/ (() => {

eval("//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL3N0b3JhZ2UvanNvbi1zdG9yYWdlLnNlcnZpY2UudHlwZXMudHMuanMiLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL3N0b3JhZ2UvanNvbi1zdG9yYWdlLnNlcnZpY2UudHlwZXMudHM/NzdjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIEpzb25TdG9yYWdlU2VydmljZSB7XG4gIGdldEl0ZW08VmFsdWU+KGtleTogc3RyaW5nKTogUHJvbWlzZTxWYWx1ZSB8IG51bGw+O1xuICBzZXRJdGVtPFZhbHVlPihrZXk6IHN0cmluZywgdmFsdWU6IFZhbHVlKTogUHJvbWlzZTx2b2lkPjtcbiAgcmVtb3ZlSXRlbShrZXk6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG59XG4iXSwibWFwcGluZ3MiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/storage/json-storage.service.types.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/storage/storage.service.types.ts":
/*!*****************************************************************************!*\
  !*** ../../packages/core/src/lib/services/storage/storage.service.types.ts ***!
  \*****************************************************************************/
/***/ (() => {

eval("//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL3N0b3JhZ2Uvc3RvcmFnZS5zZXJ2aWNlLnR5cGVzLnRzLmpzIiwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL3BhY2thZ2VzL2NvcmUvc3JjL2xpYi9zZXJ2aWNlcy9zdG9yYWdlL3N0b3JhZ2Uuc2VydmljZS50eXBlcy50cz9kN2YwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgU3RvcmFnZVNlcnZpY2Uge1xuICBnZXRJdGVtKGtleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPjtcbiAgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xufVxuIl0sIm1hcHBpbmdzIjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/storage/storage.service.types.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/storage/web-storage.service.ts":
/*!***************************************************************************!*\
  !*** ../../packages/core/src/lib/services/storage/web-storage.service.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"WebStorageService\": () => (/* binding */ WebStorageService)\n/* harmony export */ });\nclass WebStorageService {\n  getItem(key) {\n    return new Promise(resolve => {\n      const value = localStorage.getItem(key);\n      resolve(value);\n    });\n  }\n\n  setItem(key, value) {\n    return new Promise(resolve => {\n      localStorage.setItem(key, value);\n      resolve();\n    });\n  }\n\n  removeItem(key) {\n    return new Promise(resolve => {\n      localStorage.removeItem(key);\n      resolve();\n    });\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL3N0b3JhZ2Uvd2ViLXN0b3JhZ2Uuc2VydmljZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sTUFBTUEsaUJBQU4sQ0FBa0Q7RUFDdkRDLE9BQU8sQ0FBQ0MsR0FBRCxFQUFzQztJQUMzQyxPQUFPLElBQUlDLE9BQUosQ0FBYUMsT0FBRCxJQUFhO01BQzlCLE1BQU1DLEtBQUssR0FBR0MsWUFBWSxDQUFDTCxPQUFiLENBQXFCQyxHQUFyQixDQUFkO01BRUFFLE9BQU8sQ0FBQ0MsS0FBRCxDQUFQO0lBQ0QsQ0FKTSxDQUFQO0VBS0Q7O0VBRURFLE9BQU8sQ0FBQ0wsR0FBRCxFQUFjRyxLQUFkLEVBQTRDO0lBQ2pELE9BQU8sSUFBSUYsT0FBSixDQUFhQyxPQUFELElBQWE7TUFDOUJFLFlBQVksQ0FBQ0MsT0FBYixDQUFxQkwsR0FBckIsRUFBMEJHLEtBQTFCO01BRUFELE9BQU87SUFDUixDQUpNLENBQVA7RUFLRDs7RUFFREksVUFBVSxDQUFDTixHQUFELEVBQTZCO0lBQ3JDLE9BQU8sSUFBSUMsT0FBSixDQUFhQyxPQUFELElBQWE7TUFDOUJFLFlBQVksQ0FBQ0UsVUFBYixDQUF3Qk4sR0FBeEI7TUFFQUUsT0FBTztJQUNSLENBSk0sQ0FBUDtFQUtEOztBQXZCc0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL3N0b3JhZ2Uvd2ViLXN0b3JhZ2Uuc2VydmljZS50cz8zZDljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgU3RvcmFnZVNlcnZpY2UgfSBmcm9tIFwiLi9zdG9yYWdlLnNlcnZpY2UudHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIFdlYlN0b3JhZ2VTZXJ2aWNlIGltcGxlbWVudHMgU3RvcmFnZVNlcnZpY2Uge1xuICBnZXRJdGVtKGtleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG5cbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG5cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG5cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIldlYlN0b3JhZ2VTZXJ2aWNlIiwiZ2V0SXRlbSIsImtleSIsIlByb21pc2UiLCJyZXNvbHZlIiwidmFsdWUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/storage/web-storage.service.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/services/wallet-modules/wallet-modules.service.ts":
/*!*************************************************************************************!*\
  !*** ../../packages/core/src/lib/services/wallet-modules/wallet-modules.service.ts ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"WalletModules\": () => (/* binding */ WalletModules)\n/* harmony export */ });\n/* harmony import */ var _event_emitter_event_emitter_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../event-emitter/event-emitter.service */ \"../../packages/core/src/lib/services/event-emitter/event-emitter.service.ts\");\n/* harmony import */ var _logger_logger_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../logger/logger.service */ \"../../packages/core/src/lib/services/logger/logger.service.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../constants */ \"../../packages/core/src/lib/constants.ts\");\n/* harmony import */ var _storage_json_storage_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../storage/json-storage.service */ \"../../packages/core/src/lib/services/storage/json-storage.service.ts\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nclass WalletModules {\n  constructor({\n    factories,\n    storage,\n    options,\n    store,\n    emitter,\n    provider\n  }) {\n    _defineProperty(this, \"factories\", void 0);\n\n    _defineProperty(this, \"storage\", void 0);\n\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"store\", void 0);\n\n    _defineProperty(this, \"emitter\", void 0);\n\n    _defineProperty(this, \"provider\", void 0);\n\n    _defineProperty(this, \"modules\", void 0);\n\n    _defineProperty(this, \"instances\", void 0);\n\n    this.factories = factories;\n    this.storage = storage;\n    this.options = options;\n    this.store = store;\n    this.emitter = emitter;\n    this.provider = provider;\n    this.modules = [];\n    this.instances = {};\n  }\n\n  async validateWallet(id) {\n    let accounts = [];\n    const wallet = await this.getWallet(id);\n\n    if (wallet) {\n      // Ensure our persistent state aligns with the selected wallet.\n      // For example a wallet is selected, but it returns no accounts (not signed in).\n      accounts = await wallet.getAccounts().catch(err => {\n        _logger_logger_service__WEBPACK_IMPORTED_MODULE_1__.logger.log(`Failed to validate ${wallet.id} during setup`);\n        _logger_logger_service__WEBPACK_IMPORTED_MODULE_1__.logger.error(err);\n        return [];\n      });\n    }\n\n    return accounts;\n  }\n\n  async resolveStorageState() {\n    const jsonStorage = new _storage_json_storage_service__WEBPACK_IMPORTED_MODULE_3__.JsonStorage(this.storage, _constants__WEBPACK_IMPORTED_MODULE_2__.PACKAGE_NAME);\n    const pendingSelectedWalletId = await jsonStorage.getItem(_constants__WEBPACK_IMPORTED_MODULE_2__.PENDING_SELECTED_WALLET_ID);\n    const pendingContract = await jsonStorage.getItem(_constants__WEBPACK_IMPORTED_MODULE_2__.PENDING_CONTRACT);\n\n    if (pendingSelectedWalletId && pendingContract) {\n      const accounts = await this.validateWallet(pendingSelectedWalletId);\n      await jsonStorage.removeItem(_constants__WEBPACK_IMPORTED_MODULE_2__.PENDING_SELECTED_WALLET_ID);\n      await jsonStorage.removeItem(_constants__WEBPACK_IMPORTED_MODULE_2__.PENDING_CONTRACT);\n\n      if (accounts.length) {\n        const {\n          selectedWalletId\n        } = this.store.getState();\n        const selectedWallet = await this.getWallet(selectedWalletId);\n\n        if (selectedWallet && pendingSelectedWalletId !== selectedWalletId) {\n          await selectedWallet.signOut().catch(err => {\n            _logger_logger_service__WEBPACK_IMPORTED_MODULE_1__.logger.log(\"Failed to sign out existing wallet\");\n            _logger_logger_service__WEBPACK_IMPORTED_MODULE_1__.logger.error(err);\n          });\n        }\n\n        return {\n          accounts,\n          contract: pendingContract,\n          selectedWalletId: pendingSelectedWalletId\n        };\n      }\n    }\n\n    const {\n      contract,\n      selectedWalletId\n    } = this.store.getState();\n    const accounts = await this.validateWallet(selectedWalletId);\n\n    if (!accounts.length) {\n      return {\n        accounts: [],\n        contract: null,\n        selectedWalletId: null\n      };\n    }\n\n    return {\n      accounts,\n      contract,\n      selectedWalletId\n    };\n  }\n\n  async signOutWallet(walletId) {\n    const wallet = await this.getWallet(walletId);\n    await wallet.signOut().catch(err => {\n      _logger_logger_service__WEBPACK_IMPORTED_MODULE_1__.logger.log(`Failed to sign out ${wallet.id}`);\n      _logger_logger_service__WEBPACK_IMPORTED_MODULE_1__.logger.error(err); // At least clean up state on our side.\n\n      this.onWalletSignedOut(wallet.id);\n    });\n  }\n\n  async onWalletSignedIn(walletId, {\n    accounts,\n    contractId,\n    methodNames\n  }) {\n    const {\n      selectedWalletId\n    } = this.store.getState();\n    const jsonStorage = new _storage_json_storage_service__WEBPACK_IMPORTED_MODULE_3__.JsonStorage(this.storage, _constants__WEBPACK_IMPORTED_MODULE_2__.PACKAGE_NAME);\n    const contract = {\n      contractId,\n      methodNames\n    };\n\n    if (!accounts.length) {\n      const module = this.getModule(walletId); // We can't guarantee the user will actually sign in with browser wallets.\n      // Best we can do is set in storage and validate on init.\n\n      if (module.type === \"browser\") {\n        await jsonStorage.setItem(_constants__WEBPACK_IMPORTED_MODULE_2__.PENDING_SELECTED_WALLET_ID, walletId);\n        await jsonStorage.setItem(_constants__WEBPACK_IMPORTED_MODULE_2__.PENDING_CONTRACT, contract);\n      }\n\n      return;\n    }\n\n    if (selectedWalletId && selectedWalletId !== walletId) {\n      await this.signOutWallet(selectedWalletId);\n    }\n\n    this.store.dispatch({\n      type: \"WALLET_CONNECTED\",\n      payload: {\n        walletId,\n        contract,\n        accounts\n      }\n    });\n  }\n\n  onWalletSignedOut(walletId) {\n    this.store.dispatch({\n      type: \"WALLET_DISCONNECTED\",\n      payload: {\n        walletId\n      }\n    });\n  }\n\n  setupWalletEmitter(module) {\n    const emitter = new _event_emitter_event_emitter_service__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();\n    emitter.on(\"signedOut\", () => {\n      this.onWalletSignedOut(module.id);\n    });\n    emitter.on(\"signedIn\", event => {\n      this.onWalletSignedIn(module.id, event);\n    });\n    emitter.on(\"accountsChanged\", async ({\n      accounts\n    }) => {\n      if (!accounts.length) {\n        return this.signOutWallet(module.id);\n      }\n\n      this.store.dispatch({\n        type: \"ACCOUNTS_CHANGED\",\n        payload: {\n          walletId: module.id,\n          accounts\n        }\n      });\n    });\n    emitter.on(\"networkChanged\", ({\n      networkId\n    }) => {\n      this.emitter.emit(\"networkChanged\", {\n        walletId: module.id,\n        networkId\n      });\n    });\n    return emitter;\n  }\n\n  decorateWallet(wallet) {\n    const _signIn = wallet.signIn;\n    const _signOut = wallet.signOut;\n\n    wallet.signIn = async params => {\n      const accounts = await _signIn(params);\n      const {\n        contractId,\n        methodNames = []\n      } = params;\n      await this.onWalletSignedIn(wallet.id, {\n        accounts,\n        contractId,\n        methodNames\n      });\n      return accounts;\n    };\n\n    wallet.signOut = async () => {\n      await _signOut();\n      this.onWalletSignedOut(wallet.id);\n    };\n\n    return wallet;\n  }\n\n  async setupInstance(module) {\n    if (!module.metadata.available) {\n      const message = module.type === \"injected\" ? \"not installed\" : \"not available\";\n      throw Error(`${module.metadata.name} is ${message}`);\n    }\n\n    const wallet = _objectSpread({\n      id: module.id,\n      type: module.type,\n      metadata: module.metadata\n    }, await module.init({\n      id: module.id,\n      type: module.type,\n      metadata: module.metadata,\n      options: this.options,\n      store: this.store.toReadOnly(),\n      provider: this.provider,\n      emitter: this.setupWalletEmitter(module),\n      logger: new _logger_logger_service__WEBPACK_IMPORTED_MODULE_1__.Logger(module.id),\n      storage: new _storage_json_storage_service__WEBPACK_IMPORTED_MODULE_3__.JsonStorage(this.storage, [_constants__WEBPACK_IMPORTED_MODULE_2__.PACKAGE_NAME, module.id])\n    }));\n\n    return this.decorateWallet(wallet);\n  }\n\n  getModule(id) {\n    return this.modules.find(x => x.id === id);\n  }\n\n  async getWallet(id) {\n    const module = this.getModule(id);\n\n    if (!module) {\n      return null;\n    }\n\n    const {\n      selectedWalletId\n    } = this.store.getState(); // If user uninstalled/removed a wallet which was previously signed in with\n    // best we can do is clean up state on our side.\n\n    if (!module.metadata.available && selectedWalletId) {\n      this.onWalletSignedOut(selectedWalletId);\n      return null;\n    }\n\n    return await module.wallet();\n  }\n\n  async setup() {\n    const modules = [];\n\n    for (let i = 0; i < this.factories.length; i += 1) {\n      const module = await this.factories[i]({\n        options: this.options\n      }).catch(err => {\n        _logger_logger_service__WEBPACK_IMPORTED_MODULE_1__.logger.log(\"Failed to setup module\");\n        _logger_logger_service__WEBPACK_IMPORTED_MODULE_1__.logger.error(err);\n        return null;\n      }); // Filter out wallets that aren't available.\n\n      if (!module) {\n        continue;\n      } // Skip duplicated module.\n\n\n      if (modules.some(x => x.id === module.id)) {\n        continue;\n      }\n\n      modules.push({\n        id: module.id,\n        type: module.type,\n        metadata: module.metadata,\n        wallet: async () => {\n          let instance = this.instances[module.id];\n\n          if (instance) {\n            return instance;\n          }\n\n          instance = await this.setupInstance(module);\n          this.instances[module.id] = instance;\n          return instance;\n        }\n      });\n    }\n\n    this.modules = modules;\n    const {\n      accounts,\n      contract,\n      selectedWalletId\n    } = await this.resolveStorageState();\n    this.store.dispatch({\n      type: \"SETUP_WALLET_MODULES\",\n      payload: {\n        modules,\n        accounts,\n        contract,\n        selectedWalletId\n      }\n    });\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3NlcnZpY2VzL3dhbGxldC1tb2R1bGVzL3dhbGxldC1tb2R1bGVzLnNlcnZpY2UudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFZQTtBQUVBO0FBQ0E7QUFLQTtBQUdPLE1BQU1PLGFBQU4sQ0FBb0I7RUFXekJDLFdBQVcsQ0FBQztJQUNWQyxTQURVO0lBRVZDLE9BRlU7SUFHVkMsT0FIVTtJQUlWQyxLQUpVO0lBS1ZDLE9BTFU7SUFNVkM7RUFOVSxDQUFELEVBT2E7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFDdEIsS0FBS0wsU0FBTCxHQUFpQkEsU0FBakI7SUFDQSxLQUFLQyxPQUFMLEdBQWVBLE9BQWY7SUFDQSxLQUFLQyxPQUFMLEdBQWVBLE9BQWY7SUFDQSxLQUFLQyxLQUFMLEdBQWFBLEtBQWI7SUFDQSxLQUFLQyxPQUFMLEdBQWVBLE9BQWY7SUFDQSxLQUFLQyxRQUFMLEdBQWdCQSxRQUFoQjtJQUVBLEtBQUtDLE9BQUwsR0FBZSxFQUFmO0lBQ0EsS0FBS0MsU0FBTCxHQUFpQixFQUFqQjtFQUNEOztFQUUyQixNQUFkQyxjQUFjLENBQUNDLEVBQUQsRUFBb0I7SUFDOUMsSUFBSUMsUUFBd0IsR0FBRyxFQUEvQjtJQUNBLE1BQU1DLE1BQU0sR0FBRyxNQUFNLEtBQUtDLFNBQUwsQ0FBZUgsRUFBZixDQUFyQjs7SUFFQSxJQUFJRSxNQUFKLEVBQVk7TUFDVjtNQUNBO01BQ0FELFFBQVEsR0FBRyxNQUFNQyxNQUFNLENBQUNFLFdBQVAsR0FBcUJDLEtBQXJCLENBQTRCQyxHQUFELElBQVM7UUFDbkR0Qiw4REFBQSxDQUFZLHNCQUFxQmtCLE1BQU0sQ0FBQ0YsRUFBRyxlQUEzQztRQUNBaEIsZ0VBQUEsQ0FBYXNCLEdBQWI7UUFFQSxPQUFPLEVBQVA7TUFDRCxDQUxnQixDQUFqQjtJQU1EOztJQUVELE9BQU9MLFFBQVA7RUFDRDs7RUFFZ0MsTUFBbkJRLG1CQUFtQixHQUFHO0lBQ2xDLE1BQU1DLFdBQVcsR0FBRyxJQUFJdEIsc0VBQUosQ0FBZ0IsS0FBS0ksT0FBckIsRUFBOEJQLG9EQUE5QixDQUFwQjtJQUNBLE1BQU0wQix1QkFBdUIsR0FBRyxNQUFNRCxXQUFXLENBQUNFLE9BQVosQ0FDcEN6QixrRUFEb0MsQ0FBdEM7SUFHQSxNQUFNMEIsZUFBZSxHQUFHLE1BQU1ILFdBQVcsQ0FBQ0UsT0FBWixDQUM1QjFCLHdEQUQ0QixDQUE5Qjs7SUFJQSxJQUFJeUIsdUJBQXVCLElBQUlFLGVBQS9CLEVBQWdEO01BQzlDLE1BQU1aLFFBQVEsR0FBRyxNQUFNLEtBQUtGLGNBQUwsQ0FBb0JZLHVCQUFwQixDQUF2QjtNQUVBLE1BQU1ELFdBQVcsQ0FBQ0ksVUFBWixDQUF1QjNCLGtFQUF2QixDQUFOO01BQ0EsTUFBTXVCLFdBQVcsQ0FBQ0ksVUFBWixDQUF1QjVCLHdEQUF2QixDQUFOOztNQUVBLElBQUllLFFBQVEsQ0FBQ2MsTUFBYixFQUFxQjtRQUNuQixNQUFNO1VBQUVDO1FBQUYsSUFBdUIsS0FBS3RCLEtBQUwsQ0FBV3VCLFFBQVgsRUFBN0I7UUFDQSxNQUFNQyxjQUFjLEdBQUcsTUFBTSxLQUFLZixTQUFMLENBQWVhLGdCQUFmLENBQTdCOztRQUVBLElBQUlFLGNBQWMsSUFBSVAsdUJBQXVCLEtBQUtLLGdCQUFsRCxFQUFvRTtVQUNsRSxNQUFNRSxjQUFjLENBQUNDLE9BQWYsR0FBeUJkLEtBQXpCLENBQWdDQyxHQUFELElBQVM7WUFDNUN0Qiw4REFBQSxDQUFXLG9DQUFYO1lBQ0FBLGdFQUFBLENBQWFzQixHQUFiO1VBQ0QsQ0FISyxDQUFOO1FBSUQ7O1FBRUQsT0FBTztVQUNMTCxRQURLO1VBRUxtQixRQUFRLEVBQUVQLGVBRkw7VUFHTEcsZ0JBQWdCLEVBQUVMO1FBSGIsQ0FBUDtNQUtEO0lBQ0Y7O0lBRUQsTUFBTTtNQUFFUyxRQUFGO01BQVlKO0lBQVosSUFBaUMsS0FBS3RCLEtBQUwsQ0FBV3VCLFFBQVgsRUFBdkM7SUFDQSxNQUFNaEIsUUFBUSxHQUFHLE1BQU0sS0FBS0YsY0FBTCxDQUFvQmlCLGdCQUFwQixDQUF2Qjs7SUFFQSxJQUFJLENBQUNmLFFBQVEsQ0FBQ2MsTUFBZCxFQUFzQjtNQUNwQixPQUFPO1FBQ0xkLFFBQVEsRUFBRSxFQURMO1FBRUxtQixRQUFRLEVBQUUsSUFGTDtRQUdMSixnQkFBZ0IsRUFBRTtNQUhiLENBQVA7SUFLRDs7SUFFRCxPQUFPO01BQ0xmLFFBREs7TUFFTG1CLFFBRks7TUFHTEo7SUFISyxDQUFQO0VBS0Q7O0VBRTBCLE1BQWJLLGFBQWEsQ0FBQ0MsUUFBRCxFQUFtQjtJQUM1QyxNQUFNcEIsTUFBTSxHQUFJLE1BQU0sS0FBS0MsU0FBTCxDQUFlbUIsUUFBZixDQUF0QjtJQUVBLE1BQU1wQixNQUFNLENBQUNpQixPQUFQLEdBQWlCZCxLQUFqQixDQUF3QkMsR0FBRCxJQUFTO01BQ3BDdEIsOERBQUEsQ0FBWSxzQkFBcUJrQixNQUFNLENBQUNGLEVBQUcsRUFBM0M7TUFDQWhCLGdFQUFBLENBQWFzQixHQUFiLEVBRm9DLENBSXBDOztNQUNBLEtBQUtpQixpQkFBTCxDQUF1QnJCLE1BQU0sQ0FBQ0YsRUFBOUI7SUFDRCxDQU5LLENBQU47RUFPRDs7RUFFNkIsTUFBaEJ3QixnQkFBZ0IsQ0FDNUJGLFFBRDRCLEVBRTVCO0lBQUVyQixRQUFGO0lBQVl3QixVQUFaO0lBQXdCQztFQUF4QixDQUY0QixFQUc1QjtJQUNBLE1BQU07TUFBRVY7SUFBRixJQUF1QixLQUFLdEIsS0FBTCxDQUFXdUIsUUFBWCxFQUE3QjtJQUNBLE1BQU1QLFdBQVcsR0FBRyxJQUFJdEIsc0VBQUosQ0FBZ0IsS0FBS0ksT0FBckIsRUFBOEJQLG9EQUE5QixDQUFwQjtJQUNBLE1BQU1tQyxRQUFRLEdBQUc7TUFBRUssVUFBRjtNQUFjQztJQUFkLENBQWpCOztJQUVBLElBQUksQ0FBQ3pCLFFBQVEsQ0FBQ2MsTUFBZCxFQUFzQjtNQUNwQixNQUFNWSxNQUFNLEdBQUcsS0FBS0MsU0FBTCxDQUFlTixRQUFmLENBQWYsQ0FEb0IsQ0FFcEI7TUFDQTs7TUFDQSxJQUFJSyxNQUFNLENBQUNFLElBQVAsS0FBZ0IsU0FBcEIsRUFBK0I7UUFDN0IsTUFBTW5CLFdBQVcsQ0FBQ29CLE9BQVosQ0FBb0IzQyxrRUFBcEIsRUFBZ0RtQyxRQUFoRCxDQUFOO1FBQ0EsTUFBTVosV0FBVyxDQUFDb0IsT0FBWixDQUFtQzVDLHdEQUFuQyxFQUFxRGtDLFFBQXJELENBQU47TUFDRDs7TUFFRDtJQUNEOztJQUVELElBQUlKLGdCQUFnQixJQUFJQSxnQkFBZ0IsS0FBS00sUUFBN0MsRUFBdUQ7TUFDckQsTUFBTSxLQUFLRCxhQUFMLENBQW1CTCxnQkFBbkIsQ0FBTjtJQUNEOztJQUVELEtBQUt0QixLQUFMLENBQVdxQyxRQUFYLENBQW9CO01BQ2xCRixJQUFJLEVBQUUsa0JBRFk7TUFFbEJHLE9BQU8sRUFBRTtRQUFFVixRQUFGO1FBQVlGLFFBQVo7UUFBc0JuQjtNQUF0QjtJQUZTLENBQXBCO0VBSUQ7O0VBRU9zQixpQkFBaUIsQ0FBQ0QsUUFBRCxFQUFtQjtJQUMxQyxLQUFLNUIsS0FBTCxDQUFXcUMsUUFBWCxDQUFvQjtNQUNsQkYsSUFBSSxFQUFFLHFCQURZO01BRWxCRyxPQUFPLEVBQUU7UUFBRVY7TUFBRjtJQUZTLENBQXBCO0VBSUQ7O0VBRU9XLGtCQUFrQixDQUFDTixNQUFELEVBQXVCO0lBQy9DLE1BQU1oQyxPQUFPLEdBQUcsSUFBSWIsOEVBQUosRUFBaEI7SUFFQWEsT0FBTyxDQUFDdUMsRUFBUixDQUFXLFdBQVgsRUFBd0IsTUFBTTtNQUM1QixLQUFLWCxpQkFBTCxDQUF1QkksTUFBTSxDQUFDM0IsRUFBOUI7SUFDRCxDQUZEO0lBSUFMLE9BQU8sQ0FBQ3VDLEVBQVIsQ0FBVyxVQUFYLEVBQXdCQyxLQUFELElBQVc7TUFDaEMsS0FBS1gsZ0JBQUwsQ0FBc0JHLE1BQU0sQ0FBQzNCLEVBQTdCLEVBQWlDbUMsS0FBakM7SUFDRCxDQUZEO0lBSUF4QyxPQUFPLENBQUN1QyxFQUFSLENBQVcsaUJBQVgsRUFBOEIsT0FBTztNQUFFakM7SUFBRixDQUFQLEtBQXdCO01BQ3BELElBQUksQ0FBQ0EsUUFBUSxDQUFDYyxNQUFkLEVBQXNCO1FBQ3BCLE9BQU8sS0FBS00sYUFBTCxDQUFtQk0sTUFBTSxDQUFDM0IsRUFBMUIsQ0FBUDtNQUNEOztNQUVELEtBQUtOLEtBQUwsQ0FBV3FDLFFBQVgsQ0FBb0I7UUFDbEJGLElBQUksRUFBRSxrQkFEWTtRQUVsQkcsT0FBTyxFQUFFO1VBQUVWLFFBQVEsRUFBRUssTUFBTSxDQUFDM0IsRUFBbkI7VUFBdUJDO1FBQXZCO01BRlMsQ0FBcEI7SUFJRCxDQVREO0lBV0FOLE9BQU8sQ0FBQ3VDLEVBQVIsQ0FBVyxnQkFBWCxFQUE2QixDQUFDO01BQUVFO0lBQUYsQ0FBRCxLQUFtQjtNQUM5QyxLQUFLekMsT0FBTCxDQUFhMEMsSUFBYixDQUFrQixnQkFBbEIsRUFBb0M7UUFBRWYsUUFBUSxFQUFFSyxNQUFNLENBQUMzQixFQUFuQjtRQUF1Qm9DO01BQXZCLENBQXBDO0lBQ0QsQ0FGRDtJQUlBLE9BQU96QyxPQUFQO0VBQ0Q7O0VBRU8yQyxjQUFjLENBQUNwQyxNQUFELEVBQXlCO0lBQzdDLE1BQU1xQyxPQUFPLEdBQUdyQyxNQUFNLENBQUNzQyxNQUF2QjtJQUNBLE1BQU1DLFFBQVEsR0FBR3ZDLE1BQU0sQ0FBQ2lCLE9BQXhCOztJQUVBakIsTUFBTSxDQUFDc0MsTUFBUCxHQUFnQixNQUFPRSxNQUFQLElBQXlCO01BQ3ZDLE1BQU16QyxRQUFRLEdBQUcsTUFBTXNDLE9BQU8sQ0FBQ0csTUFBRCxDQUE5QjtNQUVBLE1BQU07UUFBRWpCLFVBQUY7UUFBY0MsV0FBVyxHQUFHO01BQTVCLElBQW1DZ0IsTUFBekM7TUFDQSxNQUFNLEtBQUtsQixnQkFBTCxDQUFzQnRCLE1BQU0sQ0FBQ0YsRUFBN0IsRUFBaUM7UUFDckNDLFFBRHFDO1FBRXJDd0IsVUFGcUM7UUFHckNDO01BSHFDLENBQWpDLENBQU47TUFNQSxPQUFPekIsUUFBUDtJQUNELENBWEQ7O0lBYUFDLE1BQU0sQ0FBQ2lCLE9BQVAsR0FBaUIsWUFBWTtNQUMzQixNQUFNc0IsUUFBUSxFQUFkO01BQ0EsS0FBS2xCLGlCQUFMLENBQXVCckIsTUFBTSxDQUFDRixFQUE5QjtJQUNELENBSEQ7O0lBS0EsT0FBT0UsTUFBUDtFQUNEOztFQUUwQixNQUFieUMsYUFBYSxDQUFDaEIsTUFBRCxFQUF3QztJQUNqRSxJQUFJLENBQUNBLE1BQU0sQ0FBQ2lCLFFBQVAsQ0FBZ0JDLFNBQXJCLEVBQWdDO01BQzlCLE1BQU1DLE9BQU8sR0FDWG5CLE1BQU0sQ0FBQ0UsSUFBUCxLQUFnQixVQUFoQixHQUE2QixlQUE3QixHQUErQyxlQURqRDtNQUVBLE1BQU1rQixLQUFLLENBQUUsR0FBRXBCLE1BQU0sQ0FBQ2lCLFFBQVAsQ0FBZ0JJLElBQUssT0FBTUYsT0FBUSxFQUF2QyxDQUFYO0lBQ0Q7O0lBRUQsTUFBTTVDLE1BQU07TUFDVkYsRUFBRSxFQUFFMkIsTUFBTSxDQUFDM0IsRUFERDtNQUVWNkIsSUFBSSxFQUFFRixNQUFNLENBQUNFLElBRkg7TUFHVmUsUUFBUSxFQUFFakIsTUFBTSxDQUFDaUI7SUFIUCxHQUlOLE1BQU1qQixNQUFNLENBQUNzQixJQUFQLENBQVk7TUFDcEJqRCxFQUFFLEVBQUUyQixNQUFNLENBQUMzQixFQURTO01BRXBCNkIsSUFBSSxFQUFFRixNQUFNLENBQUNFLElBRk87TUFHcEJlLFFBQVEsRUFBRWpCLE1BQU0sQ0FBQ2lCLFFBSEc7TUFJcEJuRCxPQUFPLEVBQUUsS0FBS0EsT0FKTTtNQUtwQkMsS0FBSyxFQUFFLEtBQUtBLEtBQUwsQ0FBV3dELFVBQVgsRUFMYTtNQU1wQnRELFFBQVEsRUFBRSxLQUFLQSxRQU5LO01BT3BCRCxPQUFPLEVBQUUsS0FBS3NDLGtCQUFMLENBQXdCTixNQUF4QixDQVBXO01BUXBCM0MsTUFBTSxFQUFFLElBQUlELDBEQUFKLENBQVc0QyxNQUFNLENBQUMzQixFQUFsQixDQVJZO01BU3BCUixPQUFPLEVBQUUsSUFBSUosc0VBQUosQ0FBZ0IsS0FBS0ksT0FBckIsRUFBOEIsQ0FBQ1Asb0RBQUQsRUFBZTBDLE1BQU0sQ0FBQzNCLEVBQXRCLENBQTlCO0lBVFcsQ0FBWixDQUpBLENBQVo7O0lBaUJBLE9BQU8sS0FBS3NDLGNBQUwsQ0FBb0JwQyxNQUFwQixDQUFQO0VBQ0Q7O0VBRU8wQixTQUFTLENBQUM1QixFQUFELEVBQW9CO0lBQ25DLE9BQU8sS0FBS0gsT0FBTCxDQUFhc0QsSUFBYixDQUFtQkMsQ0FBRCxJQUFPQSxDQUFDLENBQUNwRCxFQUFGLEtBQVNBLEVBQWxDLENBQVA7RUFDRDs7RUFFYyxNQUFURyxTQUFTLENBQW9DSCxFQUFwQyxFQUF1RDtJQUNwRSxNQUFNMkIsTUFBTSxHQUFHLEtBQUtDLFNBQUwsQ0FBZTVCLEVBQWYsQ0FBZjs7SUFFQSxJQUFJLENBQUMyQixNQUFMLEVBQWE7TUFDWCxPQUFPLElBQVA7SUFDRDs7SUFFRCxNQUFNO01BQUVYO0lBQUYsSUFBdUIsS0FBS3RCLEtBQUwsQ0FBV3VCLFFBQVgsRUFBN0IsQ0FQb0UsQ0FTcEU7SUFDQTs7SUFDQSxJQUFJLENBQUNVLE1BQU0sQ0FBQ2lCLFFBQVAsQ0FBZ0JDLFNBQWpCLElBQThCN0IsZ0JBQWxDLEVBQW9EO01BQ2xELEtBQUtPLGlCQUFMLENBQXVCUCxnQkFBdkI7TUFFQSxPQUFPLElBQVA7SUFDRDs7SUFFRCxPQUFRLE1BQU1XLE1BQU0sQ0FBQ3pCLE1BQVAsRUFBZDtFQUNEOztFQUVVLE1BQUxtRCxLQUFLLEdBQUc7SUFDWixNQUFNeEQsT0FBMkIsR0FBRyxFQUFwQzs7SUFFQSxLQUFLLElBQUl5RCxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHLEtBQUsvRCxTQUFMLENBQWV3QixNQUFuQyxFQUEyQ3VDLENBQUMsSUFBSSxDQUFoRCxFQUFtRDtNQUNqRCxNQUFNM0IsTUFBTSxHQUFHLE1BQU0sS0FBS3BDLFNBQUwsQ0FBZStELENBQWYsRUFBa0I7UUFBRTdELE9BQU8sRUFBRSxLQUFLQTtNQUFoQixDQUFsQixFQUE2Q1ksS0FBN0MsQ0FDbEJDLEdBQUQsSUFBUztRQUNQdEIsOERBQUEsQ0FBVyx3QkFBWDtRQUNBQSxnRUFBQSxDQUFhc0IsR0FBYjtRQUVBLE9BQU8sSUFBUDtNQUNELENBTmtCLENBQXJCLENBRGlELENBVWpEOztNQUNBLElBQUksQ0FBQ3FCLE1BQUwsRUFBYTtRQUNYO01BQ0QsQ0FiZ0QsQ0FlakQ7OztNQUNBLElBQUk5QixPQUFPLENBQUMwRCxJQUFSLENBQWNILENBQUQsSUFBT0EsQ0FBQyxDQUFDcEQsRUFBRixLQUFTMkIsTUFBTSxDQUFDM0IsRUFBcEMsQ0FBSixFQUE2QztRQUMzQztNQUNEOztNQUVESCxPQUFPLENBQUMyRCxJQUFSLENBQWE7UUFDWHhELEVBQUUsRUFBRTJCLE1BQU0sQ0FBQzNCLEVBREE7UUFFWDZCLElBQUksRUFBRUYsTUFBTSxDQUFDRSxJQUZGO1FBR1hlLFFBQVEsRUFBRWpCLE1BQU0sQ0FBQ2lCLFFBSE47UUFJWDFDLE1BQU0sRUFBRSxZQUFZO1VBQ2xCLElBQUl1RCxRQUFRLEdBQUcsS0FBSzNELFNBQUwsQ0FBZTZCLE1BQU0sQ0FBQzNCLEVBQXRCLENBQWY7O1VBRUEsSUFBSXlELFFBQUosRUFBYztZQUNaLE9BQU9BLFFBQVA7VUFDRDs7VUFFREEsUUFBUSxHQUFHLE1BQU0sS0FBS2QsYUFBTCxDQUFtQmhCLE1BQW5CLENBQWpCO1VBRUEsS0FBSzdCLFNBQUwsQ0FBZTZCLE1BQU0sQ0FBQzNCLEVBQXRCLElBQTRCeUQsUUFBNUI7VUFFQSxPQUFPQSxRQUFQO1FBQ0Q7TUFoQlUsQ0FBYjtJQWtCRDs7SUFFRCxLQUFLNUQsT0FBTCxHQUFlQSxPQUFmO0lBRUEsTUFBTTtNQUFFSSxRQUFGO01BQVltQixRQUFaO01BQXNCSjtJQUF0QixJQUNKLE1BQU0sS0FBS1AsbUJBQUwsRUFEUjtJQUdBLEtBQUtmLEtBQUwsQ0FBV3FDLFFBQVgsQ0FBb0I7TUFDbEJGLElBQUksRUFBRSxzQkFEWTtNQUVsQkcsT0FBTyxFQUFFO1FBQ1BuQyxPQURPO1FBRVBJLFFBRk87UUFHUG1CLFFBSE87UUFJUEo7TUFKTztJQUZTLENBQXBCO0VBU0Q7O0FBdlR3QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9saWIvc2VydmljZXMvd2FsbGV0LW1vZHVsZXMvd2FsbGV0LW1vZHVsZXMuc2VydmljZS50cz9hMGVjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgV2FsbGV0TW9kdWxlc1BhcmFtcyB9IGZyb20gXCIuL3dhbGxldC1tb2R1bGVzLnNlcnZpY2UudHlwZXNcIjtcbmltcG9ydCB0eXBlIHtcbiAgU2lnbkluUGFyYW1zLFxuICBXYWxsZXQsXG4gIFdhbGxldEV2ZW50cyxcbiAgV2FsbGV0TW9kdWxlLFxuICBXYWxsZXRNb2R1bGVGYWN0b3J5LFxuICBBY2NvdW50LFxufSBmcm9tIFwiLi4vLi4vd2FsbGV0XCI7XG5pbXBvcnQgdHlwZSB7IFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSBcIi4uL3N0b3JhZ2Uvc3RvcmFnZS5zZXJ2aWNlLnR5cGVzXCI7XG5pbXBvcnQgdHlwZSB7IE9wdGlvbnMgfSBmcm9tIFwiLi4vLi4vb3B0aW9ucy50eXBlc1wiO1xuaW1wb3J0IHR5cGUgeyBDb250cmFjdFN0YXRlLCBNb2R1bGVTdGF0ZSwgU3RvcmUgfSBmcm9tIFwiLi4vLi4vc3RvcmUudHlwZXNcIjtcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCIuLi9ldmVudC1lbWl0dGVyL2V2ZW50LWVtaXR0ZXIuc2VydmljZVwiO1xuaW1wb3J0IHR5cGUgeyBXYWxsZXRTZWxlY3RvckV2ZW50cyB9IGZyb20gXCIuLi8uLi93YWxsZXQtc2VsZWN0b3IudHlwZXNcIjtcbmltcG9ydCB7IExvZ2dlciwgbG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlci9sb2dnZXIuc2VydmljZVwiO1xuaW1wb3J0IHtcbiAgUEFDS0FHRV9OQU1FLFxuICBQRU5ESU5HX0NPTlRSQUNULFxuICBQRU5ESU5HX1NFTEVDVEVEX1dBTExFVF9JRCxcbn0gZnJvbSBcIi4uLy4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgSnNvblN0b3JhZ2UgfSBmcm9tIFwiLi4vc3RvcmFnZS9qc29uLXN0b3JhZ2Uuc2VydmljZVwiO1xuaW1wb3J0IHsgUHJvdmlkZXJTZXJ2aWNlIH0gZnJvbSBcIi4uL3Byb3ZpZGVyL3Byb3ZpZGVyLnNlcnZpY2UudHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIFdhbGxldE1vZHVsZXMge1xuICBwcml2YXRlIGZhY3RvcmllczogQXJyYXk8V2FsbGV0TW9kdWxlRmFjdG9yeT47XG4gIHByaXZhdGUgc3RvcmFnZTogU3RvcmFnZVNlcnZpY2U7XG4gIHByaXZhdGUgb3B0aW9uczogT3B0aW9ucztcbiAgcHJpdmF0ZSBzdG9yZTogU3RvcmU7XG4gIHByaXZhdGUgZW1pdHRlcjogRXZlbnRFbWl0dGVyPFdhbGxldFNlbGVjdG9yRXZlbnRzPjtcbiAgcHJpdmF0ZSBwcm92aWRlcjogUHJvdmlkZXJTZXJ2aWNlO1xuXG4gIHByaXZhdGUgbW9kdWxlczogQXJyYXk8TW9kdWxlU3RhdGU+O1xuICBwcml2YXRlIGluc3RhbmNlczogUmVjb3JkPHN0cmluZywgV2FsbGV0PjtcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgZmFjdG9yaWVzLFxuICAgIHN0b3JhZ2UsXG4gICAgb3B0aW9ucyxcbiAgICBzdG9yZSxcbiAgICBlbWl0dGVyLFxuICAgIHByb3ZpZGVyLFxuICB9OiBXYWxsZXRNb2R1bGVzUGFyYW1zKSB7XG4gICAgdGhpcy5mYWN0b3JpZXMgPSBmYWN0b3JpZXM7XG4gICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICB0aGlzLmVtaXR0ZXIgPSBlbWl0dGVyO1xuICAgIHRoaXMucHJvdmlkZXIgPSBwcm92aWRlcjtcblxuICAgIHRoaXMubW9kdWxlcyA9IFtdO1xuICAgIHRoaXMuaW5zdGFuY2VzID0ge307XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlV2FsbGV0KGlkOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgbGV0IGFjY291bnRzOiBBcnJheTxBY2NvdW50PiA9IFtdO1xuICAgIGNvbnN0IHdhbGxldCA9IGF3YWl0IHRoaXMuZ2V0V2FsbGV0KGlkKTtcblxuICAgIGlmICh3YWxsZXQpIHtcbiAgICAgIC8vIEVuc3VyZSBvdXIgcGVyc2lzdGVudCBzdGF0ZSBhbGlnbnMgd2l0aCB0aGUgc2VsZWN0ZWQgd2FsbGV0LlxuICAgICAgLy8gRm9yIGV4YW1wbGUgYSB3YWxsZXQgaXMgc2VsZWN0ZWQsIGJ1dCBpdCByZXR1cm5zIG5vIGFjY291bnRzIChub3Qgc2lnbmVkIGluKS5cbiAgICAgIGFjY291bnRzID0gYXdhaXQgd2FsbGV0LmdldEFjY291bnRzKCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBsb2dnZXIubG9nKGBGYWlsZWQgdG8gdmFsaWRhdGUgJHt3YWxsZXQuaWR9IGR1cmluZyBzZXR1cGApO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyKTtcblxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWNjb3VudHM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlc29sdmVTdG9yYWdlU3RhdGUoKSB7XG4gICAgY29uc3QganNvblN0b3JhZ2UgPSBuZXcgSnNvblN0b3JhZ2UodGhpcy5zdG9yYWdlLCBQQUNLQUdFX05BTUUpO1xuICAgIGNvbnN0IHBlbmRpbmdTZWxlY3RlZFdhbGxldElkID0gYXdhaXQganNvblN0b3JhZ2UuZ2V0SXRlbTxzdHJpbmc+KFxuICAgICAgUEVORElOR19TRUxFQ1RFRF9XQUxMRVRfSURcbiAgICApO1xuICAgIGNvbnN0IHBlbmRpbmdDb250cmFjdCA9IGF3YWl0IGpzb25TdG9yYWdlLmdldEl0ZW08Q29udHJhY3RTdGF0ZT4oXG4gICAgICBQRU5ESU5HX0NPTlRSQUNUXG4gICAgKTtcblxuICAgIGlmIChwZW5kaW5nU2VsZWN0ZWRXYWxsZXRJZCAmJiBwZW5kaW5nQ29udHJhY3QpIHtcbiAgICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgdGhpcy52YWxpZGF0ZVdhbGxldChwZW5kaW5nU2VsZWN0ZWRXYWxsZXRJZCk7XG5cbiAgICAgIGF3YWl0IGpzb25TdG9yYWdlLnJlbW92ZUl0ZW0oUEVORElOR19TRUxFQ1RFRF9XQUxMRVRfSUQpO1xuICAgICAgYXdhaXQganNvblN0b3JhZ2UucmVtb3ZlSXRlbShQRU5ESU5HX0NPTlRSQUNUKTtcblxuICAgICAgaWYgKGFjY291bnRzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCB7IHNlbGVjdGVkV2FsbGV0SWQgfSA9IHRoaXMuc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRXYWxsZXQgPSBhd2FpdCB0aGlzLmdldFdhbGxldChzZWxlY3RlZFdhbGxldElkKTtcblxuICAgICAgICBpZiAoc2VsZWN0ZWRXYWxsZXQgJiYgcGVuZGluZ1NlbGVjdGVkV2FsbGV0SWQgIT09IHNlbGVjdGVkV2FsbGV0SWQpIHtcbiAgICAgICAgICBhd2FpdCBzZWxlY3RlZFdhbGxldC5zaWduT3V0KCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcIkZhaWxlZCB0byBzaWduIG91dCBleGlzdGluZyB3YWxsZXRcIik7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYWNjb3VudHMsXG4gICAgICAgICAgY29udHJhY3Q6IHBlbmRpbmdDb250cmFjdCxcbiAgICAgICAgICBzZWxlY3RlZFdhbGxldElkOiBwZW5kaW5nU2VsZWN0ZWRXYWxsZXRJZCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB7IGNvbnRyYWN0LCBzZWxlY3RlZFdhbGxldElkIH0gPSB0aGlzLnN0b3JlLmdldFN0YXRlKCk7XG4gICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCB0aGlzLnZhbGlkYXRlV2FsbGV0KHNlbGVjdGVkV2FsbGV0SWQpO1xuXG4gICAgaWYgKCFhY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFjY291bnRzOiBbXSxcbiAgICAgICAgY29udHJhY3Q6IG51bGwsXG4gICAgICAgIHNlbGVjdGVkV2FsbGV0SWQ6IG51bGwsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBhY2NvdW50cyxcbiAgICAgIGNvbnRyYWN0LFxuICAgICAgc2VsZWN0ZWRXYWxsZXRJZCxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzaWduT3V0V2FsbGV0KHdhbGxldElkOiBzdHJpbmcpIHtcbiAgICBjb25zdCB3YWxsZXQgPSAoYXdhaXQgdGhpcy5nZXRXYWxsZXQod2FsbGV0SWQpKSE7XG5cbiAgICBhd2FpdCB3YWxsZXQuc2lnbk91dCgpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGxvZ2dlci5sb2coYEZhaWxlZCB0byBzaWduIG91dCAke3dhbGxldC5pZH1gKTtcbiAgICAgIGxvZ2dlci5lcnJvcihlcnIpO1xuXG4gICAgICAvLyBBdCBsZWFzdCBjbGVhbiB1cCBzdGF0ZSBvbiBvdXIgc2lkZS5cbiAgICAgIHRoaXMub25XYWxsZXRTaWduZWRPdXQod2FsbGV0LmlkKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgb25XYWxsZXRTaWduZWRJbihcbiAgICB3YWxsZXRJZDogc3RyaW5nLFxuICAgIHsgYWNjb3VudHMsIGNvbnRyYWN0SWQsIG1ldGhvZE5hbWVzIH06IFdhbGxldEV2ZW50c1tcInNpZ25lZEluXCJdXG4gICkge1xuICAgIGNvbnN0IHsgc2VsZWN0ZWRXYWxsZXRJZCB9ID0gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IGpzb25TdG9yYWdlID0gbmV3IEpzb25TdG9yYWdlKHRoaXMuc3RvcmFnZSwgUEFDS0FHRV9OQU1FKTtcbiAgICBjb25zdCBjb250cmFjdCA9IHsgY29udHJhY3RJZCwgbWV0aG9kTmFtZXMgfTtcblxuICAgIGlmICghYWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBtb2R1bGUgPSB0aGlzLmdldE1vZHVsZSh3YWxsZXRJZCkhO1xuICAgICAgLy8gV2UgY2FuJ3QgZ3VhcmFudGVlIHRoZSB1c2VyIHdpbGwgYWN0dWFsbHkgc2lnbiBpbiB3aXRoIGJyb3dzZXIgd2FsbGV0cy5cbiAgICAgIC8vIEJlc3Qgd2UgY2FuIGRvIGlzIHNldCBpbiBzdG9yYWdlIGFuZCB2YWxpZGF0ZSBvbiBpbml0LlxuICAgICAgaWYgKG1vZHVsZS50eXBlID09PSBcImJyb3dzZXJcIikge1xuICAgICAgICBhd2FpdCBqc29uU3RvcmFnZS5zZXRJdGVtKFBFTkRJTkdfU0VMRUNURURfV0FMTEVUX0lELCB3YWxsZXRJZCk7XG4gICAgICAgIGF3YWl0IGpzb25TdG9yYWdlLnNldEl0ZW08Q29udHJhY3RTdGF0ZT4oUEVORElOR19DT05UUkFDVCwgY29udHJhY3QpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdGVkV2FsbGV0SWQgJiYgc2VsZWN0ZWRXYWxsZXRJZCAhPT0gd2FsbGV0SWQpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2lnbk91dFdhbGxldChzZWxlY3RlZFdhbGxldElkKTtcbiAgICB9XG5cbiAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiV0FMTEVUX0NPTk5FQ1RFRFwiLFxuICAgICAgcGF5bG9hZDogeyB3YWxsZXRJZCwgY29udHJhY3QsIGFjY291bnRzIH0sXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIG9uV2FsbGV0U2lnbmVkT3V0KHdhbGxldElkOiBzdHJpbmcpIHtcbiAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiV0FMTEVUX0RJU0NPTk5FQ1RFRFwiLFxuICAgICAgcGF5bG9hZDogeyB3YWxsZXRJZCB9LFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFdhbGxldEVtaXR0ZXIobW9kdWxlOiBXYWxsZXRNb2R1bGUpIHtcbiAgICBjb25zdCBlbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjxXYWxsZXRFdmVudHM+KCk7XG5cbiAgICBlbWl0dGVyLm9uKFwic2lnbmVkT3V0XCIsICgpID0+IHtcbiAgICAgIHRoaXMub25XYWxsZXRTaWduZWRPdXQobW9kdWxlLmlkKTtcbiAgICB9KTtcblxuICAgIGVtaXR0ZXIub24oXCJzaWduZWRJblwiLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMub25XYWxsZXRTaWduZWRJbihtb2R1bGUuaWQsIGV2ZW50KTtcbiAgICB9KTtcblxuICAgIGVtaXR0ZXIub24oXCJhY2NvdW50c0NoYW5nZWRcIiwgYXN5bmMgKHsgYWNjb3VudHMgfSkgPT4ge1xuICAgICAgaWYgKCFhY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbk91dFdhbGxldChtb2R1bGUuaWQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJBQ0NPVU5UU19DSEFOR0VEXCIsXG4gICAgICAgIHBheWxvYWQ6IHsgd2FsbGV0SWQ6IG1vZHVsZS5pZCwgYWNjb3VudHMgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZW1pdHRlci5vbihcIm5ldHdvcmtDaGFuZ2VkXCIsICh7IG5ldHdvcmtJZCB9KSA9PiB7XG4gICAgICB0aGlzLmVtaXR0ZXIuZW1pdChcIm5ldHdvcmtDaGFuZ2VkXCIsIHsgd2FsbGV0SWQ6IG1vZHVsZS5pZCwgbmV0d29ya0lkIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGVtaXR0ZXI7XG4gIH1cblxuICBwcml2YXRlIGRlY29yYXRlV2FsbGV0KHdhbGxldDogV2FsbGV0KTogV2FsbGV0IHtcbiAgICBjb25zdCBfc2lnbkluID0gd2FsbGV0LnNpZ25JbjtcbiAgICBjb25zdCBfc2lnbk91dCA9IHdhbGxldC5zaWduT3V0O1xuXG4gICAgd2FsbGV0LnNpZ25JbiA9IGFzeW5jIChwYXJhbXM6IG5ldmVyKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IF9zaWduSW4ocGFyYW1zKTtcblxuICAgICAgY29uc3QgeyBjb250cmFjdElkLCBtZXRob2ROYW1lcyA9IFtdIH0gPSBwYXJhbXMgYXMgU2lnbkluUGFyYW1zO1xuICAgICAgYXdhaXQgdGhpcy5vbldhbGxldFNpZ25lZEluKHdhbGxldC5pZCwge1xuICAgICAgICBhY2NvdW50cyxcbiAgICAgICAgY29udHJhY3RJZCxcbiAgICAgICAgbWV0aG9kTmFtZXMsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGFjY291bnRzO1xuICAgIH07XG5cbiAgICB3YWxsZXQuc2lnbk91dCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IF9zaWduT3V0KCk7XG4gICAgICB0aGlzLm9uV2FsbGV0U2lnbmVkT3V0KHdhbGxldC5pZCk7XG4gICAgfTtcblxuICAgIHJldHVybiB3YWxsZXQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNldHVwSW5zdGFuY2UobW9kdWxlOiBXYWxsZXRNb2R1bGUpOiBQcm9taXNlPFdhbGxldD4ge1xuICAgIGlmICghbW9kdWxlLm1ldGFkYXRhLmF2YWlsYWJsZSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICAgIG1vZHVsZS50eXBlID09PSBcImluamVjdGVkXCIgPyBcIm5vdCBpbnN0YWxsZWRcIiA6IFwibm90IGF2YWlsYWJsZVwiO1xuICAgICAgdGhyb3cgRXJyb3IoYCR7bW9kdWxlLm1ldGFkYXRhLm5hbWV9IGlzICR7bWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCB3YWxsZXQgPSB7XG4gICAgICBpZDogbW9kdWxlLmlkLFxuICAgICAgdHlwZTogbW9kdWxlLnR5cGUsXG4gICAgICBtZXRhZGF0YTogbW9kdWxlLm1ldGFkYXRhLFxuICAgICAgLi4uKGF3YWl0IG1vZHVsZS5pbml0KHtcbiAgICAgICAgaWQ6IG1vZHVsZS5pZCxcbiAgICAgICAgdHlwZTogbW9kdWxlLnR5cGUsXG4gICAgICAgIG1ldGFkYXRhOiBtb2R1bGUubWV0YWRhdGEsXG4gICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgICAgc3RvcmU6IHRoaXMuc3RvcmUudG9SZWFkT25seSgpLFxuICAgICAgICBwcm92aWRlcjogdGhpcy5wcm92aWRlcixcbiAgICAgICAgZW1pdHRlcjogdGhpcy5zZXR1cFdhbGxldEVtaXR0ZXIobW9kdWxlKSxcbiAgICAgICAgbG9nZ2VyOiBuZXcgTG9nZ2VyKG1vZHVsZS5pZCksXG4gICAgICAgIHN0b3JhZ2U6IG5ldyBKc29uU3RvcmFnZSh0aGlzLnN0b3JhZ2UsIFtQQUNLQUdFX05BTUUsIG1vZHVsZS5pZF0pLFxuICAgICAgfSkpLFxuICAgIH0gYXMgV2FsbGV0O1xuXG4gICAgcmV0dXJuIHRoaXMuZGVjb3JhdGVXYWxsZXQod2FsbGV0KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TW9kdWxlKGlkOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kdWxlcy5maW5kKCh4KSA9PiB4LmlkID09PSBpZCk7XG4gIH1cblxuICBhc3luYyBnZXRXYWxsZXQ8VmFyaWF0aW9uIGV4dGVuZHMgV2FsbGV0ID0gV2FsbGV0PihpZDogc3RyaW5nIHwgbnVsbCkge1xuICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMuZ2V0TW9kdWxlKGlkKTtcblxuICAgIGlmICghbW9kdWxlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB7IHNlbGVjdGVkV2FsbGV0SWQgfSA9IHRoaXMuc3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgIC8vIElmIHVzZXIgdW5pbnN0YWxsZWQvcmVtb3ZlZCBhIHdhbGxldCB3aGljaCB3YXMgcHJldmlvdXNseSBzaWduZWQgaW4gd2l0aFxuICAgIC8vIGJlc3Qgd2UgY2FuIGRvIGlzIGNsZWFuIHVwIHN0YXRlIG9uIG91ciBzaWRlLlxuICAgIGlmICghbW9kdWxlLm1ldGFkYXRhLmF2YWlsYWJsZSAmJiBzZWxlY3RlZFdhbGxldElkKSB7XG4gICAgICB0aGlzLm9uV2FsbGV0U2lnbmVkT3V0KHNlbGVjdGVkV2FsbGV0SWQpO1xuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gKGF3YWl0IG1vZHVsZS53YWxsZXQoKSkgYXMgVmFyaWF0aW9uO1xuICB9XG5cbiAgYXN5bmMgc2V0dXAoKSB7XG4gICAgY29uc3QgbW9kdWxlczogQXJyYXk8TW9kdWxlU3RhdGU+ID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjdG9yaWVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBtb2R1bGUgPSBhd2FpdCB0aGlzLmZhY3Rvcmllc1tpXSh7IG9wdGlvbnM6IHRoaXMub3B0aW9ucyB9KS5jYXRjaChcbiAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgIGxvZ2dlci5sb2coXCJGYWlsZWQgdG8gc2V0dXAgbW9kdWxlXCIpO1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnIpO1xuXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIC8vIEZpbHRlciBvdXQgd2FsbGV0cyB0aGF0IGFyZW4ndCBhdmFpbGFibGUuXG4gICAgICBpZiAoIW1vZHVsZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gU2tpcCBkdXBsaWNhdGVkIG1vZHVsZS5cbiAgICAgIGlmIChtb2R1bGVzLnNvbWUoKHgpID0+IHguaWQgPT09IG1vZHVsZS5pZCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgIGlkOiBtb2R1bGUuaWQsXG4gICAgICAgIHR5cGU6IG1vZHVsZS50eXBlLFxuICAgICAgICBtZXRhZGF0YTogbW9kdWxlLm1ldGFkYXRhLFxuICAgICAgICB3YWxsZXQ6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlc1ttb2R1bGUuaWRdO1xuXG4gICAgICAgICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaW5zdGFuY2UgPSBhd2FpdCB0aGlzLnNldHVwSW5zdGFuY2UobW9kdWxlKTtcblxuICAgICAgICAgIHRoaXMuaW5zdGFuY2VzW21vZHVsZS5pZF0gPSBpbnN0YW5jZTtcblxuICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMubW9kdWxlcyA9IG1vZHVsZXM7XG5cbiAgICBjb25zdCB7IGFjY291bnRzLCBjb250cmFjdCwgc2VsZWN0ZWRXYWxsZXRJZCB9ID1cbiAgICAgIGF3YWl0IHRoaXMucmVzb2x2ZVN0b3JhZ2VTdGF0ZSgpO1xuXG4gICAgdGhpcy5zdG9yZS5kaXNwYXRjaCh7XG4gICAgICB0eXBlOiBcIlNFVFVQX1dBTExFVF9NT0RVTEVTXCIsXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIG1vZHVsZXMsXG4gICAgICAgIGFjY291bnRzLFxuICAgICAgICBjb250cmFjdCxcbiAgICAgICAgc2VsZWN0ZWRXYWxsZXRJZCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJMb2dnZXIiLCJsb2dnZXIiLCJQQUNLQUdFX05BTUUiLCJQRU5ESU5HX0NPTlRSQUNUIiwiUEVORElOR19TRUxFQ1RFRF9XQUxMRVRfSUQiLCJKc29uU3RvcmFnZSIsIldhbGxldE1vZHVsZXMiLCJjb25zdHJ1Y3RvciIsImZhY3RvcmllcyIsInN0b3JhZ2UiLCJvcHRpb25zIiwic3RvcmUiLCJlbWl0dGVyIiwicHJvdmlkZXIiLCJtb2R1bGVzIiwiaW5zdGFuY2VzIiwidmFsaWRhdGVXYWxsZXQiLCJpZCIsImFjY291bnRzIiwid2FsbGV0IiwiZ2V0V2FsbGV0IiwiZ2V0QWNjb3VudHMiLCJjYXRjaCIsImVyciIsImxvZyIsImVycm9yIiwicmVzb2x2ZVN0b3JhZ2VTdGF0ZSIsImpzb25TdG9yYWdlIiwicGVuZGluZ1NlbGVjdGVkV2FsbGV0SWQiLCJnZXRJdGVtIiwicGVuZGluZ0NvbnRyYWN0IiwicmVtb3ZlSXRlbSIsImxlbmd0aCIsInNlbGVjdGVkV2FsbGV0SWQiLCJnZXRTdGF0ZSIsInNlbGVjdGVkV2FsbGV0Iiwic2lnbk91dCIsImNvbnRyYWN0Iiwic2lnbk91dFdhbGxldCIsIndhbGxldElkIiwib25XYWxsZXRTaWduZWRPdXQiLCJvbldhbGxldFNpZ25lZEluIiwiY29udHJhY3RJZCIsIm1ldGhvZE5hbWVzIiwibW9kdWxlIiwiZ2V0TW9kdWxlIiwidHlwZSIsInNldEl0ZW0iLCJkaXNwYXRjaCIsInBheWxvYWQiLCJzZXR1cFdhbGxldEVtaXR0ZXIiLCJvbiIsImV2ZW50IiwibmV0d29ya0lkIiwiZW1pdCIsImRlY29yYXRlV2FsbGV0IiwiX3NpZ25JbiIsInNpZ25JbiIsIl9zaWduT3V0IiwicGFyYW1zIiwic2V0dXBJbnN0YW5jZSIsIm1ldGFkYXRhIiwiYXZhaWxhYmxlIiwibWVzc2FnZSIsIkVycm9yIiwibmFtZSIsImluaXQiLCJ0b1JlYWRPbmx5IiwiZmluZCIsIngiLCJzZXR1cCIsImkiLCJzb21lIiwicHVzaCIsImluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/services/wallet-modules/wallet-modules.service.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/store.ts":
/*!********************************************!*\
  !*** ../../packages/core/src/lib/store.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createStore\": () => (/* binding */ createStore)\n/* harmony export */ });\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ \"rxjs\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(rxjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./services */ \"../../packages/core/src/lib/services/index.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants */ \"../../packages/core/src/lib/constants.ts\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nconst reducer = (state, action) => {\n  _services__WEBPACK_IMPORTED_MODULE_1__.logger.log(\"Store Action\", action);\n\n  switch (action.type) {\n    case \"SETUP_WALLET_MODULES\":\n      {\n        const {\n          modules,\n          accounts,\n          contract,\n          selectedWalletId\n        } = action.payload;\n        const accountStates = accounts.map((account, i) => {\n          return _objectSpread(_objectSpread({}, account), {}, {\n            active: i === 0\n          });\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          modules,\n          accounts: accountStates,\n          contract,\n          selectedWalletId\n        });\n      }\n\n    case \"WALLET_CONNECTED\":\n      {\n        const {\n          walletId,\n          contract,\n          accounts\n        } = action.payload;\n\n        if (!accounts.length) {\n          return state;\n        }\n\n        const activeAccountIndex = state.accounts.findIndex(account => account.active);\n        const accountStates = accounts.map((account, i) => {\n          return _objectSpread(_objectSpread({}, account), {}, {\n            active: i === (activeAccountIndex > -1 ? activeAccountIndex : 0)\n          });\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          contract,\n          accounts: accountStates,\n          selectedWalletId: walletId\n        });\n      }\n\n    case \"WALLET_DISCONNECTED\":\n      {\n        const {\n          walletId\n        } = action.payload;\n\n        if (walletId !== state.selectedWalletId) {\n          return state;\n        }\n\n        return _objectSpread(_objectSpread({}, state), {}, {\n          contract: null,\n          accounts: [],\n          selectedWalletId: null\n        });\n      }\n\n    case \"ACCOUNTS_CHANGED\":\n      {\n        const {\n          walletId,\n          accounts\n        } = action.payload;\n\n        if (walletId !== state.selectedWalletId) {\n          return state;\n        }\n\n        const activeAccount = state.accounts.find(account => account.active);\n        const isActiveAccountRemoved = !accounts.some(account => account.accountId === activeAccount?.accountId);\n        const accountStates = accounts.map((account, i) => {\n          return _objectSpread(_objectSpread({}, account), {}, {\n            active: isActiveAccountRemoved ? i === 0 : account.accountId === activeAccount?.accountId\n          });\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          accounts: accountStates\n        });\n      }\n\n    case \"SET_ACTIVE_ACCOUNT\":\n      {\n        const {\n          accountId\n        } = action.payload;\n        const accountStates = state.accounts.map(account => {\n          return _objectSpread(_objectSpread({}, account), {}, {\n            active: account.accountId === accountId\n          });\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          accounts: accountStates\n        });\n      }\n\n    default:\n      return state;\n  }\n};\n\nconst createStore = async storage => {\n  const jsonStorage = new _services__WEBPACK_IMPORTED_MODULE_1__.JsonStorage(storage, _constants__WEBPACK_IMPORTED_MODULE_2__.PACKAGE_NAME);\n  const initialState = {\n    modules: [],\n    accounts: [],\n    contract: await jsonStorage.getItem(_constants__WEBPACK_IMPORTED_MODULE_2__.CONTRACT),\n    selectedWalletId: await jsonStorage.getItem(_constants__WEBPACK_IMPORTED_MODULE_2__.SELECTED_WALLET_ID)\n  };\n  const state$ = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject(initialState);\n  const actions$ = new rxjs__WEBPACK_IMPORTED_MODULE_0__.Subject();\n  actions$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_0__.scan)(reducer, initialState)).subscribe(state$);\n\n  const syncStorage = async (prevState, state, storageKey, property) => {\n    if (state[property] === prevState[property]) {\n      return;\n    }\n\n    if (state[property]) {\n      await jsonStorage.setItem(storageKey, state[property]);\n      return;\n    }\n\n    await jsonStorage.removeItem(storageKey);\n  };\n\n  let prevState = state$.getValue();\n  state$.subscribe(state => {\n    syncStorage(prevState, state, _constants__WEBPACK_IMPORTED_MODULE_2__.SELECTED_WALLET_ID, \"selectedWalletId\");\n    syncStorage(prevState, state, _constants__WEBPACK_IMPORTED_MODULE_2__.CONTRACT, \"contract\");\n    prevState = state;\n  });\n  return {\n    observable: state$,\n    getState: () => state$.getValue(),\n    dispatch: action => actions$.next(action),\n    toReadOnly: () => ({\n      getState: () => state$.getValue(),\n      observable: state$.asObservable()\n    })\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dG9yZS50cz8wM2E4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1YmplY3QsIEJlaGF2aW9yU3ViamVjdCwgc2NhbiB9IGZyb20gXCJyeGpzXCI7XG5cbmltcG9ydCB7IGxvZ2dlciwgSnNvblN0b3JhZ2UgfSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xuaW1wb3J0IHsgU3RvcmFnZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xuaW1wb3J0IHR5cGUge1xuICBTdG9yZSxcbiAgV2FsbGV0U2VsZWN0b3JTdGF0ZSxcbiAgV2FsbGV0U2VsZWN0b3JBY3Rpb24sXG59IGZyb20gXCIuL3N0b3JlLnR5cGVzXCI7XG5pbXBvcnQgeyBQQUNLQUdFX05BTUUsIENPTlRSQUNULCBTRUxFQ1RFRF9XQUxMRVRfSUQgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuY29uc3QgcmVkdWNlciA9IChcbiAgc3RhdGU6IFdhbGxldFNlbGVjdG9yU3RhdGUsXG4gIGFjdGlvbjogV2FsbGV0U2VsZWN0b3JBY3Rpb25cbik6IFdhbGxldFNlbGVjdG9yU3RhdGUgPT4ge1xuICBsb2dnZXIubG9nKFwiU3RvcmUgQWN0aW9uXCIsIGFjdGlvbik7XG5cbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgXCJTRVRVUF9XQUxMRVRfTU9EVUxFU1wiOiB7XG4gICAgICBjb25zdCB7IG1vZHVsZXMsIGFjY291bnRzLCBjb250cmFjdCwgc2VsZWN0ZWRXYWxsZXRJZCB9ID0gYWN0aW9uLnBheWxvYWQ7XG5cbiAgICAgIGNvbnN0IGFjY291bnRTdGF0ZXMgPSBhY2NvdW50cy5tYXAoKGFjY291bnQsIGkpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5hY2NvdW50LFxuICAgICAgICAgIGFjdGl2ZTogaSA9PT0gMCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgbW9kdWxlcyxcbiAgICAgICAgYWNjb3VudHM6IGFjY291bnRTdGF0ZXMsXG4gICAgICAgIGNvbnRyYWN0LFxuICAgICAgICBzZWxlY3RlZFdhbGxldElkLFxuICAgICAgfTtcbiAgICB9XG4gICAgY2FzZSBcIldBTExFVF9DT05ORUNURURcIjoge1xuICAgICAgY29uc3QgeyB3YWxsZXRJZCwgY29udHJhY3QsIGFjY291bnRzIH0gPSBhY3Rpb24ucGF5bG9hZDtcblxuICAgICAgaWYgKCFhY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhY3RpdmVBY2NvdW50SW5kZXggPSBzdGF0ZS5hY2NvdW50cy5maW5kSW5kZXgoXG4gICAgICAgIChhY2NvdW50KSA9PiBhY2NvdW50LmFjdGl2ZVxuICAgICAgKTtcblxuICAgICAgY29uc3QgYWNjb3VudFN0YXRlcyA9IGFjY291bnRzLm1hcCgoYWNjb3VudCwgaSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmFjY291bnQsXG4gICAgICAgICAgYWN0aXZlOiBpID09PSAoYWN0aXZlQWNjb3VudEluZGV4ID4gLTEgPyBhY3RpdmVBY2NvdW50SW5kZXggOiAwKSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgY29udHJhY3QsXG4gICAgICAgIGFjY291bnRzOiBhY2NvdW50U3RhdGVzLFxuICAgICAgICBzZWxlY3RlZFdhbGxldElkOiB3YWxsZXRJZCxcbiAgICAgIH07XG4gICAgfVxuICAgIGNhc2UgXCJXQUxMRVRfRElTQ09OTkVDVEVEXCI6IHtcbiAgICAgIGNvbnN0IHsgd2FsbGV0SWQgfSA9IGFjdGlvbi5wYXlsb2FkO1xuXG4gICAgICBpZiAod2FsbGV0SWQgIT09IHN0YXRlLnNlbGVjdGVkV2FsbGV0SWQpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgY29udHJhY3Q6IG51bGwsXG4gICAgICAgIGFjY291bnRzOiBbXSxcbiAgICAgICAgc2VsZWN0ZWRXYWxsZXRJZDogbnVsbCxcbiAgICAgIH07XG4gICAgfVxuICAgIGNhc2UgXCJBQ0NPVU5UU19DSEFOR0VEXCI6IHtcbiAgICAgIGNvbnN0IHsgd2FsbGV0SWQsIGFjY291bnRzIH0gPSBhY3Rpb24ucGF5bG9hZDtcblxuICAgICAgaWYgKHdhbGxldElkICE9PSBzdGF0ZS5zZWxlY3RlZFdhbGxldElkKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWN0aXZlQWNjb3VudCA9IHN0YXRlLmFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnQuYWN0aXZlKTtcblxuICAgICAgY29uc3QgaXNBY3RpdmVBY2NvdW50UmVtb3ZlZCA9ICFhY2NvdW50cy5zb21lKFxuICAgICAgICAoYWNjb3VudCkgPT4gYWNjb3VudC5hY2NvdW50SWQgPT09IGFjdGl2ZUFjY291bnQ/LmFjY291bnRJZFxuICAgICAgKTtcblxuICAgICAgY29uc3QgYWNjb3VudFN0YXRlcyA9IGFjY291bnRzLm1hcCgoYWNjb3VudCwgaSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmFjY291bnQsXG4gICAgICAgICAgYWN0aXZlOiBpc0FjdGl2ZUFjY291bnRSZW1vdmVkXG4gICAgICAgICAgICA/IGkgPT09IDBcbiAgICAgICAgICAgIDogYWNjb3VudC5hY2NvdW50SWQgPT09IGFjdGl2ZUFjY291bnQ/LmFjY291bnRJZCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYWNjb3VudHM6IGFjY291bnRTdGF0ZXMsXG4gICAgICB9O1xuICAgIH1cbiAgICBjYXNlIFwiU0VUX0FDVElWRV9BQ0NPVU5UXCI6IHtcbiAgICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSBhY3Rpb24ucGF5bG9hZDtcblxuICAgICAgY29uc3QgYWNjb3VudFN0YXRlcyA9IHN0YXRlLmFjY291bnRzLm1hcCgoYWNjb3VudCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmFjY291bnQsXG4gICAgICAgICAgYWN0aXZlOiBhY2NvdW50LmFjY291bnRJZCA9PT0gYWNjb3VudElkLFxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBhY2NvdW50czogYWNjb3VudFN0YXRlcyxcbiAgICAgIH07XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVTdG9yZSA9IGFzeW5jIChzdG9yYWdlOiBTdG9yYWdlU2VydmljZSk6IFByb21pc2U8U3RvcmU+ID0+IHtcbiAgY29uc3QganNvblN0b3JhZ2UgPSBuZXcgSnNvblN0b3JhZ2Uoc3RvcmFnZSwgUEFDS0FHRV9OQU1FKTtcbiAgY29uc3QgaW5pdGlhbFN0YXRlOiBXYWxsZXRTZWxlY3RvclN0YXRlID0ge1xuICAgIG1vZHVsZXM6IFtdLFxuICAgIGFjY291bnRzOiBbXSxcbiAgICBjb250cmFjdDogYXdhaXQganNvblN0b3JhZ2UuZ2V0SXRlbShDT05UUkFDVCksXG4gICAgc2VsZWN0ZWRXYWxsZXRJZDogYXdhaXQganNvblN0b3JhZ2UuZ2V0SXRlbShTRUxFQ1RFRF9XQUxMRVRfSUQpLFxuICB9O1xuXG4gIGNvbnN0IHN0YXRlJCA9IG5ldyBCZWhhdmlvclN1YmplY3QoaW5pdGlhbFN0YXRlKTtcbiAgY29uc3QgYWN0aW9ucyQgPSBuZXcgU3ViamVjdDxXYWxsZXRTZWxlY3RvckFjdGlvbj4oKTtcblxuICBhY3Rpb25zJC5waXBlKHNjYW4ocmVkdWNlciwgaW5pdGlhbFN0YXRlKSkuc3Vic2NyaWJlKHN0YXRlJCk7XG5cbiAgY29uc3Qgc3luY1N0b3JhZ2UgPSBhc3luYyAoXG4gICAgcHJldlN0YXRlOiBXYWxsZXRTZWxlY3RvclN0YXRlLFxuICAgIHN0YXRlOiBXYWxsZXRTZWxlY3RvclN0YXRlLFxuICAgIHN0b3JhZ2VLZXk6IHN0cmluZyxcbiAgICBwcm9wZXJ0eToga2V5b2YgV2FsbGV0U2VsZWN0b3JTdGF0ZVxuICApID0+IHtcbiAgICBpZiAoc3RhdGVbcHJvcGVydHldID09PSBwcmV2U3RhdGVbcHJvcGVydHldKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN0YXRlW3Byb3BlcnR5XSkge1xuICAgICAgYXdhaXQganNvblN0b3JhZ2Uuc2V0SXRlbShzdG9yYWdlS2V5LCBzdGF0ZVtwcm9wZXJ0eV0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IGpzb25TdG9yYWdlLnJlbW92ZUl0ZW0oc3RvcmFnZUtleSk7XG4gIH07XG5cbiAgbGV0IHByZXZTdGF0ZSA9IHN0YXRlJC5nZXRWYWx1ZSgpO1xuICBzdGF0ZSQuc3Vic2NyaWJlKChzdGF0ZSkgPT4ge1xuICAgIHN5bmNTdG9yYWdlKHByZXZTdGF0ZSwgc3RhdGUsIFNFTEVDVEVEX1dBTExFVF9JRCwgXCJzZWxlY3RlZFdhbGxldElkXCIpO1xuICAgIHN5bmNTdG9yYWdlKHByZXZTdGF0ZSwgc3RhdGUsIENPTlRSQUNULCBcImNvbnRyYWN0XCIpO1xuICAgIHByZXZTdGF0ZSA9IHN0YXRlO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIG9ic2VydmFibGU6IHN0YXRlJCxcbiAgICBnZXRTdGF0ZTogKCkgPT4gc3RhdGUkLmdldFZhbHVlKCksXG4gICAgZGlzcGF0Y2g6IChhY3Rpb24pID0+IGFjdGlvbnMkLm5leHQoYWN0aW9uKSxcbiAgICB0b1JlYWRPbmx5OiAoKSA9PiAoe1xuICAgICAgZ2V0U3RhdGU6ICgpID0+IHN0YXRlJC5nZXRWYWx1ZSgpLFxuICAgICAgb2JzZXJ2YWJsZTogc3RhdGUkLmFzT2JzZXJ2YWJsZSgpLFxuICAgIH0pLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6WyJTdWJqZWN0IiwiQmVoYXZpb3JTdWJqZWN0Iiwic2NhbiIsImxvZ2dlciIsIkpzb25TdG9yYWdlIiwiUEFDS0FHRV9OQU1FIiwiQ09OVFJBQ1QiLCJTRUxFQ1RFRF9XQUxMRVRfSUQiLCJyZWR1Y2VyIiwic3RhdGUiLCJhY3Rpb24iLCJsb2ciLCJ0eXBlIiwibW9kdWxlcyIsImFjY291bnRzIiwiY29udHJhY3QiLCJzZWxlY3RlZFdhbGxldElkIiwicGF5bG9hZCIsImFjY291bnRTdGF0ZXMiLCJtYXAiLCJhY2NvdW50IiwiaSIsImFjdGl2ZSIsIndhbGxldElkIiwibGVuZ3RoIiwiYWN0aXZlQWNjb3VudEluZGV4IiwiZmluZEluZGV4IiwiYWN0aXZlQWNjb3VudCIsImZpbmQiLCJpc0FjdGl2ZUFjY291bnRSZW1vdmVkIiwic29tZSIsImFjY291bnRJZCIsImNyZWF0ZVN0b3JlIiwic3RvcmFnZSIsImpzb25TdG9yYWdlIiwiaW5pdGlhbFN0YXRlIiwiZ2V0SXRlbSIsInN0YXRlJCIsImFjdGlvbnMkIiwicGlwZSIsInN1YnNjcmliZSIsInN5bmNTdG9yYWdlIiwicHJldlN0YXRlIiwic3RvcmFnZUtleSIsInByb3BlcnR5Iiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJnZXRWYWx1ZSIsIm9ic2VydmFibGUiLCJnZXRTdGF0ZSIsImRpc3BhdGNoIiwibmV4dCIsInRvUmVhZE9ubHkiLCJhc09ic2VydmFibGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/store.ts\n");

/***/ }),

/***/ "../../packages/core/src/lib/wallet-selector.ts":
/*!******************************************************!*\
  !*** ../../packages/core/src/lib/wallet-selector.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupWalletSelector\": () => (/* binding */ setupWalletSelector)\n/* harmony export */ });\n/* harmony import */ var _options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./options */ \"../../packages/core/src/lib/options.ts\");\n/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./store */ \"../../packages/core/src/lib/store.ts\");\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services */ \"../../packages/core/src/lib/services/index.ts\");\n\n\n\nlet walletSelectorInstance = null;\nconst setupWalletSelector = async params => {\n  const {\n    options,\n    storage\n  } = (0,_options__WEBPACK_IMPORTED_MODULE_0__.resolveOptions)(params);\n  _services__WEBPACK_IMPORTED_MODULE_2__.Logger.debug = options.debug;\n  const emitter = new _services__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();\n  const store = await (0,_store__WEBPACK_IMPORTED_MODULE_1__.createStore)(storage);\n  const walletModules = new _services__WEBPACK_IMPORTED_MODULE_2__.WalletModules({\n    factories: params.modules,\n    storage,\n    options,\n    store,\n    emitter,\n    provider: new _services__WEBPACK_IMPORTED_MODULE_2__.Provider(options.network.nodeUrl)\n  });\n  await walletModules.setup();\n\n  if (!walletSelectorInstance) {\n    walletSelectorInstance = {\n      options,\n      store: store.toReadOnly(),\n      wallet: async id => {\n        const {\n          selectedWalletId\n        } = store.getState();\n        const wallet = await walletModules.getWallet(id || selectedWalletId);\n\n        if (!wallet) {\n          if (id) {\n            throw new Error(\"Invalid wallet id\");\n          }\n\n          throw new Error(\"No wallet selected\");\n        }\n\n        return wallet;\n      },\n      setActiveAccount: accountId => {\n        const {\n          accounts\n        } = store.getState();\n\n        if (!accounts.some(account => account.accountId === accountId)) {\n          throw new Error(\"Invalid account id\");\n        }\n\n        store.dispatch({\n          type: \"SET_ACTIVE_ACCOUNT\",\n          payload: {\n            accountId\n          }\n        });\n      },\n\n      isSignedIn() {\n        const {\n          accounts\n        } = store.getState();\n        return Boolean(accounts.length);\n      },\n\n      on: (eventName, callback) => {\n        return emitter.on(eventName, callback);\n      },\n      off: (eventName, callback) => {\n        emitter.off(eventName, callback);\n      }\n    };\n  }\n\n  return walletSelectorInstance;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3dhbGxldC1zZWxlY3Rvci50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQU1BO0FBR0EsSUFBSU0sc0JBQTZDLEdBQUcsSUFBcEQ7QUFFTyxNQUFNQyxtQkFBbUIsR0FBRyxNQUNqQ0MsTUFEaUMsSUFFTDtFQUM1QixNQUFNO0lBQUVDLE9BQUY7SUFBV0M7RUFBWCxJQUF1QlYsd0RBQWMsQ0FBQ1EsTUFBRCxDQUEzQztFQUNBTCxtREFBQSxHQUFlTSxPQUFPLENBQUNFLEtBQXZCO0VBRUEsTUFBTUMsT0FBTyxHQUFHLElBQUlWLG1EQUFKLEVBQWhCO0VBQ0EsTUFBTVcsS0FBSyxHQUFHLE1BQU1aLG1EQUFXLENBQUNTLE9BQUQsQ0FBL0I7RUFDQSxNQUFNSSxhQUFhLEdBQUcsSUFBSVQsb0RBQUosQ0FBa0I7SUFDdENVLFNBQVMsRUFBRVAsTUFBTSxDQUFDUSxPQURvQjtJQUV0Q04sT0FGc0M7SUFHdENELE9BSHNDO0lBSXRDSSxLQUpzQztJQUt0Q0QsT0FMc0M7SUFNdENLLFFBQVEsRUFBRSxJQUFJYiwrQ0FBSixDQUFhSyxPQUFPLENBQUNTLE9BQVIsQ0FBZ0JDLE9BQTdCO0VBTjRCLENBQWxCLENBQXRCO0VBU0EsTUFBTUwsYUFBYSxDQUFDTSxLQUFkLEVBQU47O0VBRUEsSUFBSSxDQUFDZCxzQkFBTCxFQUE2QjtJQUMzQkEsc0JBQXNCLEdBQUc7TUFDdkJHLE9BRHVCO01BRXZCSSxLQUFLLEVBQUVBLEtBQUssQ0FBQ1EsVUFBTixFQUZnQjtNQUd2QkMsTUFBTSxFQUFFLE1BQTBDQyxFQUExQyxJQUEwRDtRQUNoRSxNQUFNO1VBQUVDO1FBQUYsSUFBdUJYLEtBQUssQ0FBQ1ksUUFBTixFQUE3QjtRQUNBLE1BQU1ILE1BQU0sR0FBRyxNQUFNUixhQUFhLENBQUNZLFNBQWQsQ0FDbkJILEVBQUUsSUFBSUMsZ0JBRGEsQ0FBckI7O1FBSUEsSUFBSSxDQUFDRixNQUFMLEVBQWE7VUFDWCxJQUFJQyxFQUFKLEVBQVE7WUFDTixNQUFNLElBQUlJLEtBQUosQ0FBVSxtQkFBVixDQUFOO1VBQ0Q7O1VBRUQsTUFBTSxJQUFJQSxLQUFKLENBQVUsb0JBQVYsQ0FBTjtRQUNEOztRQUVELE9BQU9MLE1BQVA7TUFDRCxDQWxCc0I7TUFtQnZCTSxnQkFBZ0IsRUFBR0MsU0FBRCxJQUF1QjtRQUN2QyxNQUFNO1VBQUVDO1FBQUYsSUFBZWpCLEtBQUssQ0FBQ1ksUUFBTixFQUFyQjs7UUFFQSxJQUFJLENBQUNLLFFBQVEsQ0FBQ0MsSUFBVCxDQUFlQyxPQUFELElBQWFBLE9BQU8sQ0FBQ0gsU0FBUixLQUFzQkEsU0FBakQsQ0FBTCxFQUFrRTtVQUNoRSxNQUFNLElBQUlGLEtBQUosQ0FBVSxvQkFBVixDQUFOO1FBQ0Q7O1FBRURkLEtBQUssQ0FBQ29CLFFBQU4sQ0FBZTtVQUNiQyxJQUFJLEVBQUUsb0JBRE87VUFFYkMsT0FBTyxFQUFFO1lBQUVOO1VBQUY7UUFGSSxDQUFmO01BSUQsQ0E5QnNCOztNQStCdkJPLFVBQVUsR0FBRztRQUNYLE1BQU07VUFBRU47UUFBRixJQUFlakIsS0FBSyxDQUFDWSxRQUFOLEVBQXJCO1FBRUEsT0FBT1ksT0FBTyxDQUFDUCxRQUFRLENBQUNRLE1BQVYsQ0FBZDtNQUNELENBbkNzQjs7TUFvQ3ZCQyxFQUFFLEVBQUUsQ0FBQ0MsU0FBRCxFQUFZQyxRQUFaLEtBQXlCO1FBQzNCLE9BQU83QixPQUFPLENBQUMyQixFQUFSLENBQVdDLFNBQVgsRUFBc0JDLFFBQXRCLENBQVA7TUFDRCxDQXRDc0I7TUF1Q3ZCQyxHQUFHLEVBQUUsQ0FBQ0YsU0FBRCxFQUFZQyxRQUFaLEtBQXlCO1FBQzVCN0IsT0FBTyxDQUFDOEIsR0FBUixDQUFZRixTQUFaLEVBQXVCQyxRQUF2QjtNQUNEO0lBekNzQixDQUF6QjtFQTJDRDs7RUFFRCxPQUFPbkMsc0JBQVA7QUFDRCxDQWxFTSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9saWIvd2FsbGV0LXNlbGVjdG9yLnRzPzRiMDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVzb2x2ZU9wdGlvbnMgfSBmcm9tIFwiLi9vcHRpb25zXCI7XG5pbXBvcnQgeyBjcmVhdGVTdG9yZSB9IGZyb20gXCIuL3N0b3JlXCI7XG5pbXBvcnQgdHlwZSB7XG4gIFdhbGxldFNlbGVjdG9yLFxuICBXYWxsZXRTZWxlY3RvckV2ZW50cyxcbiAgV2FsbGV0U2VsZWN0b3JQYXJhbXMsXG59IGZyb20gXCIuL3dhbGxldC1zZWxlY3Rvci50eXBlc1wiO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBMb2dnZXIsIFByb3ZpZGVyLCBXYWxsZXRNb2R1bGVzIH0gZnJvbSBcIi4vc2VydmljZXNcIjtcbmltcG9ydCB0eXBlIHsgV2FsbGV0IH0gZnJvbSBcIi4vd2FsbGV0XCI7XG5cbmxldCB3YWxsZXRTZWxlY3Rvckluc3RhbmNlOiBXYWxsZXRTZWxlY3RvciB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgY29uc3Qgc2V0dXBXYWxsZXRTZWxlY3RvciA9IGFzeW5jIChcbiAgcGFyYW1zOiBXYWxsZXRTZWxlY3RvclBhcmFtc1xuKTogUHJvbWlzZTxXYWxsZXRTZWxlY3Rvcj4gPT4ge1xuICBjb25zdCB7IG9wdGlvbnMsIHN0b3JhZ2UgfSA9IHJlc29sdmVPcHRpb25zKHBhcmFtcyk7XG4gIExvZ2dlci5kZWJ1ZyA9IG9wdGlvbnMuZGVidWc7XG5cbiAgY29uc3QgZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXI8V2FsbGV0U2VsZWN0b3JFdmVudHM+KCk7XG4gIGNvbnN0IHN0b3JlID0gYXdhaXQgY3JlYXRlU3RvcmUoc3RvcmFnZSk7XG4gIGNvbnN0IHdhbGxldE1vZHVsZXMgPSBuZXcgV2FsbGV0TW9kdWxlcyh7XG4gICAgZmFjdG9yaWVzOiBwYXJhbXMubW9kdWxlcyxcbiAgICBzdG9yYWdlLFxuICAgIG9wdGlvbnMsXG4gICAgc3RvcmUsXG4gICAgZW1pdHRlcixcbiAgICBwcm92aWRlcjogbmV3IFByb3ZpZGVyKG9wdGlvbnMubmV0d29yay5ub2RlVXJsKSxcbiAgfSk7XG5cbiAgYXdhaXQgd2FsbGV0TW9kdWxlcy5zZXR1cCgpO1xuXG4gIGlmICghd2FsbGV0U2VsZWN0b3JJbnN0YW5jZSkge1xuICAgIHdhbGxldFNlbGVjdG9ySW5zdGFuY2UgPSB7XG4gICAgICBvcHRpb25zLFxuICAgICAgc3RvcmU6IHN0b3JlLnRvUmVhZE9ubHkoKSxcbiAgICAgIHdhbGxldDogYXN5bmMgPFZhcmlhdGlvbiBleHRlbmRzIFdhbGxldCA9IFdhbGxldD4oaWQ/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgeyBzZWxlY3RlZFdhbGxldElkIH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB3YWxsZXQgPSBhd2FpdCB3YWxsZXRNb2R1bGVzLmdldFdhbGxldDxWYXJpYXRpb24+KFxuICAgICAgICAgIGlkIHx8IHNlbGVjdGVkV2FsbGV0SWRcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIXdhbGxldCkge1xuICAgICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB3YWxsZXQgaWRcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gd2FsbGV0IHNlbGVjdGVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHdhbGxldDtcbiAgICAgIH0sXG4gICAgICBzZXRBY3RpdmVBY2NvdW50OiAoYWNjb3VudElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50cyB9ID0gc3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgICAgICBpZiAoIWFjY291bnRzLnNvbWUoKGFjY291bnQpID0+IGFjY291bnQuYWNjb3VudElkID09PSBhY2NvdW50SWQpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhY2NvdW50IGlkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiU0VUX0FDVElWRV9BQ0NPVU5UXCIsXG4gICAgICAgICAgcGF5bG9hZDogeyBhY2NvdW50SWQgfSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgaXNTaWduZWRJbigpIHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50cyB9ID0gc3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgICAgICByZXR1cm4gQm9vbGVhbihhY2NvdW50cy5sZW5ndGgpO1xuICAgICAgfSxcbiAgICAgIG9uOiAoZXZlbnROYW1lLCBjYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gZW1pdHRlci5vbihldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBvZmY6IChldmVudE5hbWUsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGVtaXR0ZXIub2ZmKGV2ZW50TmFtZSwgY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHdhbGxldFNlbGVjdG9ySW5zdGFuY2U7XG59O1xuIl0sIm5hbWVzIjpbInJlc29sdmVPcHRpb25zIiwiY3JlYXRlU3RvcmUiLCJFdmVudEVtaXR0ZXIiLCJMb2dnZXIiLCJQcm92aWRlciIsIldhbGxldE1vZHVsZXMiLCJ3YWxsZXRTZWxlY3Rvckluc3RhbmNlIiwic2V0dXBXYWxsZXRTZWxlY3RvciIsInBhcmFtcyIsIm9wdGlvbnMiLCJzdG9yYWdlIiwiZGVidWciLCJlbWl0dGVyIiwic3RvcmUiLCJ3YWxsZXRNb2R1bGVzIiwiZmFjdG9yaWVzIiwibW9kdWxlcyIsInByb3ZpZGVyIiwibmV0d29yayIsIm5vZGVVcmwiLCJzZXR1cCIsInRvUmVhZE9ubHkiLCJ3YWxsZXQiLCJpZCIsInNlbGVjdGVkV2FsbGV0SWQiLCJnZXRTdGF0ZSIsImdldFdhbGxldCIsIkVycm9yIiwic2V0QWN0aXZlQWNjb3VudCIsImFjY291bnRJZCIsImFjY291bnRzIiwic29tZSIsImFjY291bnQiLCJkaXNwYXRjaCIsInR5cGUiLCJwYXlsb2FkIiwiaXNTaWduZWRJbiIsIkJvb2xlYW4iLCJsZW5ndGgiLCJvbiIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwib2ZmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/core/src/lib/wallet-selector.ts\n");

/***/ }),

/***/ "../../packages/default-wallets/src/index.ts":
/*!***************************************************!*\
  !*** ../../packages/default-wallets/src/index.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupDefaultWallets": () => (/* reexport safe */ _lib_default_wallets__WEBPACK_IMPORTED_MODULE_0__.setupDefaultWallets)
/* harmony export */ });
/* harmony import */ var _lib_default_wallets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/default-wallets */ "../../packages/default-wallets/src/lib/default-wallets.ts");


/***/ }),

/***/ "../../packages/default-wallets/src/lib/default-wallets.ts":
/*!*****************************************************************!*\
  !*** ../../packages/default-wallets/src/lib/default-wallets.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupDefaultWallets\": () => (/* binding */ setupDefaultWallets)\n/* harmony export */ });\n/* harmony import */ var _near_wallet_selector_my_near_wallet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @near-wallet-selector/my-near-wallet */ \"../../packages/my-near-wallet/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_ledger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @near-wallet-selector/ledger */ \"../../packages/ledger/src/index.ts\");\n\n\nconst setupDefaultWallets = async () => {\n  return [(0,_near_wallet_selector_my_near_wallet__WEBPACK_IMPORTED_MODULE_0__.setupMyNearWallet)(), (0,_near_wallet_selector_ledger__WEBPACK_IMPORTED_MODULE_1__.setupLedger)()];\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvZGVmYXVsdC13YWxsZXRzL3NyYy9saWIvZGVmYXVsdC13YWxsZXRzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFHTyxNQUFNRSxtQkFBbUIsR0FBRyxZQUU5QjtFQUNILE9BQU8sQ0FBQ0YsdUZBQWlCLEVBQWxCLEVBQXNCQyx5RUFBVyxFQUFqQyxDQUFQO0FBQ0QsQ0FKTSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9kZWZhdWx0LXdhbGxldHMvc3JjL2xpYi9kZWZhdWx0LXdhbGxldHMudHM/NGUzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZXR1cE15TmVhcldhbGxldCB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3IvbXktbmVhci13YWxsZXRcIjtcbmltcG9ydCB7IHNldHVwTGVkZ2VyIH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9sZWRnZXJcIjtcbmltcG9ydCB0eXBlIHsgV2FsbGV0TW9kdWxlRmFjdG9yeSB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3IvY29yZVwiO1xuXG5leHBvcnQgY29uc3Qgc2V0dXBEZWZhdWx0V2FsbGV0cyA9IGFzeW5jICgpOiBQcm9taXNlPFxuICBBcnJheTxXYWxsZXRNb2R1bGVGYWN0b3J5PlxuPiA9PiB7XG4gIHJldHVybiBbc2V0dXBNeU5lYXJXYWxsZXQoKSwgc2V0dXBMZWRnZXIoKV07XG59O1xuIl0sIm5hbWVzIjpbInNldHVwTXlOZWFyV2FsbGV0Iiwic2V0dXBMZWRnZXIiLCJzZXR1cERlZmF1bHRXYWxsZXRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/default-wallets/src/lib/default-wallets.ts\n");

/***/ }),

/***/ "../../packages/ledger/src/index.ts":
/*!******************************************!*\
  !*** ../../packages/ledger/src/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupLedger": () => (/* reexport safe */ _lib_ledger__WEBPACK_IMPORTED_MODULE_0__.setupLedger)
/* harmony export */ });
/* harmony import */ var _lib_ledger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/ledger */ "../../packages/ledger/src/lib/ledger.ts");


/***/ }),

/***/ "../../packages/ledger/src/lib/ledger-client.ts":
/*!******************************************************!*\
  !*** ../../packages/ledger/src/lib/ledger-client.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CLA\": () => (/* binding */ CLA),\n/* harmony export */   \"INS_GET_APP_VERSION\": () => (/* binding */ INS_GET_APP_VERSION),\n/* harmony export */   \"INS_GET_PUBLIC_KEY\": () => (/* binding */ INS_GET_PUBLIC_KEY),\n/* harmony export */   \"INS_SIGN\": () => (/* binding */ INS_SIGN),\n/* harmony export */   \"LedgerClient\": () => (/* binding */ LedgerClient),\n/* harmony export */   \"P1_IGNORE\": () => (/* binding */ P1_IGNORE),\n/* harmony export */   \"P1_LAST\": () => (/* binding */ P1_LAST),\n/* harmony export */   \"P1_MORE\": () => (/* binding */ P1_MORE),\n/* harmony export */   \"P2_IGNORE\": () => (/* binding */ P2_IGNORE),\n/* harmony export */   \"isLedgerSupported\": () => (/* binding */ isLedgerSupported),\n/* harmony export */   \"networkId\": () => (/* binding */ networkId),\n/* harmony export */   \"parseDerivationPath\": () => (/* binding */ parseDerivationPath)\n/* harmony export */ });\n/* harmony import */ var _ledgerhq_hw_transport_webhid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ledgerhq/hw-transport-webhid */ \"@ledgerhq/hw-transport-webhid\");\n/* harmony import */ var _ledgerhq_hw_transport_webhid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_ledgerhq_hw_transport_webhid__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! near-api-js */ \"near-api-js\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(near_api_js__WEBPACK_IMPORTED_MODULE_1__);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n // Further reading regarding APDU Ledger API:\n// - https://gist.github.com/Wollac/49f0c4e318e42f463b8306298dfb4f4a\n// - https://github.com/LedgerHQ/app-near/blob/master/workdir/app-near/src/constants.h\n\nconst CLA = 0x80; // Always the same for Ledger.\n\nconst INS_SIGN = 0x02; // Sign\n\nconst INS_GET_PUBLIC_KEY = 0x04; // Get Public Key\n\nconst INS_GET_APP_VERSION = 0x06; // Get App Version\n\nconst P1_LAST = 0x80; // End of Bytes to Sign (finalize)\n\nconst P1_MORE = 0x00; // More bytes coming\n\nconst P1_IGNORE = 0x00;\nconst P2_IGNORE = 0x00; // Converts BIP32-compliant derivation path to a Buffer.\n// More info here: https://github.com/LedgerHQ/ledger-live-common/blob/master/docs/derivation.md\n\nfunction parseDerivationPath(derivationPath) {\n  const parts = derivationPath.split(\"/\");\n  return Buffer.concat(parts.map(part => {\n    return part.endsWith(`'`) ? Math.abs(parseInt(part.slice(0, -1))) | 0x80000000 : Math.abs(parseInt(part));\n  }).map(i32 => {\n    return Buffer.from([i32 >> 24 & 0xff, i32 >> 16 & 0xff, i32 >> 8 & 0xff, i32 & 0xff]);\n  }));\n} // TODO: Understand what this is exactly. What's so special about 87?\n\nconst networkId = \"W\".charCodeAt(0);\n// Not using TransportWebHID.isSupported as it's chosen to use a Promise...\nconst isLedgerSupported = () => {\n  return !!window.navigator?.hid;\n};\nclass LedgerClient {\n  constructor() {\n    _defineProperty(this, \"transport\", null);\n\n    _defineProperty(this, \"isConnected\", () => {\n      return Boolean(this.transport);\n    });\n\n    _defineProperty(this, \"connect\", async () => {\n      this.transport = await _ledgerhq_hw_transport_webhid__WEBPACK_IMPORTED_MODULE_0___default().create();\n\n      const handleDisconnect = () => {\n        this.transport?.off(\"disconnect\", handleDisconnect);\n        this.transport = null;\n      };\n\n      this.transport.on(\"disconnect\", handleDisconnect);\n    });\n\n    _defineProperty(this, \"disconnect\", async () => {\n      if (!this.transport) {\n        throw new Error(\"Device not connected\");\n      }\n\n      await this.transport.close();\n      this.transport = null;\n    });\n\n    _defineProperty(this, \"setScrambleKey\", key => {\n      if (!this.transport) {\n        throw new Error(\"Device not connected\");\n      }\n\n      this.transport.setScrambleKey(key);\n    });\n\n    _defineProperty(this, \"on\", (event, callback) => {\n      if (!this.transport) {\n        throw new Error(\"Device not connected\");\n      }\n\n      this.transport.on(event, callback);\n      return {\n        remove: () => this.transport?.off(event, callback)\n      };\n    });\n\n    _defineProperty(this, \"off\", (event, callback) => {\n      if (!this.transport) {\n        throw new Error(\"Device not connected\");\n      }\n\n      this.transport.off(event, callback);\n    });\n\n    _defineProperty(this, \"getVersion\", async () => {\n      if (!this.transport) {\n        throw new Error(\"Device not connected\");\n      }\n\n      const res = await this.transport.send(CLA, INS_GET_APP_VERSION, P1_IGNORE, P2_IGNORE);\n      const [major, minor, patch] = Array.from(res);\n      return `${major}.${minor}.${patch}`;\n    });\n\n    _defineProperty(this, \"getPublicKey\", async ({\n      derivationPath\n    }) => {\n      if (!this.transport) {\n        throw new Error(\"Device not connected\");\n      }\n\n      const res = await this.transport.send(CLA, INS_GET_PUBLIC_KEY, P2_IGNORE, networkId, parseDerivationPath(derivationPath));\n      return near_api_js__WEBPACK_IMPORTED_MODULE_1__.utils.serialize.base_encode(res.subarray(0, -2));\n    });\n\n    _defineProperty(this, \"sign\", async ({\n      data,\n      derivationPath\n    }) => {\n      if (!this.transport) {\n        throw new Error(\"Device not connected\");\n      } // NOTE: getVersion call resets state to avoid starting from partially filled buffer\n\n\n      await this.getVersion(); // 128 - 5 service bytes\n\n      const CHUNK_SIZE = 123;\n      const allData = Buffer.concat([parseDerivationPath(derivationPath), Buffer.from(data)]);\n\n      for (let offset = 0; offset < allData.length; offset += CHUNK_SIZE) {\n        const isLastChunk = offset + CHUNK_SIZE >= allData.length;\n        const response = await this.transport.send(CLA, INS_SIGN, isLastChunk ? P1_LAST : P1_MORE, P2_IGNORE, Buffer.from(allData.subarray(offset, offset + CHUNK_SIZE)));\n\n        if (isLastChunk) {\n          return Buffer.from(response.subarray(0, -2));\n        }\n      }\n\n      throw new Error(\"Invalid data or derivation path\");\n    });\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvbGVkZ2VyL3NyYy9saWIvbGVkZ2VyLWNsaWVudC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtDQUlBO0FBQ0E7QUFDQTs7QUFFTyxNQUFNRSxHQUFHLEdBQUcsSUFBWixFQUFrQjs7QUFDbEIsTUFBTUMsUUFBUSxHQUFHLElBQWpCLEVBQXVCOztBQUN2QixNQUFNQyxrQkFBa0IsR0FBRyxJQUEzQixFQUFpQzs7QUFDakMsTUFBTUMsbUJBQW1CLEdBQUcsSUFBNUIsRUFBa0M7O0FBQ2xDLE1BQU1DLE9BQU8sR0FBRyxJQUFoQixFQUFzQjs7QUFDdEIsTUFBTUMsT0FBTyxHQUFHLElBQWhCLEVBQXNCOztBQUN0QixNQUFNQyxTQUFTLEdBQUcsSUFBbEI7QUFDQSxNQUFNQyxTQUFTLEdBQUcsSUFBbEIsRUFFUDtBQUNBOztBQUNPLFNBQVNDLG1CQUFULENBQTZCQyxjQUE3QixFQUFxRDtFQUMxRCxNQUFNQyxLQUFLLEdBQUdELGNBQWMsQ0FBQ0UsS0FBZixDQUFxQixHQUFyQixDQUFkO0VBRUEsT0FBT0MsTUFBTSxDQUFDQyxNQUFQLENBQ0xILEtBQUssQ0FDRkksR0FESCxDQUNRQyxJQUFELElBQVU7SUFDYixPQUFPQSxJQUFJLENBQUNDLFFBQUwsQ0FBZSxHQUFmLElBQ0hDLElBQUksQ0FBQ0MsR0FBTCxDQUFTQyxRQUFRLENBQUNKLElBQUksQ0FBQ0ssS0FBTCxDQUFXLENBQVgsRUFBYyxDQUFDLENBQWYsQ0FBRCxDQUFqQixJQUF3QyxVQURyQyxHQUVISCxJQUFJLENBQUNDLEdBQUwsQ0FBU0MsUUFBUSxDQUFDSixJQUFELENBQWpCLENBRko7RUFHRCxDQUxILEVBTUdELEdBTkgsQ0FNUU8sR0FBRCxJQUFTO0lBQ1osT0FBT1QsTUFBTSxDQUFDVSxJQUFQLENBQVksQ0FDaEJELEdBQUcsSUFBSSxFQUFSLEdBQWMsSUFERyxFQUVoQkEsR0FBRyxJQUFJLEVBQVIsR0FBYyxJQUZHLEVBR2hCQSxHQUFH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LE1BQU0sQ0FBQ1UsSUFBUCxDQUFZaUMsT0FBTyxDQUFDSixRQUFSLENBQWlCSyxNQUFqQixFQUF5QkEsTUFBTSxHQUFHRixVQUFsQyxDQUFaLENBTHFCLENBQXZCOztRQVFBLElBQUlJLFdBQUosRUFBaUI7VUFDZixPQUFPOUMsTUFBTSxDQUFDVSxJQUFQLENBQVlxQyxRQUFRLENBQUNSLFFBQVQsQ0FBa0IsQ0FBbEIsRUFBcUIsQ0FBQyxDQUF0QixDQUFaLENBQVA7UUFDRDtNQUNGOztNQUVELE1BQU0sSUFBSWYsS0FBSixDQUFVLGlDQUFWLENBQU47SUFDRCxDQTNIdUI7RUFBQTs7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy9sZWRnZXIvc3JjL2xpYi9sZWRnZXItY2xpZW50LnRzPzNkNzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRyYW5zcG9ydFdlYkhJRCBmcm9tIFwiQGxlZGdlcmhxL2h3LXRyYW5zcG9ydC13ZWJoaWRcIjtcbmltcG9ydCBUcmFuc3BvcnQgZnJvbSBcIkBsZWRnZXJocS9ody10cmFuc3BvcnRcIjtcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSBcIm5lYXItYXBpLWpzXCI7XG5cbi8vIEZ1cnRoZXIgcmVhZGluZyByZWdhcmRpbmcgQVBEVSBMZWRnZXIgQVBJOlxuLy8gLSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9Xb2xsYWMvNDlmMGM0ZTMxOGU0MmY0NjNiODMwNjI5OGRmYjRmNGFcbi8vIC0gaHR0cHM6Ly9naXRodWIuY29tL0xlZGdlckhRL2FwcC1uZWFyL2Jsb2IvbWFzdGVyL3dvcmtkaXIvYXBwLW5lYXIvc3JjL2NvbnN0YW50cy5oXG5cbmV4cG9ydCBjb25zdCBDTEEgPSAweDgwOyAvLyBBbHdheXMgdGhlIHNhbWUgZm9yIExlZGdlci5cbmV4cG9ydCBjb25zdCBJTlNfU0lHTiA9IDB4MDI7IC8vIFNpZ25cbmV4cG9ydCBjb25zdCBJTlNfR0VUX1BVQkxJQ19LRVkgPSAweDA0OyAvLyBHZXQgUHVibGljIEtleVxuZXhwb3J0IGNvbnN0IElOU19HRVRfQVBQX1ZFUlNJT04gPSAweDA2OyAvLyBHZXQgQXBwIFZlcnNpb25cbmV4cG9ydCBjb25zdCBQMV9MQVNUID0gMHg4MDsgLy8gRW5kIG9mIEJ5dGVzIHRvIFNpZ24gKGZpbmFsaXplKVxuZXhwb3J0IGNvbnN0IFAxX01PUkUgPSAweDAwOyAvLyBNb3JlIGJ5dGVzIGNvbWluZ1xuZXhwb3J0IGNvbnN0IFAxX0lHTk9SRSA9IDB4MDA7XG5leHBvcnQgY29uc3QgUDJfSUdOT1JFID0gMHgwMDtcblxuLy8gQ29udmVydHMgQklQMzItY29tcGxpYW50IGRlcml2YXRpb24gcGF0aCB0byBhIEJ1ZmZlci5cbi8vIE1vcmUgaW5mbyBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vTGVkZ2VySFEvbGVkZ2VyLWxpdmUtY29tbW9uL2Jsb2IvbWFzdGVyL2RvY3MvZGVyaXZhdGlvbi5tZFxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGVyaXZhdGlvblBhdGgoZGVyaXZhdGlvblBhdGg6IHN0cmluZykge1xuICBjb25zdCBwYXJ0cyA9IGRlcml2YXRpb25QYXRoLnNwbGl0KFwiL1wiKTtcblxuICByZXR1cm4gQnVmZmVyLmNvbmNhdChcbiAgICBwYXJ0c1xuICAgICAgLm1hcCgocGFydCkgPT4ge1xuICAgICAgICByZXR1cm4gcGFydC5lbmRzV2l0aChgJ2ApXG4gICAgICAgICAgPyBNYXRoLmFicyhwYXJzZUludChwYXJ0LnNsaWNlKDAsIC0xKSkpIHwgMHg4MDAwMDAwMFxuICAgICAgICAgIDogTWF0aC5hYnMocGFyc2VJbnQocGFydCkpO1xuICAgICAgfSlcbiAgICAgIC5tYXAoKGkzMikgPT4ge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oW1xuICAgICAgICAgIChpMzIgPj4gMjQpICYgMHhmZixcbiAgICAgICAgICAoaTMyID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgICAgKGkzMiA+PiA4KSAmIDB4ZmYsXG4gICAgICAgICAgaTMyICYgMHhmZixcbiAgICAgICAgXSk7XG4gICAgICB9KVxuICApO1xufVxuXG4vLyBUT0RPOiBVbmRlcnN0YW5kIHdoYXQgdGhpcyBpcyBleGFjdGx5LiBXaGF0J3Mgc28gc3BlY2lhbCBhYm91dCA4Nz9cbmV4cG9ydCBjb25zdCBuZXR3b3JrSWQgPSBcIldcIi5jaGFyQ29kZUF0KDApO1xuXG5pbnRlcmZhY2UgR2V0UHVibGljS2V5UGFyYW1zIHtcbiAgZGVyaXZhdGlvblBhdGg6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFNpZ25QYXJhbXMge1xuICBkYXRhOiBVaW50OEFycmF5O1xuICBkZXJpdmF0aW9uUGF0aDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgRXZlbnRNYXAge1xuICBkaXNjb25uZWN0OiBFcnJvcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJzY3JpcHRpb24ge1xuICByZW1vdmU6ICgpID0+IHZvaWQ7XG59XG5cbi8vIE5vdCB1c2luZyBUcmFuc3BvcnRXZWJISUQuaXNTdXBwb3J0ZWQgYXMgaXQncyBjaG9zZW4gdG8gdXNlIGEgUHJvbWlzZS4uLlxuZXhwb3J0IGNvbnN0IGlzTGVkZ2VyU3VwcG9ydGVkID0gKCkgPT4ge1xuICByZXR1cm4gISF3aW5kb3cubmF2aWdhdG9yPy5oaWQ7XG59O1xuXG5leHBvcnQgY2xhc3MgTGVkZ2VyQ2xpZW50IHtcbiAgcHJpdmF0ZSB0cmFuc3BvcnQ6IFRyYW5zcG9ydCB8IG51bGwgPSBudWxsO1xuXG4gIGlzQ29ubmVjdGVkID0gKCkgPT4ge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMudHJhbnNwb3J0KTtcbiAgfTtcblxuICBjb25uZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIHRoaXMudHJhbnNwb3J0ID0gYXdhaXQgVHJhbnNwb3J0V2ViSElELmNyZWF0ZSgpO1xuXG4gICAgY29uc3QgaGFuZGxlRGlzY29ubmVjdCA9ICgpID0+IHtcbiAgICAgIHRoaXMudHJhbnNwb3J0Py5vZmYoXCJkaXNjb25uZWN0XCIsIGhhbmRsZURpc2Nvbm5lY3QpO1xuICAgICAgdGhpcy50cmFuc3BvcnQgPSBudWxsO1xuICAgIH07XG5cbiAgICB0aGlzLnRyYW5zcG9ydC5vbihcImRpc2Nvbm5lY3RcIiwgaGFuZGxlRGlzY29ubmVjdCk7XG4gIH07XG5cbiAgZGlzY29ubmVjdCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXRoaXMudHJhbnNwb3J0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnRyYW5zcG9ydC5jbG9zZSgpO1xuICAgIHRoaXMudHJhbnNwb3J0ID0gbnVsbDtcbiAgfTtcblxuICBzZXRTY3JhbWJsZUtleSA9IChrZXk6IHN0cmluZykgPT4ge1xuICAgIGlmICghdGhpcy50cmFuc3BvcnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRldmljZSBub3QgY29ubmVjdGVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMudHJhbnNwb3J0LnNldFNjcmFtYmxlS2V5KGtleSk7XG4gIH07XG5cbiAgb24gPSA8RXZlbnQgZXh0ZW5kcyBrZXlvZiBFdmVudE1hcD4oXG4gICAgZXZlbnQ6IEV2ZW50LFxuICAgIGNhbGxiYWNrOiAoZGF0YTogRXZlbnRNYXBbRXZlbnRdKSA9PiB2b2lkXG4gICk6IFN1YnNjcmlwdGlvbiA9PiB7XG4gICAgaWYgKCF0aGlzLnRyYW5zcG9ydCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XG4gICAgfVxuXG4gICAgdGhpcy50cmFuc3BvcnQub24oZXZlbnQsIGNhbGxiYWNrKTtcblxuICAgIHJldHVybiB7XG4gICAgICByZW1vdmU6ICgpID0+IHRoaXMudHJhbnNwb3J0Py5vZmYoZXZlbnQsIGNhbGxiYWNrKSxcbiAgICB9O1xuICB9O1xuXG4gIG9mZiA9IChldmVudDoga2V5b2YgRXZlbnRNYXAsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgaWYgKCF0aGlzLnRyYW5zcG9ydCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XG4gICAgfVxuXG4gICAgdGhpcy50cmFuc3BvcnQub2ZmKGV2ZW50LCBjYWxsYmFjayk7XG4gIH07XG5cbiAgZ2V0VmVyc2lvbiA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXRoaXMudHJhbnNwb3J0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydC5zZW5kKFxuICAgICAgQ0xBLFxuICAgICAgSU5TX0dFVF9BUFBfVkVSU0lPTixcbiAgICAgIFAxX0lHTk9SRSxcbiAgICAgIFAyX0lHTk9SRVxuICAgICk7XG5cbiAgICBjb25zdCBbbWFqb3IsIG1pbm9yLCBwYXRjaF0gPSBBcnJheS5mcm9tKHJlcyk7XG5cbiAgICByZXR1cm4gYCR7bWFqb3J9LiR7bWlub3J9LiR7cGF0Y2h9YDtcbiAgfTtcblxuICBnZXRQdWJsaWNLZXkgPSBhc3luYyAoeyBkZXJpdmF0aW9uUGF0aCB9OiBHZXRQdWJsaWNLZXlQYXJhbXMpID0+IHtcbiAgICBpZiAoIXRoaXMudHJhbnNwb3J0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydC5zZW5kKFxuICAgICAgQ0xBLFxuICAgICAgSU5TX0dFVF9QVUJMSUNfS0VZLFxuICAgICAgUDJfSUdOT1JFLFxuICAgICAgbmV0d29ya0lkLFxuICAgICAgcGFyc2VEZXJpdmF0aW9uUGF0aChkZXJpdmF0aW9uUGF0aClcbiAgICApO1xuXG4gICAgcmV0dXJuIHV0aWxzLnNlcmlhbGl6ZS5iYXNlX2VuY29kZShyZXMuc3ViYXJyYXkoMCwgLTIpKTtcbiAgfTtcblxuICBzaWduID0gYXN5bmMgKHsgZGF0YSwgZGVyaXZhdGlvblBhdGggfTogU2lnblBhcmFtcykgPT4ge1xuICAgIGlmICghdGhpcy50cmFuc3BvcnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRldmljZSBub3QgY29ubmVjdGVkXCIpO1xuICAgIH1cblxuICAgIC8vIE5PVEU6IGdldFZlcnNpb24gY2FsbCByZXNldHMgc3RhdGUgdG8gYXZvaWQgc3RhcnRpbmcgZnJvbSBwYXJ0aWFsbHkgZmlsbGVkIGJ1ZmZlclxuICAgIGF3YWl0IHRoaXMuZ2V0VmVyc2lvbigpO1xuXG4gICAgLy8gMTI4IC0gNSBzZXJ2aWNlIGJ5dGVzXG4gICAgY29uc3QgQ0hVTktfU0laRSA9IDEyMztcbiAgICBjb25zdCBhbGxEYXRhID0gQnVmZmVyLmNvbmNhdChbXG4gICAgICBwYXJzZURlcml2YXRpb25QYXRoKGRlcml2YXRpb25QYXRoKSxcbiAgICAgIEJ1ZmZlci5mcm9tKGRhdGEpLFxuICAgIF0pO1xuXG4gICAgZm9yIChsZXQgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgYWxsRGF0YS5sZW5ndGg7IG9mZnNldCArPSBDSFVOS19TSVpFKSB7XG4gICAgICBjb25zdCBpc0xhc3RDaHVuayA9IG9mZnNldCArIENIVU5LX1NJWkUgPj0gYWxsRGF0YS5sZW5ndGg7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy50cmFuc3BvcnQuc2VuZChcbiAgICAgICAgQ0xBLFxuICAgICAgICBJTlNfU0lHTixcbiAgICAgICAgaXNMYXN0Q2h1bmsgPyBQMV9MQVNUIDogUDFfTU9SRSxcbiAgICAgICAgUDJfSUdOT1JFLFxuICAgICAgICBCdWZmZXIuZnJvbShhbGxEYXRhLnN1YmFycmF5KG9mZnNldCwgb2Zmc2V0ICsgQ0hVTktfU0laRSkpXG4gICAgICApO1xuXG4gICAgICBpZiAoaXNMYXN0Q2h1bmspIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHJlc3BvbnNlLnN1YmFycmF5KDAsIC0yKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBkYXRhIG9yIGRlcml2YXRpb24gcGF0aFwiKTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJUcmFuc3BvcnRXZWJISUQiLCJ1dGlscyIsIkNMQSIsIklOU19TSUdOIiwiSU5TX0dFVF9QVUJMSUNfS0VZIiwiSU5TX0dFVF9BUFBfVkVSU0lPTiIsIlAxX0xBU1QiLCJQMV9NT1JFIiwiUDFfSUdOT1JFIiwiUDJfSUdOT1JFIiwicGFyc2VEZXJpdmF0aW9uUGF0aCIsImRlcml2YXRpb25QYXRoIiwicGFydHMiLCJzcGxpdCIsIkJ1ZmZlciIsImNvbmNhdCIsIm1hcCIsInBhcnQiLCJlbmRzV2l0aCIsIk1hdGgiLCJhYnMiLCJwYXJzZUludCIsInNsaWNlIiwiaTMyIiwiZnJvbSIsIm5ldHdvcmtJZCIsImNoYXJDb2RlQXQiLCJpc0xlZGdlclN1cHBvcnRlZCIsIndpbmRvdyIsIm5hdmlnYXRvciIsImhpZCIsIkxlZGdlckNsaWVudCIsIkJvb2xlYW4iLCJ0cmFuc3BvcnQiLCJjcmVhdGUiLCJoYW5kbGVEaXNjb25uZWN0Iiwib2ZmIiwib24iLCJFcnJvciIsImNsb3NlIiwia2V5Iiwic2V0U2NyYW1ibGVLZXkiLCJldmVudCIsImNhbGxiYWNrIiwicmVtb3ZlIiwicmVzIiwic2VuZCIsIm1ham9yIiwibWlub3IiLCJwYXRjaCIsIkFycmF5Iiwic2VyaWFsaXplIiwiYmFzZV9lbmNvZGUiLCJzdWJhcnJheSIsImRhdGEiLCJnZXRWZXJzaW9uIiwiQ0hVTktfU0laRSIsImFsbERhdGEiLCJvZmZzZXQiLCJsZW5ndGgiLCJpc0xhc3RDaHVuayIsInJlc3BvbnNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/ledger/src/lib/ledger-client.ts\n");

/***/ }),

/***/ "../../packages/ledger/src/lib/ledger.ts":
/*!***********************************************!*\
  !*** ../../packages/ledger/src/lib/ledger.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"STORAGE_ACCOUNTS\": () => (/* binding */ STORAGE_ACCOUNTS),\n/* harmony export */   \"setupLedger\": () => (/* binding */ setupLedger)\n/* harmony export */ });\n/* harmony import */ var is_mobile__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! is-mobile */ \"is-mobile\");\n/* harmony import */ var is_mobile__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(is_mobile__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var near_api_js_lib_utils_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! near-api-js/lib/utils/errors */ \"near-api-js/lib/utils/errors\");\n/* harmony import */ var near_api_js_lib_utils_errors__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(near_api_js_lib_utils_errors__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @near-wallet-selector/wallet-utils */ \"../../packages/wallet-utils/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @near-wallet-selector/core */ \"../../packages/core/src/index.ts\");\n/* harmony import */ var _ledger_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ledger-client */ \"../../packages/ledger/src/lib/ledger-client.ts\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! near-api-js */ \"near-api-js\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(near_api_js__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nconst STORAGE_ACCOUNTS = \"accounts\";\n\nconst setupLedgerState = async storage => {\n  const accounts = await storage.getItem(STORAGE_ACCOUNTS);\n  return {\n    client: new _ledger_client__WEBPACK_IMPORTED_MODULE_4__.LedgerClient(),\n    subscriptions: [],\n    accounts: accounts || []\n  };\n};\n\nconst Ledger = async ({\n  options,\n  store,\n  provider,\n  logger,\n  storage,\n  metadata\n}) => {\n  const _state = await setupLedgerState(storage);\n\n  const signer = {\n    createKey: () => {\n      throw new Error(\"Not implemented\");\n    },\n    getPublicKey: async accountId => {\n      const account = _state.accounts.find(a => a.accountId === accountId);\n\n      if (!account) {\n        throw new Error(\"Failed to find public key for account\");\n      }\n\n      return near_api_js__WEBPACK_IMPORTED_MODULE_5__.utils.PublicKey.from(account.publicKey);\n    },\n    signMessage: async (message, accountId) => {\n      const account = _state.accounts.find(a => a.accountId === accountId);\n\n      if (!account) {\n        throw new Error(\"Failed to find account for signing\");\n      }\n\n      const signature = await _state.client.sign({\n        data: message,\n        derivationPath: account.derivationPath\n      });\n      return {\n        signature,\n        publicKey: near_api_js__WEBPACK_IMPORTED_MODULE_5__.utils.PublicKey.from(account.publicKey)\n      };\n    }\n  };\n\n  const getAccounts = () => {\n    return _state.accounts.map(x => ({\n      accountId: x.accountId\n    }));\n  };\n\n  const cleanup = () => {\n    _state.subscriptions.forEach(subscription => subscription.remove());\n\n    _state.subscriptions = [];\n    _state.accounts = [];\n    storage.removeItem(STORAGE_ACCOUNTS);\n  };\n\n  const signOut = async () => {\n    if (_state.client.isConnected()) {\n      await _state.client.disconnect().catch(err => {\n        logger.log(\"Failed to disconnect device\");\n        logger.error(err);\n      });\n    }\n\n    cleanup();\n  };\n\n  const connectLedgerDevice = async () => {\n    if (_state.client.isConnected()) {\n      return;\n    }\n\n    await _state.client.connect();\n  };\n\n  const validateAccessKey = ({\n    accountId,\n    publicKey\n  }) => {\n    logger.log(\"validateAccessKey\", {\n      accountId,\n      publicKey\n    });\n    return provider.viewAccessKey({\n      accountId,\n      publicKey\n    }).then(accessKey => {\n      logger.log(\"validateAccessKey:accessKey\", {\n        accessKey\n      });\n\n      if (accessKey.permission !== \"FullAccess\") {\n        throw new Error(\"Public key requires 'FullAccess' permission\");\n      }\n\n      return accessKey;\n    }, err => {\n      if (err instanceof near_api_js_lib_utils_errors__WEBPACK_IMPORTED_MODULE_1__.TypedError && err.type === \"AccessKeyDoesNotExist\") {\n        return null;\n      }\n\n      throw err;\n    });\n  };\n\n  const transformTransactions = transactions => {\n    const {\n      contract\n    } = store.getState();\n\n    if (!contract) {\n      throw new Error(\"Wallet not signed in\");\n    }\n\n    const account = (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_3__.getActiveAccount)(store.getState());\n\n    if (!account) {\n      throw new Error(\"No active account\");\n    }\n\n    return transactions.map(transaction => {\n      return {\n        signerId: transaction.signerId || account.accountId,\n        receiverId: transaction.receiverId || contract.contractId,\n        actions: transaction.actions\n      };\n    });\n  };\n\n  return {\n    async signIn({\n      accounts\n    }) {\n      const existingAccounts = getAccounts();\n\n      if (existingAccounts.length) {\n        return existingAccounts;\n      }\n\n      const ledgerAccounts = [];\n\n      for (let i = 0; i < accounts.length; i++) {\n        const {\n          derivationPath,\n          accountId,\n          publicKey\n        } = accounts[i];\n        const accessKey = await validateAccessKey({\n          accountId,\n          publicKey\n        });\n\n        if (!accessKey) {\n          throw new Error(`Public key is not registered with the account '${accountId}'.`);\n        }\n\n        ledgerAccounts.push({\n          accountId,\n          derivationPath,\n          publicKey\n        });\n      }\n\n      await storage.setItem(STORAGE_ACCOUNTS, ledgerAccounts);\n      _state.accounts = ledgerAccounts;\n      return getAccounts();\n    },\n\n    signOut,\n\n    async getAccounts() {\n      return getAccounts();\n    },\n\n    async verifyOwner({\n      message\n    }) {\n      logger.log(\"Ledger:verifyOwner\", {\n        message\n      });\n      throw new Error(`Method not supported by ${metadata.name}`);\n    },\n\n    async signAndSendTransaction({\n      signerId,\n      receiverId,\n      actions\n    }) {\n      logger.log(\"signAndSendTransaction\", {\n        signerId,\n        receiverId,\n        actions\n      });\n\n      if (!_state.accounts.length) {\n        throw new Error(\"Wallet not signed in\");\n      } // Note: Connection must be triggered by user interaction.\n\n\n      await connectLedgerDevice();\n      const signedTransactions = await (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_2__.signTransactions)(transformTransactions([{\n        signerId,\n        receiverId,\n        actions\n      }]), signer, options.network);\n      return provider.sendTransaction(signedTransactions[0]);\n    },\n\n    async signAndSendTransactions({\n      transactions\n    }) {\n      logger.log(\"signAndSendTransactions\", {\n        transactions\n      });\n\n      if (!_state.accounts.length) {\n        throw new Error(\"Wallet not signed in\");\n      } // Note: Connection must be triggered by user interaction.\n\n\n      await connectLedgerDevice();\n      const signedTransactions = await (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_2__.signTransactions)(transformTransactions(transactions), signer, options.network);\n      const results = [];\n\n      for (let i = 0; i < signedTransactions.length; i++) {\n        results.push(await provider.sendTransaction(signedTransactions[i]));\n      }\n\n      return results;\n    },\n\n    async getPublicKey(derivationPath) {\n      await connectLedgerDevice();\n      return await _state.client.getPublicKey({\n        derivationPath\n      });\n    }\n\n  };\n};\n\nfunction setupLedger({\n  iconUrl = \"./assets/ledger-icon.png\",\n  deprecated = false\n} = {}) {\n  return async () => {\n    const mobile = (0,is_mobile__WEBPACK_IMPORTED_MODULE_0__.isMobile)();\n    const supported = (0,_ledger_client__WEBPACK_IMPORTED_MODULE_4__.isLedgerSupported)();\n\n    if (mobile) {\n      return null;\n    }\n\n    return {\n      id: \"ledger\",\n      type: \"hardware\",\n      metadata: {\n        name: \"Ledger\",\n        description: null,\n        iconUrl,\n        deprecated,\n        available: supported\n      },\n      init: Ledger\n    };\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvbGVkZ2VyL3NyYy9saWIvbGVkZ2VyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBVUE7QUFFQTtBQUVBO0FBd0JPLE1BQU1PLGdCQUFnQixHQUFHLFVBQXpCOztBQUVQLE1BQU1DLGdCQUFnQixHQUFHLE1BQ3ZCQyxPQUR1QixJQUVFO0VBQ3pCLE1BQU1DLFFBQVEsR0FBRyxNQUFNRCxPQUFPLENBQUNFLE9BQVIsQ0FDckJKLGdCQURxQixDQUF2QjtFQUlBLE9BQU87SUFDTEssTUFBTSxFQUFFLElBQUlQLHdEQUFKLEVBREg7SUFFTFEsYUFBYSxFQUFFLEVBRlY7SUFHTEgsUUFBUSxFQUFFQSxRQUFRLElBQUk7RUFIakIsQ0FBUDtBQUtELENBWkQ7O0FBY0EsTUFBTUksTUFBOEMsR0FBRyxPQUFPO0VBQzVEQyxPQUQ0RDtFQUU1REMsS0FGNEQ7RUFHNURDLFFBSDREO0VBSTVEQyxNQUo0RDtFQUs1RFQsT0FMNEQ7RUFNNURVO0FBTjRELENBQVAsS0FPakQ7RUFDSixNQUFNQyxNQUFNLEdBQUcsTUFBTVosZ0JBQWdCLENBQUNDLE9BQUQsQ0FBckM7O0VBRUEsTUFBTVksTUFBYyxHQUFHO0lBQ3JCQyxTQUFTLEVBQUUsTUFBTTtNQUNmLE1BQU0sSUFBSUMsS0FBSixDQUFVLGlCQUFWLENBQU47SUFDRCxDQUhvQjtJQUlyQkMsWUFBWSxFQUFFLE1BQU9DLFNBQVAsSUFBcUI7TUFDakMsTUFBTUMsT0FBTyxHQUFHTixNQUFNLENBQUNWLFFBQVAsQ0FBZ0JpQixJQUFoQixDQUFzQkMsQ0FBRCxJQUFPQSxDQUFDLENBQUNILFNBQUYsS0FBZ0JBLFNBQTVDLENBQWhCOztNQUVBLElBQUksQ0FBQ0MsT0FBTCxFQUFjO1FBQ1osTUFBTSxJQUFJSCxLQUFKLENBQVUsdUNBQVYsQ0FBTjtNQUNEOztNQUVELE9BQU9qQiw2REFBQSxDQUFxQm9CLE9BQU8sQ0FBQ0ssU0FBN0IsQ0FBUDtJQUNELENBWm9CO0lB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QW1CLEVBQXpCO01BRUEsT0FBTyxNQUFNakMsTUFBTSxDQUFDUixNQUFQLENBQWNZLFlBQWQsQ0FBMkI7UUFBRWE7TUFBRixDQUEzQixDQUFiO0lBQ0Q7O0VBN0ZJLENBQVA7QUErRkQsQ0E3TkQ7O0FBK05PLFNBQVNnRCxXQUFULENBQXFCO0VBQzFCQyxPQUFPLEdBQUcsMEJBRGdCO0VBRTFCQyxVQUFVLEdBQUc7QUFGYSxJQUdWLEVBSFgsRUFHb0Q7RUFDekQsT0FBTyxZQUFZO0lBQ2pCLE1BQU1DLE1BQU0sR0FBR3hGLG1EQUFRLEVBQXZCO0lBQ0EsTUFBTXlGLFNBQVMsR0FBR3JGLGlFQUFpQixFQUFuQzs7SUFFQSxJQUFJb0YsTUFBSixFQUFZO01BQ1YsT0FBTyxJQUFQO0lBQ0Q7O0lBRUQsT0FBTztNQUNMRSxFQUFFLEVBQUUsUUFEQztNQUVMOUIsSUFBSSxFQUFFLFVBRkQ7TUFHTHpDLFFBQVEsRUFBRTtRQUNSMkQsSUFBSSxFQUFFLFFBREU7UUFFUmEsV0FBVyxFQUFFLElBRkw7UUFHUkwsT0FIUTtRQUlSQyxVQUpRO1FBS1JLLFNBQVMsRUFBRUg7TUFMSCxDQUhMO01BVUxJLElBQUksRUFBRS9FO0lBVkQsQ0FBUDtFQVlELENBcEJEO0FBcUJEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL3BhY2thZ2VzL2xlZGdlci9zcmMvbGliL2xlZGdlci50cz9hMmM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzTW9iaWxlIH0gZnJvbSBcImlzLW1vYmlsZVwiO1xuaW1wb3J0IHsgVHlwZWRFcnJvciB9IGZyb20gXCJuZWFyLWFwaS1qcy9saWIvdXRpbHMvZXJyb3JzXCI7XG5pbXBvcnQgeyBzaWduVHJhbnNhY3Rpb25zIH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci93YWxsZXQtdXRpbHNcIjtcbmltcG9ydCB0eXBlIHtcbiAgV2FsbGV0TW9kdWxlRmFjdG9yeSxcbiAgV2FsbGV0QmVoYXZpb3VyRmFjdG9yeSxcbiAgSnNvblN0b3JhZ2VTZXJ2aWNlLFxuICBBY2NvdW50LFxuICBIYXJkd2FyZVdhbGxldCxcbiAgVHJhbnNhY3Rpb24sXG4gIE9wdGlvbmFsLFxufSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcbmltcG9ydCB7IGdldEFjdGl2ZUFjY291bnQgfSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcblxuaW1wb3J0IHsgaXNMZWRnZXJTdXBwb3J0ZWQsIExlZGdlckNsaWVudCB9IGZyb20gXCIuL2xlZGdlci1jbGllbnRcIjtcbmltcG9ydCB0eXBlIHsgU3Vic2NyaXB0aW9uIH0gZnJvbSBcIi4vbGVkZ2VyLWNsaWVudFwiO1xuaW1wb3J0IHsgU2lnbmVyLCB1dGlscyB9IGZyb20gXCJuZWFyLWFwaS1qc1wiO1xuaW1wb3J0IHR5cGUgeyBGaW5hbEV4ZWN1dGlvbk91dGNvbWUgfSBmcm9tIFwibmVhci1hcGktanMvbGliL3Byb3ZpZGVyc1wiO1xuXG5pbnRlcmZhY2UgTGVkZ2VyQWNjb3VudCBleHRlbmRzIEFjY291bnQge1xuICBkZXJpdmF0aW9uUGF0aDogc3RyaW5nO1xuICBwdWJsaWNLZXk6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFZhbGlkYXRlQWNjZXNzS2V5UGFyYW1zIHtcbiAgYWNjb3VudElkOiBzdHJpbmc7XG4gIHB1YmxpY0tleTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgTGVkZ2VyU3RhdGUge1xuICBjbGllbnQ6IExlZGdlckNsaWVudDtcbiAgYWNjb3VudHM6IEFycmF5PExlZGdlckFjY291bnQ+O1xuICBzdWJzY3JpcHRpb25zOiBBcnJheTxTdWJzY3JpcHRpb24+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExlZGdlclBhcmFtcyB7XG4gIGljb25Vcmw/OiBzdHJpbmc7XG4gIGRlcHJlY2F0ZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgU1RPUkFHRV9BQ0NPVU5UUyA9IFwiYWNjb3VudHNcIjtcblxuY29uc3Qgc2V0dXBMZWRnZXJTdGF0ZSA9IGFzeW5jIChcbiAgc3RvcmFnZTogSnNvblN0b3JhZ2VTZXJ2aWNlXG4pOiBQcm9taXNlPExlZGdlclN0YXRlPiA9PiB7XG4gIGNvbnN0IGFjY291bnRzID0gYXdhaXQgc3RvcmFnZS5nZXRJdGVtPEFycmF5PExlZGdlckFjY291bnQ+PihcbiAgICBTVE9SQUdFX0FDQ09VTlRTXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBjbGllbnQ6IG5ldyBMZWRnZXJDbGllbnQoKSxcbiAgICBzdWJzY3JpcHRpb25zOiBbXSxcbiAgICBhY2NvdW50czogYWNjb3VudHMgfHwgW10sXG4gIH07XG59O1xuXG5jb25zdCBMZWRnZXI6IFdhbGxldEJlaGF2aW91ckZhY3Rvcnk8SGFyZHdhcmVXYWxsZXQ+ID0gYXN5bmMgKHtcbiAgb3B0aW9ucyxcbiAgc3RvcmUsXG4gIHByb3ZpZGVyLFxuICBsb2dnZXIsXG4gIHN0b3JhZ2UsXG4gIG1ldGFkYXRhLFxufSkgPT4ge1xuICBjb25zdCBfc3RhdGUgPSBhd2FpdCBzZXR1cExlZGdlclN0YXRlKHN0b3JhZ2UpO1xuXG4gIGNvbnN0IHNpZ25lcjogU2lnbmVyID0ge1xuICAgIGNyZWF0ZUtleTogKCkgPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICAgIH0sXG4gICAgZ2V0UHVibGljS2V5OiBhc3luYyAoYWNjb3VudElkKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gX3N0YXRlLmFjY291bnRzLmZpbmQoKGEpID0+IGEuYWNjb3VudElkID09PSBhY2NvdW50SWQpO1xuXG4gICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZpbmQgcHVibGljIGtleSBmb3IgYWNjb3VudFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHV0aWxzLlB1YmxpY0tleS5mcm9tKGFjY291bnQucHVibGljS2V5KTtcbiAgICB9LFxuICAgIHNpZ25NZXNzYWdlOiBhc3luYyAobWVzc2FnZSwgYWNjb3VudElkKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gX3N0YXRlLmFjY291bnRzLmZpbmQoKGEpID0+IGEuYWNjb3VudElkID09PSBhY2NvdW50SWQpO1xuXG4gICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZpbmQgYWNjb3VudCBmb3Igc2lnbmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgX3N0YXRlLmNsaWVudC5zaWduKHtcbiAgICAgICAgZGF0YTogbWVzc2FnZSxcbiAgICAgICAgZGVyaXZhdGlvblBhdGg6IGFjY291bnQuZGVyaXZhdGlvblBhdGgsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2lnbmF0dXJlLFxuICAgICAgICBwdWJsaWNLZXk6IHV0aWxzLlB1YmxpY0tleS5mcm9tKGFjY291bnQucHVibGljS2V5KSxcbiAgICAgIH07XG4gICAgfSxcbiAgfTtcblxuICBjb25zdCBnZXRBY2NvdW50cyA9ICgpOiBBcnJheTxBY2NvdW50PiA9PiB7XG4gICAgcmV0dXJuIF9zdGF0ZS5hY2NvdW50cy5tYXAoKHgpID0+ICh7XG4gICAgICBhY2NvdW50SWQ6IHguYWNjb3VudElkLFxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgIF9zdGF0ZS5zdWJzY3JpcHRpb25zLmZvckVhY2goKHN1YnNjcmlwdGlvbikgPT4gc3Vic2NyaXB0aW9uLnJlbW92ZSgpKTtcblxuICAgIF9zdGF0ZS5zdWJzY3JpcHRpb25zID0gW107XG4gICAgX3N0YXRlLmFjY291bnRzID0gW107XG5cbiAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9BQ0NPVU5UUyk7XG4gIH07XG5cbiAgY29uc3Qgc2lnbk91dCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoX3N0YXRlLmNsaWVudC5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICBhd2FpdCBfc3RhdGUuY2xpZW50LmRpc2Nvbm5lY3QoKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJGYWlsZWQgdG8gZGlzY29ubmVjdCBkZXZpY2VcIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2xlYW51cCgpO1xuICB9O1xuXG4gIGNvbnN0IGNvbm5lY3RMZWRnZXJEZXZpY2UgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKF9zdGF0ZS5jbGllbnQuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IF9zdGF0ZS5jbGllbnQuY29ubmVjdCgpO1xuICB9O1xuXG4gIGNvbnN0IHZhbGlkYXRlQWNjZXNzS2V5ID0gKHtcbiAgICBhY2NvdW50SWQsXG4gICAgcHVibGljS2V5LFxuICB9OiBWYWxpZGF0ZUFjY2Vzc0tleVBhcmFtcykgPT4ge1xuICAgIGxvZ2dlci5sb2coXCJ2YWxpZGF0ZUFjY2Vzc0tleVwiLCB7IGFjY291bnRJZCwgcHVibGljS2V5IH0pO1xuXG4gICAgcmV0dXJuIHByb3ZpZGVyLnZpZXdBY2Nlc3NLZXkoeyBhY2NvdW50SWQsIHB1YmxpY0tleSB9KS50aGVuKFxuICAgICAgKGFjY2Vzc0tleSkgPT4ge1xuICAgICAgICBsb2dnZXIubG9nKFwidmFsaWRhdGVBY2Nlc3NLZXk6YWNjZXNzS2V5XCIsIHsgYWNjZXNzS2V5IH0pO1xuXG4gICAgICAgIGlmIChhY2Nlc3NLZXkucGVybWlzc2lvbiAhPT0gXCJGdWxsQWNjZXNzXCIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQdWJsaWMga2V5IHJlcXVpcmVzICdGdWxsQWNjZXNzJyBwZXJtaXNzaW9uXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFjY2Vzc0tleTtcbiAgICAgIH0sXG4gICAgICAoZXJyKSA9PiB7XG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBUeXBlZEVycm9yICYmIGVyci50eXBlID09PSBcIkFjY2Vzc0tleURvZXNOb3RFeGlzdFwiKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCB0cmFuc2Zvcm1UcmFuc2FjdGlvbnMgPSAoXG4gICAgdHJhbnNhY3Rpb25zOiBBcnJheTxPcHRpb25hbDxUcmFuc2FjdGlvbiwgXCJzaWduZXJJZFwiIHwgXCJyZWNlaXZlcklkXCI+PlxuICApOiBBcnJheTxUcmFuc2FjdGlvbj4gPT4ge1xuICAgIGNvbnN0IHsgY29udHJhY3QgfSA9IHN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICBpZiAoIWNvbnRyYWN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXYWxsZXQgbm90IHNpZ25lZCBpblwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBhY2NvdW50ID0gZ2V0QWN0aXZlQWNjb3VudChzdG9yZS5nZXRTdGF0ZSgpKTtcblxuICAgIGlmICghYWNjb3VudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWN0aXZlIGFjY291bnRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyYW5zYWN0aW9ucy5tYXAoKHRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzaWduZXJJZDogdHJhbnNhY3Rpb24uc2lnbmVySWQgfHwgYWNjb3VudC5hY2NvdW50SWQsXG4gICAgICAgIHJlY2VpdmVySWQ6IHRyYW5zYWN0aW9uLnJlY2VpdmVySWQgfHwgY29udHJhY3QuY29udHJhY3RJZCxcbiAgICAgICAgYWN0aW9uczogdHJhbnNhY3Rpb24uYWN0aW9ucyxcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBhc3luYyBzaWduSW4oeyBhY2NvdW50cyB9KSB7XG4gICAgICBjb25zdCBleGlzdGluZ0FjY291bnRzID0gZ2V0QWNjb3VudHMoKTtcblxuICAgICAgaWYgKGV4aXN0aW5nQWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBleGlzdGluZ0FjY291bnRzO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsZWRnZXJBY2NvdW50czogQXJyYXk8TGVkZ2VyQWNjb3VudD4gPSBbXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY2NvdW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB7IGRlcml2YXRpb25QYXRoLCBhY2NvdW50SWQsIHB1YmxpY0tleSB9ID0gYWNjb3VudHNbaV07XG5cbiAgICAgICAgY29uc3QgYWNjZXNzS2V5ID0gYXdhaXQgdmFsaWRhdGVBY2Nlc3NLZXkoeyBhY2NvdW50SWQsIHB1YmxpY0tleSB9KTtcblxuICAgICAgICBpZiAoIWFjY2Vzc0tleSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBQdWJsaWMga2V5IGlzIG5vdCByZWdpc3RlcmVkIHdpdGggdGhlIGFjY291bnQgJyR7YWNjb3VudElkfScuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZWRnZXJBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICBhY2NvdW50SWQsXG4gICAgICAgICAgZGVyaXZhdGlvblBhdGgsXG4gICAgICAgICAgcHVibGljS2V5LFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgc3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfQUNDT1VOVFMsIGxlZGdlckFjY291bnRzKTtcbiAgICAgIF9zdGF0ZS5hY2NvdW50cyA9IGxlZGdlckFjY291bnRzO1xuXG4gICAgICByZXR1cm4gZ2V0QWNjb3VudHMoKTtcbiAgICB9LFxuXG4gICAgc2lnbk91dCxcblxuICAgIGFzeW5jIGdldEFjY291bnRzKCkge1xuICAgICAgcmV0dXJuIGdldEFjY291bnRzKCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHZlcmlmeU93bmVyKHsgbWVzc2FnZSB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwiTGVkZ2VyOnZlcmlmeU93bmVyXCIsIHsgbWVzc2FnZSB9KTtcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNZXRob2Qgbm90IHN1cHBvcnRlZCBieSAke21ldGFkYXRhLm5hbWV9YCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb24oeyBzaWduZXJJZCwgcmVjZWl2ZXJJZCwgYWN0aW9ucyB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwic2lnbkFuZFNlbmRUcmFuc2FjdGlvblwiLCB7IHNpZ25lcklkLCByZWNlaXZlcklkLCBhY3Rpb25zIH0pO1xuXG4gICAgICBpZiAoIV9zdGF0ZS5hY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgICB9XG5cbiAgICAgIC8vIE5vdGU6IENvbm5lY3Rpb24gbXVzdCBiZSB0cmlnZ2VyZWQgYnkgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgIGF3YWl0IGNvbm5lY3RMZWRnZXJEZXZpY2UoKTtcblxuICAgICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb25zID0gYXdhaXQgc2lnblRyYW5zYWN0aW9ucyhcbiAgICAgICAgdHJhbnNmb3JtVHJhbnNhY3Rpb25zKFt7IHNpZ25lcklkLCByZWNlaXZlcklkLCBhY3Rpb25zIH1dKSxcbiAgICAgICAgc2lnbmVyLFxuICAgICAgICBvcHRpb25zLm5ldHdvcmtcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBwcm92aWRlci5zZW5kVHJhbnNhY3Rpb24oc2lnbmVkVHJhbnNhY3Rpb25zWzBdKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbnMoeyB0cmFuc2FjdGlvbnMgfSkge1xuICAgICAgbG9nZ2VyLmxvZyhcInNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zXCIsIHsgdHJhbnNhY3Rpb25zIH0pO1xuXG4gICAgICBpZiAoIV9zdGF0ZS5hY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgICB9XG5cbiAgICAgIC8vIE5vdGU6IENvbm5lY3Rpb24gbXVzdCBiZSB0cmlnZ2VyZWQgYnkgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgIGF3YWl0IGNvbm5lY3RMZWRnZXJEZXZpY2UoKTtcblxuICAgICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb25zID0gYXdhaXQgc2lnblRyYW5zYWN0aW9ucyhcbiAgICAgICAgdHJhbnNmb3JtVHJhbnNhY3Rpb25zKHRyYW5zYWN0aW9ucyksXG4gICAgICAgIHNpZ25lcixcbiAgICAgICAgb3B0aW9ucy5uZXR3b3JrXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXN1bHRzOiBBcnJheTxGaW5hbEV4ZWN1dGlvbk91dGNvbWU+ID0gW107XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2lnbmVkVHJhbnNhY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChhd2FpdCBwcm92aWRlci5zZW5kVHJhbnNhY3Rpb24oc2lnbmVkVHJhbnNhY3Rpb25zW2ldKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0UHVibGljS2V5KGRlcml2YXRpb25QYXRoOiBzdHJpbmcpIHtcbiAgICAgIGF3YWl0IGNvbm5lY3RMZWRnZXJEZXZpY2UoKTtcblxuICAgICAgcmV0dXJuIGF3YWl0IF9zdGF0ZS5jbGllbnQuZ2V0UHVibGljS2V5KHsgZGVyaXZhdGlvblBhdGggfSk7XG4gICAgfSxcbiAgfTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cExlZGdlcih7XG4gIGljb25VcmwgPSBcIi4vYXNzZXRzL2xlZGdlci1pY29uLnBuZ1wiLFxuICBkZXByZWNhdGVkID0gZmFsc2UsXG59OiBMZWRnZXJQYXJhbXMgPSB7fSk6IFdhbGxldE1vZHVsZUZhY3Rvcnk8SGFyZHdhcmVXYWxsZXQ+IHtcbiAgcmV0dXJuIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2JpbGUgPSBpc01vYmlsZSgpO1xuICAgIGNvbnN0IHN1cHBvcnRlZCA9IGlzTGVkZ2VyU3VwcG9ydGVkKCk7XG5cbiAgICBpZiAobW9iaWxlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IFwibGVkZ2VyXCIsXG4gICAgICB0eXBlOiBcImhhcmR3YXJlXCIsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBuYW1lOiBcIkxlZGdlclwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgaWNvblVybCxcbiAgICAgICAgZGVwcmVjYXRlZCxcbiAgICAgICAgYXZhaWxhYmxlOiBzdXBwb3J0ZWQsXG4gICAgICB9LFxuICAgICAgaW5pdDogTGVkZ2VyLFxuICAgIH07XG4gIH07XG59XG4iXSwibmFtZXMiOlsiaXNNb2JpbGUiLCJUeXBlZEVycm9yIiwic2lnblRyYW5zYWN0aW9ucyIsImdldEFjdGl2ZUFjY291bnQiLCJpc0xlZGdlclN1cHBvcnRlZCIsIkxlZGdlckNsaWVudCIsInV0aWxzIiwiU1RPUkFHRV9BQ0NPVU5UUyIsInNldHVwTGVkZ2VyU3RhdGUiLCJzdG9yYWdlIiwiYWNjb3VudHMiLCJnZXRJdGVtIiwiY2xpZW50Iiwic3Vic2NyaXB0aW9ucyIsIkxlZGdlciIsIm9wdGlvbnMiLCJzdG9yZSIsInByb3ZpZGVyIiwibG9nZ2VyIiwibWV0YWRhdGEiLCJfc3RhdGUiLCJzaWduZXIiLCJjcmVhdGVLZXkiLCJFcnJvciIsImdldFB1YmxpY0tleSIsImFjY291bnRJZCIsImFjY291bnQiLCJmaW5kIiwiYSIsIlB1YmxpY0tleSIsImZyb20iLCJwdWJsaWNLZXkiLCJzaWduTWVzc2FnZSIsIm1lc3NhZ2UiLCJzaWduYXR1cmUiLCJzaWduIiwiZGF0YSIsImRlcml2YXRpb25QYXRoIiwiZ2V0QWNjb3VudHMiLCJtYXAiLCJ4IiwiY2xlYW51cCIsImZvckVhY2giLCJzdWJzY3JpcHRpb24iLCJyZW1vdmUiLCJyZW1vdmVJdGVtIiwic2lnbk91dCIsImlzQ29ubmVjdGVkIiwiZGlzY29ubmVjdCIsImNhdGNoIiwiZXJyIiwibG9nIiwiZXJyb3IiLCJjb25uZWN0TGVkZ2VyRGV2aWNlIiwiY29ubmVjdCIsInZhbGlkYXRlQWNjZXNzS2V5Iiwidmlld0FjY2Vzc0tleSIsInRoZW4iLCJhY2Nlc3NLZXkiLCJwZXJtaXNzaW9uIiwidHlwZSIsInRyYW5zZm9ybVRyYW5zYWN0aW9ucyIsInRyYW5zYWN0aW9ucyIsImNvbnRyYWN0IiwiZ2V0U3RhdGUiLCJ0cmFuc2FjdGlvbiIsInNpZ25lcklkIiwicmVjZWl2ZXJJZCIsImNvbnRyYWN0SWQiLCJhY3Rpb25zIiwic2lnbkluIiwiZXhpc3RpbmdBY2NvdW50cyIsImxlbmd0aCIsImxlZGdlckFjY291bnRzIiwiaSIsInB1c2giLCJzZXRJdGVtIiwidmVyaWZ5T3duZXIiLCJuYW1lIiwic2lnbkFuZFNlbmRUcmFuc2FjdGlvbiIsInNpZ25lZFRyYW5zYWN0aW9ucyIsIm5ldHdvcmsiLCJzZW5kVHJhbnNhY3Rpb24iLCJzaWduQW5kU2VuZFRyYW5zYWN0aW9ucyIsInJlc3VsdHMiLCJzZXR1cExlZGdlciIsImljb25VcmwiLCJkZXByZWNhdGVkIiwibW9iaWxlIiwic3VwcG9ydGVkIiwiaWQiLCJkZXNjcmlwdGlvbiIsImF2YWlsYWJsZSIsImluaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/ledger/src/lib/ledger.ts\n");

/***/ }),

/***/ "../../packages/math-wallet/src/index.ts":
/*!***********************************************!*\
  !*** ../../packages/math-wallet/src/index.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupMathWallet": () => (/* reexport safe */ _lib_math_wallet__WEBPACK_IMPORTED_MODULE_0__.setupMathWallet)
/* harmony export */ });
/* harmony import */ var _lib_math_wallet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/math-wallet */ "../../packages/math-wallet/src/lib/math-wallet.ts");


/***/ }),

/***/ "../../packages/math-wallet/src/lib/math-wallet.ts":
/*!*********************************************************!*\
  !*** ../../packages/math-wallet/src/lib/math-wallet.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupMathWallet\": () => (/* binding */ setupMathWallet)\n/* harmony export */ });\n/* harmony import */ var is_mobile__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! is-mobile */ \"is-mobile\");\n/* harmony import */ var is_mobile__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(is_mobile__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @near-wallet-selector/core */ \"../../packages/core/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @near-wallet-selector/wallet-utils */ \"../../packages/wallet-utils/src/index.ts\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\nconst isInstalled = () => {\n  return (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_1__.waitFor)(() => !!window.nearWalletApi).catch(() => false);\n};\n\nconst setupMathWalletState = () => {\n  const wallet = window.nearWalletApi;\n  return {\n    wallet\n  };\n};\n\nconst MathWallet = async ({\n  metadata,\n  options,\n  store,\n  provider,\n  logger\n}) => {\n  const _state = setupMathWalletState();\n\n  const getAccounts = () => {\n    const account = _state.wallet.signer.account;\n\n    if (!account) {\n      return [];\n    }\n\n    return [{\n      accountId: account.accountId\n    }];\n  };\n\n  const transformTransactions = transactions => {\n    const {\n      contract\n    } = store.getState();\n\n    if (!contract) {\n      throw new Error(\"Wallet not signed in\");\n    }\n\n    const account = (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_1__.getActiveAccount)(store.getState());\n\n    if (!account) {\n      throw new Error(\"No active account\");\n    }\n\n    return transactions.map(transaction => {\n      return {\n        signerId: transaction.signerId || account.accountId,\n        receiverId: transaction.receiverId || contract.contractId,\n        actions: transaction.actions\n      };\n    });\n  };\n\n  return {\n    async signIn({\n      contractId\n    }) {\n      const existingAccounts = getAccounts();\n\n      if (existingAccounts.length) {\n        return existingAccounts;\n      }\n\n      await _state.wallet.login({\n        contractId\n      });\n      return getAccounts();\n    },\n\n    async signOut() {\n      // Ignore if unsuccessful (returns false).\n      await _state.wallet.logout();\n    },\n\n    async getAccounts() {\n      return getAccounts();\n    },\n\n    async verifyOwner({\n      message\n    }) {\n      logger.log(\"MathWallet:verifyOwner\", {\n        message\n      });\n      const account = (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_1__.getActiveAccount)(store.getState());\n\n      if (!account) {\n        throw new Error(\"No active account\");\n      }\n\n      const accountId = account.accountId;\n      const pubKey = await _state.wallet.signer.getPublicKey(accountId);\n      const block = await provider.block({\n        finality: \"final\"\n      });\n      const data = {\n        accountId,\n        message,\n        blockId: block.header.hash,\n        publicKey: Buffer.from(pubKey.data).toString(\"base64\"),\n        keyType: pubKey.keyType\n      };\n      const encoded = JSON.stringify(data); // Note: Math Wallet currently hangs when calling signMessage.\n\n      throw new Error(`Method not supported by ${metadata.name}`);\n      const signed = await _state.wallet.signer.signMessage(new Uint8Array(Buffer.from(encoded)), accountId, options.network.networkId);\n      return _objectSpread(_objectSpread({}, data), {}, {\n        signature: Buffer.from(signed.signature).toString(\"base64\"),\n        keyType: signed.publicKey.keyType\n      });\n    },\n\n    async signAndSendTransaction({\n      signerId,\n      receiverId,\n      actions\n    }) {\n      logger.log(\"signAndSendTransaction\", {\n        signerId,\n        receiverId,\n        actions\n      });\n      const signedTransactions = await (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_2__.signTransactions)(transformTransactions([{\n        signerId,\n        receiverId,\n        actions\n      }]), _state.wallet.signer, options.network);\n      return provider.sendTransaction(signedTransactions[0]);\n    },\n\n    async signAndSendTransactions({\n      transactions\n    }) {\n      logger.log(\"signAndSendTransactions\", {\n        transactions\n      });\n      const signedTransactions = await (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_2__.signTransactions)(transformTransactions(transactions), _state.wallet.signer, options.network);\n      logger.log(\"signAndSendTransactions:signedTransactions\", signedTransactions);\n      const results = [];\n\n      for (let i = 0; i < signedTransactions.length; i++) {\n        results.push(await provider.sendTransaction(signedTransactions[i]));\n      }\n\n      return results;\n    }\n\n  };\n};\n\nconst setupMathWallet = ({\n  iconUrl = \"./assets/math-wallet-icon.png\",\n  deprecated = false\n} = {}) => {\n  return async () => {\n    const mobile = (0,is_mobile__WEBPACK_IMPORTED_MODULE_0__.isMobile)();\n    const installed = await isInstalled();\n\n    if (mobile) {\n      return null;\n    }\n\n    return {\n      id: \"math-wallet\",\n      type: \"injected\",\n      metadata: {\n        name: \"Math Wallet\",\n        description: null,\n        iconUrl,\n        downloadUrl: \"https://chrome.google.com/webstore/detail/math-wallet/afbcbjpbpfadlkmhmclhkeeodmamcflc\",\n        deprecated,\n        available: installed\n      },\n      init: MathWallet\n    };\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvbWF0aC13YWxsZXQvc3JjL2xpYi9tYXRoLXdhbGxldC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBO0FBU0E7QUFDQTtBQUVBOztBQWtCQSxNQUFNSSxXQUFXLEdBQUcsTUFBTTtFQUN4QixPQUFPRixtRUFBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDRyxNQUFNLENBQUNDLGFBQWhCLENBQVAsQ0FBc0NDLEtBQXRDLENBQTRDLE1BQU0sS0FBbEQsQ0FBUDtBQUNELENBRkQ7O0FBSUEsTUFBTUMsb0JBQW9CLEdBQUcsTUFBdUI7RUFDbEQsTUFBTUMsTUFBTSxHQUFHSixNQUFNLENBQUNDLGFBQXRCO0VBRUEsT0FBTztJQUNMRztFQURLLENBQVA7QUFHRCxDQU5EOztBQVFBLE1BQU1DLFVBQWtELEdBQUcsT0FBTztFQUNoRUMsUUFEZ0U7RUFFaEVDLE9BRmdFO0VBR2hFQyxLQUhnRTtFQUloRUMsUUFKZ0U7RUFLaEVDO0FBTGdFLENBQVAsS0FNckQ7RUFDSixNQUFNQyxNQUFNLEdBQUdSLG9CQUFvQixFQUFuQzs7RUFFQSxNQUFNUyxXQUFXLEdBQUcsTUFBc0I7SUFDeEMsTUFBTUMsT0FBTyxHQUFHRixNQUFNLENBQUNQLE1BQVAsQ0FBY1UsTUFBZCxDQUFxQkQsT0FBckM7O0lBRUEsSUFBSSxDQUFDQSxPQUFMLEVBQWM7TUFDWixPQUFPLEVBQVA7SUFDRDs7SUFFRCxPQUFPLENBQUM7TUFBRUUsU0FBUyxFQUFFRixPQUFPLENBQUNFO0lBQXJCLENBQUQsQ0FBUDtFQUNELENBUkQ7O0VBVUEsTUFBTUMscUJBQXFCLEdBQ3pCQyxZQUQ0QixJQUVMO0lBQ3ZCLE1BQU07TUFBRUM7SUFBRixJQUFlVixLQUFLLENBQUNXLFFBQU4sRUFBckI7O0lBRUEsSUFBSSxDQUFDRCxRQUFMLEVBQWU7TUFDYixNQUFNLElBQUlFLEtBQUosQ0FBVSxzQkFBVixDQUFOO0lBQ0Q7O0lBRUQsTUFBTVAsT0FBTyxHQUFHakIsNEVBQWdCLENBQUNZ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QW9EO1FBQ2xERCxPQUFPLENBQUNFLElBQVIsQ0FBYSxNQUFNeEQsUUFBUSxDQUFDb0QsZUFBVCxDQUF5QkQsa0JBQWtCLENBQUNJLENBQUQsQ0FBM0MsQ0FBbkI7TUFDRDs7TUFFRCxPQUFPRCxPQUFQO0lBQ0Q7O0VBNUZJLENBQVA7QUE4RkQsQ0F6SUQ7O0FBMklPLE1BQU1HLGVBQWUsR0FBRyxDQUFDO0VBQzlCQyxPQUFPLEdBQUcsK0JBRG9CO0VBRTlCQyxVQUFVLEdBQUc7QUFGaUIsSUFHVixFQUhTLEtBR21DO0VBQ2hFLE9BQU8sWUFBWTtJQUNqQixNQUFNQyxNQUFNLEdBQUcxRSxtREFBUSxFQUF2QjtJQUNBLE1BQU0yRSxTQUFTLEdBQUcsTUFBTXZFLFdBQVcsRUFBbkM7O0lBRUEsSUFBSXNFLE1BQUosRUFBWTtNQUNWLE9BQU8sSUFBUDtJQUNEOztJQUVELE9BQU87TUFDTEUsRUFBRSxFQUFFLGFBREM7TUFFTEMsSUFBSSxFQUFFLFVBRkQ7TUFHTGxFLFFBQVEsRUFBRTtRQUNSOEMsSUFBSSxFQUFFLGFBREU7UUFFUnFCLFdBQVcsRUFBRSxJQUZMO1FBR1JOLE9BSFE7UUFJUk8sV0FBVyxFQUNULHdGQUxNO1FBTVJOLFVBTlE7UUFPUk8sU0FBUyxFQUFFTDtNQVBILENBSEw7TUFZTE0sSUFBSSxFQUFFdkU7SUFaRCxDQUFQO0VBY0QsQ0F0QkQ7QUF1QkQsQ0EzQk0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vcGFja2FnZXMvbWF0aC13YWxsZXQvc3JjL2xpYi9tYXRoLXdhbGxldC50cz8yYWJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzTW9iaWxlIH0gZnJvbSBcImlzLW1vYmlsZVwiO1xuaW1wb3J0IHR5cGUge1xuICBXYWxsZXRNb2R1bGVGYWN0b3J5LFxuICBXYWxsZXRCZWhhdmlvdXJGYWN0b3J5LFxuICBJbmplY3RlZFdhbGxldCxcbiAgQWNjb3VudCxcbiAgT3B0aW9uYWwsXG4gIFRyYW5zYWN0aW9uLFxufSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcbmltcG9ydCB7IGdldEFjdGl2ZUFjY291bnQgfSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcbmltcG9ydCB7IHdhaXRGb3IgfSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcbmltcG9ydCB0eXBlIHsgSW5qZWN0ZWRNYXRoV2FsbGV0IH0gZnJvbSBcIi4vaW5qZWN0ZWQtbWF0aC13YWxsZXRcIjtcbmltcG9ydCB7IHNpZ25UcmFuc2FjdGlvbnMgfSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL3dhbGxldC11dGlsc1wiO1xuaW1wb3J0IHR5cGUgeyBGaW5hbEV4ZWN1dGlvbk91dGNvbWUgfSBmcm9tIFwibmVhci1hcGktanMvbGliL3Byb3ZpZGVyc1wiO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIG5lYXJXYWxsZXRBcGk6IEluamVjdGVkTWF0aFdhbGxldCB8IHVuZGVmaW5lZDtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hdGhXYWxsZXRQYXJhbXMge1xuICBpY29uVXJsPzogc3RyaW5nO1xuICBkZXByZWNhdGVkPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIE1hdGhXYWxsZXRTdGF0ZSB7XG4gIHdhbGxldDogSW5qZWN0ZWRNYXRoV2FsbGV0O1xufVxuXG5jb25zdCBpc0luc3RhbGxlZCA9ICgpID0+IHtcbiAgcmV0dXJuIHdhaXRGb3IoKCkgPT4gISF3aW5kb3cubmVhcldhbGxldEFwaSkuY2F0Y2goKCkgPT4gZmFsc2UpO1xufTtcblxuY29uc3Qgc2V0dXBNYXRoV2FsbGV0U3RhdGUgPSAoKTogTWF0aFdhbGxldFN0YXRlID0+IHtcbiAgY29uc3Qgd2FsbGV0ID0gd2luZG93Lm5lYXJXYWxsZXRBcGkhO1xuXG4gIHJldHVybiB7XG4gICAgd2FsbGV0LFxuICB9O1xufTtcblxuY29uc3QgTWF0aFdhbGxldDogV2FsbGV0QmVoYXZpb3VyRmFjdG9yeTxJbmplY3RlZFdhbGxldD4gPSBhc3luYyAoe1xuICBtZXRhZGF0YSxcbiAgb3B0aW9ucyxcbiAgc3RvcmUsXG4gIHByb3ZpZGVyLFxuICBsb2dnZXIsXG59KSA9PiB7XG4gIGNvbnN0IF9zdGF0ZSA9IHNldHVwTWF0aFdhbGxldFN0YXRlKCk7XG5cbiAgY29uc3QgZ2V0QWNjb3VudHMgPSAoKTogQXJyYXk8QWNjb3VudD4gPT4ge1xuICAgIGNvbnN0IGFjY291bnQgPSBfc3RhdGUud2FsbGV0LnNpZ25lci5hY2NvdW50O1xuXG4gICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIFt7IGFjY291bnRJZDogYWNjb3VudC5hY2NvdW50SWQgfV07XG4gIH07XG5cbiAgY29uc3QgdHJhbnNmb3JtVHJhbnNhY3Rpb25zID0gKFxuICAgIHRyYW5zYWN0aW9uczogQXJyYXk8T3B0aW9uYWw8VHJhbnNhY3Rpb24sIFwic2lnbmVySWRcIiB8IFwicmVjZWl2ZXJJZFwiPj5cbiAgKTogQXJyYXk8VHJhbnNhY3Rpb24+ID0+IHtcbiAgICBjb25zdCB7IGNvbnRyYWN0IH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xuXG4gICAgaWYgKCFjb250cmFjdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgYWNjb3VudCA9IGdldEFjdGl2ZUFjY291bnQoc3RvcmUuZ2V0U3RhdGUoKSk7XG5cbiAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFjdGl2ZSBhY2NvdW50XCIpO1xuICAgIH1cblxuICAgIHJldHVybiB0cmFuc2FjdGlvbnMubWFwKCh0cmFuc2FjdGlvbikgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2lnbmVySWQ6IHRyYW5zYWN0aW9uLnNpZ25lcklkIHx8IGFjY291bnQuYWNjb3VudElkLFxuICAgICAgICByZWNlaXZlcklkOiB0cmFuc2FjdGlvbi5yZWNlaXZlcklkIHx8IGNvbnRyYWN0LmNvbnRyYWN0SWQsXG4gICAgICAgIGFjdGlvbnM6IHRyYW5zYWN0aW9uLmFjdGlvbnMsXG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgYXN5bmMgc2lnbkluKHsgY29udHJhY3RJZCB9KSB7XG4gICAgICBjb25zdCBleGlzdGluZ0FjY291bnRzID0gZ2V0QWNjb3VudHMoKTtcblxuICAgICAgaWYgKGV4aXN0aW5nQWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBleGlzdGluZ0FjY291bnRzO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBfc3RhdGUud2FsbGV0LmxvZ2luKHsgY29udHJhY3RJZCB9KTtcblxuICAgICAgcmV0dXJuIGdldEFjY291bnRzKCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XG4gICAgICAvLyBJZ25vcmUgaWYgdW5zdWNjZXNzZnVsIChyZXR1cm5zIGZhbHNlKS5cbiAgICAgIGF3YWl0IF9zdGF0ZS53YWxsZXQubG9nb3V0KCk7XG4gICAgfSxcblxuICAgIGFzeW5jIGdldEFjY291bnRzKCkge1xuICAgICAgcmV0dXJuIGdldEFjY291bnRzKCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHZlcmlmeU93bmVyKHsgbWVzc2FnZSB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwiTWF0aFdhbGxldDp2ZXJpZnlPd25lclwiLCB7IG1lc3NhZ2UgfSk7XG5cbiAgICAgIGNvbnN0IGFjY291bnQgPSBnZXRBY3RpdmVBY2NvdW50KHN0b3JlLmdldFN0YXRlKCkpO1xuXG4gICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWN0aXZlIGFjY291bnRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFjY291bnRJZCA9IGFjY291bnQuYWNjb3VudElkO1xuICAgICAgY29uc3QgcHViS2V5ID0gYXdhaXQgX3N0YXRlLndhbGxldC5zaWduZXIuZ2V0UHVibGljS2V5KGFjY291bnRJZCk7XG4gICAgICBjb25zdCBibG9jayA9IGF3YWl0IHByb3ZpZGVyLmJsb2NrKHsgZmluYWxpdHk6IFwiZmluYWxcIiB9KTtcblxuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgYWNjb3VudElkLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICBibG9ja0lkOiBibG9jay5oZWFkZXIuaGFzaCxcbiAgICAgICAgcHVibGljS2V5OiBCdWZmZXIuZnJvbShwdWJLZXkuZGF0YSkudG9TdHJpbmcoXCJiYXNlNjRcIiksXG4gICAgICAgIGtleVR5cGU6IHB1YktleS5rZXlUeXBlLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IGVuY29kZWQgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblxuICAgICAgLy8gTm90ZTogTWF0aCBXYWxsZXQgY3VycmVudGx5IGhhbmdzIHdoZW4gY2FsbGluZyBzaWduTWVzc2FnZS5cbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWV0aG9kIG5vdCBzdXBwb3J0ZWQgYnkgJHttZXRhZGF0YS5uYW1lfWApO1xuXG4gICAgICBjb25zdCBzaWduZWQgPSBhd2FpdCBfc3RhdGUud2FsbGV0LnNpZ25lci5zaWduTWVzc2FnZShcbiAgICAgICAgbmV3IFVpbnQ4QXJyYXkoQnVmZmVyLmZyb20oZW5jb2RlZCkpLFxuICAgICAgICBhY2NvdW50SWQsXG4gICAgICAgIG9wdGlvbnMubmV0d29yay5uZXR3b3JrSWRcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIHNpZ25hdHVyZTogQnVmZmVyLmZyb20oc2lnbmVkLnNpZ25hdHVyZSkudG9TdHJpbmcoXCJiYXNlNjRcIiksXG4gICAgICAgIGtleVR5cGU6IHNpZ25lZC5wdWJsaWNLZXkua2V5VHlwZSxcbiAgICAgIH07XG4gICAgfSxcblxuICAgIGFzeW5jIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb24oeyBzaWduZXJJZCwgcmVjZWl2ZXJJZCwgYWN0aW9ucyB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwic2lnbkFuZFNlbmRUcmFuc2FjdGlvblwiLCB7IHNpZ25lcklkLCByZWNlaXZlcklkLCBhY3Rpb25zIH0pO1xuICAgICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb25zID0gYXdhaXQgc2lnblRyYW5zYWN0aW9ucyhcbiAgICAgICAgdHJhbnNmb3JtVHJhbnNhY3Rpb25zKFt7IHNpZ25lcklkLCByZWNlaXZlcklkLCBhY3Rpb25zIH1dKSxcbiAgICAgICAgX3N0YXRlLndhbGxldC5zaWduZXIsXG4gICAgICAgIG9wdGlvbnMubmV0d29ya1xuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlbmRUcmFuc2FjdGlvbihzaWduZWRUcmFuc2FjdGlvbnNbMF0pO1xuICAgIH0sXG5cbiAgICBhc3luYyBzaWduQW5kU2VuZFRyYW5zYWN0aW9ucyh7IHRyYW5zYWN0aW9ucyB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwic2lnbkFuZFNlbmRUcmFuc2FjdGlvbnNcIiwgeyB0cmFuc2FjdGlvbnMgfSk7XG5cbiAgICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9ucyA9IGF3YWl0IHNpZ25UcmFuc2FjdGlvbnMoXG4gICAgICAgIHRyYW5zZm9ybVRyYW5zYWN0aW9ucyh0cmFuc2FjdGlvbnMpLFxuICAgICAgICBfc3RhdGUud2FsbGV0LnNpZ25lcixcbiAgICAgICAgb3B0aW9ucy5uZXR3b3JrXG4gICAgICApO1xuXG4gICAgICBsb2dnZXIubG9nKFxuICAgICAgICBcInNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zOnNpZ25lZFRyYW5zYWN0aW9uc1wiLFxuICAgICAgICBzaWduZWRUcmFuc2FjdGlvbnNcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHM6IEFycmF5PEZpbmFsRXhlY3V0aW9uT3V0Y29tZT4gPSBbXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWduZWRUcmFuc2FjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGF3YWl0IHByb3ZpZGVyLnNlbmRUcmFuc2FjdGlvbihzaWduZWRUcmFuc2FjdGlvbnNbaV0pKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXR1cE1hdGhXYWxsZXQgPSAoe1xuICBpY29uVXJsID0gXCIuL2Fzc2V0cy9tYXRoLXdhbGxldC1pY29uLnBuZ1wiLFxuICBkZXByZWNhdGVkID0gZmFsc2UsXG59OiBNYXRoV2FsbGV0UGFyYW1zID0ge30pOiBXYWxsZXRNb2R1bGVGYWN0b3J5PEluamVjdGVkV2FsbGV0PiA9PiB7XG4gIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9iaWxlID0gaXNNb2JpbGUoKTtcbiAgICBjb25zdCBpbnN0YWxsZWQgPSBhd2FpdCBpc0luc3RhbGxlZCgpO1xuXG4gICAgaWYgKG1vYmlsZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcIm1hdGgtd2FsbGV0XCIsXG4gICAgICB0eXBlOiBcImluamVjdGVkXCIsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBuYW1lOiBcIk1hdGggV2FsbGV0XCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgICBpY29uVXJsLFxuICAgICAgICBkb3dubG9hZFVybDpcbiAgICAgICAgICBcImh0dHBzOi8vY2hyb21lLmdvb2dsZS5jb20vd2Vic3RvcmUvZGV0YWlsL21hdGgtd2FsbGV0L2FmYmNianBicGZhZGxrbWhtY2xoa2Vlb2RtYW1jZmxjXCIsXG4gICAgICAgIGRlcHJlY2F0ZWQsXG4gICAgICAgIGF2YWlsYWJsZTogaW5zdGFsbGVkLFxuICAgICAgfSxcbiAgICAgIGluaXQ6IE1hdGhXYWxsZXQsXG4gICAgfTtcbiAgfTtcbn07XG4iXSwibmFtZXMiOlsiaXNNb2JpbGUiLCJnZXRBY3RpdmVBY2NvdW50Iiwid2FpdEZvciIsInNpZ25UcmFuc2FjdGlvbnMiLCJpc0luc3RhbGxlZCIsIndpbmRvdyIsIm5lYXJXYWxsZXRBcGkiLCJjYXRjaCIsInNldHVwTWF0aFdhbGxldFN0YXRlIiwid2FsbGV0IiwiTWF0aFdhbGxldCIsIm1ldGFkYXRhIiwib3B0aW9ucyIsInN0b3JlIiwicHJvdmlkZXIiLCJsb2dnZXIiLCJfc3RhdGUiLCJnZXRBY2NvdW50cyIsImFjY291bnQiLCJzaWduZXIiLCJhY2NvdW50SWQiLCJ0cmFuc2Zvcm1UcmFuc2FjdGlvbnMiLCJ0cmFuc2FjdGlvbnMiLCJjb250cmFjdCIsImdldFN0YXRlIiwiRXJyb3IiLCJtYXAiLCJ0cmFuc2FjdGlvbiIsInNpZ25lcklkIiwicmVjZWl2ZXJJZCIsImNvbnRyYWN0SWQiLCJhY3Rpb25zIiwic2lnbkluIiwiZXhpc3RpbmdBY2NvdW50cyIsImxlbmd0aCIsImxvZ2luIiwic2lnbk91dCIsImxvZ291dCIsInZlcmlmeU93bmVyIiwibWVzc2FnZSIsImxvZyIsInB1YktleSIsImdldFB1YmxpY0tleSIsImJsb2NrIiwiZmluYWxpdHkiLCJkYXRhIiwiYmxvY2tJZCIsImhlYWRlciIsImhhc2giLCJwdWJsaWNLZXkiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJrZXlUeXBlIiwiZW5jb2RlZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJuYW1lIiwic2lnbmVkIiwic2lnbk1lc3NhZ2UiLCJVaW50OEFycmF5IiwibmV0d29yayIsIm5ldHdvcmtJZCIsInNpZ25hdHVyZSIsInNpZ25BbmRTZW5kVHJhbnNhY3Rpb24iLCJzaWduZWRUcmFuc2FjdGlvbnMiLCJzZW5kVHJhbnNhY3Rpb24iLCJzaWduQW5kU2VuZFRyYW5zYWN0aW9ucyIsInJlc3VsdHMiLCJpIiwicHVzaCIsInNldHVwTWF0aFdhbGxldCIsImljb25VcmwiLCJkZXByZWNhdGVkIiwibW9iaWxlIiwiaW5zdGFsbGVkIiwiaWQiLCJ0eXBlIiwiZGVzY3JpcHRpb24iLCJkb3dubG9hZFVybCIsImF2YWlsYWJsZSIsImluaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/math-wallet/src/lib/math-wallet.ts\n");

/***/ }),

/***/ "../../packages/meteor-wallet/src/index.ts":
/*!*************************************************!*\
  !*** ../../packages/meteor-wallet/src/index.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupMeteorWallet": () => (/* reexport safe */ _lib_meteor_wallet__WEBPACK_IMPORTED_MODULE_0__.setupMeteorWallet)
/* harmony export */ });
/* harmony import */ var _lib_meteor_wallet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/meteor-wallet */ "../../packages/meteor-wallet/src/lib/meteor-wallet.ts");


/***/ }),

/***/ "../../packages/meteor-wallet/src/lib/meteor-wallet.ts":
/*!*************************************************************!*\
  !*** ../../packages/meteor-wallet/src/lib/meteor-wallet.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupMeteorWallet\": () => (/* binding */ setupMeteorWallet)\n/* harmony export */ });\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! near-api-js */ \"near-api-js\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(near_api_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _meteorwallet_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @meteorwallet/sdk */ \"@meteorwallet/sdk\");\n/* harmony import */ var _meteorwallet_sdk__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_meteorwallet_sdk__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @near-wallet-selector/wallet-utils */ \"../../packages/wallet-utils/src/index.ts\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nconst setupWalletState = async (params, network) => {\n  const keyStore = new near_api_js__WEBPACK_IMPORTED_MODULE_0__.keyStores.BrowserLocalStorageKeyStore(window.localStorage, \"_meteor_wallet\");\n  const near = await (0,near_api_js__WEBPACK_IMPORTED_MODULE_0__.connect)(_objectSpread(_objectSpread({\n    keyStore\n  }, network), {}, {\n    headers: {}\n  }));\n  const wallet = new _meteorwallet_sdk__WEBPACK_IMPORTED_MODULE_1__.MeteorWallet({\n    near,\n    appKeyPrefix: \"near_app\"\n  });\n  return {\n    wallet,\n    keyStore\n  };\n};\n\nconst createMeteorWalletInjected = async ({\n  metadata,\n  options,\n  logger,\n  store,\n  params\n}) => {\n  const _state = await setupWalletState(params, options.network);\n\n  const cleanup = () => {\n    _state.keyStore.clear();\n  };\n\n  const getAccounts = () => {\n    const accountId = _state.wallet.getAccountId();\n\n    if (!accountId) {\n      return [];\n    }\n\n    return [{\n      accountId\n    }];\n  };\n\n  const transformTransactions = async transactions => {\n    const account = _state.wallet.account();\n\n    const {\n      networkId,\n      signer,\n      provider\n    } = account.connection;\n    const localKey = await signer.getPublicKey(account.accountId, networkId);\n\n    for (const trx of transactions) {\n      if (trx.signerId !== account.accountId) {\n        throw new Error(`Transaction had a signerId which didn't match the currently logged in account`);\n      }\n    }\n\n    return Promise.all(transactions.map(async (transaction, index) => {\n      const actions = transaction.actions.map(action => (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_2__.createAction)(action));\n      const accessKey = await account.accessKeyForTransaction(transaction.receiverId, actions, localKey);\n\n      if (!accessKey) {\n        throw new Error(`Failed to find matching key for transaction sent to ${transaction.receiverId}`);\n      }\n\n      const block = await provider.block({\n        finality: \"final\"\n      });\n      return near_api_js__WEBPACK_IMPORTED_MODULE_0__.transactions.createTransaction(account.accountId, near_api_js__WEBPACK_IMPORTED_MODULE_0__.utils.PublicKey.from(accessKey.public_key), transaction.receiverId, accessKey.access_key.nonce + index + 1, actions, near_api_js__WEBPACK_IMPORTED_MODULE_0__.utils.serialize.base_decode(block.header.hash));\n    }));\n  };\n\n  return {\n    async signIn({\n      contractId,\n      methodNames = []\n    }) {\n      logger.log(\"MeteorWallet:signIn\", {\n        contractId,\n        methodNames\n      });\n\n      if (methodNames.length) {\n        await _state.wallet.requestSignIn({\n          methods: methodNames,\n          type: _meteorwallet_sdk__WEBPACK_IMPORTED_MODULE_1__.EMeteorWalletSignInType.SELECTED_METHODS,\n          contract_id: contractId\n        });\n      } else {\n        await _state.wallet.requestSignIn({\n          type: _meteorwallet_sdk__WEBPACK_IMPORTED_MODULE_1__.EMeteorWalletSignInType.ALL_METHODS,\n          contract_id: contractId\n        });\n      }\n\n      return getAccounts();\n    },\n\n    async signOut() {\n      if (_state.wallet.isSignedIn()) {\n        await _state.wallet.signOut();\n      }\n\n      cleanup();\n    },\n\n    async isSignedIn() {\n      if (!_state.wallet) {\n        return false;\n      }\n\n      return _state.wallet.isSignedIn();\n    },\n\n    async getAccounts() {\n      return getAccounts();\n    },\n\n    async verifyOwner({\n      message\n    }) {\n      logger.log(\"MeteorWallet:verifyOwner\", {\n        message\n      });\n      throw new Error(`Method not supported by ${metadata.name}`);\n    },\n\n    async signAndSendTransaction({\n      signerId,\n      receiverId,\n      actions\n    }) {\n      logger.log(\"MeteorWallet:signAndSendTransaction\", {\n        signerId,\n        receiverId,\n        actions\n      });\n      const {\n        contract\n      } = store.getState();\n\n      if (!_state.wallet.isSignedIn()) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      if (!receiverId && !contract) {\n        throw new Error(\"No receiver found to send the transaction to\");\n      }\n\n      const account = _state.wallet.account();\n\n      return account[\"signAndSendTransaction_direct\"]({\n        receiverId: receiverId ?? contract.contractId,\n        actions: actions.map(action => (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_2__.createAction)(action))\n      });\n    },\n\n    async signAndSendTransactions({\n      transactions\n    }) {\n      logger.log(\"MeteorWallet:signAndSendTransactions\", {\n        transactions\n      });\n\n      if (!_state.wallet.isSignedIn()) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      return _state.wallet.requestSignTransactions({\n        transactions: await transformTransactions(transactions)\n      });\n    }\n\n  };\n};\n\nfunction setupMeteorWallet({\n  iconUrl = \"./assets/meteor-icon.png\",\n  deprecated = false\n} = {}) {\n  return async () => {\n    return {\n      id: \"meteor-wallet\",\n      type: \"injected\",\n      metadata: {\n        available: true,\n        name: \"Meteor Wallet\",\n        description: null,\n        iconUrl,\n        deprecated,\n        downloadUrl: \"https://wallet.meteorwallet.app\"\n      },\n      init: options => {\n        return createMeteorWalletInjected(_objectSpread(_objectSpread({}, options), {}, {\n          params: {\n            iconUrl\n          }\n        }));\n      }\n    };\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvbWV0ZW9yLXdhbGxldC9zcmMvbGliL21ldGVvci13YWxsZXQudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFjQTtBQVFBOztBQUVBLE1BQU1TLGdCQUFnQixHQUFHLE9BQ3ZCQyxNQUR1QixFQUV2QkMsT0FGdUIsS0FHUTtFQUMvQixNQUFNQyxRQUFRLEdBQUcsSUFBSVgsOEVBQUosQ0FDZmEsTUFBTSxDQUFDQyxZQURRLEVBRWYsZ0JBRmUsQ0FBakI7RUFLQSxNQUFNQyxJQUFJLEdBQUcsTUFBTWhCLG9EQUFPO0lBQ3hCWTtFQUR3QixHQUVyQkQsT0FGcUI7SUFHeEJNLE9BQU8sRUFBRTtFQUhlLEdBQTFCO0VBTUEsTUFBTUMsTUFBTSxHQUFHLElBQUlYLDJEQUFKLENBQW9CO0lBQUVTLElBQUY7SUFBUUcsWUFBWSxFQUFFO0VBQXRCLENBQXBCLENBQWY7RUFFQSxPQUFPO0lBQ0xELE1BREs7SUFFTE47RUFGSyxDQUFQO0FBSUQsQ0FyQkQ7O0FBdUJBLE1BQU1RLDBCQUdMLEdBQUcsT0FBTztFQUFFQyxRQUFGO0VBQVlDLE9BQVo7RUFBcUJDLE1BQXJCO0VBQTZCQyxLQUE3QjtFQUFvQ2Q7QUFBcEMsQ0FBUCxLQUF3RDtFQUMxRCxNQUFNZSxNQUFNLEdBQUcsTUFBTWhCLGdCQUFnQixDQUFDQyxNQUFELEVBQVNZLE9BQU8sQ0FBQ1gsT0FBakIsQ0FBckM7O0VBRUEsTUFBTWUsT0FBTyxHQUFHLE1BQU07SUFDcEJELE1BQU0sQ0FBQ2IsUUFBUCxDQUFnQmUsS0FBaEI7RUFDRCxDQUZEOztFQUlBLE1BQU1DLFdBQVcsR0FBRyxNQUFNO0lBQ3hCLE1BQU1DLFNBQVMsR0FBR0osTUFBTSxDQUFDUCxNQUFQLENBQWNZLFlBQWQsRUFBbEI7O0lBRUEsSUFBSSxDQUFDRCxTQUFMLEVBQWdCO01BQ2QsT0FBTyxFQUFQO0lBQ0Q7O0lBRUQsT0FBTyxDQUFDO01BQUVBO0lBQUYsQ0FBRCxDQUFQO0VBQ0QsQ0FSRDs7RUFV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Oi8vLy4uLy4uL3BhY2thZ2VzL21ldGVvci13YWxsZXQvc3JjL2xpYi9tZXRlb3Itd2FsbGV0LnRzPzE4NGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY29ubmVjdCxcbiAga2V5U3RvcmVzLFxuICB0cmFuc2FjdGlvbnMgYXMgbmVhclRyYW5zYWN0aW9ucyxcbiAgdXRpbHMsXG59IGZyb20gXCJuZWFyLWFwaS1qc1wiO1xuaW1wb3J0IHtcbiAgSW5qZWN0ZWRXYWxsZXQsXG4gIE5ldHdvcmssXG4gIE9wdGlvbmFsLFxuICBUcmFuc2FjdGlvbixcbiAgV2FsbGV0QmVoYXZpb3VyRmFjdG9yeSxcbiAgV2FsbGV0TW9kdWxlRmFjdG9yeSxcbn0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9jb3JlXCI7XG5pbXBvcnQge1xuICBFTWV0ZW9yV2FsbGV0U2lnbkluVHlwZSxcbiAgTWV0ZW9yV2FsbGV0IGFzIE1ldGVvcldhbGxldFNkayxcbn0gZnJvbSBcIkBtZXRlb3J3YWxsZXQvc2RrXCI7XG5pbXBvcnQge1xuICBNZXRlb3JXYWxsZXRQYXJhbXNfSW5qZWN0ZWQsXG4gIE1ldGVvcldhbGxldFN0YXRlLFxufSBmcm9tIFwiLi9tZXRlb3Itd2FsbGV0LXR5cGVzXCI7XG5pbXBvcnQgeyBjcmVhdGVBY3Rpb24gfSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL3dhbGxldC11dGlsc1wiO1xuXG5jb25zdCBzZXR1cFdhbGxldFN0YXRlID0gYXN5bmMgKFxuICBwYXJhbXM6IE1ldGVvcldhbGxldFBhcmFtc19JbmplY3RlZCxcbiAgbmV0d29yazogTmV0d29ya1xuKTogUHJvbWlzZTxNZXRlb3JXYWxsZXRTdGF0ZT4gPT4ge1xuICBjb25zdCBrZXlTdG9yZSA9IG5ldyBrZXlTdG9yZXMuQnJvd3NlckxvY2FsU3RvcmFnZUtleVN0b3JlKFxuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UsXG4gICAgXCJfbWV0ZW9yX3dhbGxldFwiXG4gICk7XG5cbiAgY29uc3QgbmVhciA9IGF3YWl0IGNvbm5lY3Qoe1xuICAgIGtleVN0b3JlLFxuICAgIC4uLm5ldHdvcmssXG4gICAgaGVhZGVyczoge30sXG4gIH0pO1xuXG4gIGNvbnN0IHdhbGxldCA9IG5ldyBNZXRlb3JXYWxsZXRTZGsoeyBuZWFyLCBhcHBLZXlQcmVmaXg6IFwibmVhcl9hcHBcIiB9KTtcblxuICByZXR1cm4ge1xuICAgIHdhbGxldCxcbiAgICBrZXlTdG9yZSxcbiAgfTtcbn07XG5cbmNvbnN0IGNyZWF0ZU1ldGVvcldhbGxldEluamVjdGVkOiBXYWxsZXRCZWhhdmlvdXJGYWN0b3J5PFxuICBJbmplY3RlZFdhbGxldCxcbiAgeyBwYXJhbXM6IE1ldGVvcldhbGxldFBhcmFtc19JbmplY3RlZCB9XG4+ID0gYXN5bmMgKHsgbWV0YWRhdGEsIG9wdGlvbnMsIGxvZ2dlciwgc3RvcmUsIHBhcmFtcyB9KSA9PiB7XG4gIGNvbnN0IF9zdGF0ZSA9IGF3YWl0IHNldHVwV2FsbGV0U3RhdGUocGFyYW1zLCBvcHRpb25zLm5ldHdvcmspO1xuXG4gIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgX3N0YXRlLmtleVN0b3JlLmNsZWFyKCk7XG4gIH07XG5cbiAgY29uc3QgZ2V0QWNjb3VudHMgPSAoKSA9PiB7XG4gICAgY29uc3QgYWNjb3VudElkID0gX3N0YXRlLndhbGxldC5nZXRBY2NvdW50SWQoKTtcblxuICAgIGlmICghYWNjb3VudElkKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIFt7IGFjY291bnRJZCB9XTtcbiAgfTtcblxuICBjb25zdCB0cmFuc2Zvcm1UcmFuc2FjdGlvbnMgPSBhc3luYyAoXG4gICAgdHJhbnNhY3Rpb25zOiBBcnJheTxPcHRpb25hbDxUcmFuc2FjdGlvbiwgXCJzaWduZXJJZFwiPj5cbiAgKSA9PiB7XG4gICAgY29uc3QgYWNjb3VudCA9IF9zdGF0ZS53YWxsZXQuYWNjb3VudCgpITtcbiAgICBjb25zdCB7IG5ldHdvcmtJZCwgc2lnbmVyLCBwcm92aWRlciB9ID0gYWNjb3VudC5jb25uZWN0aW9uO1xuXG4gICAgY29uc3QgbG9jYWxLZXkgPSBhd2FpdCBzaWduZXIuZ2V0UHVibGljS2V5KGFjY291bnQuYWNjb3VudElkLCBuZXR3b3JrSWQpO1xuXG4gICAgZm9yIChjb25zdCB0cnggb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICBpZiAodHJ4LnNpZ25lcklkICE9PSBhY2NvdW50LmFjY291bnRJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYFRyYW5zYWN0aW9uIGhhZCBhIHNpZ25lcklkIHdoaWNoIGRpZG4ndCBtYXRjaCB0aGUgY3VycmVudGx5IGxvZ2dlZCBpbiBhY2NvdW50YFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgIHRyYW5zYWN0aW9ucy5tYXAoYXN5bmMgKHRyYW5zYWN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb25zID0gdHJhbnNhY3Rpb24uYWN0aW9ucy5tYXAoKGFjdGlvbikgPT5cbiAgICAgICAgICBjcmVhdGVBY3Rpb24oYWN0aW9uKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBhY2Nlc3NLZXkgPSBhd2FpdCBhY2NvdW50LmFjY2Vzc0tleUZvclRyYW5zYWN0aW9uKFxuICAgICAgICAgIHRyYW5zYWN0aW9uLnJlY2VpdmVySWQsXG4gICAgICAgICAgYWN0aW9ucyxcbiAgICAgICAgICBsb2NhbEtleVxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghYWNjZXNzS2V5KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEZhaWxlZCB0byBmaW5kIG1hdGNoaW5nIGtleSBmb3IgdHJhbnNhY3Rpb24gc2VudCB0byAke3RyYW5zYWN0aW9uLnJlY2VpdmVySWR9YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBibG9jayA9IGF3YWl0IHByb3ZpZGVyLmJsb2NrKHsgZmluYWxpdHk6IFwiZmluYWxcIiB9KTtcblxuICAgICAgICByZXR1cm4gbmVhclRyYW5zYWN0aW9ucy5jcmVhdGVUcmFuc2FjdGlvbihcbiAgICAgICAgICBhY2NvdW50LmFjY291bnRJZCxcbiAgICAgICAgICB1dGlscy5QdWJsaWNLZXkuZnJvbShhY2Nlc3NLZXkucHVibGljX2tleSksXG4gICAgICAgICAgdHJhbnNhY3Rpb24ucmVjZWl2ZXJJZCxcbiAgICAgICAgICBhY2Nlc3NLZXkuYWNjZXNzX2tleS5ub25jZSArIGluZGV4ICsgMSxcbiAgICAgICAgICBhY3Rpb25zLFxuICAgICAgICAgIHV0aWxzLnNlcmlhbGl6ZS5iYXNlX2RlY29kZShibG9jay5oZWFkZXIuaGFzaClcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGFzeW5jIHNpZ25Jbih7IGNvbnRyYWN0SWQsIG1ldGhvZE5hbWVzID0gW10gfSkge1xuICAgICAgbG9nZ2VyLmxvZyhcIk1ldGVvcldhbGxldDpzaWduSW5cIiwge1xuICAgICAgICBjb250cmFjdElkLFxuICAgICAgICBtZXRob2ROYW1lcyxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAobWV0aG9kTmFtZXMubGVuZ3RoKSB7XG4gICAgICAgIGF3YWl0IF9zdGF0ZS53YWxsZXQucmVxdWVzdFNpZ25Jbih7XG4gICAgICAgICAgbWV0aG9kczogbWV0aG9kTmFtZXMsXG4gICAgICAgICAgdHlwZTogRU1ldGVvcldhbGxldFNpZ25JblR5cGUuU0VMRUNURURfTUVUSE9EUyxcbiAgICAgICAgICBjb250cmFjdF9pZDogY29udHJhY3RJZCxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBfc3RhdGUud2FsbGV0LnJlcXVlc3RTaWduSW4oe1xuICAgICAgICAgIHR5cGU6IEVNZXRlb3JXYWxsZXRTaWduSW5UeXBlLkFMTF9NRVRIT0RTLFxuICAgICAgICAgIGNvbnRyYWN0X2lkOiBjb250cmFjdElkLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdldEFjY291bnRzKCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XG4gICAgICBpZiAoX3N0YXRlLndhbGxldC5pc1NpZ25lZEluKCkpIHtcbiAgICAgICAgYXdhaXQgX3N0YXRlLndhbGxldC5zaWduT3V0KCk7XG4gICAgICB9XG5cbiAgICAgIGNsZWFudXAoKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgaXNTaWduZWRJbigpIHtcbiAgICAgIGlmICghX3N0YXRlLndhbGxldCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfc3RhdGUud2FsbGV0LmlzU2lnbmVkSW4oKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgZ2V0QWNjb3VudHMoKSB7XG4gICAgICByZXR1cm4gZ2V0QWNjb3VudHMoKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgdmVyaWZ5T3duZXIoeyBtZXNzYWdlIH0pIHtcbiAgICAgIGxvZ2dlci5sb2coXCJNZXRlb3JXYWxsZXQ6dmVyaWZ5T3duZXJcIiwgeyBtZXNzYWdlIH0pO1xuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE1ldGhvZCBub3Qgc3VwcG9ydGVkIGJ5ICR7bWV0YWRhdGEubmFtZX1gKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbih7IHNpZ25lcklkLCByZWNlaXZlcklkLCBhY3Rpb25zIH0pIHtcbiAgICAgIGxvZ2dlci5sb2coXCJNZXRlb3JXYWxsZXQ6c2lnbkFuZFNlbmRUcmFuc2FjdGlvblwiLCB7XG4gICAgICAgIHNpZ25lcklkLFxuICAgICAgICByZWNlaXZlcklkLFxuICAgICAgICBhY3Rpb25zLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgY29udHJhY3QgfSA9IHN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICAgIGlmICghX3N0YXRlLndhbGxldC5pc1NpZ25lZEluKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVjZWl2ZXJJZCAmJiAhY29udHJhY3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmVjZWl2ZXIgZm91bmQgdG8gc2VuZCB0aGUgdHJhbnNhY3Rpb24gdG9cIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFjY291bnQgPSBfc3RhdGUud2FsbGV0LmFjY291bnQoKSE7XG5cbiAgICAgIHJldHVybiBhY2NvdW50W1wic2lnbkFuZFNlbmRUcmFuc2FjdGlvbl9kaXJlY3RcIl0oe1xuICAgICAgICByZWNlaXZlcklkOiByZWNlaXZlcklkID8/IGNvbnRyYWN0IS5jb250cmFjdElkLFxuICAgICAgICBhY3Rpb25zOiBhY3Rpb25zLm1hcCgoYWN0aW9uKSA9PiBjcmVhdGVBY3Rpb24oYWN0aW9uKSksXG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgYXN5bmMgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbnMoeyB0cmFuc2FjdGlvbnMgfSkge1xuICAgICAgbG9nZ2VyLmxvZyhcIk1ldGVvcldhbGxldDpzaWduQW5kU2VuZFRyYW5zYWN0aW9uc1wiLCB7XG4gICAgICAgIHRyYW5zYWN0aW9ucyxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIV9zdGF0ZS53YWxsZXQuaXNTaWduZWRJbigpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBub3Qgc2lnbmVkIGluXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3N0YXRlLndhbGxldC5yZXF1ZXN0U2lnblRyYW5zYWN0aW9ucyh7XG4gICAgICAgIHRyYW5zYWN0aW9uczogYXdhaXQgdHJhbnNmb3JtVHJhbnNhY3Rpb25zKHRyYW5zYWN0aW9ucyksXG4gICAgICB9KTtcbiAgICB9LFxuICB9O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwTWV0ZW9yV2FsbGV0KHtcbiAgaWNvblVybCA9IFwiLi9hc3NldHMvbWV0ZW9yLWljb24ucG5nXCIsXG4gIGRlcHJlY2F0ZWQgPSBmYWxzZSxcbn06IE1ldGVvcldhbGxldFBhcmFtc19JbmplY3RlZCA9IHt9KTogV2FsbGV0TW9kdWxlRmFjdG9yeTxJbmplY3RlZFdhbGxldD4ge1xuICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogXCJtZXRlb3Itd2FsbGV0XCIsXG4gICAgICB0eXBlOiBcImluamVjdGVkXCIsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBhdmFpbGFibGU6IHRydWUsXG4gICAgICAgIG5hbWU6IFwiTWV0ZW9yIFdhbGxldFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgaWNvblVybCxcbiAgICAgICAgZGVwcmVjYXRlZCxcbiAgICAgICAgZG93bmxvYWRVcmw6IFwiaHR0cHM6Ly93YWxsZXQubWV0ZW9yd2FsbGV0LmFwcFwiLFxuICAgICAgfSxcbiAgICAgIGluaXQ6IChvcHRpb25zKSA9PiB7XG4gICAgICAgIHJldHVybiBjcmVhdGVNZXRlb3JXYWxsZXRJbmplY3RlZCh7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIGljb25VcmwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH07XG4gIH07XG59XG4iXSwibmFtZXMiOlsiY29ubmVjdCIsImtleVN0b3JlcyIsInRyYW5zYWN0aW9ucyIsIm5lYXJUcmFuc2FjdGlvbnMiLCJ1dGlscyIsIkVNZXRlb3JXYWxsZXRTaWduSW5UeXBlIiwiTWV0ZW9yV2FsbGV0IiwiTWV0ZW9yV2FsbGV0U2RrIiwiY3JlYXRlQWN0aW9uIiwic2V0dXBXYWxsZXRTdGF0ZSIsInBhcmFtcyIsIm5ldHdvcmsiLCJrZXlTdG9yZSIsIkJyb3dzZXJMb2NhbFN0b3JhZ2VLZXlTdG9yZSIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsIm5lYXIiLCJoZWFkZXJzIiwid2FsbGV0IiwiYXBwS2V5UHJlZml4IiwiY3JlYXRlTWV0ZW9yV2FsbGV0SW5qZWN0ZWQiLCJtZXRhZGF0YSIsIm9wdGlvbnMiLCJsb2dnZXIiLCJzdG9yZSIsIl9zdGF0ZSIsImNsZWFudXAiLCJjbGVhciIsImdldEFjY291bnRzIiwiYWNjb3VudElkIiwiZ2V0QWNjb3VudElkIiwidHJhbnNmb3JtVHJhbnNhY3Rpb25zIiwiYWNjb3VudCIsIm5ldHdvcmtJZCIsInNpZ25lciIsInByb3ZpZGVyIiwiY29ubmVjdGlvbiIsImxvY2FsS2V5IiwiZ2V0UHVibGljS2V5IiwidHJ4Iiwic2lnbmVySWQiLCJFcnJvciIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJ0cmFuc2FjdGlvbiIsImluZGV4IiwiYWN0aW9ucyIsImFjdGlvbiIsImFjY2Vzc0tleSIsImFjY2Vzc0tleUZvclRyYW5zYWN0aW9uIiwicmVjZWl2ZXJJZCIsImJsb2NrIiwiZmluYWxpdHkiLCJjcmVhdGVUcmFuc2FjdGlvbiIsIlB1YmxpY0tleSIsImZyb20iLCJwdWJsaWNfa2V5IiwiYWNjZXNzX2tleSIsIm5vbmNlIiwic2VyaWFsaXplIiwiYmFzZV9kZWNvZGUiLCJoZWFkZXIiLCJoYXNoIiwic2lnbkluIiwiY29udHJhY3RJZCIsIm1ldGhvZE5hbWVzIiwibG9nIiwibGVuZ3RoIiwicmVxdWVzdFNpZ25JbiIsIm1ldGhvZHMiLCJ0eXBlIiwiU0VMRUNURURfTUVUSE9EUyIsImNvbnRyYWN0X2lkIiwiQUxMX01FVEhPRFMiLCJzaWduT3V0IiwiaXNTaWduZWRJbiIsInZlcmlmeU93bmVyIiwibWVzc2FnZSIsIm5hbWUiLCJzaWduQW5kU2VuZFRyYW5zYWN0aW9uIiwiY29udHJhY3QiLCJnZXRTdGF0ZSIsInNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zIiwicmVxdWVzdFNpZ25UcmFuc2FjdGlvbnMiLCJzZXR1cE1ldGVvcldhbGxldCIsImljb25VcmwiLCJkZXByZWNhdGVkIiwiaWQiLCJhdmFpbGFibGUiLCJkZXNjcmlwdGlvbiIsImRvd25sb2FkVXJsIiwiaW5pdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/meteor-wallet/src/lib/meteor-wallet.ts\n");

/***/ }),

/***/ "../../packages/my-near-wallet/src/index.ts":
/*!**************************************************!*\
  !*** ../../packages/my-near-wallet/src/index.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupMyNearWallet": () => (/* reexport safe */ _lib_my_near_wallet__WEBPACK_IMPORTED_MODULE_0__.setupMyNearWallet)
/* harmony export */ });
/* harmony import */ var _lib_my_near_wallet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/my-near-wallet */ "../../packages/my-near-wallet/src/lib/my-near-wallet.ts");


/***/ }),

/***/ "../../packages/my-near-wallet/src/lib/my-near-wallet.ts":
/*!***************************************************************!*\
  !*** ../../packages/my-near-wallet/src/lib/my-near-wallet.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupMyNearWallet\": () => (/* binding */ setupMyNearWallet)\n/* harmony export */ });\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! near-api-js */ \"near-api-js\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(near_api_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @near-wallet-selector/wallet-utils */ \"../../packages/wallet-utils/src/index.ts\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nconst resolveWalletUrl = (network, walletUrl) => {\n  if (walletUrl) {\n    return walletUrl;\n  }\n\n  switch (network.networkId) {\n    case \"mainnet\":\n      return \"https://app.mynearwallet.com\";\n\n    case \"testnet\":\n      return \"https://testnet.mynearwallet.com\";\n\n    default:\n      throw new Error(\"Invalid wallet url\");\n  }\n};\n\nconst setupWalletState = async (params, network) => {\n  const keyStore = new near_api_js__WEBPACK_IMPORTED_MODULE_0__.keyStores.BrowserLocalStorageKeyStore();\n  const near = await (0,near_api_js__WEBPACK_IMPORTED_MODULE_0__.connect)(_objectSpread(_objectSpread({\n    keyStore,\n    walletUrl: params.walletUrl\n  }, network), {}, {\n    headers: {}\n  }));\n  const wallet = new near_api_js__WEBPACK_IMPORTED_MODULE_0__.WalletConnection(near, \"near_app\"); // Cleanup up any pending keys (cancelled logins).\n\n  if (!wallet.isSignedIn()) {\n    await keyStore.clear();\n  }\n\n  return {\n    wallet,\n    keyStore\n  };\n};\n\nconst MyNearWallet = async ({\n  metadata,\n  options,\n  store,\n  params,\n  logger\n}) => {\n  const _state = await setupWalletState(params, options.network);\n\n  const cleanup = () => {\n    _state.keyStore.clear();\n  };\n\n  const getAccounts = () => {\n    const accountId = _state.wallet.getAccountId();\n\n    if (!accountId) {\n      return [];\n    }\n\n    return [{\n      accountId\n    }];\n  };\n\n  const transformTransactions = async transactions => {\n    const account = _state.wallet.account();\n\n    const {\n      networkId,\n      signer,\n      provider\n    } = account.connection;\n    const localKey = await signer.getPublicKey(account.accountId, networkId);\n    return Promise.all(transactions.map(async (transaction, index) => {\n      const actions = transaction.actions.map(action => (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_1__.createAction)(action));\n      const accessKey = await account.accessKeyForTransaction(transaction.receiverId, actions, localKey);\n\n      if (!accessKey) {\n        throw new Error(`Failed to find matching key for transaction sent to ${transaction.receiverId}`);\n      }\n\n      const block = await provider.block({\n        finality: \"final\"\n      });\n      return near_api_js__WEBPACK_IMPORTED_MODULE_0__.transactions.createTransaction(account.accountId, near_api_js__WEBPACK_IMPORTED_MODULE_0__.utils.PublicKey.from(accessKey.public_key), transaction.receiverId, accessKey.access_key.nonce + index + 1, actions, near_api_js__WEBPACK_IMPORTED_MODULE_0__.utils.serialize.base_decode(block.header.hash));\n    }));\n  };\n\n  return {\n    async signIn({\n      contractId,\n      methodNames\n    }) {\n      const existingAccounts = getAccounts();\n\n      if (existingAccounts.length) {\n        return existingAccounts;\n      }\n\n      await _state.wallet.requestSignIn({\n        contractId,\n        methodNames\n      });\n      return getAccounts();\n    },\n\n    async signOut() {\n      if (_state.wallet.isSignedIn()) {\n        _state.wallet.signOut();\n      }\n\n      cleanup();\n    },\n\n    async getAccounts() {\n      return getAccounts();\n    },\n\n    async verifyOwner({\n      message,\n      callbackUrl,\n      meta\n    }) {\n      logger.log(\"verifyOwner\", {\n        message\n      });\n\n      const account = _state.wallet.account();\n\n      if (!account) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      const locationUrl =  false ? 0 : \"\";\n      const url = callbackUrl || locationUrl;\n\n      if (!url) {\n        throw new Error(`The callbackUrl is missing for ${metadata.name}`);\n      }\n\n      const encodedUrl = encodeURIComponent(url);\n      const extraMeta = meta ? `&meta=${meta}` : \"\";\n      window.location.replace(`${params.walletUrl}/verify-owner?message=${message}&callbackUrl=${encodedUrl}${extraMeta}`);\n      return;\n    },\n\n    async signAndSendTransaction({\n      signerId,\n      receiverId,\n      actions,\n      callbackUrl\n    }) {\n      logger.log(\"signAndSendTransaction\", {\n        signerId,\n        receiverId,\n        actions,\n        callbackUrl\n      });\n      const {\n        contract\n      } = store.getState();\n\n      if (!_state.wallet.isSignedIn() || !contract) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      const account = _state.wallet.account();\n\n      return account[\"signAndSendTransaction\"]({\n        receiverId: receiverId || contract.contractId,\n        actions: actions.map(action => (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_1__.createAction)(action)),\n        walletCallbackUrl: callbackUrl\n      });\n    },\n\n    async signAndSendTransactions({\n      transactions,\n      callbackUrl\n    }) {\n      logger.log(\"signAndSendTransactions\", {\n        transactions,\n        callbackUrl\n      });\n\n      if (!_state.wallet.isSignedIn()) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      return _state.wallet.requestSignTransactions({\n        transactions: await transformTransactions(transactions),\n        callbackUrl\n      });\n    }\n\n  };\n};\n\nfunction setupMyNearWallet({\n  walletUrl,\n  iconUrl = \"./assets/my-near-wallet-icon.png\",\n  deprecated = false\n} = {}) {\n  return async () => {\n    return {\n      id: \"my-near-wallet\",\n      type: \"browser\",\n      metadata: {\n        name: \"MyNearWallet\",\n        description: null,\n        iconUrl,\n        deprecated,\n        available: true\n      },\n      init: options => {\n        return MyNearWallet(_objectSpread(_objectSpread({}, options), {}, {\n          params: {\n            walletUrl: resolveWalletUrl(options.options.network, walletUrl)\n          }\n        }));\n      }\n    };\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvbXktbmVhci13YWxsZXQvc3JjL2xpYi9teS1uZWFyLXdhbGxldC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFlQTs7QUFpQkEsTUFBTU8sZ0JBQWdCLEdBQUcsQ0FBQ0MsT0FBRCxFQUFtQkMsU0FBbkIsS0FBMEM7RUFDakUsSUFBSUEsU0FBSixFQUFlO0lBQ2IsT0FBT0EsU0FBUDtFQUNEOztFQUVELFFBQVFELE9BQU8sQ0FBQ0UsU0FBaEI7SUFDRSxLQUFLLFNBQUw7TUFDRSxPQUFPLDhCQUFQOztJQUNGLEtBQUssU0FBTDtNQUNFLE9BQU8sa0NBQVA7O0lBQ0Y7TUFDRSxNQUFNLElBQUlDLEtBQUosQ0FBVSxvQkFBVixDQUFOO0VBTko7QUFRRCxDQWJEOztBQWVBLE1BQU1DLGdCQUFnQixHQUFHLE9BQ3ZCQyxNQUR1QixFQUV2QkwsT0FGdUIsS0FHUTtFQUMvQixNQUFNTSxRQUFRLEdBQUcsSUFBSVosOEVBQUosRUFBakI7RUFFQSxNQUFNYyxJQUFJLEdBQUcsTUFBTWYsb0RBQU87SUFDeEJhLFFBRHdCO0lBRXhCTCxTQUFTLEVBQUVJLE1BQU0sQ0FBQ0o7RUFGTSxHQUdyQkQsT0FIcUI7SUFJeEJTLE9BQU8sRUFBRTtFQUplLEdBQTFCO0VBT0EsTUFBTUMsTUFBTSxHQUFHLElBQUlsQix5REFBSixDQUFxQmdCLElBQXJCLEVBQTJCLFVBQTNCLENBQWYsQ0FWK0IsQ0FZL0I7O0VBQ0EsSUFBSSxDQUFDRSxNQUFNLENBQUNDLFVBQVAsRUFBTCxFQUEwQjtJQUN4QixNQUFNTCxRQUFRLENBQUNNLEtBQVQsRUFBTjtFQUNEOztFQUVELE9BQU87SUFDTEYsTUFESztJQUVMSjtFQUZLLENBQVA7QUFJRCxDQXhCRDs7QUEwQkEsTUFBTU8sWUFHTCxHQUFHLE9BQU87RUFBRUMsUUFBRjtFQUFZQyxPQUFaO0VBQXFCQyxLQUFyQjtFQUE0QlgsTUFBNUI7RUFBb0NZO0FBQXBDLENBQVAsS0FBd0Q7RUFDMUQsTUFBTUMs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QixPQUFPO01BQ0xDLEVBQUUsRUFBRSxnQkFEQztNQUVMQyxJQUFJLEVBQUUsU0FGRDtNQUdMdkUsUUFBUSxFQUFFO1FBQ1J1RCxJQUFJLEVBQUUsY0FERTtRQUVSaUIsV0FBVyxFQUFFLElBRkw7UUFHUkosT0FIUTtRQUlSQyxVQUpRO1FBS1JJLFNBQVMsRUFBRTtNQUxILENBSEw7TUFVTEMsSUFBSSxFQUFHekUsT0FBRCxJQUFhO1FBQ2pCLE9BQU9GLFlBQVksaUNBQ2RFLE9BRGM7VUFFakJWLE1BQU0sRUFBRTtZQUNOSixTQUFTLEVBQUVGLGdCQUFnQixDQUFDZ0IsT0FBTyxDQUFDQSxPQUFSLENBQWdCZixPQUFqQixFQUEwQkMsU0FBMUI7VUFEckI7UUFGUyxHQUFuQjtNQU1EO0lBakJJLENBQVA7RUFtQkQsQ0FwQkQ7QUFxQkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vcGFja2FnZXMvbXktbmVhci13YWxsZXQvc3JjL2xpYi9teS1uZWFyLXdhbGxldC50cz9mNjdhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIFdhbGxldENvbm5lY3Rpb24sXG4gIGNvbm5lY3QsXG4gIGtleVN0b3JlcyxcbiAgdHJhbnNhY3Rpb25zIGFzIG5lYXJUcmFuc2FjdGlvbnMsXG4gIHV0aWxzLFxufSBmcm9tIFwibmVhci1hcGktanNcIjtcbmltcG9ydCB0eXBlIHtcbiAgV2FsbGV0TW9kdWxlRmFjdG9yeSxcbiAgV2FsbGV0QmVoYXZpb3VyRmFjdG9yeSxcbiAgQnJvd3NlcldhbGxldCxcbiAgVHJhbnNhY3Rpb24sXG4gIE9wdGlvbmFsLFxuICBOZXR3b3JrLFxufSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcbmltcG9ydCB7IGNyZWF0ZUFjdGlvbiB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3Ivd2FsbGV0LXV0aWxzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTXlOZWFyV2FsbGV0UGFyYW1zIHtcbiAgd2FsbGV0VXJsPzogc3RyaW5nO1xuICBpY29uVXJsPzogc3RyaW5nO1xuICBkZXByZWNhdGVkPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIE15TmVhcldhbGxldFN0YXRlIHtcbiAgd2FsbGV0OiBXYWxsZXRDb25uZWN0aW9uO1xuICBrZXlTdG9yZToga2V5U3RvcmVzLkJyb3dzZXJMb2NhbFN0b3JhZ2VLZXlTdG9yZTtcbn1cblxuaW50ZXJmYWNlIE15TmVhcldhbGxldEV4dHJhT3B0aW9ucyB7XG4gIHdhbGxldFVybDogc3RyaW5nO1xufVxuXG5jb25zdCByZXNvbHZlV2FsbGV0VXJsID0gKG5ldHdvcms6IE5ldHdvcmssIHdhbGxldFVybD86IHN0cmluZykgPT4ge1xuICBpZiAod2FsbGV0VXJsKSB7XG4gICAgcmV0dXJuIHdhbGxldFVybDtcbiAgfVxuXG4gIHN3aXRjaCAobmV0d29yay5uZXR3b3JrSWQpIHtcbiAgICBjYXNlIFwibWFpbm5ldFwiOlxuICAgICAgcmV0dXJuIFwiaHR0cHM6Ly9hcHAubXluZWFyd2FsbGV0LmNvbVwiO1xuICAgIGNhc2UgXCJ0ZXN0bmV0XCI6XG4gICAgICByZXR1cm4gXCJodHRwczovL3Rlc3RuZXQubXluZWFyd2FsbGV0LmNvbVwiO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHdhbGxldCB1cmxcIik7XG4gIH1cbn07XG5cbmNvbnN0IHNldHVwV2FsbGV0U3RhdGUgPSBhc3luYyAoXG4gIHBhcmFtczogTXlOZWFyV2FsbGV0RXh0cmFPcHRpb25zLFxuICBuZXR3b3JrOiBOZXR3b3JrXG4pOiBQcm9taXNlPE15TmVhcldhbGxldFN0YXRlPiA9PiB7XG4gIGNvbnN0IGtleVN0b3JlID0gbmV3IGtleVN0b3Jlcy5Ccm93c2VyTG9jYWxTdG9yYWdlS2V5U3RvcmUoKTtcblxuICBjb25zdCBuZWFyID0gYXdhaXQgY29ubmVjdCh7XG4gICAga2V5U3RvcmUsXG4gICAgd2FsbGV0VXJsOiBwYXJhbXMud2FsbGV0VXJsLFxuICAgIC4uLm5ldHdvcmssXG4gICAgaGVhZGVyczoge30sXG4gIH0pO1xuXG4gIGNvbnN0IHdhbGxldCA9IG5ldyBXYWxsZXRDb25uZWN0aW9uKG5lYXIsIFwibmVhcl9hcHBcIik7XG5cbiAgLy8gQ2xlYW51cCB1cCBhbnkgcGVuZGluZyBrZXlzIChjYW5jZWxsZWQgbG9naW5zKS5cbiAgaWYgKCF3YWxsZXQuaXNTaWduZWRJbigpKSB7XG4gICAgYXdhaXQga2V5U3RvcmUuY2xlYXIoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgd2FsbGV0LFxuICAgIGtleVN0b3JlLFxuICB9O1xufTtcblxuY29uc3QgTXlOZWFyV2FsbGV0OiBXYWxsZXRCZWhhdmlvdXJGYWN0b3J5PFxuICBCcm93c2VyV2FsbGV0LFxuICB7IHBhcmFtczogTXlOZWFyV2FsbGV0RXh0cmFPcHRpb25zIH1cbj4gPSBhc3luYyAoeyBtZXRhZGF0YSwgb3B0aW9ucywgc3RvcmUsIHBhcmFtcywgbG9nZ2VyIH0pID0+IHtcbiAgY29uc3QgX3N0YXRlID0gYXdhaXQgc2V0dXBXYWxsZXRTdGF0ZShwYXJhbXMsIG9wdGlvbnMubmV0d29yayk7XG5cbiAgY29uc3QgY2xlYW51cCA9ICgpID0+IHtcbiAgICBfc3RhdGUua2V5U3RvcmUuY2xlYXIoKTtcbiAgfTtcblxuICBjb25zdCBnZXRBY2NvdW50cyA9ICgpID0+IHtcbiAgICBjb25zdCBhY2NvdW50SWQ6IHN0cmluZyB8IG51bGwgPSBfc3RhdGUud2FsbGV0LmdldEFjY291bnRJZCgpO1xuXG4gICAgaWYgKCFhY2NvdW50SWQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gW3sgYWNjb3VudElkIH1dO1xuICB9O1xuXG4gIGNvbnN0IHRyYW5zZm9ybVRyYW5zYWN0aW9ucyA9IGFzeW5jIChcbiAgICB0cmFuc2FjdGlvbnM6IEFycmF5PE9wdGlvbmFsPFRyYW5zYWN0aW9uLCBcInNpZ25lcklkXCI+PlxuICApID0+IHtcbiAgICBjb25zdCBhY2NvdW50ID0gX3N0YXRlLndhbGxldC5hY2NvdW50KCk7XG4gICAgY29uc3QgeyBuZXR3b3JrSWQsIHNpZ25lciwgcHJvdmlkZXIgfSA9IGFjY291bnQuY29ubmVjdGlvbjtcblxuICAgIGNvbnN0IGxvY2FsS2V5ID0gYXdhaXQgc2lnbmVyLmdldFB1YmxpY0tleShhY2NvdW50LmFjY291bnRJZCwgbmV0d29ya0lkKTtcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgIHRyYW5zYWN0aW9ucy5tYXAoYXN5bmMgKHRyYW5zYWN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb25zID0gdHJhbnNhY3Rpb24uYWN0aW9ucy5tYXAoKGFjdGlvbikgPT5cbiAgICAgICAgICBjcmVhdGVBY3Rpb24oYWN0aW9uKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBhY2Nlc3NLZXkgPSBhd2FpdCBhY2NvdW50LmFjY2Vzc0tleUZvclRyYW5zYWN0aW9uKFxuICAgICAgICAgIHRyYW5zYWN0aW9uLnJlY2VpdmVySWQsXG4gICAgICAgICAgYWN0aW9ucyxcbiAgICAgICAgICBsb2NhbEtleVxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghYWNjZXNzS2V5KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEZhaWxlZCB0byBmaW5kIG1hdGNoaW5nIGtleSBmb3IgdHJhbnNhY3Rpb24gc2VudCB0byAke3RyYW5zYWN0aW9uLnJlY2VpdmVySWR9YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBibG9jayA9IGF3YWl0IHByb3ZpZGVyLmJsb2NrKHsgZmluYWxpdHk6IFwiZmluYWxcIiB9KTtcblxuICAgICAgICByZXR1cm4gbmVhclRyYW5zYWN0aW9ucy5jcmVhdGVUcmFuc2FjdGlvbihcbiAgICAgICAgICBhY2NvdW50LmFjY291bnRJZCxcbiAgICAgICAgICB1dGlscy5QdWJsaWNLZXkuZnJvbShhY2Nlc3NLZXkucHVibGljX2tleSksXG4gICAgICAgICAgdHJhbnNhY3Rpb24ucmVjZWl2ZXJJZCxcbiAgICAgICAgICBhY2Nlc3NLZXkuYWNjZXNzX2tleS5ub25jZSArIGluZGV4ICsgMSxcbiAgICAgICAgICBhY3Rpb25zLFxuICAgICAgICAgIHV0aWxzLnNlcmlhbGl6ZS5iYXNlX2RlY29kZShibG9jay5oZWFkZXIuaGFzaClcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGFzeW5jIHNpZ25Jbih7IGNvbnRyYWN0SWQsIG1ldGhvZE5hbWVzIH0pIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nQWNjb3VudHMgPSBnZXRBY2NvdW50cygpO1xuXG4gICAgICBpZiAoZXhpc3RpbmdBY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nQWNjb3VudHM7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IF9zdGF0ZS53YWxsZXQucmVxdWVzdFNpZ25Jbih7IGNvbnRyYWN0SWQsIG1ldGhvZE5hbWVzIH0pO1xuXG4gICAgICByZXR1cm4gZ2V0QWNjb3VudHMoKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgc2lnbk91dCgpIHtcbiAgICAgIGlmIChfc3RhdGUud2FsbGV0LmlzU2lnbmVkSW4oKSkge1xuICAgICAgICBfc3RhdGUud2FsbGV0LnNpZ25PdXQoKTtcbiAgICAgIH1cblxuICAgICAgY2xlYW51cCgpO1xuICAgIH0sXG5cbiAgICBhc3luYyBnZXRBY2NvdW50cygpIHtcbiAgICAgIHJldHVybiBnZXRBY2NvdW50cygpO1xuICAgIH0sXG5cbiAgICBhc3luYyB2ZXJpZnlPd25lcih7IG1lc3NhZ2UsIGNhbGxiYWNrVXJsLCBtZXRhIH0pIHtcbiAgICAgIGxvZ2dlci5sb2coXCJ2ZXJpZnlPd25lclwiLCB7IG1lc3NhZ2UgfSk7XG5cbiAgICAgIGNvbnN0IGFjY291bnQgPSBfc3RhdGUud2FsbGV0LmFjY291bnQoKTtcblxuICAgICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBub3Qgc2lnbmVkIGluXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgbG9jYXRpb25VcmwgPVxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93LmxvY2F0aW9uLmhyZWYgOiBcIlwiO1xuXG4gICAgICBjb25zdCB1cmwgPSBjYWxsYmFja1VybCB8fCBsb2NhdGlvblVybDtcblxuICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgY2FsbGJhY2tVcmwgaXMgbWlzc2luZyBmb3IgJHttZXRhZGF0YS5uYW1lfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbmNvZGVkVXJsID0gZW5jb2RlVVJJQ29tcG9uZW50KHVybCk7XG4gICAgICBjb25zdCBleHRyYU1ldGEgPSBtZXRhID8gYCZtZXRhPSR7bWV0YX1gIDogXCJcIjtcblxuICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoXG4gICAgICAgIGAke3BhcmFtcy53YWxsZXRVcmx9L3ZlcmlmeS1vd25lcj9tZXNzYWdlPSR7bWVzc2FnZX0mY2FsbGJhY2tVcmw9JHtlbmNvZGVkVXJsfSR7ZXh0cmFNZXRhfWBcbiAgICAgICk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9LFxuXG4gICAgYXN5bmMgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbih7XG4gICAgICBzaWduZXJJZCxcbiAgICAgIHJlY2VpdmVySWQsXG4gICAgICBhY3Rpb25zLFxuICAgICAgY2FsbGJhY2tVcmwsXG4gICAgfSkge1xuICAgICAgbG9nZ2VyLmxvZyhcInNpZ25BbmRTZW5kVHJhbnNhY3Rpb25cIiwge1xuICAgICAgICBzaWduZXJJZCxcbiAgICAgICAgcmVjZWl2ZXJJZCxcbiAgICAgICAgYWN0aW9ucyxcbiAgICAgICAgY2FsbGJhY2tVcmwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyBjb250cmFjdCB9ID0gc3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgICAgaWYgKCFfc3RhdGUud2FsbGV0LmlzU2lnbmVkSW4oKSB8fCAhY29udHJhY3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFjY291bnQgPSBfc3RhdGUud2FsbGV0LmFjY291bnQoKTtcblxuICAgICAgcmV0dXJuIGFjY291bnRbXCJzaWduQW5kU2VuZFRyYW5zYWN0aW9uXCJdKHtcbiAgICAgICAgcmVjZWl2ZXJJZDogcmVjZWl2ZXJJZCB8fCBjb250cmFjdC5jb250cmFjdElkLFxuICAgICAgICBhY3Rpb25zOiBhY3Rpb25zLm1hcCgoYWN0aW9uKSA9PiBjcmVhdGVBY3Rpb24oYWN0aW9uKSksXG4gICAgICAgIHdhbGxldENhbGxiYWNrVXJsOiBjYWxsYmFja1VybCxcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBhc3luYyBzaWduQW5kU2VuZFRyYW5zYWN0aW9ucyh7IHRyYW5zYWN0aW9ucywgY2FsbGJhY2tVcmwgfSkge1xuICAgICAgbG9nZ2VyLmxvZyhcInNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zXCIsIHsgdHJhbnNhY3Rpb25zLCBjYWxsYmFja1VybCB9KTtcblxuICAgICAgaWYgKCFfc3RhdGUud2FsbGV0LmlzU2lnbmVkSW4oKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXYWxsZXQgbm90IHNpZ25lZCBpblwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9zdGF0ZS53YWxsZXQucmVxdWVzdFNpZ25UcmFuc2FjdGlvbnMoe1xuICAgICAgICB0cmFuc2FjdGlvbnM6IGF3YWl0IHRyYW5zZm9ybVRyYW5zYWN0aW9ucyh0cmFuc2FjdGlvbnMpLFxuICAgICAgICBjYWxsYmFja1VybCxcbiAgICAgIH0pO1xuICAgIH0sXG4gIH07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBNeU5lYXJXYWxsZXQoe1xuICB3YWxsZXRVcmwsXG4gIGljb25VcmwgPSBcIi4vYXNzZXRzL215LW5lYXItd2FsbGV0LWljb24ucG5nXCIsXG4gIGRlcHJlY2F0ZWQgPSBmYWxzZSxcbn06IE15TmVhcldhbGxldFBhcmFtcyA9IHt9KTogV2FsbGV0TW9kdWxlRmFjdG9yeTxCcm93c2VyV2FsbGV0PiB7XG4gIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcIm15LW5lYXItd2FsbGV0XCIsXG4gICAgICB0eXBlOiBcImJyb3dzZXJcIixcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIG5hbWU6IFwiTXlOZWFyV2FsbGV0XCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgICBpY29uVXJsLFxuICAgICAgICBkZXByZWNhdGVkLFxuICAgICAgICBhdmFpbGFibGU6IHRydWUsXG4gICAgICB9LFxuICAgICAgaW5pdDogKG9wdGlvbnMpID0+IHtcbiAgICAgICAgcmV0dXJuIE15TmVhcldhbGxldCh7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIHdhbGxldFVybDogcmVzb2x2ZVdhbGxldFVybChvcHRpb25zLm9wdGlvbnMubmV0d29yaywgd2FsbGV0VXJsKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJXYWxsZXRDb25uZWN0aW9uIiwiY29ubmVjdCIsImtleVN0b3JlcyIsInRyYW5zYWN0aW9ucyIsIm5lYXJUcmFuc2FjdGlvbnMiLCJ1dGlscyIsImNyZWF0ZUFjdGlvbiIsInJlc29sdmVXYWxsZXRVcmwiLCJuZXR3b3JrIiwid2FsbGV0VXJsIiwibmV0d29ya0lkIiwiRXJyb3IiLCJzZXR1cFdhbGxldFN0YXRlIiwicGFyYW1zIiwia2V5U3RvcmUiLCJCcm93c2VyTG9jYWxTdG9yYWdlS2V5U3RvcmUiLCJuZWFyIiwiaGVhZGVycyIsIndhbGxldCIsImlzU2lnbmVkSW4iLCJjbGVhciIsIk15TmVhcldhbGxldCIsIm1ldGFkYXRhIiwib3B0aW9ucyIsInN0b3JlIiwibG9nZ2VyIiwiX3N0YXRlIiwiY2xlYW51cCIsImdldEFjY291bnRzIiwiYWNjb3VudElkIiwiZ2V0QWNjb3VudElkIiwidHJhbnNmb3JtVHJhbnNhY3Rpb25zIiwiYWNjb3VudCIsInNpZ25lciIsInByb3ZpZGVyIiwiY29ubmVjdGlvbiIsImxvY2FsS2V5IiwiZ2V0UHVibGljS2V5IiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInRyYW5zYWN0aW9uIiwiaW5kZXgiLCJhY3Rpb25zIiwiYWN0aW9uIiwiYWNjZXNzS2V5IiwiYWNjZXNzS2V5Rm9yVHJhbnNhY3Rpb24iLCJyZWNlaXZlcklkIiwiYmxvY2siLCJmaW5hbGl0eSIsImNyZWF0ZVRyYW5zYWN0aW9uIiwiUHVibGljS2V5IiwiZnJvbSIsInB1YmxpY19rZXkiLCJhY2Nlc3Nfa2V5Iiwibm9uY2UiLCJzZXJpYWxpemUiLCJiYXNlX2RlY29kZSIsImhlYWRlciIsImhhc2giLCJzaWduSW4iLCJjb250cmFjdElkIiwibWV0aG9kTmFtZXMiLCJleGlzdGluZ0FjY291bnRzIiwibGVuZ3RoIiwicmVxdWVzdFNpZ25JbiIsInNpZ25PdXQiLCJ2ZXJpZnlPd25lciIsIm1lc3NhZ2UiLCJjYWxsYmFja1VybCIsIm1ldGEiLCJsb2ciLCJsb2NhdGlvblVybCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsInVybCIsIm5hbWUiLCJlbmNvZGVkVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZXh0cmFNZXRhIiwicmVwbGFjZSIsInNpZ25BbmRTZW5kVHJhbnNhY3Rpb24iLCJzaWduZXJJZCIsImNvbnRyYWN0IiwiZ2V0U3RhdGUiLCJ3YWxsZXRDYWxsYmFja1VybCIsInNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zIiwicmVxdWVzdFNpZ25UcmFuc2FjdGlvbnMiLCJzZXR1cE15TmVhcldhbGxldCIsImljb25VcmwiLCJkZXByZWNhdGVkIiwiaWQiLCJ0eXBlIiwiZGVzY3JpcHRpb24iLCJhdmFpbGFibGUiLCJpbml0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/my-near-wallet/src/lib/my-near-wallet.ts\n");

/***/ }),

/***/ "../../packages/near-wallet/src/index.ts":
/*!***********************************************!*\
  !*** ../../packages/near-wallet/src/index.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupNearWallet": () => (/* reexport safe */ _lib_near_wallet__WEBPACK_IMPORTED_MODULE_0__.setupNearWallet)
/* harmony export */ });
/* harmony import */ var _lib_near_wallet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/near-wallet */ "../../packages/near-wallet/src/lib/near-wallet.ts");


/***/ }),

/***/ "../../packages/near-wallet/src/lib/near-wallet.ts":
/*!*********************************************************!*\
  !*** ../../packages/near-wallet/src/lib/near-wallet.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupNearWallet\": () => (/* binding */ setupNearWallet)\n/* harmony export */ });\n/* harmony import */ var _near_wallet_selector_my_near_wallet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @near-wallet-selector/my-near-wallet */ \"../../packages/my-near-wallet/src/index.ts\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nconst resolveWalletUrl = (network, walletUrl) => {\n  if (walletUrl) {\n    return walletUrl;\n  }\n\n  switch (network.networkId) {\n    case \"mainnet\":\n      return \"https://wallet.near.org\";\n\n    case \"testnet\":\n      return \"https://wallet.testnet.near.org\";\n\n    default:\n      throw new Error(\"Invalid wallet url\");\n  }\n};\n\nfunction setupNearWallet({\n  walletUrl,\n  iconUrl = \"./assets/near-wallet-icon.png\",\n  deprecated = false\n} = {}) {\n  return async options => {\n    const wallet = await (0,_near_wallet_selector_my_near_wallet__WEBPACK_IMPORTED_MODULE_0__.setupMyNearWallet)({\n      walletUrl: resolveWalletUrl(options.options.network, walletUrl),\n      iconUrl\n    })(options);\n\n    if (!wallet) {\n      return null;\n    }\n\n    return _objectSpread(_objectSpread({}, wallet), {}, {\n      id: \"near-wallet\",\n      metadata: _objectSpread(_objectSpread({}, wallet.metadata), {}, {\n        name: \"NEAR Wallet\",\n        description: null,\n        iconUrl,\n        deprecated,\n        available: true\n      })\n    });\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvbmVhci13YWxsZXQvc3JjL2xpYi9uZWFyLXdhbGxldC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUtBOztBQU9BLE1BQU1DLGdCQUFnQixHQUFHLENBQUNDLE9BQUQsRUFBbUJDLFNBQW5CLEtBQTBDO0VBQ2pFLElBQUlBLFNBQUosRUFBZTtJQUNiLE9BQU9BLFNBQVA7RUFDRDs7RUFFRCxRQUFRRCxPQUFPLENBQUNFLFNBQWhCO0lBQ0UsS0FBSyxTQUFMO01BQ0UsT0FBTyx5QkFBUDs7SUFDRixLQUFLLFNBQUw7TUFDRSxPQUFPLGlDQUFQOztJQUNGO01BQ0UsTUFBTSxJQUFJQyxLQUFKLENBQVUsb0JBQVYsQ0FBTjtFQU5KO0FBUUQsQ0FiRDs7QUFlTyxTQUFTQyxlQUFULENBQXlCO0VBQzlCSCxTQUQ4QjtFQUU5QkksT0FBTyxHQUFHLCtCQUZvQjtFQUc5QkMsVUFBVSxHQUFHO0FBSGlCLElBSVYsRUFKZixFQUl1RDtFQUM1RCxPQUFPLE1BQU9DLE9BQVAsSUFBbUI7SUFDeEIsTUFBTUMsTUFBTSxHQUFHLE1BQU1WLHVGQUFpQixDQUFDO01BQ3JDRyxTQUFTLEVBQUVGLGdCQUFnQixDQUFDUSxPQUFPLENBQUNBLE9BQVIsQ0FBZ0JQLE9BQWpCLEVBQTBCQyxTQUExQixDQURVO01BRXJDSTtJQUZxQyxDQUFELENBQWpCLENBR2xCRSxPQUhrQixDQUFyQjs7SUFLQSxJQUFJLENBQUNDLE1BQUwsRUFBYTtNQUNYLE9BQU8sSUFBUDtJQUNEOztJQUVELHVDQUNLQSxNQURMO01BRUVDLEVBQUUsRUFBRSxhQUZOO01BR0VDLFFBQVEsa0NBQ0hGLE1BQU0sQ0FBQ0UsUUFESjtRQUVOQyxJQUFJLEVBQUUsYUFGQTtRQUdOQyxXQUFXLEVBQUUsSUFIUDtRQUlOUCxPQUpNO1FBS05DLFVBTE07UUFNTk8sU0FBUyxFQUFFO01BTkw7SUFIVjtFQVlELENBdEJEO0FBdUJEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL3BhY2thZ2VzL25lYXItd2FsbGV0L3NyYy9saWIvbmVhci13YWxsZXQudHM/ODdiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBXYWxsZXRNb2R1bGVGYWN0b3J5LFxuICBCcm93c2VyV2FsbGV0LFxuICBOZXR3b3JrLFxufSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcbmltcG9ydCB7XG4gIHNldHVwTXlOZWFyV2FsbGV0LFxuICBNeU5lYXJXYWxsZXRQYXJhbXMsXG59IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3IvbXktbmVhci13YWxsZXRcIjtcblxuZXhwb3J0IHR5cGUgTmVhcldhbGxldFBhcmFtcyA9IE15TmVhcldhbGxldFBhcmFtcztcblxuY29uc3QgcmVzb2x2ZVdhbGxldFVybCA9IChuZXR3b3JrOiBOZXR3b3JrLCB3YWxsZXRVcmw/OiBzdHJpbmcpID0+IHtcbiAgaWYgKHdhbGxldFVybCkge1xuICAgIHJldHVybiB3YWxsZXRVcmw7XG4gIH1cblxuICBzd2l0Y2ggKG5ldHdvcmsubmV0d29ya0lkKSB7XG4gICAgY2FzZSBcIm1haW5uZXRcIjpcbiAgICAgIHJldHVybiBcImh0dHBzOi8vd2FsbGV0Lm5lYXIub3JnXCI7XG4gICAgY2FzZSBcInRlc3RuZXRcIjpcbiAgICAgIHJldHVybiBcImh0dHBzOi8vd2FsbGV0LnRlc3RuZXQubmVhci5vcmdcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB3YWxsZXQgdXJsXCIpO1xuICB9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBOZWFyV2FsbGV0KHtcbiAgd2FsbGV0VXJsLFxuICBpY29uVXJsID0gXCIuL2Fzc2V0cy9uZWFyLXdhbGxldC1pY29uLnBuZ1wiLFxuICBkZXByZWNhdGVkID0gZmFsc2UsXG59OiBOZWFyV2FsbGV0UGFyYW1zID0ge30pOiBXYWxsZXRNb2R1bGVGYWN0b3J5PEJyb3dzZXJXYWxsZXQ+IHtcbiAgcmV0dXJuIGFzeW5jIChvcHRpb25zKSA9PiB7XG4gICAgY29uc3Qgd2FsbGV0ID0gYXdhaXQgc2V0dXBNeU5lYXJXYWxsZXQoe1xuICAgICAgd2FsbGV0VXJsOiByZXNvbHZlV2FsbGV0VXJsKG9wdGlvbnMub3B0aW9ucy5uZXR3b3JrLCB3YWxsZXRVcmwpLFxuICAgICAgaWNvblVybCxcbiAgICB9KShvcHRpb25zKTtcblxuICAgIGlmICghd2FsbGV0KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4ud2FsbGV0LFxuICAgICAgaWQ6IFwibmVhci13YWxsZXRcIixcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIC4uLndhbGxldC5tZXRhZGF0YSxcbiAgICAgICAgbmFtZTogXCJORUFSIFdhbGxldFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgaWNvblVybCxcbiAgICAgICAgZGVwcmVjYXRlZCxcbiAgICAgICAgYXZhaWxhYmxlOiB0cnVlLFxuICAgICAgfSxcbiAgICB9O1xuICB9O1xufVxuIl0sIm5hbWVzIjpbInNldHVwTXlOZWFyV2FsbGV0IiwicmVzb2x2ZVdhbGxldFVybCIsIm5ldHdvcmsiLCJ3YWxsZXRVcmwiLCJuZXR3b3JrSWQiLCJFcnJvciIsInNldHVwTmVhcldhbGxldCIsImljb25VcmwiLCJkZXByZWNhdGVkIiwib3B0aW9ucyIsIndhbGxldCIsImlkIiwibWV0YWRhdGEiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJhdmFpbGFibGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/near-wallet/src/lib/near-wallet.ts\n");

/***/ }),

/***/ "../../packages/nearfi/src/index.ts":
/*!******************************************!*\
  !*** ../../packages/nearfi/src/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupNearFi": () => (/* reexport safe */ _lib_nearfi__WEBPACK_IMPORTED_MODULE_0__.setupNearFi)
/* harmony export */ });
/* harmony import */ var _lib_nearfi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/nearfi */ "../../packages/nearfi/src/lib/nearfi.ts");


/***/ }),

/***/ "../../packages/nearfi/src/lib/nearfi.ts":
/*!***********************************************!*\
  !*** ../../packages/nearfi/src/lib/nearfi.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupNearFi\": () => (/* binding */ setupNearFi)\n/* harmony export */ });\n/* harmony import */ var is_mobile__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! is-mobile */ \"is-mobile\");\n/* harmony import */ var is_mobile__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(is_mobile__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @near-wallet-selector/core */ \"../../packages/core/src/index.ts\");\n\n\n\nconst isInstalled = () => {\n  return (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_1__.waitFor)(() => !!window.nearFiWallet?.isNearFi).catch(() => false);\n};\n\nconst setupNearFiState = () => {\n  const wallet = window.nearFiWallet;\n  return {\n    wallet\n  };\n};\n\nconst NearFi = async ({\n  options,\n  metadata,\n  store,\n  emitter,\n  logger\n}) => {\n  const _state = setupNearFiState();\n\n  const signOut = async () => {\n    if (!_state.wallet.isSignedIn()) {\n      return;\n    }\n\n    const res = await _state.wallet.signOut();\n\n    if (res === true) {\n      return;\n    }\n\n    const error = new Error(typeof res.error === \"string\" ? res.error : res.error.type); // Prevent signing out by throwing.\n\n    if (error.message === \"User reject\") {\n      throw error;\n    } // Continue signing out but log the issue.\n\n\n    logger.log(\"Failed to sign out\");\n    logger.error(error);\n  };\n\n  const setupEvents = () => {\n    _state.wallet.on(\"accountChanged\", async newAccountId => {\n      logger.log(\"onAccountChange\", newAccountId);\n      emitter.emit(\"signedOut\", null);\n    });\n\n    _state.wallet.on(\"rpcChanged\", async rpc => {\n      logger.log(\"onNetworkChange\", rpc);\n\n      if (options.network.networkId !== rpc.networkId) {\n        await signOut();\n        emitter.emit(\"signedOut\", null);\n        emitter.emit(\"networkChanged\", {\n          networkId: rpc.networkId\n        });\n      }\n    });\n  };\n\n  const getAccounts = async () => {\n    let accountId = _state.wallet.getAccountId();\n\n    if (!accountId) {\n      await _state.wallet.resolveSignInState();\n      accountId = _state.wallet.getAccountId();\n\n      if (!accountId) {\n        return [];\n      }\n    }\n\n    return [{\n      accountId\n    }];\n  };\n\n  const isValidActions = actions => {\n    return actions.every(x => x.type === \"FunctionCall\");\n  };\n\n  const transformActions = actions => {\n    const validActions = isValidActions(actions);\n\n    if (!validActions) {\n      throw new Error(`Only 'FunctionCall' actions types are supported by ${metadata.name}`);\n    }\n\n    return actions.map(x => x.params);\n  };\n\n  const transformTransactions = transactions => {\n    return transactions.map(transaction => {\n      return {\n        receiverId: transaction.receiverId,\n        actions: transformActions(transaction.actions)\n      };\n    });\n  };\n\n  if (_state.wallet && _state.wallet.isSignedIn()) {\n    setupEvents();\n  }\n\n  return {\n    async signIn({\n      contractId,\n      methodNames\n    }) {\n      const existingAccounts = await getAccounts();\n\n      if (existingAccounts.length) {\n        return existingAccounts;\n      }\n\n      const {\n        accessKey,\n        error\n      } = await _state.wallet.requestSignIn({\n        contractId,\n        methodNames\n      });\n\n      if (!accessKey || error) {\n        await signOut();\n        throw new Error((typeof error === \"string\" ? error : error.type) || \"Failed to sign in\");\n      }\n\n      setupEvents();\n      return await getAccounts();\n    },\n\n    signOut,\n\n    async getAccounts() {\n      return await getAccounts();\n    },\n\n    async verifyOwner({\n      message\n    }) {\n      logger.log(\"NearFi:verifyOwner\", {\n        message\n      });\n      throw new Error(`Method not supported by ${metadata.name}`);\n    },\n\n    async signAndSendTransaction({\n      signerId,\n      receiverId,\n      actions\n    }) {\n      logger.log(\"signAndSendTransaction\", {\n        signerId,\n        receiverId,\n        actions\n      });\n      const {\n        contract\n      } = store.getState();\n\n      if (!_state.wallet.isSignedIn() || !contract) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      return _state.wallet.signAndSendTransaction({\n        receiverId: receiverId || contract.contractId,\n        actions: transformActions(actions)\n      }).then(res => {\n        if (res.error) {\n          throw new Error(res.error);\n        } // Shouldn't happen but avoids inconsistent responses.\n\n\n        if (!res.response?.length) {\n          throw new Error(\"Invalid response\");\n        }\n\n        return res.response[0];\n      });\n    },\n\n    async signAndSendTransactions({\n      transactions\n    }) {\n      logger.log(\"signAndSendTransactions\", {\n        transactions\n      });\n\n      if (!_state.wallet.isSignedIn()) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      return _state.wallet.requestSignTransactions({\n        transactions: transformTransactions(transactions)\n      }).then(res => {\n        if (res.error) {\n          throw new Error(res.error);\n        } // Shouldn't happen but avoids inconsistent responses.\n\n\n        if (!res.response?.length) {\n          throw new Error(\"Invalid response\");\n        }\n\n        return res.response;\n      });\n    }\n\n  };\n};\n\nfunction setupNearFi({\n  iconUrl = \"./assets/nearfi-icon.png\"\n} = {}) {\n  return async () => {\n    const mobile = (0,is_mobile__WEBPACK_IMPORTED_MODULE_0__.isMobile)();\n    const installed = await isInstalled();\n\n    if (!mobile || !installed) {\n      return null;\n    } // Add extra wait to ensure NearFi's sign in status is read from the\n    // browser extension background env.\n\n\n    await (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_1__.waitFor)(() => !!window.nearFiWallet?.isSignedIn(), {\n      timeout: 300\n    }).catch(() => false);\n    return {\n      id: \"nearfi\",\n      type: \"injected\",\n      metadata: {\n        name: \"NearFi\",\n        description: \"Your NEAR DeFi experience On The Go\",\n        iconUrl,\n        downloadUrl: \"https://nearfi.finance\",\n        deprecated: false,\n        available: installed\n      },\n      init: NearFi\n    };\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvbmVhcmZpL3NyYy9saWIvbmVhcmZpLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQVVBOztBQWlCQSxNQUFNRSxXQUFXLEdBQUcsTUFBTTtFQUN4QixPQUFPRCxtRUFBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDRSxNQUFNLENBQUNDLFlBQVAsRUFBcUJDLFFBQTlCLENBQVAsQ0FBK0NDLEtBQS9DLENBQXFELE1BQU0sS0FBM0QsQ0FBUDtBQUNELENBRkQ7O0FBSUEsTUFBTUMsZ0JBQWdCLEdBQUcsTUFBbUI7RUFDMUMsTUFBTUMsTUFBTSxHQUFHTCxNQUFNLENBQUNDLFlBQXRCO0VBRUEsT0FBTztJQUNMSTtFQURLLENBQVA7QUFHRCxDQU5EOztBQVFBLE1BQU1DLE1BQThDLEdBQUcsT0FBTztFQUM1REMsT0FENEQ7RUFFNURDLFFBRjREO0VBRzVEQyxLQUg0RDtFQUk1REMsT0FKNEQ7RUFLNURDO0FBTDRELENBQVAsS0FNakQ7RUFDSixNQUFNQyxNQUFNLEdBQUdSLGdCQUFnQixFQUEvQjs7RUFFQSxNQUFNUyxPQUFPLEdBQUcsWUFBWTtJQUMxQixJQUFJLENBQUNELE1BQU0sQ0FBQ1AsTUFBUCxDQUFjUyxVQUFkLEVBQUwsRUFBaUM7TUFDL0I7SUFDRDs7SUFFRCxNQUFNQyxHQUFHLEdBQUcsTUFBTUgsTUFBTSxDQUFDUCxNQUFQLENBQWNRLE9BQWQsRUFBbEI7O0lBRUEsSUFBSUUsR0FBRyxLQUFLLElBQVosRUFBa0I7TUFDaEI7SUFDRDs7SUFFRCxNQUFNQyxLQUFLLEdBQUcsSUFBSUMsS0FBSixDQUNaLE9BQU9GLEdBQUcsQ0FBQ0MsS0FBWCxLQUFxQixRQUFyQixHQUFnQ0QsR0FBRyxDQUFDQyxLQUFwQyxHQUE0Q0QsR0FBRyxDQUFDQyxLQUFKLENBQVVFLElBRDFDLENBQWQsQ0FYMEIsQ0FlMUI7O0lBQ0EsSUFBSUYsS0FBSyxDQUFDRyxPQUFOLEtBQWtCLGFBQXRCLEVBQXFDO01BQ25DLE1BQU1ILEtBQU47SUFDRCxDQWxCeUIsQ0FvQjFCOzs7SUFDQUwsTUFBTSxDQUFDUyxHQUFQLENBQVcsb0JBQVg7SUFDQVQsTUFBTSxDQUFDSyxLQUFQLENBQWFBLEtBQWI7RUFDRCxDQXZCRDs7RUF5QkEsTUFBTUssV0FBVyxHQUFHLE1BQU07SUFDeEJULE1BQU0sQ0FBQ1AsTUFBUCxDQUFjaUIsRUFBZCxDQUFpQixnQkFBakIsRUFBbUMsTUFBT0MsWUFBUCxJQUF3QjtNQUN6RFosTUFBTSxDQUFDUyxHQUFQLENBQVcsaUJBQVgsRUFBOEJHLFlBQTlCO01BQ0FiLE9BQU8sQ0FBQ2MsSUFBUixDQUFhLFdBQWIsRUFBMEIsSUFBMUI7SUFDRCxDQUhEOztJQUtBWixNQUFNLENBQUNQLE1BQVAsQ0FBY2lCLEVBQWQsQ0FBaUIsWUFBakIsRUFBK0IsTUFBT0csR0FBUCxJQUFlO01BQzVDZCxNQUFNLENBQUNTLEdBQVAsQ0FBVyxpQkFBWCxFQUE4QkssR0FBOUI7O01BRUEsSUFBSWxCLE9BQU8sQ0FBQ21CLE9BQVIsQ0FBZ0JDLFNBQWhCLEtBQThCRixHQUFHLENBQUNFLFNBQXRDLEVBQWlEO1FBQy9DLE1BQU1kLE9BQU8sRUFBYjtRQUVBSCxPQUFPLENBQUNjLElBQVIsQ0FBYSxXQUFiLEVBQTBCLElBQTFCO1FBQ0FkLE9BQU8sQ0FBQ2MsSUFBUixDQUFhLGdCQUFiLEVBQStCO1VBQUVHLFNBQVMsRUFBRUYsR0FBRyxDQUFDRTtRQUFqQixDQUEvQjtNQUNEO0lBQ0YsQ0FURDtFQVVELENBaEJEOztFQWtCQSxNQUFNQyxXQUFXLEdBQUcsWUFBWTtJQUM5QixJQUFJQyxTQUFTLEdBQUdqQixNQUFNLENBQUNQLE1BQVAsQ0FBY3lCLFlBQWQsRUFBaEI7O0lBQ0EsSUFBSSxDQUFDRCxTQUFMLEVBQWdCO01BQ2QsTUFBTWpCLE1BQU0sQ0FBQ1AsTUFBUCxDQUFjMEIsa0JBQWQsRUFBTjtNQUNBRixTQUFTLEdBQUdqQixNQUFNLENBQUNQLE1BQVAsQ0FBY3lCLFlBQWQsRUFBWjs7TUFDQSxJQUFJLENBQUNELFNBQUwsRUFBZ0I7UUFDZCxPQUFPLEVBQVA7TUFDRDtJQUNGOztJQUNELE9BQU8sQ0FBQztNQUFFQTtJQUFGLENBQUQsQ0FBUDtFQUNELENBVkQ7O0VBWUEsTUFBTUcsY0FBYyxHQUNsQkMsT0FEcUIsSUFFb0I7SUFDekMsT0FBT0EsT0FBTyxDQUFDQyxLQUFSLENBQWVDLENBQUQsSUFBT0EsQ0FBQyxDQUFDakIsSUFBRixLQUFXLGNBQWhDLENBQVA7RUFDRCxDQUpEOztFQU1BLE1BQU1rQixnQkFBZ0IsR0FBSUgsT0FBRCxJQUE0QjtJQUNuRCxNQUFNSSxZQUFZLEdBQUdMLGNBQWMsQ0FBQ0MsT0FBRCxDQUFuQzs7SUFFQSxJQUFJLENBQUNJLFlBQUwsRUFBbUI7TUFDakIsTUFBTSxJQUFJcEIsS0FBSixDQUNILHNEQUFxRFQsUUFBUSxDQUFDOEIsSUFBSyxFQURoRSxDQUFOO0lBR0Q7O0lBRUQsT0FBT0wsT0FBTyxDQUFDTSxHQUFSLENBQWFKLENBQUQsSUFBT0EsQ0FBQyxDQUFDSyxNQUFyQixDQUFQO0VBQ0QsQ0FWRDs7RUFZQSxNQUFNQyxxQkFBcUIsR0FDekJDLFlBRDRCLElBRXpCO0lBQ0gsT0FBT0EsWUFBWSxDQUFDSCxHQUFiLENBQWtCSSxXQUFELElBQWlCO01BQ3ZDLE9BQU87UUFDTEMsVUFBVSxFQUFFRCxXQUFXLENBQUNDLFVBRG5CO1FBRUxYLE9BQU8sRUFBRUcsZ0JBQWdCLENBQUNPLFdBQVcsQ0FBQ1YsT0FBYjtNQUZwQixDQUFQO0lBSUQsQ0FMTSxDQUFQO0VBTUQsQ0FURDs7RUFVQSxJQUFJckIsTUFBTSxDQUFDUCxNQUFQLElBQWlCTyxNQUFNLENBQUNQLE1BQVAsQ0FBY1MsVUFBZCxFQUFyQixFQUFpRDtJQUMvQ08sV0FBVztFQUNaOztFQUVELE9BQU87SUFDTCxNQUFNd0IsTUFBTixDQUFhO01BQUVDLFVBQUY7TUFBY0M7SUFBZCxDQUFiLEVBQTBDO01BQ3hDLE1BQU1DLGdCQUFnQixHQUFHLE1BQU1wQixXQUFXLEVBQTFDOztNQUNBLElBQUlvQixnQkFBZ0IsQ0FBQ0MsTUFBckIsRUFBNkI7UUFDM0IsT0FBT0QsZ0JBQVA7TUFDRDs7TUFFRCxNQUFNO1FBQUVFLFNBQUY7UUFBYWxDO01BQWIsSUFBdUIsTUFBTUosTUFBTSxDQUFDUCxNQUFQLENBQWM4QyxhQUFkLENBQTRCO1FBQzdETCxVQUQ2RDtRQUU3REM7TUFGNkQsQ0FBNUIsQ0FBbkM7O01BSUEsSUFBSSxDQUFDRyxTQUFELElBQWNsQyxLQUFsQixFQUF5QjtRQUN2QixNQUFNSCxPQUFPLEVBQWI7UUFFQSxNQUFNLElBQUlJLEtBQUosQ0FDSixDQUFDLE9BQU9ELEtBQVAsS0FBaUIsUUFBakIsR0FBNEJBLEtBQTVCLEdBQW9DQSxLQUFLLENBQUNFLElBQTNDLEtBQ0UsbUJBRkUsQ0FBTjtNQUlEOztNQUVERyxXQUFXO01BQ1gsT0FBTyxNQUFNTyxXQUFXLEVBQXhCO0lBQ0QsQ0F0Qkk7O0lBd0JMZixPQXhCSzs7SUEwQkwsTUFBTWUsV0FBTixHQUFvQjtNQUNsQixPQUFPLE1BQU1BLFdBQVcsRUFBeEI7SUFDRCxDQTVCSTs7SUE4QkwsTUFBTXdCLFdBQU4sQ0FBa0I7TUFBRWpDO0lBQUYsQ0FBbEIsRUFBK0I7TUFDN0JSLE1BQU0sQ0FBQ1MsR0FBUCxDQUFXLG9CQUFYLEVBQWlDO1FBQUVEO01BQUYsQ0FBakM7TUFFQSxNQUFNLElBQUlGLEtBQUosQ0FBVywyQkFBMEJULFFBQVEsQ0FBQzhCLElBQUssRUFBbkQsQ0FBTjtJQUNELENBbENJOztJQW9DTCxNQUFNZSxzQkFBTixDQUE2QjtNQUFFQyxRQUFGO01BQVlWLFVBQVo7TUFBd0JYO0lBQXhCLENBQTdCLEVBQWdFO01BQzlEdEIsTUFBTSxDQUFDUyxHQUFQLENBQVcsd0JBQVgsRUFBcUM7UUFBRWtDLFFBQUY7UUFBWVYsVUFBWjtRQUF3Qlg7TUFBeEIsQ0FBckM7TUFFQSxNQUFNO1FBQUVzQjtNQUFGLElBQWU5QyxLQUFLLENBQUMrQyxRQUFOLEVBQXJCOztNQUVBLElBQUksQ0FBQzVDLE1BQU0sQ0FBQ1AsTUFBUCxDQUFjUyxVQUFkLEVBQUQsSUFBK0IsQ0FBQ3lDLFFBQXBDLEVBQThDO1FBQzVDLE1BQU0sSUFBSXRDLEtBQUosQ0FBVSxzQkFBVixDQUFOO01BQ0Q7O01BRUQsT0FBT0wsTUFBTSxDQUFDUCxNQUFQLENBQ0pnRCxzQkFESSxDQUNtQjtRQUN0QlQsVUFBVSxFQUFFQSxVQUFVLElBQUlXLFFBQVEsQ0FBQ1QsVUFEYjtRQUV0QmIsT0FBTyxFQUFFRyxnQkFBZ0IsQ0FBQ0gsT0FBRDtNQUZILENBRG5CLEVBS0p3QixJQUxJLENBS0UxQyxHQUFELElBQVM7UUFDYixJQUFJQSxHQUFHLENBQUNDLEtBQVIsRUFBZTtVQUNiLE1BQU0sSUFBSUMsS0FBSixDQUFVRixHQUFHLENBQUNDLEtBQWQsQ0FBTjtRQUNELENBSFksQ0FLYjs7O1FBQ0EsSUFBSSxDQUFDRCxHQUFHLENBQUMyQyxRQUFKLEVBQWNULE1BQW5CLEVBQTJCO1VBQ3pCLE1BQU0sSUFBSWhDLEtBQUosQ0FBVSxrQkFBVixDQUFOO1FBQ0Q7O1FBRUQsT0FBT0YsR0FBRyxDQUFDMkMsUUFBSixDQUFhLENBQWIsQ0FBUDtNQUNELENBaEJJLENBQVA7SUFpQkQsQ0E5REk7O0lBZ0VMLE1BQU1DLHVCQUFOLENBQThCO01BQUVqQjtJQUFGLENBQTlCLEVBQWdEO01BQzlDL0IsTUFBTSxDQUFDUyxHQUFQLENBQVcseUJBQVgsRUFBc0M7UUFBRXNCO01BQUYsQ0FBdEM7O01BRUEsSUFBSSxDQUFDOUIsTUFBTSxDQUFDUCxNQUFQLENBQWNTLFVBQWQsRUFBTCxFQUFpQztRQUMvQixNQUFNLElBQUlHLEtBQUosQ0FBVSxzQkFBVixDQUFOO01BQ0Q7O01BRUQsT0FBT0wsTUFBTSxDQUFDUCxNQUFQLENBQ0p1RCx1QkFESSxDQUNvQjtRQUN2QmxCLFlBQVksRUFBRUQscUJBQXFCLENBQUNDLFlBQUQ7TUFEWixDQURwQixFQUlKZSxJQUpJLENBSUUxQyxHQUFELElBQVM7UUFDYixJQUFJQSxHQUFHLENBQUNDLEtBQVIsRUFBZTtVQUNiLE1BQU0sSUFBSUMsS0FBSixDQUFVRixHQUFHLENBQUNDLEtBQWQsQ0FBTjtRQUNELENBSFksQ0FLYjs7O1FBQ0EsSUFBSSxDQUFDRCxHQUFHLENBQUMyQyxRQUFKLEVBQWNULE1BQW5CLEVBQTJCO1VBQ3pCLE1BQU0sSUFBSWhDLEtBQUosQ0FBVSxrQkFBVixDQUFOO1FBQ0Q7O1FBRUQsT0FBT0YsR0FBRyxDQUFDMkMsUUFBWDtNQUNELENBZkksQ0FBUDtJQWdCRDs7RUF2RkksQ0FBUDtBQXlGRCxDQXpMRDs7QUEyTE8sU0FBU0csV0FBVCxDQUFxQjtFQUMxQkMsT0FBTyxHQUFHO0FBRGdCLElBRVYsRUFGWCxFQUVvRDtFQUN6RCxPQUFPLFlBQVk7SUFDakIsTUFBTUMsTUFBTSxHQUFHbEUsbURBQVEsRUFBdkI7SUFDQSxNQUFNbUUsU0FBUyxHQUFHLE1BQU1qRSxXQUFXLEVBQW5DOztJQUVBLElBQUksQ0FBQ2dFLE1BQUQsSUFBVyxDQUFDQyxTQUFoQixFQUEyQjtNQUN6QixPQUFPLElBQVA7SUFDRCxDQU5nQixDQVFqQjtJQUNBOzs7SUFDQSxNQUFNbEUsbUVBQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQ0UsTUFBTSxDQUFDQyxZQUFQLEVBQXFCYSxVQUFyQixFQUFULEVBQTRDO01BQ3ZEbUQsT0FBTyxFQUFFO0lBRDhDLENBQTVDLENBQVAsQ0FFSDlELEtBRkcsQ0FFRyxNQUFNLEtBRlQsQ0FBTjtJQUlBLE9BQU87TUFDTCtELEVBQUUsRUFBRSxRQURDO01BRUxoRCxJQUFJLEVBQUUsVUFGRDtNQUdMVixRQUFRLEVBQUU7UUFDUjhCLElBQUksRUFBRSxRQURFO1FBRVI2QixXQUFXLEVBQUUscUNBRkw7UUFHUkwsT0FIUTtRQUlSTSxXQUFXLEVBQUUsd0JBSkw7UUFLUkMsVUFBVSxFQUFFLEtBTEo7UUFNUkMsU0FBUyxFQUFFTjtNQU5ILENBSEw7TUFXTE8sSUFBSSxFQUFFakU7SUFYRCxDQUFQO0VBYUQsQ0EzQkQ7QUE0QkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vcGFja2FnZXMvbmVhcmZpL3NyYy9saWIvbmVhcmZpLnRzP2JiNTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNNb2JpbGUgfSBmcm9tIFwiaXMtbW9iaWxlXCI7XG5pbXBvcnQge1xuICBXYWxsZXRNb2R1bGVGYWN0b3J5LFxuICBXYWxsZXRCZWhhdmlvdXJGYWN0b3J5LFxuICBJbmplY3RlZFdhbGxldCxcbiAgQWN0aW9uLFxuICBUcmFuc2FjdGlvbixcbiAgRnVuY3Rpb25DYWxsQWN0aW9uLFxuICBPcHRpb25hbCxcbn0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9jb3JlXCI7XG5pbXBvcnQgeyB3YWl0Rm9yIH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9jb3JlXCI7XG5pbXBvcnQgdHlwZSB7IEluamVjdGVkTmVhckZpIH0gZnJvbSBcIi4vaW5qZWN0ZWQtbmVhcmZpXCI7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgbmVhckZpV2FsbGV0OiBJbmplY3RlZE5lYXJGaSB8IHVuZGVmaW5lZDtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5lYXJGaVBhcmFtcyB7XG4gIGljb25Vcmw/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBOZWFyRmlTdGF0ZSB7XG4gIHdhbGxldDogSW5qZWN0ZWROZWFyRmk7XG59XG5cbmNvbnN0IGlzSW5zdGFsbGVkID0gKCkgPT4ge1xuICByZXR1cm4gd2FpdEZvcigoKSA9PiAhIXdpbmRvdy5uZWFyRmlXYWxsZXQ/LmlzTmVhckZpKS5jYXRjaCgoKSA9PiBmYWxzZSk7XG59O1xuXG5jb25zdCBzZXR1cE5lYXJGaVN0YXRlID0gKCk6IE5lYXJGaVN0YXRlID0+IHtcbiAgY29uc3Qgd2FsbGV0ID0gd2luZG93Lm5lYXJGaVdhbGxldCE7XG5cbiAgcmV0dXJuIHtcbiAgICB3YWxsZXQsXG4gIH07XG59O1xuXG5jb25zdCBOZWFyRmk6IFdhbGxldEJlaGF2aW91ckZhY3Rvcnk8SW5qZWN0ZWRXYWxsZXQ+ID0gYXN5bmMgKHtcbiAgb3B0aW9ucyxcbiAgbWV0YWRhdGEsXG4gIHN0b3JlLFxuICBlbWl0dGVyLFxuICBsb2dnZXIsXG59KSA9PiB7XG4gIGNvbnN0IF9zdGF0ZSA9IHNldHVwTmVhckZpU3RhdGUoKTtcblxuICBjb25zdCBzaWduT3V0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghX3N0YXRlLndhbGxldC5pc1NpZ25lZEluKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBfc3RhdGUud2FsbGV0LnNpZ25PdXQoKTtcblxuICAgIGlmIChyZXMgPT09IHRydWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgIHR5cGVvZiByZXMuZXJyb3IgPT09IFwic3RyaW5nXCIgPyByZXMuZXJyb3IgOiByZXMuZXJyb3IudHlwZVxuICAgICk7XG5cbiAgICAvLyBQcmV2ZW50IHNpZ25pbmcgb3V0IGJ5IHRocm93aW5nLlxuICAgIGlmIChlcnJvci5tZXNzYWdlID09PSBcIlVzZXIgcmVqZWN0XCIpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIC8vIENvbnRpbnVlIHNpZ25pbmcgb3V0IGJ1dCBsb2cgdGhlIGlzc3VlLlxuICAgIGxvZ2dlci5sb2coXCJGYWlsZWQgdG8gc2lnbiBvdXRcIik7XG4gICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgfTtcblxuICBjb25zdCBzZXR1cEV2ZW50cyA9ICgpID0+IHtcbiAgICBfc3RhdGUud2FsbGV0Lm9uKFwiYWNjb3VudENoYW5nZWRcIiwgYXN5bmMgKG5ld0FjY291bnRJZCkgPT4ge1xuICAgICAgbG9nZ2VyLmxvZyhcIm9uQWNjb3VudENoYW5nZVwiLCBuZXdBY2NvdW50SWQpO1xuICAgICAgZW1pdHRlci5lbWl0KFwic2lnbmVkT3V0XCIsIG51bGwpO1xuICAgIH0pO1xuXG4gICAgX3N0YXRlLndhbGxldC5vbihcInJwY0NoYW5nZWRcIiwgYXN5bmMgKHJwYykgPT4ge1xuICAgICAgbG9nZ2VyLmxvZyhcIm9uTmV0d29ya0NoYW5nZVwiLCBycGMpO1xuXG4gICAgICBpZiAob3B0aW9ucy5uZXR3b3JrLm5ldHdvcmtJZCAhPT0gcnBjLm5ldHdvcmtJZCkge1xuICAgICAgICBhd2FpdCBzaWduT3V0KCk7XG5cbiAgICAgICAgZW1pdHRlci5lbWl0KFwic2lnbmVkT3V0XCIsIG51bGwpO1xuICAgICAgICBlbWl0dGVyLmVtaXQoXCJuZXR3b3JrQ2hhbmdlZFwiLCB7IG5ldHdvcmtJZDogcnBjLm5ldHdvcmtJZCB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBnZXRBY2NvdW50cyA9IGFzeW5jICgpID0+IHtcbiAgICBsZXQgYWNjb3VudElkID0gX3N0YXRlLndhbGxldC5nZXRBY2NvdW50SWQoKTtcbiAgICBpZiAoIWFjY291bnRJZCkge1xuICAgICAgYXdhaXQgX3N0YXRlLndhbGxldC5yZXNvbHZlU2lnbkluU3RhdGUoKTtcbiAgICAgIGFjY291bnRJZCA9IF9zdGF0ZS53YWxsZXQuZ2V0QWNjb3VudElkKCk7XG4gICAgICBpZiAoIWFjY291bnRJZCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbeyBhY2NvdW50SWQgfV07XG4gIH07XG5cbiAgY29uc3QgaXNWYWxpZEFjdGlvbnMgPSAoXG4gICAgYWN0aW9uczogQXJyYXk8QWN0aW9uPlxuICApOiBhY3Rpb25zIGlzIEFycmF5PEZ1bmN0aW9uQ2FsbEFjdGlvbj4gPT4ge1xuICAgIHJldHVybiBhY3Rpb25zLmV2ZXJ5KCh4KSA9PiB4LnR5cGUgPT09IFwiRnVuY3Rpb25DYWxsXCIpO1xuICB9O1xuXG4gIGNvbnN0IHRyYW5zZm9ybUFjdGlvbnMgPSAoYWN0aW9uczogQXJyYXk8QWN0aW9uPikgPT4ge1xuICAgIGNvbnN0IHZhbGlkQWN0aW9ucyA9IGlzVmFsaWRBY3Rpb25zKGFjdGlvbnMpO1xuXG4gICAgaWYgKCF2YWxpZEFjdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYE9ubHkgJ0Z1bmN0aW9uQ2FsbCcgYWN0aW9ucyB0eXBlcyBhcmUgc3VwcG9ydGVkIGJ5ICR7bWV0YWRhdGEubmFtZX1gXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBhY3Rpb25zLm1hcCgoeCkgPT4geC5wYXJhbXMpO1xuICB9O1xuXG4gIGNvbnN0IHRyYW5zZm9ybVRyYW5zYWN0aW9ucyA9IChcbiAgICB0cmFuc2FjdGlvbnM6IEFycmF5PE9wdGlvbmFsPFRyYW5zYWN0aW9uLCBcInNpZ25lcklkXCI+PlxuICApID0+IHtcbiAgICByZXR1cm4gdHJhbnNhY3Rpb25zLm1hcCgodHJhbnNhY3Rpb24pID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlY2VpdmVySWQ6IHRyYW5zYWN0aW9uLnJlY2VpdmVySWQsXG4gICAgICAgIGFjdGlvbnM6IHRyYW5zZm9ybUFjdGlvbnModHJhbnNhY3Rpb24uYWN0aW9ucyksXG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuICBpZiAoX3N0YXRlLndhbGxldCAmJiBfc3RhdGUud2FsbGV0LmlzU2lnbmVkSW4oKSkge1xuICAgIHNldHVwRXZlbnRzKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFzeW5jIHNpZ25Jbih7IGNvbnRyYWN0SWQsIG1ldGhvZE5hbWVzIH0pIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nQWNjb3VudHMgPSBhd2FpdCBnZXRBY2NvdW50cygpO1xuICAgICAgaWYgKGV4aXN0aW5nQWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBleGlzdGluZ0FjY291bnRzO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGFjY2Vzc0tleSwgZXJyb3IgfSA9IGF3YWl0IF9zdGF0ZS53YWxsZXQucmVxdWVzdFNpZ25Jbih7XG4gICAgICAgIGNvbnRyYWN0SWQsXG4gICAgICAgIG1ldGhvZE5hbWVzLFxuICAgICAgfSk7XG4gICAgICBpZiAoIWFjY2Vzc0tleSB8fCBlcnJvcikge1xuICAgICAgICBhd2FpdCBzaWduT3V0KCk7XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICh0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIgPyBlcnJvciA6IGVycm9yLnR5cGUpIHx8XG4gICAgICAgICAgICBcIkZhaWxlZCB0byBzaWduIGluXCJcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgc2V0dXBFdmVudHMoKTtcbiAgICAgIHJldHVybiBhd2FpdCBnZXRBY2NvdW50cygpO1xuICAgIH0sXG5cbiAgICBzaWduT3V0LFxuXG4gICAgYXN5bmMgZ2V0QWNjb3VudHMoKSB7XG4gICAgICByZXR1cm4gYXdhaXQgZ2V0QWNjb3VudHMoKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgdmVyaWZ5T3duZXIoeyBtZXNzYWdlIH0pIHtcbiAgICAgIGxvZ2dlci5sb2coXCJOZWFyRmk6dmVyaWZ5T3duZXJcIiwgeyBtZXNzYWdlIH0pO1xuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE1ldGhvZCBub3Qgc3VwcG9ydGVkIGJ5ICR7bWV0YWRhdGEubmFtZX1gKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbih7IHNpZ25lcklkLCByZWNlaXZlcklkLCBhY3Rpb25zIH0pIHtcbiAgICAgIGxvZ2dlci5sb2coXCJzaWduQW5kU2VuZFRyYW5zYWN0aW9uXCIsIHsgc2lnbmVySWQsIHJlY2VpdmVySWQsIGFjdGlvbnMgfSk7XG5cbiAgICAgIGNvbnN0IHsgY29udHJhY3QgfSA9IHN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICAgIGlmICghX3N0YXRlLndhbGxldC5pc1NpZ25lZEluKCkgfHwgIWNvbnRyYWN0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBub3Qgc2lnbmVkIGluXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3N0YXRlLndhbGxldFxuICAgICAgICAuc2lnbkFuZFNlbmRUcmFuc2FjdGlvbih7XG4gICAgICAgICAgcmVjZWl2ZXJJZDogcmVjZWl2ZXJJZCB8fCBjb250cmFjdC5jb250cmFjdElkLFxuICAgICAgICAgIGFjdGlvbnM6IHRyYW5zZm9ybUFjdGlvbnMoYWN0aW9ucyksXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBpZiAocmVzLmVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzLmVycm9yKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTaG91bGRuJ3QgaGFwcGVuIGJ1dCBhdm9pZHMgaW5jb25zaXN0ZW50IHJlc3BvbnNlcy5cbiAgICAgICAgICBpZiAoIXJlcy5yZXNwb25zZT8ubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJlc3BvbnNlXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXMucmVzcG9uc2VbMF07XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBhc3luYyBzaWduQW5kU2VuZFRyYW5zYWN0aW9ucyh7IHRyYW5zYWN0aW9ucyB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwic2lnbkFuZFNlbmRUcmFuc2FjdGlvbnNcIiwgeyB0cmFuc2FjdGlvbnMgfSk7XG5cbiAgICAgIGlmICghX3N0YXRlLndhbGxldC5pc1NpZ25lZEluKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfc3RhdGUud2FsbGV0XG4gICAgICAgIC5yZXF1ZXN0U2lnblRyYW5zYWN0aW9ucyh7XG4gICAgICAgICAgdHJhbnNhY3Rpb25zOiB0cmFuc2Zvcm1UcmFuc2FjdGlvbnModHJhbnNhY3Rpb25zKSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGlmIChyZXMuZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuZXJyb3IpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNob3VsZG4ndCBoYXBwZW4gYnV0IGF2b2lkcyBpbmNvbnNpc3RlbnQgcmVzcG9uc2VzLlxuICAgICAgICAgIGlmICghcmVzLnJlc3BvbnNlPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcmVzcG9uc2VcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHJlcy5yZXNwb25zZTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgfTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cE5lYXJGaSh7XG4gIGljb25VcmwgPSBcIi4vYXNzZXRzL25lYXJmaS1pY29uLnBuZ1wiLFxufTogTmVhckZpUGFyYW1zID0ge30pOiBXYWxsZXRNb2R1bGVGYWN0b3J5PEluamVjdGVkV2FsbGV0PiB7XG4gIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9iaWxlID0gaXNNb2JpbGUoKTtcbiAgICBjb25zdCBpbnN0YWxsZWQgPSBhd2FpdCBpc0luc3RhbGxlZCgpO1xuXG4gICAgaWYgKCFtb2JpbGUgfHwgIWluc3RhbGxlZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gQWRkIGV4dHJhIHdhaXQgdG8gZW5zdXJlIE5lYXJGaSdzIHNpZ24gaW4gc3RhdHVzIGlzIHJlYWQgZnJvbSB0aGVcbiAgICAvLyBicm93c2VyIGV4dGVuc2lvbiBiYWNrZ3JvdW5kIGVudi5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+ICEhd2luZG93Lm5lYXJGaVdhbGxldD8uaXNTaWduZWRJbigpLCB7XG4gICAgICB0aW1lb3V0OiAzMDAsXG4gICAgfSkuY2F0Y2goKCkgPT4gZmFsc2UpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcIm5lYXJmaVwiLFxuICAgICAgdHlwZTogXCJpbmplY3RlZFwiLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgbmFtZTogXCJOZWFyRmlcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBORUFSIERlRmkgZXhwZXJpZW5jZSBPbiBUaGUgR29cIixcbiAgICAgICAgaWNvblVybCxcbiAgICAgICAgZG93bmxvYWRVcmw6IFwiaHR0cHM6Ly9uZWFyZmkuZmluYW5jZVwiLFxuICAgICAgICBkZXByZWNhdGVkOiBmYWxzZSxcbiAgICAgICAgYXZhaWxhYmxlOiBpbnN0YWxsZWQsXG4gICAgICB9LFxuICAgICAgaW5pdDogTmVhckZpLFxuICAgIH07XG4gIH07XG59XG4iXSwibmFtZXMiOlsiaXNNb2JpbGUiLCJ3YWl0Rm9yIiwiaXNJbnN0YWxsZWQiLCJ3aW5kb3ciLCJuZWFyRmlXYWxsZXQiLCJpc05lYXJGaSIsImNhdGNoIiwic2V0dXBOZWFyRmlTdGF0ZSIsIndhbGxldCIsIk5lYXJGaSIsIm9wdGlvbnMiLCJtZXRhZGF0YSIsInN0b3JlIiwiZW1pdHRlciIsImxvZ2dlciIsIl9zdGF0ZSIsInNpZ25PdXQiLCJpc1NpZ25lZEluIiwicmVzIiwiZXJyb3IiLCJFcnJvciIsInR5cGUiLCJtZXNzYWdlIiwibG9nIiwic2V0dXBFdmVudHMiLCJvbiIsIm5ld0FjY291bnRJZCIsImVtaXQiLCJycGMiLCJuZXR3b3JrIiwibmV0d29ya0lkIiwiZ2V0QWNjb3VudHMiLCJhY2NvdW50SWQiLCJnZXRBY2NvdW50SWQiLCJyZXNvbHZlU2lnbkluU3RhdGUiLCJpc1ZhbGlkQWN0aW9ucyIsImFjdGlvbnMiLCJldmVyeSIsIngiLCJ0cmFuc2Zvcm1BY3Rpb25zIiwidmFsaWRBY3Rpb25zIiwibmFtZSIsIm1hcCIsInBhcmFtcyIsInRyYW5zZm9ybVRyYW5zYWN0aW9ucyIsInRyYW5zYWN0aW9ucyIsInRyYW5zYWN0aW9uIiwicmVjZWl2ZXJJZCIsInNpZ25JbiIsImNvbnRyYWN0SWQiLCJtZXRob2ROYW1lcyIsImV4aXN0aW5nQWNjb3VudHMiLCJsZW5ndGgiLCJhY2Nlc3NLZXkiLCJyZXF1ZXN0U2lnbkluIiwidmVyaWZ5T3duZXIiLCJzaWduQW5kU2VuZFRyYW5zYWN0aW9uIiwic2lnbmVySWQiLCJjb250cmFjdCIsImdldFN0YXRlIiwidGhlbiIsInJlc3BvbnNlIiwic2lnbkFuZFNlbmRUcmFuc2FjdGlvbnMiLCJyZXF1ZXN0U2lnblRyYW5zYWN0aW9ucyIsInNldHVwTmVhckZpIiwiaWNvblVybCIsIm1vYmlsZSIsImluc3RhbGxlZCIsInRpbWVvdXQiLCJpZCIsImRlc2NyaXB0aW9uIiwiZG93bmxvYWRVcmwiLCJkZXByZWNhdGVkIiwiYXZhaWxhYmxlIiwiaW5pdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/nearfi/src/lib/nearfi.ts\n");

/***/ }),

/***/ "../../packages/nightly-connect/src/index.ts":
/*!***************************************************!*\
  !*** ../../packages/nightly-connect/src/index.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupNightlyConnect": () => (/* reexport safe */ _lib_nightly_connect__WEBPACK_IMPORTED_MODULE_0__.setupNightlyConnect)
/* harmony export */ });
/* harmony import */ var _lib_nightly_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/nightly-connect */ "../../packages/nightly-connect/src/lib/nightly-connect.ts");


/***/ }),

/***/ "../../packages/nightly-connect/src/lib/nightly-connect.ts":
/*!*****************************************************************!*\
  !*** ../../packages/nightly-connect/src/lib/nightly-connect.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupNightlyConnect\": () => (/* binding */ setupNightlyConnect)\n/* harmony export */ });\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! near-api-js */ \"near-api-js\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(near_api_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nightlylabs_connect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nightlylabs/connect */ \"@nightlylabs/connect\");\n/* harmony import */ var _nightlylabs_connect__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nightlylabs_connect__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @near-wallet-selector/core */ \"../../packages/core/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @near-wallet-selector/wallet-utils */ \"../../packages/wallet-utils/src/index.ts\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\nconst setupNightlyConnectState = () => {\n  return {\n    client: null,\n    modal: new _nightlylabs_connect__WEBPACK_IMPORTED_MODULE_1__.NightlyConnectModal(),\n    accounts: []\n  };\n};\n\nconst NightlyConnect = async ({\n  metadata,\n  store,\n  params,\n  logger,\n  options,\n  provider,\n  emitter\n}) => {\n  const _state = setupNightlyConnectState();\n\n  const getAccounts = () => {\n    return _state.accounts;\n  };\n\n  const signer = {\n    createKey: () => {\n      throw new Error(\"Not implemented\");\n    },\n    getPublicKey: async accountId => {\n      const accounts = getAccounts();\n      const account = accounts.find(a => a.accountId === accountId);\n\n      if (!account) {\n        throw new Error(\"Failed to find public key for account\");\n      }\n\n      return near_api_js__WEBPACK_IMPORTED_MODULE_0__.utils.PublicKey.from(account.publicKey);\n    },\n    signMessage: async (message, accountId) => {\n      const accounts = getAccounts();\n      const account = accounts.find(a => a.accountId === accountId);\n\n      if (!account) {\n        throw new Error(\"Failed to find account for signing\");\n      }\n\n      try {\n        const tx = near_api_js__WEBPACK_IMPORTED_MODULE_0__.transactions.Transaction.decode(Buffer.from(message));\n        const signedTx = await _state.client.signTransaction(tx);\n        return {\n          signature: signedTx.signature.data,\n          publicKey: tx.publicKey\n        };\n      } catch (err) {\n        logger.log(\"Failed to sign message\");\n        logger.error(err);\n        throw Error(\"Invalid message. Only transactions can be signed\");\n      }\n    }\n  };\n\n  const signOut = async () => {\n    _state.client?.ws.close();\n  };\n\n  const transformTransactions = transactions => {\n    const account = (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_2__.getActiveAccount)(store.getState());\n    const {\n      contract\n    } = store.getState();\n\n    if (!account || !contract) {\n      throw new Error(\"Wallet not signed in\");\n    }\n\n    return transactions.map(transaction => {\n      return {\n        signerId: transaction.signerId || account.accountId,\n        receiverId: transaction.receiverId || contract.contractId,\n        actions: transaction.actions\n      };\n    });\n  };\n\n  return {\n    async signIn() {\n      return new Promise((resolve, reject) => {\n        const existingAccounts = getAccounts();\n\n        if (existingAccounts.length) {\n          return resolve(existingAccounts);\n        }\n\n        try {\n          _nightlylabs_connect__WEBPACK_IMPORTED_MODULE_1__.AppNear.build(_objectSpread(_objectSpread({}, params), {}, {\n            onUserConnect: account => {\n              _state.accounts.push(account);\n\n              _state.modal.onClose = undefined;\n\n              _state.modal.closeModal();\n\n              resolve(getAccounts());\n            }\n          })).then(client => {\n            client.ws.onclose = () => {\n              _state.client = null;\n              _state.accounts = [];\n              emitter.emit(\"signedOut\", null);\n            };\n\n            _state.client = client;\n\n            _state.modal.openModal(client.sessionId, _nightlylabs_connect__WEBPACK_IMPORTED_MODULE_1__.NETWORK.NEAR);\n\n            _state.modal.onClose = () => {\n              reject(new Error(\"User cancelled pairing\"));\n            };\n          });\n        } catch (err) {\n          signOut();\n          reject(err);\n        }\n      });\n    },\n\n    signOut,\n\n    async getAccounts() {\n      return getAccounts().map(({\n        accountId\n      }) => ({\n        accountId\n      }));\n    },\n\n    async verifyOwner({\n      message\n    }) {\n      logger.log(\"NightlyConnect:verifyOwner\", {\n        message\n      });\n      throw new Error(`Method not supported by ${metadata.name}`);\n    },\n\n    async signAndSendTransaction({\n      signerId,\n      receiverId,\n      actions\n    }) {\n      logger.log(\"signAndSendTransaction\", {\n        signerId,\n        receiverId,\n        actions\n      });\n      const accounts = getAccounts();\n\n      if (!_state.client?.sessionId || !accounts.length) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      const [signedTx] = await (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_3__.signTransactions)(transformTransactions([{\n        signerId,\n        receiverId,\n        actions\n      }]), signer, options.network);\n      return provider.sendTransaction(signedTx);\n    },\n\n    async signAndSendTransactions({\n      transactions\n    }) {\n      logger.log(\"signAndSendTransactions\", {\n        transactions\n      });\n      const accounts = getAccounts();\n\n      if (!_state.client?.sessionId || !accounts.length) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      const signedTxs = await (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_3__.signTransactions)(transformTransactions(transactions), signer, options.network);\n      const results = [];\n\n      for (let i = 0; i < signedTxs.length; i++) {\n        results.push(await provider.sendTransaction(signedTxs[i]));\n      }\n\n      return results;\n    }\n\n  };\n};\n\nfunction setupNightlyConnect({\n  appMetadata,\n  timeout,\n  url,\n  iconUrl = \"./assets/nightly-connect.png\",\n  deprecated = false\n}) {\n  return async () => {\n    return {\n      id: \"nightly-connect\",\n      type: \"bridge\",\n      metadata: {\n        name: \"Nightly Connect\",\n        description: null,\n        iconUrl: iconUrl,\n        deprecated,\n        available: true\n      },\n      init: options => {\n        return NightlyConnect(_objectSpread(_objectSpread({}, options), {}, {\n          params: {\n            appMetadata,\n            timeout,\n            url\n          }\n        }));\n      }\n    };\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvbmlnaHRseS1jb25uZWN0L3NyYy9saWIvbmlnaHRseS1jb25uZWN0LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBTUE7QUFRQTs7QUFvQkEsTUFBTVEsd0JBQXdCLEdBQUcsTUFBMkI7RUFDMUQsT0FBTztJQUNMQyxNQUFNLEVBQUUsSUFESDtJQUVMQyxLQUFLLEVBQUUsSUFBSUwscUVBQUosRUFGRjtJQUdMTSxRQUFRLEVBQUU7RUFITCxDQUFQO0FBS0QsQ0FORDs7QUFRQSxNQUFNQyxjQUdMLEdBQUcsT0FBTztFQUFFQyxRQUFGO0VBQVlDLEtBQVo7RUFBbUJDLE1BQW5CO0VBQTJCQyxNQUEzQjtFQUFtQ0MsT0FBbkM7RUFBNENDLFFBQTVDO0VBQXNEQztBQUF0RCxDQUFQLEtBQTJFO0VBQzdFLE1BQU1DLE1BQU0sR0FBR1osd0JBQXdCLEVBQXZDOztFQUVBLE1BQU1hLFdBQVcsR0FBRyxNQUFNO0lBQ3hCLE9BQU9ELE1BQU0sQ0FBQ1QsUUFBZDtFQUNELENBRkQ7O0VBSUEsTUFBTVcsTUFBYyxHQUFHO0lBQ3JCQyxTQUFTLEVBQUUsTUFBTTtNQUNmLE1BQU0sSUFBSUMsS0FBSixDQUFVLGlCQUFWLENBQU47SUFDRCxDQUhvQjtJQUlyQkMsWUFBWSxFQUFFLE1BQU9DLFNBQVAsSUFBcUI7TUFDakMsTUFBTWYsUUFBUSxHQUFHVSxXQUFXLEVBQTVCO01BQ0EsTUFBTU0sT0FBTyxHQUFHaEIsUUFBUSxDQUFDaUIsSUFBVCxDQUFlQyxDQUFELElBQU9BLENBQUMsQ0FBQ0gsU0FBRixLQUFnQkEsU0FBckMsQ0FBaEI7O01BRUEsSUFBSSxDQUFDQyxPQUFMLEVBQWM7UUFDWixNQUFNLElBQUlILEtBQUosQ0FBVSx1Q0FBVixDQUFOO01BQ0Q7O01BRUQsT0FBT3RCLDZEQUFBLENBQXFCeUIsT0FBTyxDQUFDSyxTQUE3QixDQUFQO0lBQ0QsQ0Fib0I7SUFjckJDLFdBQVcsRUFBRSxPQUFPQyxPQUFQLEVB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LENBQXlCRSxTQUFTLENBQUNFLENBQUQsQ0FBbEMsQ0FBbkI7TUFDRDs7TUFFRCxPQUFPRCxPQUFQO0lBQ0Q7O0VBekZJLENBQVA7QUEyRkQsQ0FuS0Q7O0FBMEtPLFNBQVNFLG1CQUFULENBQTZCO0VBQ2xDQyxXQURrQztFQUVsQ0MsT0FGa0M7RUFHbENDLEdBSGtDO0VBSWxDQyxPQUFPLEdBQUcsOEJBSndCO0VBS2xDQyxVQUFVLEdBQUc7QUFMcUIsQ0FBN0IsRUFNMEQ7RUFDL0QsT0FBTyxZQUFZO0lBQ2pCLE9BQU87TUFDTEMsRUFBRSxFQUFFLGlCQURDO01BRUxDLElBQUksRUFBRSxRQUZEO01BR0wvRSxRQUFRLEVBQUU7UUFDUmdFLElBQUksRUFBRSxpQkFERTtRQUVSZ0IsV0FBVyxFQUFFLElBRkw7UUFHUkosT0FBTyxFQUFFQSxPQUhEO1FBSVJDLFVBSlE7UUFLUkksU0FBUyxFQUFFO01BTEgsQ0FITDtNQVVMQyxJQUFJLEVBQUc5RSxPQUFELElBQWE7UUFDakIsT0FBT0wsY0FBYyxpQ0FDaEJLLE9BRGdCO1VBRW5CRixNQUFNLEVBQUU7WUFDTnVFLFdBRE07WUFFTkMsT0FGTTtZQUdOQztVQUhNO1FBRlcsR0FBckI7TUFRRDtJQW5CSSxDQUFQO0VBcUJELENBdEJEO0FBdUJEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL3BhY2thZ2VzL25pZ2h0bHktY29ubmVjdC9zcmMvbGliL25pZ2h0bHktY29ubmVjdC50cz85MzBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNpZ25lciwgdHJhbnNhY3Rpb25zIGFzIG5lYXJUcmFuc2FjdGlvbnMsIHV0aWxzIH0gZnJvbSBcIm5lYXItYXBpLWpzXCI7XG5pbXBvcnQge1xuICBBcHBNZXRhZGF0YSxcbiAgQXBwTmVhcixcbiAgTkVUV09SSyxcbiAgTmlnaHRseUNvbm5lY3RNb2RhbCxcbn0gZnJvbSBcIkBuaWdodGx5bGFicy9jb25uZWN0XCI7XG5pbXBvcnQge1xuICBCcmlkZ2VXYWxsZXQsXG4gIGdldEFjdGl2ZUFjY291bnQsXG4gIE9wdGlvbmFsLFxuICBUcmFuc2FjdGlvbixcbiAgV2FsbGV0QmVoYXZpb3VyRmFjdG9yeSxcbiAgV2FsbGV0TW9kdWxlRmFjdG9yeSxcbn0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9jb3JlXCI7XG5pbXBvcnQgeyBzaWduVHJhbnNhY3Rpb25zIH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci93YWxsZXQtdXRpbHNcIjtcbmltcG9ydCB0eXBlIHsgRmluYWxFeGVjdXRpb25PdXRjb21lIH0gZnJvbSBcIm5lYXItYXBpLWpzL2xpYi9wcm92aWRlcnNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBOaWdodGx5Q29ubmVjdFBhcmFtcyB7XG4gIGFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YTtcbiAgdXJsPzogc3RyaW5nO1xuICB0aW1lb3V0PzogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgTmlnaHRseUNvbm5lY3RBY2NvdW50IHtcbiAgYWNjb3VudElkOiBzdHJpbmc7XG4gIHB1YmxpY0tleTogdXRpbHMuUHVibGljS2V5O1xufVxuXG5pbnRlcmZhY2UgTmlnaHRseUNvbm5lY3RTdGF0ZSB7XG4gIGNsaWVudDogQXBwTmVhciB8IG51bGw7XG4gIG1vZGFsOiBOaWdodGx5Q29ubmVjdE1vZGFsO1xuICBhY2NvdW50czogQXJyYXk8TmlnaHRseUNvbm5lY3RBY2NvdW50Pjtcbn1cblxuY29uc3Qgc2V0dXBOaWdodGx5Q29ubmVjdFN0YXRlID0gKCk6IE5pZ2h0bHlDb25uZWN0U3RhdGUgPT4ge1xuICByZXR1cm4ge1xuICAgIGNsaWVudDogbnVsbCxcbiAgICBtb2RhbDogbmV3IE5pZ2h0bHlDb25uZWN0TW9kYWwoKSxcbiAgICBhY2NvdW50czogW10sXG4gIH07XG59O1xuXG5jb25zdCBOaWdodGx5Q29ubmVjdDogV2FsbGV0QmVoYXZpb3VyRmFjdG9yeTxcbiAgQnJpZGdlV2FsbGV0LFxuICB7IHBhcmFtczogTmlnaHRseUNvbm5lY3RQYXJhbXMgfVxuPiA9IGFzeW5jICh7IG1ldGFkYXRhLCBzdG9yZSwgcGFyYW1zLCBsb2dnZXIsIG9wdGlvbnMsIHByb3ZpZGVyLCBlbWl0dGVyIH0pID0+IHtcbiAgY29uc3QgX3N0YXRlID0gc2V0dXBOaWdodGx5Q29ubmVjdFN0YXRlKCk7XG5cbiAgY29uc3QgZ2V0QWNjb3VudHMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIF9zdGF0ZS5hY2NvdW50cztcbiAgfTtcblxuICBjb25zdCBzaWduZXI6IFNpZ25lciA9IHtcbiAgICBjcmVhdGVLZXk6ICgpID0+IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9LFxuICAgIGdldFB1YmxpY0tleTogYXN5bmMgKGFjY291bnRJZCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudHMgPSBnZXRBY2NvdW50cygpO1xuICAgICAgY29uc3QgYWNjb3VudCA9IGFjY291bnRzLmZpbmQoKGEpID0+IGEuYWNjb3VudElkID09PSBhY2NvdW50SWQpO1xuXG4gICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZpbmQgcHVibGljIGtleSBmb3IgYWNjb3VudFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHV0aWxzLlB1YmxpY0tleS5mcm9tKGFjY291bnQucHVibGljS2V5KTtcbiAgICB9LFxuICAgIHNpZ25NZXNzYWdlOiBhc3luYyAobWVzc2FnZSwgYWNjb3VudElkKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50cyA9IGdldEFjY291bnRzKCk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYWNjb3VudHMuZmluZCgoYSkgPT4gYS5hY2NvdW50SWQgPT09IGFjY291bnRJZCk7XG5cbiAgICAgIGlmICghYWNjb3VudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBhY2NvdW50IGZvciBzaWduaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB0eCA9IG5lYXJUcmFuc2FjdGlvbnMuVHJhbnNhY3Rpb24uZGVjb2RlKEJ1ZmZlci5mcm9tKG1lc3NhZ2UpKTtcbiAgICAgICAgY29uc3Qgc2lnbmVkVHggPSBhd2FpdCBfc3RhdGUuY2xpZW50IS5zaWduVHJhbnNhY3Rpb24odHgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2lnbmF0dXJlOiBzaWduZWRUeC5zaWduYXR1cmUuZGF0YSxcbiAgICAgICAgICBwdWJsaWNLZXk6IHR4LnB1YmxpY0tleSxcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBsb2dnZXIubG9nKFwiRmFpbGVkIHRvIHNpZ24gbWVzc2FnZVwiKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycik7XG5cbiAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIG1lc3NhZ2UuIE9ubHkgdHJhbnNhY3Rpb25zIGNhbiBiZSBzaWduZWRcIik7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcblxuICBjb25zdCBzaWduT3V0ID0gYXN5bmMgKCkgPT4ge1xuICAgIF9zdGF0ZS5jbGllbnQ/LndzLmNsb3NlKCk7XG4gIH07XG5cbiAgY29uc3QgdHJhbnNmb3JtVHJhbnNhY3Rpb25zID0gKFxuICAgIHRyYW5zYWN0aW9uczogQXJyYXk8T3B0aW9uYWw8VHJhbnNhY3Rpb24sIFwic2lnbmVySWRcIiB8IFwicmVjZWl2ZXJJZFwiPj5cbiAgKTogQXJyYXk8VHJhbnNhY3Rpb24+ID0+IHtcbiAgICBjb25zdCBhY2NvdW50ID0gZ2V0QWN0aXZlQWNjb3VudChzdG9yZS5nZXRTdGF0ZSgpKTtcbiAgICBjb25zdCB7IGNvbnRyYWN0IH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xuXG4gICAgaWYgKCFhY2NvdW50IHx8ICFjb250cmFjdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyYW5zYWN0aW9ucy5tYXAoKHRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzaWduZXJJZDogdHJhbnNhY3Rpb24uc2lnbmVySWQgfHwgYWNjb3VudC5hY2NvdW50SWQsXG4gICAgICAgIHJlY2VpdmVySWQ6IHRyYW5zYWN0aW9uLnJlY2VpdmVySWQgfHwgY29udHJhY3QuY29udHJhY3RJZCxcbiAgICAgICAgYWN0aW9uczogdHJhbnNhY3Rpb24uYWN0aW9ucyxcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBhc3luYyBzaWduSW4oKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBleGlzdGluZ0FjY291bnRzID0gZ2V0QWNjb3VudHMoKTtcblxuICAgICAgICBpZiAoZXhpc3RpbmdBY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShleGlzdGluZ0FjY291bnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgQXBwTmVhci5idWlsZCh7XG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICBvblVzZXJDb25uZWN0OiAoYWNjb3VudCkgPT4ge1xuICAgICAgICAgICAgICBfc3RhdGUuYWNjb3VudHMucHVzaChhY2NvdW50KTtcbiAgICAgICAgICAgICAgX3N0YXRlLm1vZGFsLm9uQ2xvc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgIF9zdGF0ZS5tb2RhbC5jbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICAgIHJlc29sdmUoZ2V0QWNjb3VudHMoKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLnRoZW4oKGNsaWVudCkgPT4ge1xuICAgICAgICAgICAgY2xpZW50LndzLm9uY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIF9zdGF0ZS5jbGllbnQgPSBudWxsO1xuICAgICAgICAgICAgICBfc3RhdGUuYWNjb3VudHMgPSBbXTtcbiAgICAgICAgICAgICAgZW1pdHRlci5lbWl0KFwic2lnbmVkT3V0XCIsIG51bGwpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF9zdGF0ZS5jbGllbnQgPSBjbGllbnQ7XG4gICAgICAgICAgICBfc3RhdGUubW9kYWwub3Blbk1vZGFsKGNsaWVudC5zZXNzaW9uSWQsIE5FVFdPUksuTkVBUik7XG4gICAgICAgICAgICBfc3RhdGUubW9kYWwub25DbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIlVzZXIgY2FuY2VsbGVkIHBhaXJpbmdcIikpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgc2lnbk91dCgpO1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgc2lnbk91dCxcblxuICAgIGFzeW5jIGdldEFjY291bnRzKCkge1xuICAgICAgcmV0dXJuIGdldEFjY291bnRzKCkubWFwKCh7IGFjY291bnRJZCB9KSA9PiAoeyBhY2NvdW50SWQgfSkpO1xuICAgIH0sXG5cbiAgICBhc3luYyB2ZXJpZnlPd25lcih7IG1lc3NhZ2UgfSkge1xuICAgICAgbG9nZ2VyLmxvZyhcIk5pZ2h0bHlDb25uZWN0OnZlcmlmeU93bmVyXCIsIHsgbWVzc2FnZSB9KTtcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNZXRob2Qgbm90IHN1cHBvcnRlZCBieSAke21ldGFkYXRhLm5hbWV9YCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb24oeyBzaWduZXJJZCwgcmVjZWl2ZXJJZCwgYWN0aW9ucyB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwic2lnbkFuZFNlbmRUcmFuc2FjdGlvblwiLCB7IHNpZ25lcklkLCByZWNlaXZlcklkLCBhY3Rpb25zIH0pO1xuXG4gICAgICBjb25zdCBhY2NvdW50cyA9IGdldEFjY291bnRzKCk7XG5cbiAgICAgIGlmICghX3N0YXRlLmNsaWVudD8uc2Vzc2lvbklkIHx8ICFhY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFtzaWduZWRUeF0gPSBhd2FpdCBzaWduVHJhbnNhY3Rpb25zKFxuICAgICAgICB0cmFuc2Zvcm1UcmFuc2FjdGlvbnMoW3sgc2lnbmVySWQsIHJlY2VpdmVySWQsIGFjdGlvbnMgfV0pLFxuICAgICAgICBzaWduZXIsXG4gICAgICAgIG9wdGlvbnMubmV0d29ya1xuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlbmRUcmFuc2FjdGlvbihzaWduZWRUeCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zKHsgdHJhbnNhY3Rpb25zIH0pIHtcbiAgICAgIGxvZ2dlci5sb2coXCJzaWduQW5kU2VuZFRyYW5zYWN0aW9uc1wiLCB7IHRyYW5zYWN0aW9ucyB9KTtcblxuICAgICAgY29uc3QgYWNjb3VudHMgPSBnZXRBY2NvdW50cygpO1xuXG4gICAgICBpZiAoIV9zdGF0ZS5jbGllbnQ/LnNlc3Npb25JZCB8fCAhYWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBub3Qgc2lnbmVkIGluXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzaWduZWRUeHMgPSBhd2FpdCBzaWduVHJhbnNhY3Rpb25zKFxuICAgICAgICB0cmFuc2Zvcm1UcmFuc2FjdGlvbnModHJhbnNhY3Rpb25zKSxcbiAgICAgICAgc2lnbmVyLFxuICAgICAgICBvcHRpb25zLm5ldHdvcmtcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHM6IEFycmF5PEZpbmFsRXhlY3V0aW9uT3V0Y29tZT4gPSBbXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWduZWRUeHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGF3YWl0IHByb3ZpZGVyLnNlbmRUcmFuc2FjdGlvbihzaWduZWRUeHNbaV0pKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSxcbiAgfTtcbn07XG5cbmV4cG9ydCB0eXBlIFNldHVwTmlnaHRseUNvbm5lY3RQYXJhbXMgPSBOaWdodGx5Q29ubmVjdFBhcmFtcyAmIHtcbiAgaWNvblVybD86IHN0cmluZztcbiAgZGVwcmVjYXRlZD86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBOaWdodGx5Q29ubmVjdCh7XG4gIGFwcE1ldGFkYXRhLFxuICB0aW1lb3V0LFxuICB1cmwsXG4gIGljb25VcmwgPSBcIi4vYXNzZXRzL25pZ2h0bHktY29ubmVjdC5wbmdcIixcbiAgZGVwcmVjYXRlZCA9IGZhbHNlLFxufTogU2V0dXBOaWdodGx5Q29ubmVjdFBhcmFtcyk6IFdhbGxldE1vZHVsZUZhY3Rvcnk8QnJpZGdlV2FsbGV0PiB7XG4gIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcIm5pZ2h0bHktY29ubmVjdFwiLFxuICAgICAgdHlwZTogXCJicmlkZ2VcIixcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIG5hbWU6IFwiTmlnaHRseSBDb25uZWN0XCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgICBpY29uVXJsOiBpY29uVXJsLFxuICAgICAgICBkZXByZWNhdGVkLFxuICAgICAgICBhdmFpbGFibGU6IHRydWUsXG4gICAgICB9LFxuICAgICAgaW5pdDogKG9wdGlvbnMpID0+IHtcbiAgICAgICAgcmV0dXJuIE5pZ2h0bHlDb25uZWN0KHtcbiAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgYXBwTWV0YWRhdGEsXG4gICAgICAgICAgICB0aW1lb3V0LFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9O1xuICB9O1xufVxuIl0sIm5hbWVzIjpbInRyYW5zYWN0aW9ucyIsIm5lYXJUcmFuc2FjdGlvbnMiLCJ1dGlscyIsIkFwcE5lYXIiLCJORVRXT1JLIiwiTmlnaHRseUNvbm5lY3RNb2RhbCIsImdldEFjdGl2ZUFjY291bnQiLCJzaWduVHJhbnNhY3Rpb25zIiwic2V0dXBOaWdodGx5Q29ubmVjdFN0YXRlIiwiY2xpZW50IiwibW9kYWwiLCJhY2NvdW50cyIsIk5pZ2h0bHlDb25uZWN0IiwibWV0YWRhdGEiLCJzdG9yZSIsInBhcmFtcyIsImxvZ2dlciIsIm9wdGlvbnMiLCJwcm92aWRlciIsImVtaXR0ZXIiLCJfc3RhdGUiLCJnZXRBY2NvdW50cyIsInNpZ25lciIsImNyZWF0ZUtleSIsIkVycm9yIiwiZ2V0UHVibGljS2V5IiwiYWNjb3VudElkIiwiYWNjb3VudCIsImZpbmQiLCJhIiwiUHVibGljS2V5IiwiZnJvbSIsInB1YmxpY0tleSIsInNpZ25NZXNzYWdlIiwibWVzc2FnZSIsInR4IiwiVHJhbnNhY3Rpb24iLCJkZWNvZGUiLCJCdWZmZXIiLCJzaWduZWRUeCIsInNpZ25UcmFuc2FjdGlvbiIsInNpZ25hdHVyZSIsImRhdGEiLCJlcnIiLCJsb2ciLCJlcnJvciIsInNpZ25PdXQiLCJ3cyIsImNsb3NlIiwidHJhbnNmb3JtVHJhbnNhY3Rpb25zIiwiZ2V0U3RhdGUiLCJjb250cmFjdCIsIm1hcCIsInRyYW5zYWN0aW9uIiwic2lnbmVySWQiLCJyZWNlaXZlcklkIiwiY29udHJhY3RJZCIsImFjdGlvbnMiLCJzaWduSW4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImV4aXN0aW5nQWNjb3VudHMiLCJsZW5ndGgiLCJidWlsZCIsIm9uVXNlckNvbm5lY3QiLCJwdXNoIiwib25DbG9zZSIsInVuZGVmaW5lZCIsImNsb3NlTW9kYWwiLCJ0aGVuIiwib25jbG9zZSIsImVtaXQiLCJvcGVuTW9kYWwiLCJzZXNzaW9uSWQiLCJORUFSIiwidmVyaWZ5T3duZXIiLCJuYW1lIiwic2lnbkFuZFNlbmRUcmFuc2FjdGlvbiIsIm5ldHdvcmsiLCJzZW5kVHJhbnNhY3Rpb24iLCJzaWduQW5kU2VuZFRyYW5zYWN0aW9ucyIsInNpZ25lZFR4cyIsInJlc3VsdHMiLCJpIiwic2V0dXBOaWdodGx5Q29ubmVjdCIsImFwcE1ldGFkYXRhIiwidGltZW91dCIsInVybCIsImljb25VcmwiLCJkZXByZWNhdGVkIiwiaWQiLCJ0eXBlIiwiZGVzY3JpcHRpb24iLCJhdmFpbGFibGUiLCJpbml0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/nightly-connect/src/lib/nightly-connect.ts\n");

/***/ }),

/***/ "../../packages/nightly/src/index.ts":
/*!*******************************************!*\
  !*** ../../packages/nightly/src/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupNightly": () => (/* reexport safe */ _lib_nightly__WEBPACK_IMPORTED_MODULE_0__.setupNightly)
/* harmony export */ });
/* harmony import */ var _lib_nightly__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/nightly */ "../../packages/nightly/src/lib/nightly.ts");


/***/ }),

/***/ "../../packages/nightly/src/lib/nightly.ts":
/*!*************************************************!*\
  !*** ../../packages/nightly/src/lib/nightly.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupNightly\": () => (/* binding */ setupNightly)\n/* harmony export */ });\n/* harmony import */ var _near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @near-wallet-selector/core */ \"../../packages/core/src/index.ts\");\n/* harmony import */ var _near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @near-wallet-selector/wallet-utils */ \"../../packages/wallet-utils/src/index.ts\");\n/* harmony import */ var is_mobile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! is-mobile */ \"is-mobile\");\n/* harmony import */ var is_mobile__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(is_mobile__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! near-api-js */ \"near-api-js\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(near_api_js__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\nconst setupNightlyState = async store => {\n  const {\n    selectedWalletId\n  } = store.getState();\n  const wallet = window.nightly.near; // Attempt to reconnect wallet if previously selected.\n\n  if (selectedWalletId === \"nightly\") {\n    await wallet.connect(undefined, true).catch(() => null);\n  }\n\n  return {\n    wallet\n  };\n};\n\nconst isInstalled = () => {\n  return (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_0__.waitFor)(() => !!window.nightly.near).catch(() => false);\n};\n\nconst Nightly = async ({\n  metadata,\n  options,\n  store,\n  logger,\n  provider\n}) => {\n  const _state = await setupNightlyState(store);\n\n  const getAccounts = () => {\n    const {\n      accountId,\n      publicKey\n    } = _state.wallet.account;\n\n    if (!accountId) {\n      return [];\n    }\n\n    return [{\n      accountId,\n      publicKey: publicKey.toString()\n    }];\n  };\n\n  const transformTransactions = transactions => {\n    const accounts = getAccounts();\n    const {\n      contract\n    } = store.getState();\n\n    if (!accounts.length || !contract) {\n      throw new Error(\"Wallet not signed in\");\n    }\n\n    return transactions.map(transaction => {\n      return {\n        signerId: transaction.signerId || accounts[0].accountId,\n        receiverId: transaction.receiverId || contract.contractId,\n        actions: transaction.actions\n      };\n    });\n  };\n\n  const signer = {\n    createKey: () => {\n      throw new Error(\"Not implemented\");\n    },\n    getPublicKey: async accountId => {\n      const accounts = getAccounts();\n      const account = accounts.find(a => a.accountId === accountId);\n\n      if (!account) {\n        throw new Error(\"Failed to find public key for account\");\n      }\n\n      return near_api_js__WEBPACK_IMPORTED_MODULE_3__.utils.PublicKey.from(account.publicKey);\n    },\n    signMessage: async (message, accountId) => {\n      const accounts = getAccounts();\n      const account = accounts.find(a => a.accountId === accountId);\n\n      if (!account) {\n        throw new Error(\"Failed to find account for signing\");\n      }\n\n      try {\n        const tx = near_api_js__WEBPACK_IMPORTED_MODULE_3__.transactions.Transaction.decode(Buffer.from(message));\n        const signedTx = await _state.wallet.signTransaction(tx);\n        return {\n          signature: signedTx.signature.data,\n          publicKey: tx.publicKey\n        };\n      } catch (err) {\n        logger.log(\"Failed to sign message\");\n        logger.error(err);\n        throw Error(\"Invalid message. Only transactions can be signed\");\n      }\n    }\n  };\n  return {\n    async signIn() {\n      const existingAccounts = getAccounts();\n\n      if (existingAccounts.length) {\n        return existingAccounts;\n      }\n\n      await _state.wallet.connect();\n      return getAccounts();\n    },\n\n    async signOut() {\n      await _state.wallet.disconnect();\n    },\n\n    async getAccounts() {\n      return getAccounts().map(({\n        accountId\n      }) => ({\n        accountId\n      }));\n    },\n\n    async verifyOwner({\n      message\n    }) {\n      logger.log(\"Nightly:verifyOwner\", {\n        message\n      });\n      throw new Error(`Method not supported by ${metadata.name}`);\n    },\n\n    async signAndSendTransaction({\n      signerId,\n      receiverId,\n      actions\n    }) {\n      logger.log(\"signAndSendTransaction\", {\n        signerId,\n        receiverId,\n        actions\n      });\n      const {\n        contract\n      } = store.getState();\n      const accounts = getAccounts();\n\n      if (!accounts.length || !contract) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      const [signedTx] = await (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_1__.signTransactions)(transformTransactions([{\n        signerId,\n        receiverId,\n        actions\n      }]), signer, options.network);\n      return provider.sendTransaction(signedTx);\n    },\n\n    async signAndSendTransactions({\n      transactions\n    }) {\n      logger.log(\"signAndSendTransactions\", {\n        transactions\n      });\n      const signedTxs = await (0,_near_wallet_selector_wallet_utils__WEBPACK_IMPORTED_MODULE_1__.signTransactions)(transformTransactions(transactions), signer, options.network);\n      const results = [];\n\n      for (let i = 0; i < signedTxs.length; i++) {\n        results.push(await provider.sendTransaction(signedTxs[i]));\n      }\n\n      return results;\n    }\n\n  };\n};\n\nfunction setupNightly({\n  iconUrl = \"./assets/nightly.png\",\n  deprecated = false\n} = {}) {\n  return async () => {\n    const mobile = (0,is_mobile__WEBPACK_IMPORTED_MODULE_2__.isMobile)();\n    const installed = await isInstalled();\n\n    if (mobile) {\n      return null;\n    }\n\n    await (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_0__.waitFor)(() => !!window.nightly?.near, {\n      timeout: 300\n    }).catch(() => false);\n    return {\n      id: \"nightly\",\n      type: \"injected\",\n      metadata: {\n        name: \"Nightly\",\n        description: null,\n        iconUrl,\n        // Will replace we open beta with stable version\n        downloadUrl: \"https://www.nightly.app\",\n        deprecated,\n        available: installed\n      },\n      init: Nightly\n    };\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvbmlnaHRseS9zcmMvbGliL25pZ2h0bHkudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBOztBQWNBLE1BQU1NLGlCQUFpQixHQUFHLE1BQ3hCQyxLQUR3QixJQUVFO0VBQzFCLE1BQU07SUFBRUM7RUFBRixJQUF1QkQsS0FBSyxDQUFDRSxRQUFOLEVBQTdCO0VBQ0EsTUFBTUMsTUFBTSxHQUFHQyxNQUFNLENBQUNDLE9BQVAsQ0FBZ0JDLElBQS9CLENBRjBCLENBSTFCOztFQUNBLElBQUlMLGdCQUFnQixLQUFLLFNBQXpCLEVBQW9DO0lBQ2xDLE1BQU1FLE1BQU0sQ0FBQ0ksT0FBUCxDQUFlQyxTQUFmLEVBQTBCLElBQTFCLEVBQWdDQyxLQUFoQyxDQUFzQyxNQUFNLElBQTVDLENBQU47RUFDRDs7RUFFRCxPQUFPO0lBQ0xOO0VBREssQ0FBUDtBQUdELENBZEQ7O0FBZUEsTUFBTU8sV0FBVyxHQUFHLE1BQU07RUFDeEIsT0FBT2pCLG1FQUFPLENBQUMsTUFBTSxDQUFDLENBQUNXLE1BQU0sQ0FBQ0MsT0FBUCxDQUFnQkMsSUFBekIsQ0FBUCxDQUF1Q0csS0FBdkMsQ0FBNkMsTUFBTSxLQUFuRCxDQUFQO0FBQ0QsQ0FGRDs7QUFHQSxNQUFNRSxPQUErQyxHQUFHLE9BQU87RUFDN0RDLFFBRDZEO0VBRTdEQyxPQUY2RDtFQUc3RGIsS0FINkQ7RUFJN0RjLE1BSjZEO0VBSzdEQztBQUw2RCxDQUFQLEtBTWxEO0VBQ0osTUFBTUMsTUFBTSxHQUFHLE1BQU1qQixpQkFBaUIsQ0FBQ0MsS0FBRCxDQUF0Qzs7RUFFQSxNQUFNaUIsV0FBVyxHQUFHLE1BQU07SUFDeEIsTUFBTTtNQUFFQyxTQUFGO01BQWFDO0lBQWIsSUFBMkJILE1BQU0sQ0FBQ2IsTUFBUCxDQUFjaUIsT0FBL0M7O0lBRUEsSUFBSSxDQUFDRixTQUFMLEVBQWdCO01BQ2QsT0FBTyxFQUFQO0lBQ0Q7O0lBRUQsT0FBTyxDQUNMO01BQ0VBLFNB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LEVBQUUsRUFBRSxTQURDO01BRUxDLElBQUksRUFBRSxVQUZEO01BR0w5RCxRQUFRLEVBQUU7UUFDUjhDLElBQUksRUFBRSxTQURFO1FBRVJpQixXQUFXLEVBQUUsSUFGTDtRQUdSUCxPQUhRO1FBSVI7UUFDQVEsV0FBVyxFQUFFLHlCQUxMO1FBTVJQLFVBTlE7UUFPUlEsU0FBUyxFQUFFTjtNQVBILENBSEw7TUFZTE8sSUFBSSxFQUFFbkU7SUFaRCxDQUFQO0VBY0QsQ0ExQkQ7QUEyQkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vcGFja2FnZXMvbmlnaHRseS9zcmMvbGliL25pZ2h0bHkudHM/YjE3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7XG4gIEluamVjdGVkV2FsbGV0LFxuICBXYWxsZXRCZWhhdmlvdXJGYWN0b3J5LFxuICBXYWxsZXRNb2R1bGVGYWN0b3J5LFxuICBXYWxsZXRTZWxlY3RvclN0b3JlLFxufSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcbmltcG9ydCB7IE9wdGlvbmFsLCBUcmFuc2FjdGlvbiwgd2FpdEZvciB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3IvY29yZVwiO1xuaW1wb3J0IHsgc2lnblRyYW5zYWN0aW9ucyB9IGZyb20gXCJAbmVhci13YWxsZXQtc2VsZWN0b3Ivd2FsbGV0LXV0aWxzXCI7XG5pbXBvcnQgeyBpc01vYmlsZSB9IGZyb20gXCJpcy1tb2JpbGVcIjtcbmltcG9ydCB7IFNpZ25lciwgdXRpbHMsIHRyYW5zYWN0aW9ucyBhcyBuZWFyVHJhbnNhY3Rpb25zIH0gZnJvbSBcIm5lYXItYXBpLWpzXCI7XG5pbXBvcnQgdHlwZSB7IE5lYXJOaWdodGx5LCBJbmplY3RlZE5pZ2h0bHkgfSBmcm9tIFwiLi9pbmplY3RlZC1uaWdodGx5XCI7XG5pbXBvcnQgdHlwZSB7IEZpbmFsRXhlY3V0aW9uT3V0Y29tZSB9IGZyb20gXCJuZWFyLWFwaS1qcy9saWIvcHJvdmlkZXJzXCI7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgbmlnaHRseTogSW5qZWN0ZWROaWdodGx5IHwgdW5kZWZpbmVkO1xuICB9XG59XG5cbmludGVyZmFjZSBOaWdodGx5U3RhdGUge1xuICB3YWxsZXQ6IE5lYXJOaWdodGx5O1xufVxuXG5jb25zdCBzZXR1cE5pZ2h0bHlTdGF0ZSA9IGFzeW5jIChcbiAgc3RvcmU6IFdhbGxldFNlbGVjdG9yU3RvcmVcbik6IFByb21pc2U8TmlnaHRseVN0YXRlPiA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0ZWRXYWxsZXRJZCB9ID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgY29uc3Qgd2FsbGV0ID0gd2luZG93Lm5pZ2h0bHkhLm5lYXIhO1xuXG4gIC8vIEF0dGVtcHQgdG8gcmVjb25uZWN0IHdhbGxldCBpZiBwcmV2aW91c2x5IHNlbGVjdGVkLlxuICBpZiAoc2VsZWN0ZWRXYWxsZXRJZCA9PT0gXCJuaWdodGx5XCIpIHtcbiAgICBhd2FpdCB3YWxsZXQuY29ubmVjdCh1bmRlZmluZWQsIHRydWUpLmNhdGNoKCgpID0+IG51bGwpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB3YWxsZXQsXG4gIH07XG59O1xuY29uc3QgaXNJbnN0YWxsZWQgPSAoKSA9PiB7XG4gIHJldHVybiB3YWl0Rm9yKCgpID0+ICEhd2luZG93Lm5pZ2h0bHkhLm5lYXIhKS5jYXRjaCgoKSA9PiBmYWxzZSk7XG59O1xuY29uc3QgTmlnaHRseTogV2FsbGV0QmVoYXZpb3VyRmFjdG9yeTxJbmplY3RlZFdhbGxldD4gPSBhc3luYyAoe1xuICBtZXRhZGF0YSxcbiAgb3B0aW9ucyxcbiAgc3RvcmUsXG4gIGxvZ2dlcixcbiAgcHJvdmlkZXIsXG59KSA9PiB7XG4gIGNvbnN0IF9zdGF0ZSA9IGF3YWl0IHNldHVwTmlnaHRseVN0YXRlKHN0b3JlKTtcblxuICBjb25zdCBnZXRBY2NvdW50cyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGFjY291bnRJZCwgcHVibGljS2V5IH0gPSBfc3RhdGUud2FsbGV0LmFjY291bnQ7XG5cbiAgICBpZiAoIWFjY291bnRJZCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGFjY291bnRJZCxcbiAgICAgICAgcHVibGljS2V5OiBwdWJsaWNLZXkudG9TdHJpbmcoKSxcbiAgICAgIH0sXG4gICAgXTtcbiAgfTtcblxuICBjb25zdCB0cmFuc2Zvcm1UcmFuc2FjdGlvbnMgPSAoXG4gICAgdHJhbnNhY3Rpb25zOiBBcnJheTxPcHRpb25hbDxUcmFuc2FjdGlvbiwgXCJzaWduZXJJZFwiIHwgXCJyZWNlaXZlcklkXCI+PlxuICApOiBBcnJheTxUcmFuc2FjdGlvbj4gPT4ge1xuICAgIGNvbnN0IGFjY291bnRzID0gZ2V0QWNjb3VudHMoKTtcbiAgICBjb25zdCB7IGNvbnRyYWN0IH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xuXG4gICAgaWYgKCFhY2NvdW50cy5sZW5ndGggfHwgIWNvbnRyYWN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXYWxsZXQgbm90IHNpZ25lZCBpblwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJhbnNhY3Rpb25zLm1hcCgodHJhbnNhY3Rpb24pID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNpZ25lcklkOiB0cmFuc2FjdGlvbi5zaWduZXJJZCB8fCBhY2NvdW50c1swXS5hY2NvdW50SWQsXG4gICAgICAgIHJlY2VpdmVySWQ6IHRyYW5zYWN0aW9uLnJlY2VpdmVySWQgfHwgY29udHJhY3QuY29udHJhY3RJZCxcbiAgICAgICAgYWN0aW9uczogdHJhbnNhY3Rpb24uYWN0aW9ucyxcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgc2lnbmVyOiBTaWduZXIgPSB7XG4gICAgY3JlYXRlS2V5OiAoKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfSxcbiAgICBnZXRQdWJsaWNLZXk6IGFzeW5jIChhY2NvdW50SWQpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnRzID0gZ2V0QWNjb3VudHMoKTtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhY2NvdW50cy5maW5kKChhKSA9PiBhLmFjY291bnRJZCA9PT0gYWNjb3VudElkKTtcblxuICAgICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmaW5kIHB1YmxpYyBrZXkgZm9yIGFjY291bnRcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1dGlscy5QdWJsaWNLZXkuZnJvbShhY2NvdW50LnB1YmxpY0tleSk7XG4gICAgfSxcbiAgICBzaWduTWVzc2FnZTogYXN5bmMgKG1lc3NhZ2UsIGFjY291bnRJZCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudHMgPSBnZXRBY2NvdW50cygpO1xuICAgICAgY29uc3QgYWNjb3VudCA9IGFjY291bnRzLmZpbmQoKGEpID0+IGEuYWNjb3VudElkID09PSBhY2NvdW50SWQpO1xuXG4gICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZpbmQgYWNjb3VudCBmb3Igc2lnbmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdHggPSBuZWFyVHJhbnNhY3Rpb25zLlRyYW5zYWN0aW9uLmRlY29kZShCdWZmZXIuZnJvbShtZXNzYWdlKSk7XG4gICAgICAgIGNvbnN0IHNpZ25lZFR4ID0gYXdhaXQgX3N0YXRlLndhbGxldC5zaWduVHJhbnNhY3Rpb24odHgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2lnbmF0dXJlOiBzaWduZWRUeC5zaWduYXR1cmUuZGF0YSxcbiAgICAgICAgICBwdWJsaWNLZXk6IHR4LnB1YmxpY0tleSxcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBsb2dnZXIubG9nKFwiRmFpbGVkIHRvIHNpZ24gbWVzc2FnZVwiKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycik7XG5cbiAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIG1lc3NhZ2UuIE9ubHkgdHJhbnNhY3Rpb25zIGNhbiBiZSBzaWduZWRcIik7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGFzeW5jIHNpZ25JbigpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nQWNjb3VudHMgPSBnZXRBY2NvdW50cygpO1xuXG4gICAgICBpZiAoZXhpc3RpbmdBY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nQWNjb3VudHM7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IF9zdGF0ZS53YWxsZXQuY29ubmVjdCgpO1xuXG4gICAgICByZXR1cm4gZ2V0QWNjb3VudHMoKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgc2lnbk91dCgpIHtcbiAgICAgIGF3YWl0IF9zdGF0ZS53YWxsZXQuZGlzY29ubmVjdCgpO1xuICAgIH0sXG5cbiAgICBhc3luYyBnZXRBY2NvdW50cygpIHtcbiAgICAgIHJldHVybiBnZXRBY2NvdW50cygpLm1hcCgoeyBhY2NvdW50SWQgfSkgPT4gKHsgYWNjb3VudElkIH0pKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgdmVyaWZ5T3duZXIoeyBtZXNzYWdlIH0pIHtcbiAgICAgIGxvZ2dlci5sb2coXCJOaWdodGx5OnZlcmlmeU93bmVyXCIsIHsgbWVzc2FnZSB9KTtcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNZXRob2Qgbm90IHN1cHBvcnRlZCBieSAke21ldGFkYXRhLm5hbWV9YCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb24oeyBzaWduZXJJZCwgcmVjZWl2ZXJJZCwgYWN0aW9ucyB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwic2lnbkFuZFNlbmRUcmFuc2FjdGlvblwiLCB7IHNpZ25lcklkLCByZWNlaXZlcklkLCBhY3Rpb25zIH0pO1xuXG4gICAgICBjb25zdCB7IGNvbnRyYWN0IH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgY29uc3QgYWNjb3VudHMgPSBnZXRBY2NvdW50cygpO1xuXG4gICAgICBpZiAoIWFjY291bnRzLmxlbmd0aCB8fCAhY29udHJhY3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFtzaWduZWRUeF0gPSBhd2FpdCBzaWduVHJhbnNhY3Rpb25zKFxuICAgICAgICB0cmFuc2Zvcm1UcmFuc2FjdGlvbnMoW3sgc2lnbmVySWQsIHJlY2VpdmVySWQsIGFjdGlvbnMgfV0pLFxuICAgICAgICBzaWduZXIsXG4gICAgICAgIG9wdGlvbnMubmV0d29ya1xuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlbmRUcmFuc2FjdGlvbihzaWduZWRUeCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zKHsgdHJhbnNhY3Rpb25zIH0pIHtcbiAgICAgIGxvZ2dlci5sb2coXCJzaWduQW5kU2VuZFRyYW5zYWN0aW9uc1wiLCB7IHRyYW5zYWN0aW9ucyB9KTtcblxuICAgICAgY29uc3Qgc2lnbmVkVHhzID0gYXdhaXQgc2lnblRyYW5zYWN0aW9ucyhcbiAgICAgICAgdHJhbnNmb3JtVHJhbnNhY3Rpb25zKHRyYW5zYWN0aW9ucyksXG4gICAgICAgIHNpZ25lcixcbiAgICAgICAgb3B0aW9ucy5uZXR3b3JrXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXN1bHRzOiBBcnJheTxGaW5hbEV4ZWN1dGlvbk91dGNvbWU+ID0gW107XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2lnbmVkVHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChhd2FpdCBwcm92aWRlci5zZW5kVHJhbnNhY3Rpb24oc2lnbmVkVHhzW2ldKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0sXG4gIH07XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIE5pZ2h0bHlXYWxsZXRQYXJhbXMge1xuICBpY29uVXJsPzogc3RyaW5nO1xuICBkZXByZWNhdGVkPzogYm9vbGVhbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cE5pZ2h0bHkoe1xuICBpY29uVXJsID0gXCIuL2Fzc2V0cy9uaWdodGx5LnBuZ1wiLFxuICBkZXByZWNhdGVkID0gZmFsc2UsXG59OiBOaWdodGx5V2FsbGV0UGFyYW1zID0ge30pOiBXYWxsZXRNb2R1bGVGYWN0b3J5PEluamVjdGVkV2FsbGV0PiB7XG4gIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9iaWxlID0gaXNNb2JpbGUoKTtcbiAgICBjb25zdCBpbnN0YWxsZWQgPSBhd2FpdCBpc0luc3RhbGxlZCgpO1xuXG4gICAgaWYgKG1vYmlsZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiAhIXdpbmRvdy5uaWdodGx5Py5uZWFyLCB7XG4gICAgICB0aW1lb3V0OiAzMDAsXG4gICAgfSkuY2F0Y2goKCkgPT4gZmFsc2UpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcIm5pZ2h0bHlcIixcbiAgICAgIHR5cGU6IFwiaW5qZWN0ZWRcIixcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIG5hbWU6IFwiTmlnaHRseVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgaWNvblVybCxcbiAgICAgICAgLy8gV2lsbCByZXBsYWNlIHdlIG9wZW4gYmV0YSB3aXRoIHN0YWJsZSB2ZXJzaW9uXG4gICAgICAgIGRvd25sb2FkVXJsOiBcImh0dHBzOi8vd3d3Lm5pZ2h0bHkuYXBwXCIsXG4gICAgICAgIGRlcHJlY2F0ZWQsXG4gICAgICAgIGF2YWlsYWJsZTogaW5zdGFsbGVkLFxuICAgICAgfSxcbiAgICAgIGluaXQ6IE5pZ2h0bHksXG4gICAgfTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJ3YWl0Rm9yIiwic2lnblRyYW5zYWN0aW9ucyIsImlzTW9iaWxlIiwidXRpbHMiLCJ0cmFuc2FjdGlvbnMiLCJuZWFyVHJhbnNhY3Rpb25zIiwic2V0dXBOaWdodGx5U3RhdGUiLCJzdG9yZSIsInNlbGVjdGVkV2FsbGV0SWQiLCJnZXRTdGF0ZSIsIndhbGxldCIsIndpbmRvdyIsIm5pZ2h0bHkiLCJuZWFyIiwiY29ubmVjdCIsInVuZGVmaW5lZCIsImNhdGNoIiwiaXNJbnN0YWxsZWQiLCJOaWdodGx5IiwibWV0YWRhdGEiLCJvcHRpb25zIiwibG9nZ2VyIiwicHJvdmlkZXIiLCJfc3RhdGUiLCJnZXRBY2NvdW50cyIsImFjY291bnRJZCIsInB1YmxpY0tleSIsImFjY291bnQiLCJ0b1N0cmluZyIsInRyYW5zZm9ybVRyYW5zYWN0aW9ucyIsImFjY291bnRzIiwiY29udHJhY3QiLCJsZW5ndGgiLCJFcnJvciIsIm1hcCIsInRyYW5zYWN0aW9uIiwic2lnbmVySWQiLCJyZWNlaXZlcklkIiwiY29udHJhY3RJZCIsImFjdGlvbnMiLCJzaWduZXIiLCJjcmVhdGVLZXkiLCJnZXRQdWJsaWNLZXkiLCJmaW5kIiwiYSIsIlB1YmxpY0tleSIsImZyb20iLCJzaWduTWVzc2FnZSIsIm1lc3NhZ2UiLCJ0eCIsIlRyYW5zYWN0aW9uIiwiZGVjb2RlIiwiQnVmZmVyIiwic2lnbmVkVHgiLCJzaWduVHJhbnNhY3Rpb24iLCJzaWduYXR1cmUiLCJkYXRhIiwiZXJyIiwibG9nIiwiZXJyb3IiLCJzaWduSW4iLCJleGlzdGluZ0FjY291bnRzIiwic2lnbk91dCIsImRpc2Nvbm5lY3QiLCJ2ZXJpZnlPd25lciIsIm5hbWUiLCJzaWduQW5kU2VuZFRyYW5zYWN0aW9uIiwibmV0d29yayIsInNlbmRUcmFuc2FjdGlvbiIsInNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zIiwic2lnbmVkVHhzIiwicmVzdWx0cyIsImkiLCJwdXNoIiwic2V0dXBOaWdodGx5IiwiaWNvblVybCIsImRlcHJlY2F0ZWQiLCJtb2JpbGUiLCJpbnN0YWxsZWQiLCJ0aW1lb3V0IiwiaWQiLCJ0eXBlIiwiZGVzY3JpcHRpb24iLCJkb3dubG9hZFVybCIsImF2YWlsYWJsZSIsImluaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/nightly/src/lib/nightly.ts\n");

/***/ }),

/***/ "../../packages/sender/src/index.ts":
/*!******************************************!*\
  !*** ../../packages/sender/src/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupSender": () => (/* reexport safe */ _lib_sender__WEBPACK_IMPORTED_MODULE_0__.setupSender)
/* harmony export */ });
/* harmony import */ var _lib_sender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/sender */ "../../packages/sender/src/lib/sender.ts");


/***/ }),

/***/ "../../packages/sender/src/lib/sender.ts":
/*!***********************************************!*\
  !*** ../../packages/sender/src/lib/sender.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupSender\": () => (/* binding */ setupSender)\n/* harmony export */ });\n/* harmony import */ var is_mobile__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! is-mobile */ \"is-mobile\");\n/* harmony import */ var is_mobile__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(is_mobile__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @near-wallet-selector/core */ \"../../packages/core/src/index.ts\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nconst isInstalled = () => {\n  return (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_1__.waitFor)(() => !!window.near?.isSender).catch(() => false);\n};\n\nconst setupSenderState = () => {\n  const wallet = window.near;\n  return {\n    wallet\n  };\n};\n\nconst Sender = async ({\n  options,\n  metadata,\n  store,\n  provider,\n  emitter,\n  logger\n}) => {\n  const _state = setupSenderState();\n\n  const cleanup = () => {\n    for (const key in _state.wallet.callbacks) {\n      _state.wallet.remove(key);\n    }\n  };\n\n  const signOut = async () => {\n    if (!_state.wallet.isSignedIn()) {\n      return;\n    }\n\n    cleanup();\n    const res = await _state.wallet.signOut();\n\n    if (res === true) {\n      return;\n    }\n\n    const error = new Error(typeof res.error === \"string\" ? res.error : res.error.type); // Prevent signing out by throwing.\n\n    if (error.message === \"User reject\") {\n      throw error;\n    } // Continue signing out but log the issue.\n\n\n    logger.log(\"Failed to sign out\");\n    logger.error(error);\n  };\n\n  const setupEvents = () => {\n    _state.wallet.on(\"accountChanged\", async newAccountId => {\n      logger.log(\"onAccountChange\", newAccountId);\n      emitter.emit(\"signedOut\", null);\n    });\n\n    _state.wallet.on(\"rpcChanged\", async rpc => {\n      logger.log(\"onNetworkChange\", rpc);\n\n      if (options.network.networkId !== rpc.networkId) {\n        await signOut();\n        emitter.emit(\"signedOut\", null);\n        emitter.emit(\"networkChanged\", {\n          networkId: rpc.networkId\n        });\n      }\n    });\n  };\n\n  const getAccounts = () => {\n    const accountId = _state.wallet.getAccountId();\n\n    if (!accountId) {\n      return [];\n    }\n\n    return [{\n      accountId\n    }];\n  };\n\n  const isValidActions = actions => {\n    return actions.every(x => x.type === \"FunctionCall\");\n  };\n\n  const transformActions = actions => {\n    const validActions = isValidActions(actions);\n\n    if (!validActions) {\n      throw new Error(`Only 'FunctionCall' actions types are supported by ${metadata.name}`);\n    }\n\n    return actions.map(x => x.params);\n  };\n\n  const transformTransactions = transactions => {\n    return transactions.map(transaction => {\n      return {\n        receiverId: transaction.receiverId,\n        actions: transformActions(transaction.actions)\n      };\n    });\n  };\n\n  if (_state.wallet && _state.wallet.isSignedIn()) {\n    setupEvents();\n  }\n\n  return {\n    async signIn({\n      contractId,\n      methodNames\n    }) {\n      const existingAccounts = getAccounts();\n\n      if (existingAccounts.length) {\n        return existingAccounts;\n      }\n\n      const {\n        accessKey,\n        error\n      } = await _state.wallet.requestSignIn({\n        contractId,\n        methodNames\n      });\n\n      if (!accessKey || error) {\n        await signOut();\n        throw new Error((typeof error === \"string\" ? error : error.type) || \"Failed to sign in\");\n      }\n\n      setupEvents();\n      return getAccounts();\n    },\n\n    signOut,\n\n    async getAccounts() {\n      return getAccounts();\n    },\n\n    async verifyOwner({\n      message\n    }) {\n      logger.log(\"Sender:verifyOwner\", {\n        message\n      });\n\n      const account = _state.wallet.account();\n\n      if (!account) {\n        throw new Error(\"Wallet not signed in\");\n      } // Note: When the wallet is locked, Sender returns an empty Signer interface.\n      // Even after unlocking the wallet, the user will need to refresh to gain\n      // access to these methods.\n\n\n      if (!account.connection.signer.signMessage) {\n        throw new Error(\"Wallet is locked\");\n      }\n\n      const networkId = options.network.networkId;\n      const accountId = account.accountId;\n      const pubKey = await account.connection.signer.getPublicKey(accountId, networkId);\n      const block = await provider.block({\n        finality: \"final\"\n      });\n      const data = {\n        accountId,\n        message,\n        blockId: block.header.hash,\n        publicKey: Buffer.from(pubKey.data).toString(\"base64\"),\n        keyType: pubKey.keyType\n      };\n      const encoded = JSON.stringify(data);\n      const signed = await account.connection.signer.signMessage(new Uint8Array(Buffer.from(encoded)), accountId, networkId);\n      return _objectSpread(_objectSpread({}, data), {}, {\n        signature: Buffer.from(signed.signature).toString(\"base64\"),\n        keyType: signed.publicKey.keyType\n      });\n    },\n\n    async signAndSendTransaction({\n      signerId,\n      receiverId,\n      actions\n    }) {\n      logger.log(\"signAndSendTransaction\", {\n        signerId,\n        receiverId,\n        actions\n      });\n      const {\n        contract\n      } = store.getState();\n\n      if (!_state.wallet.isSignedIn() || !contract) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      return _state.wallet.signAndSendTransaction({\n        receiverId: receiverId || contract.contractId,\n        actions: transformActions(actions)\n      }).then(res => {\n        if (res.error) {\n          throw new Error(res.error);\n        } else if (res.response && \"error\" in res.response) {\n          throw new Error(res.response.error.message);\n        } // Shouldn't happen but avoids inconsistent responses.\n\n\n        if (!res.response?.length) {\n          throw new Error(\"Invalid response\");\n        }\n\n        return res.response[0];\n      });\n    },\n\n    async signAndSendTransactions({\n      transactions\n    }) {\n      logger.log(\"signAndSendTransactions\", {\n        transactions\n      });\n\n      if (!_state.wallet.isSignedIn()) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      return _state.wallet.requestSignTransactions({\n        transactions: transformTransactions(transactions)\n      }).then(res => {\n        if (res.error) {\n          throw new Error(res.error);\n        } else if (res.response && \"error\" in res.response) {\n          throw new Error(res.response.error.message);\n        } // Shouldn't happen but avoids inconsistent responses.\n\n\n        if (!res.response?.length) {\n          throw new Error(\"Invalid response\");\n        }\n\n        return res.response;\n      });\n    }\n\n  };\n};\n\nfunction setupSender({\n  iconUrl = \"./assets/sender-icon.png\",\n  deprecated = false\n} = {}) {\n  return async () => {\n    const mobile = (0,is_mobile__WEBPACK_IMPORTED_MODULE_0__.isMobile)();\n    const installed = await isInstalled();\n\n    if (mobile) {\n      return null;\n    } // Add extra wait to ensure Sender's sign in status is read from the\n    // browser extension background env.\n\n\n    await (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_1__.waitFor)(() => !!window.near?.isSignedIn(), {\n      timeout: 300\n    }).catch(() => false);\n    return {\n      id: \"sender\",\n      type: \"injected\",\n      metadata: {\n        name: \"Sender\",\n        description: null,\n        iconUrl,\n        downloadUrl: \"https://chrome.google.com/webstore/detail/sender-wallet/epapihdplajcdnnkdeiahlgigofloibg\",\n        deprecated,\n        available: installed\n      },\n      init: Sender\n    };\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvc2VuZGVyL3NyYy9saWIvc2VuZGVyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQVVBOztBQWtCQSxNQUFNRSxXQUFXLEdBQUcsTUFBTTtFQUN4QixPQUFPRCxtRUFBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDRSxNQUFNLENBQUNDLElBQVAsRUFBYUMsUUFBdEIsQ0FBUCxDQUF1Q0MsS0FBdkMsQ0FBNkMsTUFBTSxLQUFuRCxDQUFQO0FBQ0QsQ0FGRDs7QUFJQSxNQUFNQyxnQkFBZ0IsR0FBRyxNQUFtQjtFQUMxQyxNQUFNQyxNQUFNLEdBQUdMLE1BQU0sQ0FBQ0MsSUFBdEI7RUFFQSxPQUFPO0lBQ0xJO0VBREssQ0FBUDtBQUdELENBTkQ7O0FBUUEsTUFBTUMsTUFBOEMsR0FBRyxPQUFPO0VBQzVEQyxPQUQ0RDtFQUU1REMsUUFGNEQ7RUFHNURDLEtBSDREO0VBSTVEQyxRQUo0RDtFQUs1REMsT0FMNEQ7RUFNNURDO0FBTjRELENBQVAsS0FPakQ7RUFDSixNQUFNQyxNQUFNLEdBQUdULGdCQUFnQixFQUEvQjs7RUFFQSxNQUFNVSxPQUFPLEdBQUcsTUFBTTtJQUNwQixLQUFLLE1BQU1DLEdBQVgsSUFBa0JGLE1BQU0sQ0FBQ1IsTUFBUCxDQUFjVyxTQUFoQyxFQUEyQztNQUN6Q0gsTUFBTSxDQUFDUixNQUFQLENBQWNZLE1BQWQsQ0FBcUJGLEdBQXJCO0lBQ0Q7RUFDRixDQUpEOztFQU1BLE1BQU1HLE9BQU8sR0FBRyxZQUFZO0lBQzFCLElBQUksQ0FBQ0wsTUFBTSxDQUFDUixNQUFQLENBQWNjLFVBQWQsRUFBTCxFQUFpQztNQUMvQjtJQUNEOztJQUVETCxPQUFPO0lBRVAsTUFBTU0sR0FBRyxHQUFHLE1BQU1QLE1BQU0sQ0FBQ1IsTUFBUCxDQUFjYSxPQUFkLEVBQWxCOztJQUVBLElBQUlFLEdBQUcsS0FBSyxJQUFaLEVBQWtCO01BQ2hCO0lBQ0Q7O0lBRUQsTUFBTUMsS0FBSyxHQUFHLElBQUlDLEtBQUosQ0FD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QVA7SUFDRCxDQU5nQixDQVFqQjtJQUNBOzs7SUFDQSxNQUFNN0YsbUVBQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQ0UsTUFBTSxDQUFDQyxJQUFQLEVBQWFrQixVQUFiLEVBQVQsRUFBb0M7TUFBRTBFLE9BQU8sRUFBRTtJQUFYLENBQXBDLENBQVAsQ0FBNkQxRixLQUE3RCxDQUNKLE1BQU0sS0FERixDQUFOO0lBSUEsT0FBTztNQUNMMkYsRUFBRSxFQUFFLFFBREM7TUFFTHZFLElBQUksRUFBRSxVQUZEO01BR0xmLFFBQVEsRUFBRTtRQUNSa0MsSUFBSSxFQUFFLFFBREU7UUFFUnFELFdBQVcsRUFBRSxJQUZMO1FBR1JOLE9BSFE7UUFJUk8sV0FBVyxFQUNULDBGQUxNO1FBTVJOLFVBTlE7UUFPUk8sU0FBUyxFQUFFTDtNQVBILENBSEw7TUFZTE0sSUFBSSxFQUFFNUY7SUFaRCxDQUFQO0VBY0QsQ0E1QkQ7QUE2QkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vcGFja2FnZXMvc2VuZGVyL3NyYy9saWIvc2VuZGVyLnRzPzA4MGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNNb2JpbGUgfSBmcm9tIFwiaXMtbW9iaWxlXCI7XG5pbXBvcnQge1xuICBXYWxsZXRNb2R1bGVGYWN0b3J5LFxuICBXYWxsZXRCZWhhdmlvdXJGYWN0b3J5LFxuICBJbmplY3RlZFdhbGxldCxcbiAgQWN0aW9uLFxuICBUcmFuc2FjdGlvbixcbiAgRnVuY3Rpb25DYWxsQWN0aW9uLFxuICBPcHRpb25hbCxcbn0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9jb3JlXCI7XG5pbXBvcnQgeyB3YWl0Rm9yIH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9jb3JlXCI7XG5pbXBvcnQgdHlwZSB7IEluamVjdGVkU2VuZGVyIH0gZnJvbSBcIi4vaW5qZWN0ZWQtc2VuZGVyXCI7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgbmVhcjogSW5qZWN0ZWRTZW5kZXIgfCB1bmRlZmluZWQ7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZW5kZXJQYXJhbXMge1xuICBpY29uVXJsPzogc3RyaW5nO1xuICBkZXByZWNhdGVkPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFNlbmRlclN0YXRlIHtcbiAgd2FsbGV0OiBJbmplY3RlZFNlbmRlcjtcbn1cblxuY29uc3QgaXNJbnN0YWxsZWQgPSAoKSA9PiB7XG4gIHJldHVybiB3YWl0Rm9yKCgpID0+ICEhd2luZG93Lm5lYXI/LmlzU2VuZGVyKS5jYXRjaCgoKSA9PiBmYWxzZSk7XG59O1xuXG5jb25zdCBzZXR1cFNlbmRlclN0YXRlID0gKCk6IFNlbmRlclN0YXRlID0+IHtcbiAgY29uc3Qgd2FsbGV0ID0gd2luZG93Lm5lYXIhO1xuXG4gIHJldHVybiB7XG4gICAgd2FsbGV0LFxuICB9O1xufTtcblxuY29uc3QgU2VuZGVyOiBXYWxsZXRCZWhhdmlvdXJGYWN0b3J5PEluamVjdGVkV2FsbGV0PiA9IGFzeW5jICh7XG4gIG9wdGlvbnMsXG4gIG1ldGFkYXRhLFxuICBzdG9yZSxcbiAgcHJvdmlkZXIsXG4gIGVtaXR0ZXIsXG4gIGxvZ2dlcixcbn0pID0+IHtcbiAgY29uc3QgX3N0YXRlID0gc2V0dXBTZW5kZXJTdGF0ZSgpO1xuXG4gIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gX3N0YXRlLndhbGxldC5jYWxsYmFja3MpIHtcbiAgICAgIF9zdGF0ZS53YWxsZXQucmVtb3ZlKGtleSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNpZ25PdXQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFfc3RhdGUud2FsbGV0LmlzU2lnbmVkSW4oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNsZWFudXAoKTtcblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IF9zdGF0ZS53YWxsZXQuc2lnbk91dCgpO1xuXG4gICAgaWYgKHJlcyA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgdHlwZW9mIHJlcy5lcnJvciA9PT0gXCJzdHJpbmdcIiA/IHJlcy5lcnJvciA6IHJlcy5lcnJvci50eXBlXG4gICAgKTtcblxuICAgIC8vIFByZXZlbnQgc2lnbmluZyBvdXQgYnkgdGhyb3dpbmcuXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09IFwiVXNlciByZWplY3RcIikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgLy8gQ29udGludWUgc2lnbmluZyBvdXQgYnV0IGxvZyB0aGUgaXNzdWUuXG4gICAgbG9nZ2VyLmxvZyhcIkZhaWxlZCB0byBzaWduIG91dFwiKTtcbiAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICB9O1xuXG4gIGNvbnN0IHNldHVwRXZlbnRzID0gKCkgPT4ge1xuICAgIF9zdGF0ZS53YWxsZXQub24oXCJhY2NvdW50Q2hhbmdlZFwiLCBhc3luYyAobmV3QWNjb3VudElkKSA9PiB7XG4gICAgICBsb2dnZXIubG9nKFwib25BY2NvdW50Q2hhbmdlXCIsIG5ld0FjY291bnRJZCk7XG4gICAgICBlbWl0dGVyLmVtaXQoXCJzaWduZWRPdXRcIiwgbnVsbCk7XG4gICAgfSk7XG5cbiAgICBfc3RhdGUud2FsbGV0Lm9uKFwicnBjQ2hhbmdlZFwiLCBhc3luYyAocnBjKSA9PiB7XG4gICAgICBsb2dnZXIubG9nKFwib25OZXR3b3JrQ2hhbmdlXCIsIHJwYyk7XG5cbiAgICAgIGlmIChvcHRpb25zLm5ldHdvcmsubmV0d29ya0lkICE9PSBycGMubmV0d29ya0lkKSB7XG4gICAgICAgIGF3YWl0IHNpZ25PdXQoKTtcblxuICAgICAgICBlbWl0dGVyLmVtaXQoXCJzaWduZWRPdXRcIiwgbnVsbCk7XG4gICAgICAgIGVtaXR0ZXIuZW1pdChcIm5ldHdvcmtDaGFuZ2VkXCIsIHsgbmV0d29ya0lkOiBycGMubmV0d29ya0lkIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGdldEFjY291bnRzID0gKCkgPT4ge1xuICAgIGNvbnN0IGFjY291bnRJZCA9IF9zdGF0ZS53YWxsZXQuZ2V0QWNjb3VudElkKCk7XG5cbiAgICBpZiAoIWFjY291bnRJZCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBbeyBhY2NvdW50SWQgfV07XG4gIH07XG5cbiAgY29uc3QgaXNWYWxpZEFjdGlvbnMgPSAoXG4gICAgYWN0aW9uczogQXJyYXk8QWN0aW9uPlxuICApOiBhY3Rpb25zIGlzIEFycmF5PEZ1bmN0aW9uQ2FsbEFjdGlvbj4gPT4ge1xuICAgIHJldHVybiBhY3Rpb25zLmV2ZXJ5KCh4KSA9PiB4LnR5cGUgPT09IFwiRnVuY3Rpb25DYWxsXCIpO1xuICB9O1xuXG4gIGNvbnN0IHRyYW5zZm9ybUFjdGlvbnMgPSAoYWN0aW9uczogQXJyYXk8QWN0aW9uPikgPT4ge1xuICAgIGNvbnN0IHZhbGlkQWN0aW9ucyA9IGlzVmFsaWRBY3Rpb25zKGFjdGlvbnMpO1xuXG4gICAgaWYgKCF2YWxpZEFjdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYE9ubHkgJ0Z1bmN0aW9uQ2FsbCcgYWN0aW9ucyB0eXBlcyBhcmUgc3VwcG9ydGVkIGJ5ICR7bWV0YWRhdGEubmFtZX1gXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBhY3Rpb25zLm1hcCgoeCkgPT4geC5wYXJhbXMpO1xuICB9O1xuXG4gIGNvbnN0IHRyYW5zZm9ybVRyYW5zYWN0aW9ucyA9IChcbiAgICB0cmFuc2FjdGlvbnM6IEFycmF5PE9wdGlvbmFsPFRyYW5zYWN0aW9uLCBcInNpZ25lcklkXCI+PlxuICApID0+IHtcbiAgICByZXR1cm4gdHJhbnNhY3Rpb25zLm1hcCgodHJhbnNhY3Rpb24pID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlY2VpdmVySWQ6IHRyYW5zYWN0aW9uLnJlY2VpdmVySWQsXG4gICAgICAgIGFjdGlvbnM6IHRyYW5zZm9ybUFjdGlvbnModHJhbnNhY3Rpb24uYWN0aW9ucyksXG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIGlmIChfc3RhdGUud2FsbGV0ICYmIF9zdGF0ZS53YWxsZXQuaXNTaWduZWRJbigpKSB7XG4gICAgc2V0dXBFdmVudHMoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYXN5bmMgc2lnbkluKHsgY29udHJhY3RJZCwgbWV0aG9kTmFtZXMgfSkge1xuICAgICAgY29uc3QgZXhpc3RpbmdBY2NvdW50cyA9IGdldEFjY291bnRzKCk7XG5cbiAgICAgIGlmIChleGlzdGluZ0FjY291bnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdBY2NvdW50cztcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBhY2Nlc3NLZXksIGVycm9yIH0gPSBhd2FpdCBfc3RhdGUud2FsbGV0LnJlcXVlc3RTaWduSW4oe1xuICAgICAgICBjb250cmFjdElkLFxuICAgICAgICBtZXRob2ROYW1lcyxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWFjY2Vzc0tleSB8fCBlcnJvcikge1xuICAgICAgICBhd2FpdCBzaWduT3V0KCk7XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICh0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIgPyBlcnJvciA6IGVycm9yLnR5cGUpIHx8XG4gICAgICAgICAgICBcIkZhaWxlZCB0byBzaWduIGluXCJcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgc2V0dXBFdmVudHMoKTtcblxuICAgICAgcmV0dXJuIGdldEFjY291bnRzKCk7XG4gICAgfSxcblxuICAgIHNpZ25PdXQsXG5cbiAgICBhc3luYyBnZXRBY2NvdW50cygpIHtcbiAgICAgIHJldHVybiBnZXRBY2NvdW50cygpO1xuICAgIH0sXG5cbiAgICBhc3luYyB2ZXJpZnlPd25lcih7IG1lc3NhZ2UgfSkge1xuICAgICAgbG9nZ2VyLmxvZyhcIlNlbmRlcjp2ZXJpZnlPd25lclwiLCB7IG1lc3NhZ2UgfSk7XG5cbiAgICAgIGNvbnN0IGFjY291bnQgPSBfc3RhdGUud2FsbGV0LmFjY291bnQoKTtcblxuICAgICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBub3Qgc2lnbmVkIGluXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBOb3RlOiBXaGVuIHRoZSB3YWxsZXQgaXMgbG9ja2VkLCBTZW5kZXIgcmV0dXJucyBhbiBlbXB0eSBTaWduZXIgaW50ZXJmYWNlLlxuICAgICAgLy8gRXZlbiBhZnRlciB1bmxvY2tpbmcgdGhlIHdhbGxldCwgdGhlIHVzZXIgd2lsbCBuZWVkIHRvIHJlZnJlc2ggdG8gZ2FpblxuICAgICAgLy8gYWNjZXNzIHRvIHRoZXNlIG1ldGhvZHMuXG4gICAgICBpZiAoIWFjY291bnQuY29ubmVjdGlvbi5zaWduZXIuc2lnbk1lc3NhZ2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IGlzIGxvY2tlZFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV0d29ya0lkID0gb3B0aW9ucy5uZXR3b3JrLm5ldHdvcmtJZDtcbiAgICAgIGNvbnN0IGFjY291bnRJZCA9IGFjY291bnQuYWNjb3VudElkO1xuICAgICAgY29uc3QgcHViS2V5ID0gYXdhaXQgYWNjb3VudC5jb25uZWN0aW9uLnNpZ25lci5nZXRQdWJsaWNLZXkoXG4gICAgICAgIGFjY291bnRJZCxcbiAgICAgICAgbmV0d29ya0lkXG4gICAgICApO1xuICAgICAgY29uc3QgYmxvY2sgPSBhd2FpdCBwcm92aWRlci5ibG9jayh7IGZpbmFsaXR5OiBcImZpbmFsXCIgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIGFjY291bnRJZCxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgYmxvY2tJZDogYmxvY2suaGVhZGVyLmhhc2gsXG4gICAgICAgIHB1YmxpY0tleTogQnVmZmVyLmZyb20ocHViS2V5LmRhdGEpLnRvU3RyaW5nKFwiYmFzZTY0XCIpLFxuICAgICAgICBrZXlUeXBlOiBwdWJLZXkua2V5VHlwZSxcbiAgICAgIH07XG4gICAgICBjb25zdCBlbmNvZGVkID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cbiAgICAgIGNvbnN0IHNpZ25lZCA9IGF3YWl0IGFjY291bnQuY29ubmVjdGlvbi5zaWduZXIuc2lnbk1lc3NhZ2UoXG4gICAgICAgIG5ldyBVaW50OEFycmF5KEJ1ZmZlci5mcm9tKGVuY29kZWQpKSxcbiAgICAgICAgYWNjb3VudElkLFxuICAgICAgICBuZXR3b3JrSWRcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIHNpZ25hdHVyZTogQnVmZmVyLmZyb20oc2lnbmVkLnNpZ25hdHVyZSkudG9TdHJpbmcoXCJiYXNlNjRcIiksXG4gICAgICAgIGtleVR5cGU6IHNpZ25lZC5wdWJsaWNLZXkua2V5VHlwZSxcbiAgICAgIH07XG4gICAgfSxcblxuICAgIGFzeW5jIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb24oeyBzaWduZXJJZCwgcmVjZWl2ZXJJZCwgYWN0aW9ucyB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwic2lnbkFuZFNlbmRUcmFuc2FjdGlvblwiLCB7IHNpZ25lcklkLCByZWNlaXZlcklkLCBhY3Rpb25zIH0pO1xuXG4gICAgICBjb25zdCB7IGNvbnRyYWN0IH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xuXG4gICAgICBpZiAoIV9zdGF0ZS53YWxsZXQuaXNTaWduZWRJbigpIHx8ICFjb250cmFjdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXYWxsZXQgbm90IHNpZ25lZCBpblwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9zdGF0ZS53YWxsZXRcbiAgICAgICAgLnNpZ25BbmRTZW5kVHJhbnNhY3Rpb24oe1xuICAgICAgICAgIHJlY2VpdmVySWQ6IHJlY2VpdmVySWQgfHwgY29udHJhY3QuY29udHJhY3RJZCxcbiAgICAgICAgICBhY3Rpb25zOiB0cmFuc2Zvcm1BY3Rpb25zKGFjdGlvbnMpLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgaWYgKHJlcy5lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlcy5lcnJvcik7XG4gICAgICAgICAgfSBlbHNlIGlmIChyZXMucmVzcG9uc2UgJiYgXCJlcnJvclwiIGluIHJlcy5yZXNwb25zZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlcy5yZXNwb25zZS5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTaG91bGRuJ3QgaGFwcGVuIGJ1dCBhdm9pZHMgaW5jb25zaXN0ZW50IHJlc3BvbnNlcy5cbiAgICAgICAgICBpZiAoIXJlcy5yZXNwb25zZT8ubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJlc3BvbnNlXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXMucmVzcG9uc2VbMF07XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBhc3luYyBzaWduQW5kU2VuZFRyYW5zYWN0aW9ucyh7IHRyYW5zYWN0aW9ucyB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwic2lnbkFuZFNlbmRUcmFuc2FjdGlvbnNcIiwgeyB0cmFuc2FjdGlvbnMgfSk7XG5cbiAgICAgIGlmICghX3N0YXRlLndhbGxldC5pc1NpZ25lZEluKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfc3RhdGUud2FsbGV0XG4gICAgICAgIC5yZXF1ZXN0U2lnblRyYW5zYWN0aW9ucyh7XG4gICAgICAgICAgdHJhbnNhY3Rpb25zOiB0cmFuc2Zvcm1UcmFuc2FjdGlvbnModHJhbnNhY3Rpb25zKSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGlmIChyZXMuZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuZXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSBpZiAocmVzLnJlc3BvbnNlICYmIFwiZXJyb3JcIiBpbiByZXMucmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMucmVzcG9uc2UuZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU2hvdWxkbid0IGhhcHBlbiBidXQgYXZvaWRzIGluY29uc2lzdGVudCByZXNwb25zZXMuXG4gICAgICAgICAgaWYgKCFyZXMucmVzcG9uc2U/Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByZXNwb25zZVwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmVzLnJlc3BvbnNlO1xuICAgICAgICB9KTtcbiAgICB9LFxuICB9O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU2VuZGVyKHtcbiAgaWNvblVybCA9IFwiLi9hc3NldHMvc2VuZGVyLWljb24ucG5nXCIsXG4gIGRlcHJlY2F0ZWQgPSBmYWxzZSxcbn06IFNlbmRlclBhcmFtcyA9IHt9KTogV2FsbGV0TW9kdWxlRmFjdG9yeTxJbmplY3RlZFdhbGxldD4ge1xuICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vYmlsZSA9IGlzTW9iaWxlKCk7XG4gICAgY29uc3QgaW5zdGFsbGVkID0gYXdhaXQgaXNJbnN0YWxsZWQoKTtcblxuICAgIGlmIChtb2JpbGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEFkZCBleHRyYSB3YWl0IHRvIGVuc3VyZSBTZW5kZXIncyBzaWduIGluIHN0YXR1cyBpcyByZWFkIGZyb20gdGhlXG4gICAgLy8gYnJvd3NlciBleHRlbnNpb24gYmFja2dyb3VuZCBlbnYuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiAhIXdpbmRvdy5uZWFyPy5pc1NpZ25lZEluKCksIHsgdGltZW91dDogMzAwIH0pLmNhdGNoKFxuICAgICAgKCkgPT4gZmFsc2VcbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBcInNlbmRlclwiLFxuICAgICAgdHlwZTogXCJpbmplY3RlZFwiLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgbmFtZTogXCJTZW5kZXJcIixcbiAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgIGljb25VcmwsXG4gICAgICAgIGRvd25sb2FkVXJsOlxuICAgICAgICAgIFwiaHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvc2VuZGVyLXdhbGxldC9lcGFwaWhkcGxhamNkbm5rZGVpYWhsZ2lnb2Zsb2liZ1wiLFxuICAgICAgICBkZXByZWNhdGVkLFxuICAgICAgICBhdmFpbGFibGU6IGluc3RhbGxlZCxcbiAgICAgIH0sXG4gICAgICBpbml0OiBTZW5kZXIsXG4gICAgfTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJpc01vYmlsZSIsIndhaXRGb3IiLCJpc0luc3RhbGxlZCIsIndpbmRvdyIsIm5lYXIiLCJpc1NlbmRlciIsImNhdGNoIiwic2V0dXBTZW5kZXJTdGF0ZSIsIndhbGxldCIsIlNlbmRlciIsIm9wdGlvbnMiLCJtZXRhZGF0YSIsInN0b3JlIiwicHJvdmlkZXIiLCJlbWl0dGVyIiwibG9nZ2VyIiwiX3N0YXRlIiwiY2xlYW51cCIsImtleSIsImNhbGxiYWNrcyIsInJlbW92ZSIsInNpZ25PdXQiLCJpc1NpZ25lZEluIiwicmVzIiwiZXJyb3IiLCJFcnJvciIsInR5cGUiLCJtZXNzYWdlIiwibG9nIiwic2V0dXBFdmVudHMiLCJvbiIsIm5ld0FjY291bnRJZCIsImVtaXQiLCJycGMiLCJuZXR3b3JrIiwibmV0d29ya0lkIiwiZ2V0QWNjb3VudHMiLCJhY2NvdW50SWQiLCJnZXRBY2NvdW50SWQiLCJpc1ZhbGlkQWN0aW9ucyIsImFjdGlvbnMiLCJldmVyeSIsIngiLCJ0cmFuc2Zvcm1BY3Rpb25zIiwidmFsaWRBY3Rpb25zIiwibmFtZSIsIm1hcCIsInBhcmFtcyIsInRyYW5zZm9ybVRyYW5zYWN0aW9ucyIsInRyYW5zYWN0aW9ucyIsInRyYW5zYWN0aW9uIiwicmVjZWl2ZXJJZCIsInNpZ25JbiIsImNvbnRyYWN0SWQiLCJtZXRob2ROYW1lcyIsImV4aXN0aW5nQWNjb3VudHMiLCJsZW5ndGgiLCJhY2Nlc3NLZXkiLCJyZXF1ZXN0U2lnbkluIiwidmVyaWZ5T3duZXIiLCJhY2NvdW50IiwiY29ubmVjdGlvbiIsInNpZ25lciIsInNpZ25NZXNzYWdlIiwicHViS2V5IiwiZ2V0UHVibGljS2V5IiwiYmxvY2siLCJmaW5hbGl0eSIsImRhdGEiLCJibG9ja0lkIiwiaGVhZGVyIiwiaGFzaCIsInB1YmxpY0tleSIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsImtleVR5cGUiLCJlbmNvZGVkIiwiSlNPTiIsInN0cmluZ2lmeSIsInNpZ25lZCIsIlVpbnQ4QXJyYXkiLCJzaWduYXR1cmUiLCJzaWduQW5kU2VuZFRyYW5zYWN0aW9uIiwic2lnbmVySWQiLCJjb250cmFjdCIsImdldFN0YXRlIiwidGhlbiIsInJlc3BvbnNlIiwic2lnbkFuZFNlbmRUcmFuc2FjdGlvbnMiLCJyZXF1ZXN0U2lnblRyYW5zYWN0aW9ucyIsInNldHVwU2VuZGVyIiwiaWNvblVybCIsImRlcHJlY2F0ZWQiLCJtb2JpbGUiLCJpbnN0YWxsZWQiLCJ0aW1lb3V0IiwiaWQiLCJkZXNjcmlwdGlvbiIsImRvd25sb2FkVXJsIiwiYXZhaWxhYmxlIiwiaW5pdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/sender/src/lib/sender.ts\n");

/***/ }),

/***/ "../../packages/wallet-connect/src/index.ts":
/*!**************************************************!*\
  !*** ../../packages/wallet-connect/src/index.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupWalletConnect": () => (/* reexport safe */ _lib_wallet_connect__WEBPACK_IMPORTED_MODULE_0__.setupWalletConnect)
/* harmony export */ });
/* harmony import */ var _lib_wallet_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/wallet-connect */ "../../packages/wallet-connect/src/lib/wallet-connect.ts");


/***/ }),

/***/ "../../packages/wallet-connect/src/lib/wallet-connect-client.ts":
/*!**********************************************************************!*\
  !*** ../../packages/wallet-connect/src/lib/wallet-connect-client.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @walletconnect/sign-client */ \"@walletconnect/sign-client\");\n/* harmony import */ var _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _walletconnect_qrcode_modal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @walletconnect/qrcode-modal */ \"@walletconnect/qrcode-modal\");\n/* harmony import */ var _walletconnect_qrcode_modal__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_qrcode_modal__WEBPACK_IMPORTED_MODULE_1__);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nclass WalletConnectClient {\n  constructor() {\n    _defineProperty(this, \"client\", void 0);\n  }\n\n  async init(opts) {\n    this.client = await _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_0___default().init(opts);\n  }\n\n  get session() {\n    return this.client.session;\n  }\n\n  on(event, callback) {\n    this.client.on(event, callback);\n    return {\n      remove: () => this.client.off(event, callback)\n    };\n  }\n\n  once(event, callback) {\n    this.client.once(event, callback);\n  }\n\n  async connect(params) {\n    return new Promise((resolve, reject) => {\n      this.client.connect(params).then(({\n        uri,\n        approval\n      }) => {\n        if (uri) {\n          _walletconnect_qrcode_modal__WEBPACK_IMPORTED_MODULE_1___default().open(uri, () => {\n            reject(new Error(\"User cancelled pairing\"));\n          });\n        }\n\n        approval().then(resolve).catch(reject).finally(() => _walletconnect_qrcode_modal__WEBPACK_IMPORTED_MODULE_1___default().close());\n      }).catch(reject);\n    });\n  }\n\n  async request(params) {\n    return this.client.request(params);\n  }\n\n  async disconnect(params) {\n    return this.client.disconnect(params);\n  }\n\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (WalletConnectClient);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvd2FsbGV0LWNvbm5lY3Qvc3JjL2xpYi93YWxsZXQtY29ubmVjdC1jbGllbnQudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBRUE7O0FBR0EsTUFBTUUsbUJBQU4sQ0FBMEI7RUFBQTtJQUFBO0VBQUE7O0VBR2QsTUFBSkMsSUFBSSxDQUFDQyxJQUFELEVBQWdDO0lBQ3hDLEtBQUtDLE1BQUwsR0FBYyxNQUFNTCxzRUFBQSxDQUFZSSxJQUFaLENBQXBCO0VBQ0Q7O0VBRVUsSUFBUEUsT0FBTyxHQUFHO0lBQ1osT0FBTyxLQUFLRCxNQUFMLENBQVlDLE9BQW5CO0VBQ0Q7O0VBRURDLEVBQUUsQ0FDQUMsS0FEQSxFQUVBQyxRQUZBLEVBR0E7SUFDQSxLQUFLSixNQUFMLENBQVlFLEVBQVosQ0FBZUMsS0FBZixFQUFzQkMsUUFBdEI7SUFFQSxPQUFPO01BQ0xDLE1BQU0sRUFBRSxNQUFNLEtBQUtMLE1BQUwsQ0FBWU0sR0FBWixDQUFnQkgsS0FBaEIsRUFBdUJDLFFBQXZCO0lBRFQsQ0FBUDtFQUdEOztFQUVERyxJQUFJLENBQ0ZKLEtBREUsRUFFRkMsUUFGRSxFQUdGO0lBQ0EsS0FBS0osTUFBTCxDQUFZTyxJQUFaLENBQWlCSixLQUFqQixFQUF3QkMsUUFBeEI7RUFDRDs7RUFFWSxNQUFQSSxPQUFPLENBQUNDLE1BQUQsRUFBb0M7SUFDL0MsT0FBTyxJQUFJQyxPQUFKLENBQWlDLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtNQUMzRCxLQUFLWixNQUFMLENBQ0dRLE9BREgsQ0FDV0MsTUFEWCxFQUVHSSxJQUZILENBRVEsQ0FBQztRQUFFQyxHQUFGO1FBQU9DO01BQVAsQ0FBRCxLQUF1QjtRQUMzQixJQUFJRCxHQUFKLEVBQVM7VUFDUGxCLHVFQUFBLENBQWlCa0IsR0FBakIsRUFBc0IsTUFBTTtZQUMxQkYsTUFBTSxDQUFDLElBQUlLLEtBQUosQ0FBVSx3QkFBVixDQUFELENBQU47VUFDRCxDQUZEO1FBR0Q7O1FBRURGLFFBQVEsR0FDTEYsSUFESCxDQUNRRixPQURSLEVBRUdPLEtBRkgsQ0FFU04sTUFGVCxFQUdHTyxPQUhILENBR1csTUFBTXZCLHdFQUFBLEVBSGpCO01BSUQsQ0FiSCxFQWNHc0IsS0FkSCxDQWNTTixNQWRUO0lBZUQsQ0FoQk0sQ0FBUDtFQWlCRDs7RUFFWSxNQUFQUyxPQUFPLENBQ1haLE1BRFcsRUFFUTtJQUNuQixPQUFPLEtBQUtULE1BQUwsQ0FBWXFCLE9BQVosQ0FBb0JaLE1BQXBCLENBQVA7RUFDRDs7RUFFZSxNQUFWYSxVQUFVLENBQUNiLE1BQUQsRUFBdUM7SUFDckQsT0FBTyxLQUFLVCxNQUFMLENBQVlzQixVQUFaLENBQXVCYixNQUF2QixDQUFQO0VBQ0Q7O0FBekR1Qjs7QUE0RDFCLGlFQUFlWixtQkFBZiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy93YWxsZXQtY29ubmVjdC9zcmMvbGliL3dhbGxldC1jb25uZWN0LWNsaWVudC50cz9hMGRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDbGllbnQgZnJvbSBcIkB3YWxsZXRjb25uZWN0L3NpZ24tY2xpZW50XCI7XG5pbXBvcnQgdHlwZSB7IFNpZ25DbGllbnRUeXBlcywgRW5naW5lVHlwZXMgfSBmcm9tIFwiQHdhbGxldGNvbm5lY3QvdHlwZXNcIjtcbmltcG9ydCBRUkNvZGVNb2RhbCBmcm9tIFwiQHdhbGxldGNvbm5lY3QvcXJjb2RlLW1vZGFsXCI7XG5pbXBvcnQgeyBTZXNzaW9uVHlwZXMgfSBmcm9tIFwiQHdhbGxldGNvbm5lY3QvdHlwZXMvZGlzdC9janMvc2lnbi1jbGllbnQvc2Vzc2lvblwiO1xuXG5jbGFzcyBXYWxsZXRDb25uZWN0Q2xpZW50IHtcbiAgcHJpdmF0ZSBjbGllbnQ6IENsaWVudDtcblxuICBhc3luYyBpbml0KG9wdHM6IFNpZ25DbGllbnRUeXBlcy5PcHRpb25zKSB7XG4gICAgdGhpcy5jbGllbnQgPSBhd2FpdCBDbGllbnQuaW5pdChvcHRzKTtcbiAgfVxuXG4gIGdldCBzZXNzaW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNsaWVudC5zZXNzaW9uO1xuICB9XG5cbiAgb248RXZlbnQgZXh0ZW5kcyBTaWduQ2xpZW50VHlwZXMuRXZlbnQ+KFxuICAgIGV2ZW50OiBFdmVudCxcbiAgICBjYWxsYmFjazogKGFyZ3M6IFNpZ25DbGllbnRUeXBlcy5FdmVudEFyZ3VtZW50c1tFdmVudF0pID0+IHZvaWRcbiAgKSB7XG4gICAgdGhpcy5jbGllbnQub24oZXZlbnQsIGNhbGxiYWNrKTtcblxuICAgIHJldHVybiB7XG4gICAgICByZW1vdmU6ICgpID0+IHRoaXMuY2xpZW50Lm9mZihldmVudCwgY2FsbGJhY2spLFxuICAgIH07XG4gIH1cblxuICBvbmNlPEV2ZW50IGV4dGVuZHMgU2lnbkNsaWVudFR5cGVzLkV2ZW50PihcbiAgICBldmVudDogRXZlbnQsXG4gICAgY2FsbGJhY2s6IChhcmdzOiBTaWduQ2xpZW50VHlwZXMuRXZlbnRBcmd1bWVudHNbRXZlbnRdKSA9PiB2b2lkXG4gICkge1xuICAgIHRoaXMuY2xpZW50Lm9uY2UoZXZlbnQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGFzeW5jIGNvbm5lY3QocGFyYW1zOiBFbmdpbmVUeXBlcy5Db25uZWN0UGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFNlc3Npb25UeXBlcy5TdHJ1Y3Q+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuY2xpZW50XG4gICAgICAgIC5jb25uZWN0KHBhcmFtcylcbiAgICAgICAgLnRoZW4oKHsgdXJpLCBhcHByb3ZhbCB9KSA9PiB7XG4gICAgICAgICAgaWYgKHVyaSkge1xuICAgICAgICAgICAgUVJDb2RlTW9kYWwub3Blbih1cmksICgpID0+IHtcbiAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIlVzZXIgY2FuY2VsbGVkIHBhaXJpbmdcIikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXBwcm92YWwoKVxuICAgICAgICAgICAgLnRoZW4ocmVzb2x2ZSlcbiAgICAgICAgICAgIC5jYXRjaChyZWplY3QpXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiBRUkNvZGVNb2RhbC5jbG9zZSgpKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyByZXF1ZXN0PFJlc3BvbnNlPihcbiAgICBwYXJhbXM6IEVuZ2luZVR5cGVzLlJlcXVlc3RQYXJhbXNcbiAgKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLmNsaWVudC5yZXF1ZXN0KHBhcmFtcyk7XG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0KHBhcmFtczogRW5naW5lVHlwZXMuRGlzY29ubmVjdFBhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmNsaWVudC5kaXNjb25uZWN0KHBhcmFtcyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2FsbGV0Q29ubmVjdENsaWVudDtcbiJdLCJuYW1lcyI6WyJDbGllbnQiLCJRUkNvZGVNb2RhbCIsIldhbGxldENvbm5lY3RDbGllbnQiLCJpbml0Iiwib3B0cyIsImNsaWVudCIsInNlc3Npb24iLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJyZW1vdmUiLCJvZmYiLCJvbmNlIiwiY29ubmVjdCIsInBhcmFtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidGhlbiIsInVyaSIsImFwcHJvdmFsIiwib3BlbiIsIkVycm9yIiwiY2F0Y2giLCJmaW5hbGx5IiwiY2xvc2UiLCJyZXF1ZXN0IiwiZGlzY29ubmVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/wallet-connect/src/lib/wallet-connect-client.ts\n");

/***/ }),

/***/ "../../packages/wallet-connect/src/lib/wallet-connect.ts":
/*!***************************************************************!*\
  !*** ../../packages/wallet-connect/src/lib/wallet-connect.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupWalletConnect\": () => (/* binding */ setupWalletConnect)\n/* harmony export */ });\n/* harmony import */ var _near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @near-wallet-selector/core */ \"../../packages/core/src/index.ts\");\n/* harmony import */ var _wallet_connect_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wallet-connect-client */ \"../../packages/wallet-connect/src/lib/wallet-connect-client.ts\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nconst WC_METHODS = [\"near_signAndSendTransaction\", \"near_signAndSendTransactions\"];\nconst WC_EVENTS = [\"accountsChanged\"];\n\nconst setupWalletConnectState = async params => {\n  const client = new _wallet_connect_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n  let session = null;\n  await client.init({\n    projectId: params.projectId,\n    metadata: params.metadata,\n    relayUrl: params.relayUrl\n  });\n\n  if (client.session.length) {\n    const lastKeyIndex = client.session.keys.length - 1;\n    session = client.session.get(client.session.keys[lastKeyIndex]);\n  }\n\n  return {\n    client,\n    session,\n    subscriptions: []\n  };\n};\n\nconst WalletConnect = async ({\n  metadata,\n  options,\n  store,\n  params,\n  emitter,\n  logger\n}) => {\n  const _state = await setupWalletConnectState(params);\n\n  const getChainId = () => {\n    if (params.chainId) {\n      return params.chainId;\n    }\n\n    const {\n      networkId\n    } = options.network;\n\n    if ([\"mainnet\", \"testnet\"].includes(networkId)) {\n      return `near:${networkId}`;\n    }\n\n    throw new Error(\"Invalid chain id\");\n  };\n\n  const getAccounts = () => {\n    return (_state.session?.namespaces[\"near\"].accounts || []).map(x => ({\n      accountId: x.split(\":\")[2]\n    }));\n  };\n\n  const cleanup = () => {\n    _state.subscriptions.forEach(subscription => subscription.remove());\n\n    _state.subscriptions = [];\n    _state.session = null;\n  };\n\n  const signOut = async () => {\n    if (_state.session) {\n      await _state.client.disconnect({\n        topic: _state.session.topic,\n        reason: {\n          code: 5900,\n          message: \"User disconnected\"\n        }\n      });\n    }\n\n    cleanup();\n  };\n\n  const setupEvents = () => {\n    _state.subscriptions.push(_state.client.on(\"session_update\", event => {\n      logger.log(\"Session Update\", event);\n\n      if (event.topic === _state.session?.topic) {\n        _state.session = _objectSpread(_objectSpread({}, _state.client.session.get(event.topic)), {}, {\n          namespaces: event.params.namespaces\n        });\n        emitter.emit(\"accountsChanged\", {\n          accounts: getAccounts()\n        });\n      }\n    }));\n\n    _state.subscriptions.push(_state.client.on(\"session_delete\", async event => {\n      logger.log(\"Session Deleted\", event);\n\n      if (event.topic === _state.session?.topic) {\n        cleanup();\n        emitter.emit(\"signedOut\", null);\n      }\n    }));\n  };\n\n  if (_state.session) {\n    setupEvents();\n  }\n\n  return {\n    async signIn() {\n      const existingAccounts = getAccounts();\n\n      if (existingAccounts.length) {\n        return existingAccounts;\n      }\n\n      try {\n        _state.session = await _state.client.connect({\n          requiredNamespaces: {\n            near: {\n              chains: [getChainId()],\n              methods: WC_METHODS,\n              events: WC_EVENTS\n            }\n          }\n        });\n        setupEvents();\n        return getAccounts();\n      } catch (err) {\n        await signOut();\n        throw err;\n      }\n    },\n\n    signOut,\n\n    async getAccounts() {\n      return getAccounts();\n    },\n\n    async verifyOwner({\n      message\n    }) {\n      logger.log(\"WalletConnect:verifyOwner\", {\n        message\n      });\n      throw new Error(`Method not supported by ${metadata.name}`);\n    },\n\n    async signAndSendTransaction({\n      signerId,\n      receiverId,\n      actions\n    }) {\n      logger.log(\"signAndSendTransaction\", {\n        signerId,\n        receiverId,\n        actions\n      });\n      const {\n        contract\n      } = store.getState();\n\n      if (!_state.session || !contract) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      const account = (0,_near_wallet_selector_core__WEBPACK_IMPORTED_MODULE_0__.getActiveAccount)(store.getState());\n\n      if (!account) {\n        throw new Error(\"No active account\");\n      }\n\n      const transaction = {\n        signerId: signerId || account.accountId,\n        receiverId: receiverId || contract.contractId,\n        actions\n      };\n      return _state.client.request({\n        topic: _state.session.topic,\n        chainId: getChainId(),\n        request: {\n          method: \"near_signAndSendTransaction\",\n          params: {\n            transaction\n          }\n        }\n      });\n    },\n\n    async signAndSendTransactions({\n      transactions\n    }) {\n      logger.log(\"signAndSendTransactions\", {\n        transactions\n      });\n\n      if (!_state.session) {\n        throw new Error(\"Wallet not signed in\");\n      }\n\n      return _state.client.request({\n        topic: _state.session.topic,\n        chainId: getChainId(),\n        request: {\n          method: \"near_signAndSendTransactions\",\n          params: {\n            transactions\n          }\n        }\n      });\n    }\n\n  };\n};\n\nfunction setupWalletConnect({\n  projectId,\n  metadata,\n  chainId,\n  relayUrl = \"wss://relay.walletconnect.com\",\n  iconUrl = \"./assets/wallet-connect-icon.png\",\n  deprecated = false\n}) {\n  return async () => {\n    return {\n      id: \"wallet-connect\",\n      type: \"bridge\",\n      metadata: {\n        name: \"WalletConnect\",\n        description: null,\n        iconUrl,\n        deprecated,\n        available: true\n      },\n      init: options => {\n        return WalletConnect(_objectSpread(_objectSpread({}, options), {}, {\n          params: {\n            projectId,\n            metadata,\n            relayUrl,\n            chainId\n          }\n        }));\n      }\n    };\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvd2FsbGV0LWNvbm5lY3Qvc3JjL2xpYi93YWxsZXQtY29ubmVjdC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFRQTtBQUVBO0FBd0JBLE1BQU1FLFVBQVUsR0FBRyxDQUNqQiw2QkFEaUIsRUFFakIsOEJBRmlCLENBQW5CO0FBS0EsTUFBTUMsU0FBUyxHQUFHLENBQUMsaUJBQUQsQ0FBbEI7O0FBRUEsTUFBTUMsdUJBQXVCLEdBQUcsTUFDOUJDLE1BRDhCLElBRUU7RUFDaEMsTUFBTUMsTUFBTSxHQUFHLElBQUlMLDhEQUFKLEVBQWY7RUFDQSxJQUFJTSxPQUFtQyxHQUFHLElBQTFDO0VBRUEsTUFBTUQsTUFBTSxDQUFDRSxJQUFQLENBQVk7SUFDaEJDLFNBQVMsRUFBRUosTUFBTSxDQUFDSSxTQURGO0lBRWhCQyxRQUFRLEVBQUVMLE1BQU0sQ0FBQ0ssUUFGRDtJQUdoQkMsUUFBUSxFQUFFTixNQUFNLENBQUNNO0VBSEQsQ0FBWixDQUFOOztFQU1BLElBQUlMLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlSyxNQUFuQixFQUEyQjtJQUN6QixNQUFNQyxZQUFZLEdBQUdQLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlTyxJQUFmLENBQW9CRixNQUFwQixHQUE2QixDQUFsRDtJQUNBTCxPQUFPLEdBQUdELE1BQU0sQ0FBQ0MsT0FBUCxDQUFlUSxHQUFmLENBQW1CVCxNQUFNLENBQUNDLE9BQVAsQ0FBZU8sSUFBZixDQUFvQkQsWUFBcEIsQ0FBbkIsQ0FBVjtFQUNEOztFQUVELE9BQU87SUFDTFAsTUFESztJQUVMQyxPQUZLO0lBR0xTLGFBQWEsRUFBRTtFQUhWLENBQVA7QUFLRCxDQXRCRDs7QUF3QkEsTUFBTUMsYUFHTCxHQUFHLE9BQU87RUFBRVAsUUFBRjtFQUFZUSxPQUFaO0VBQXFCQyxLQUFyQjtFQUE0QmQsTUFBNUI7RUFBb0NlLE9BQXBDO0VBQTZDQztBQUE3QyxDQUFQLEtBQWlFO0VBQ25FLE1BQU1DLE1BQU0sR0FBRyxNQUFNbEIs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T0FBT04sTUFBTSxDQUFDaEIsTUFBUCxDQUFja0UsT0FBZCxDQUFzQjtRQUMzQjlCLEtBQUssRUFBRXBCLE1BQU0sQ0FBQ2YsT0FBUCxDQUFlbUMsS0FESztRQUUzQmxCLE9BQU8sRUFBRUQsVUFBVSxFQUZRO1FBRzNCaUQsT0FBTyxFQUFFO1VBQ1BDLE1BQU0sRUFBRSw4QkFERDtVQUVQcEUsTUFBTSxFQUFFO1lBQUVzRTtVQUFGO1FBRkQ7TUFIa0IsQ0FBdEIsQ0FBUDtJQVFEOztFQXZGSSxDQUFQO0FBeUZELENBeEtEOztBQTBLTyxTQUFTQyxrQkFBVCxDQUE0QjtFQUNqQ25FLFNBRGlDO0VBRWpDQyxRQUZpQztFQUdqQ2MsT0FIaUM7RUFJakNiLFFBQVEsR0FBRywrQkFKc0I7RUFLakNrRSxPQUFPLEdBQUcsa0NBTHVCO0VBTWpDQyxVQUFVLEdBQUc7QUFOb0IsQ0FBNUIsRUFPb0Q7RUFDekQsT0FBTyxZQUFZO0lBQ2pCLE9BQU87TUFDTEMsRUFBRSxFQUFFLGdCQURDO01BRUxDLElBQUksRUFBRSxRQUZEO01BR0x0RSxRQUFRLEVBQUU7UUFDUm9ELElBQUksRUFBRSxlQURFO1FBRVJtQixXQUFXLEVBQUUsSUFGTDtRQUdSSixPQUhRO1FBSVJDLFVBSlE7UUFLUkksU0FBUyxFQUFFO01BTEgsQ0FITDtNQVVMMUUsSUFBSSxFQUFHVSxPQUFELElBQWE7UUFDakIsT0FBT0QsYUFBYSxpQ0FDZkMsT0FEZTtVQUVsQmIsTUFBTSxFQUFFO1lBQ05JLFNBRE07WUFFTkMsUUFGTTtZQUdOQyxRQUhNO1lBSU5hO1VBSk07UUFGVSxHQUFwQjtNQVNEO0lBcEJJLENBQVA7RUFzQkQsQ0F2QkQ7QUF3QkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vcGFja2FnZXMvd2FsbGV0LWNvbm5lY3Qvc3JjL2xpYi93YWxsZXQtY29ubmVjdC50cz8wYzE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgU2lnbkNsaWVudFR5cGVzLCBTZXNzaW9uVHlwZXMgfSBmcm9tIFwiQHdhbGxldGNvbm5lY3QvdHlwZXNcIjtcbmltcG9ydCB0eXBlIHtcbiAgV2FsbGV0TW9kdWxlRmFjdG9yeSxcbiAgV2FsbGV0QmVoYXZpb3VyRmFjdG9yeSxcbiAgQnJpZGdlV2FsbGV0LFxuICBTdWJzY3JpcHRpb24sXG4gIFRyYW5zYWN0aW9uLFxufSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcbmltcG9ydCB7IGdldEFjdGl2ZUFjY291bnQgfSBmcm9tIFwiQG5lYXItd2FsbGV0LXNlbGVjdG9yL2NvcmVcIjtcblxuaW1wb3J0IFdhbGxldENvbm5lY3RDbGllbnQgZnJvbSBcIi4vd2FsbGV0LWNvbm5lY3QtY2xpZW50XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2FsbGV0Q29ubmVjdFBhcmFtcyB7XG4gIHByb2plY3RJZDogc3RyaW5nO1xuICBtZXRhZGF0YTogU2lnbkNsaWVudFR5cGVzLk1ldGFkYXRhO1xuICByZWxheVVybD86IHN0cmluZztcbiAgaWNvblVybD86IHN0cmluZztcbiAgY2hhaW5JZD86IHN0cmluZztcbiAgZGVwcmVjYXRlZD86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBXYWxsZXRDb25uZWN0RXh0cmFPcHRpb25zIHtcbiAgY2hhaW5JZD86IHN0cmluZztcbiAgcHJvamVjdElkOiBzdHJpbmc7XG4gIG1ldGFkYXRhOiBTaWduQ2xpZW50VHlwZXMuTWV0YWRhdGE7XG4gIHJlbGF5VXJsOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBXYWxsZXRDb25uZWN0U3RhdGUge1xuICBjbGllbnQ6IFdhbGxldENvbm5lY3RDbGllbnQ7XG4gIHNlc3Npb246IFNlc3Npb25UeXBlcy5TdHJ1Y3QgfCBudWxsO1xuICBzdWJzY3JpcHRpb25zOiBBcnJheTxTdWJzY3JpcHRpb24+O1xufVxuXG5jb25zdCBXQ19NRVRIT0RTID0gW1xuICBcIm5lYXJfc2lnbkFuZFNlbmRUcmFuc2FjdGlvblwiLFxuICBcIm5lYXJfc2lnbkFuZFNlbmRUcmFuc2FjdGlvbnNcIixcbl07XG5cbmNvbnN0IFdDX0VWRU5UUyA9IFtcImFjY291bnRzQ2hhbmdlZFwiXTtcblxuY29uc3Qgc2V0dXBXYWxsZXRDb25uZWN0U3RhdGUgPSBhc3luYyAoXG4gIHBhcmFtczogV2FsbGV0Q29ubmVjdEV4dHJhT3B0aW9uc1xuKTogUHJvbWlzZTxXYWxsZXRDb25uZWN0U3RhdGU+ID0+IHtcbiAgY29uc3QgY2xpZW50ID0gbmV3IFdhbGxldENvbm5lY3RDbGllbnQoKTtcbiAgbGV0IHNlc3Npb246IFNlc3Npb25UeXBlcy5TdHJ1Y3QgfCBudWxsID0gbnVsbDtcblxuICBhd2FpdCBjbGllbnQuaW5pdCh7XG4gICAgcHJvamVjdElkOiBwYXJhbXMucHJvamVjdElkLFxuICAgIG1ldGFkYXRhOiBwYXJhbXMubWV0YWRhdGEsXG4gICAgcmVsYXlVcmw6IHBhcmFtcy5yZWxheVVybCxcbiAgfSk7XG5cbiAgaWYgKGNsaWVudC5zZXNzaW9uLmxlbmd0aCkge1xuICAgIGNvbnN0IGxhc3RLZXlJbmRleCA9IGNsaWVudC5zZXNzaW9uLmtleXMubGVuZ3RoIC0gMTtcbiAgICBzZXNzaW9uID0gY2xpZW50LnNlc3Npb24uZ2V0KGNsaWVudC5zZXNzaW9uLmtleXNbbGFzdEtleUluZGV4XSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNsaWVudCxcbiAgICBzZXNzaW9uLFxuICAgIHN1YnNjcmlwdGlvbnM6IFtdLFxuICB9O1xufTtcblxuY29uc3QgV2FsbGV0Q29ubmVjdDogV2FsbGV0QmVoYXZpb3VyRmFjdG9yeTxcbiAgQnJpZGdlV2FsbGV0LFxuICB7IHBhcmFtczogV2FsbGV0Q29ubmVjdEV4dHJhT3B0aW9ucyB9XG4+ID0gYXN5bmMgKHsgbWV0YWRhdGEsIG9wdGlvbnMsIHN0b3JlLCBwYXJhbXMsIGVtaXR0ZXIsIGxvZ2dlciB9KSA9PiB7XG4gIGNvbnN0IF9zdGF0ZSA9IGF3YWl0IHNldHVwV2FsbGV0Q29ubmVjdFN0YXRlKHBhcmFtcyk7XG5cbiAgY29uc3QgZ2V0Q2hhaW5JZCA9ICgpID0+IHtcbiAgICBpZiAocGFyYW1zLmNoYWluSWQpIHtcbiAgICAgIHJldHVybiBwYXJhbXMuY2hhaW5JZDtcbiAgICB9XG5cbiAgICBjb25zdCB7IG5ldHdvcmtJZCB9ID0gb3B0aW9ucy5uZXR3b3JrO1xuXG4gICAgaWYgKFtcIm1haW5uZXRcIiwgXCJ0ZXN0bmV0XCJdLmluY2x1ZGVzKG5ldHdvcmtJZCkpIHtcbiAgICAgIHJldHVybiBgbmVhcjoke25ldHdvcmtJZH1gO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY2hhaW4gaWRcIik7XG4gIH07XG5cbiAgY29uc3QgZ2V0QWNjb3VudHMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChfc3RhdGUuc2Vzc2lvbj8ubmFtZXNwYWNlc1tcIm5lYXJcIl0uYWNjb3VudHMgfHwgW10pLm1hcCgoeCkgPT4gKHtcbiAgICAgIGFjY291bnRJZDogeC5zcGxpdChcIjpcIilbMl0sXG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgX3N0YXRlLnN1YnNjcmlwdGlvbnMuZm9yRWFjaCgoc3Vic2NyaXB0aW9uKSA9PiBzdWJzY3JpcHRpb24ucmVtb3ZlKCkpO1xuXG4gICAgX3N0YXRlLnN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICBfc3RhdGUuc2Vzc2lvbiA9IG51bGw7XG4gIH07XG5cbiAgY29uc3Qgc2lnbk91dCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoX3N0YXRlLnNlc3Npb24pIHtcbiAgICAgIGF3YWl0IF9zdGF0ZS5jbGllbnQuZGlzY29ubmVjdCh7XG4gICAgICAgIHRvcGljOiBfc3RhdGUuc2Vzc2lvbi50b3BpYyxcbiAgICAgICAgcmVhc29uOiB7XG4gICAgICAgICAgY29kZTogNTkwMCxcbiAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgZGlzY29ubmVjdGVkXCIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjbGVhbnVwKCk7XG4gIH07XG5cbiAgY29uc3Qgc2V0dXBFdmVudHMgPSAoKSA9PiB7XG4gICAgX3N0YXRlLnN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgIF9zdGF0ZS5jbGllbnQub24oXCJzZXNzaW9uX3VwZGF0ZVwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIlNlc3Npb24gVXBkYXRlXCIsIGV2ZW50KTtcblxuICAgICAgICBpZiAoZXZlbnQudG9waWMgPT09IF9zdGF0ZS5zZXNzaW9uPy50b3BpYykge1xuICAgICAgICAgIF9zdGF0ZS5zZXNzaW9uID0ge1xuICAgICAgICAgICAgLi4uX3N0YXRlLmNsaWVudC5zZXNzaW9uLmdldChldmVudC50b3BpYyksXG4gICAgICAgICAgICBuYW1lc3BhY2VzOiBldmVudC5wYXJhbXMubmFtZXNwYWNlcyxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZW1pdHRlci5lbWl0KFwiYWNjb3VudHNDaGFuZ2VkXCIsIHsgYWNjb3VudHM6IGdldEFjY291bnRzKCkgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcblxuICAgIF9zdGF0ZS5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICBfc3RhdGUuY2xpZW50Lm9uKFwic2Vzc2lvbl9kZWxldGVcIiwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJTZXNzaW9uIERlbGV0ZWRcIiwgZXZlbnQpO1xuXG4gICAgICAgIGlmIChldmVudC50b3BpYyA9PT0gX3N0YXRlLnNlc3Npb24/LnRvcGljKSB7XG4gICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgIGVtaXR0ZXIuZW1pdChcInNpZ25lZE91dFwiLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICB9O1xuXG4gIGlmIChfc3RhdGUuc2Vzc2lvbikge1xuICAgIHNldHVwRXZlbnRzKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFzeW5jIHNpZ25JbigpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nQWNjb3VudHMgPSBnZXRBY2NvdW50cygpO1xuXG4gICAgICBpZiAoZXhpc3RpbmdBY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nQWNjb3VudHM7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIF9zdGF0ZS5zZXNzaW9uID0gYXdhaXQgX3N0YXRlLmNsaWVudC5jb25uZWN0KHtcbiAgICAgICAgICByZXF1aXJlZE5hbWVzcGFjZXM6IHtcbiAgICAgICAgICAgIG5lYXI6IHtcbiAgICAgICAgICAgICAgY2hhaW5zOiBbZ2V0Q2hhaW5JZCgpXSxcbiAgICAgICAgICAgICAgbWV0aG9kczogV0NfTUVUSE9EUyxcbiAgICAgICAgICAgICAgZXZlbnRzOiBXQ19FVkVOVFMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldHVwRXZlbnRzKCk7XG5cbiAgICAgICAgcmV0dXJuIGdldEFjY291bnRzKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgYXdhaXQgc2lnbk91dCgpO1xuXG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2lnbk91dCxcblxuICAgIGFzeW5jIGdldEFjY291bnRzKCkge1xuICAgICAgcmV0dXJuIGdldEFjY291bnRzKCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHZlcmlmeU93bmVyKHsgbWVzc2FnZSB9KSB7XG4gICAgICBsb2dnZXIubG9nKFwiV2FsbGV0Q29ubmVjdDp2ZXJpZnlPd25lclwiLCB7IG1lc3NhZ2UgfSk7XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWV0aG9kIG5vdCBzdXBwb3J0ZWQgYnkgJHttZXRhZGF0YS5uYW1lfWApO1xuICAgIH0sXG5cbiAgICBhc3luYyBzaWduQW5kU2VuZFRyYW5zYWN0aW9uKHsgc2lnbmVySWQsIHJlY2VpdmVySWQsIGFjdGlvbnMgfSkge1xuICAgICAgbG9nZ2VyLmxvZyhcInNpZ25BbmRTZW5kVHJhbnNhY3Rpb25cIiwgeyBzaWduZXJJZCwgcmVjZWl2ZXJJZCwgYWN0aW9ucyB9KTtcblxuICAgICAgY29uc3QgeyBjb250cmFjdCB9ID0gc3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgICAgaWYgKCFfc3RhdGUuc2Vzc2lvbiB8fCAhY29udHJhY3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFjY291bnQgPSBnZXRBY3RpdmVBY2NvdW50KHN0b3JlLmdldFN0YXRlKCkpO1xuXG4gICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWN0aXZlIGFjY291bnRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbiA9IHtcbiAgICAgICAgc2lnbmVySWQ6IHNpZ25lcklkIHx8IGFjY291bnQuYWNjb3VudElkLFxuICAgICAgICByZWNlaXZlcklkOiByZWNlaXZlcklkIHx8IGNvbnRyYWN0LmNvbnRyYWN0SWQsXG4gICAgICAgIGFjdGlvbnMsXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gX3N0YXRlLmNsaWVudC5yZXF1ZXN0KHtcbiAgICAgICAgdG9waWM6IF9zdGF0ZS5zZXNzaW9uLnRvcGljLFxuICAgICAgICBjaGFpbklkOiBnZXRDaGFpbklkKCksXG4gICAgICAgIHJlcXVlc3Q6IHtcbiAgICAgICAgICBtZXRob2Q6IFwibmVhcl9zaWduQW5kU2VuZFRyYW5zYWN0aW9uXCIsXG4gICAgICAgICAgcGFyYW1zOiB7IHRyYW5zYWN0aW9uIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgYXN5bmMgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbnMoeyB0cmFuc2FjdGlvbnMgfSkge1xuICAgICAgbG9nZ2VyLmxvZyhcInNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zXCIsIHsgdHJhbnNhY3Rpb25zIH0pO1xuXG4gICAgICBpZiAoIV9zdGF0ZS5zZXNzaW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBub3Qgc2lnbmVkIGluXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3N0YXRlLmNsaWVudC5yZXF1ZXN0KHtcbiAgICAgICAgdG9waWM6IF9zdGF0ZS5zZXNzaW9uLnRvcGljLFxuICAgICAgICBjaGFpbklkOiBnZXRDaGFpbklkKCksXG4gICAgICAgIHJlcXVlc3Q6IHtcbiAgICAgICAgICBtZXRob2Q6IFwibmVhcl9zaWduQW5kU2VuZFRyYW5zYWN0aW9uc1wiLFxuICAgICAgICAgIHBhcmFtczogeyB0cmFuc2FjdGlvbnMgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0sXG4gIH07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBXYWxsZXRDb25uZWN0KHtcbiAgcHJvamVjdElkLFxuICBtZXRhZGF0YSxcbiAgY2hhaW5JZCxcbiAgcmVsYXlVcmwgPSBcIndzczovL3JlbGF5LndhbGxldGNvbm5lY3QuY29tXCIsXG4gIGljb25VcmwgPSBcIi4vYXNzZXRzL3dhbGxldC1jb25uZWN0LWljb24ucG5nXCIsXG4gIGRlcHJlY2F0ZWQgPSBmYWxzZSxcbn06IFdhbGxldENvbm5lY3RQYXJhbXMpOiBXYWxsZXRNb2R1bGVGYWN0b3J5PEJyaWRnZVdhbGxldD4ge1xuICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogXCJ3YWxsZXQtY29ubmVjdFwiLFxuICAgICAgdHlwZTogXCJicmlkZ2VcIixcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIG5hbWU6IFwiV2FsbGV0Q29ubmVjdFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgaWNvblVybCxcbiAgICAgICAgZGVwcmVjYXRlZCxcbiAgICAgICAgYXZhaWxhYmxlOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIGluaXQ6IChvcHRpb25zKSA9PiB7XG4gICAgICAgIHJldHVybiBXYWxsZXRDb25uZWN0KHtcbiAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgcHJvamVjdElkLFxuICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICByZWxheVVybCxcbiAgICAgICAgICAgIGNoYWluSWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH07XG4gIH07XG59XG4iXSwibmFtZXMiOlsiZ2V0QWN0aXZlQWNjb3VudCIsIldhbGxldENvbm5lY3RDbGllbnQiLCJXQ19NRVRIT0RTIiwiV0NfRVZFTlRTIiwic2V0dXBXYWxsZXRDb25uZWN0U3RhdGUiLCJwYXJhbXMiLCJjbGllbnQiLCJzZXNzaW9uIiwiaW5pdCIsInByb2plY3RJZCIsIm1ldGFkYXRhIiwicmVsYXlVcmwiLCJsZW5ndGgiLCJsYXN0S2V5SW5kZXgiLCJrZXlzIiwiZ2V0Iiwic3Vic2NyaXB0aW9ucyIsIldhbGxldENvbm5lY3QiLCJvcHRpb25zIiwic3RvcmUiLCJlbWl0dGVyIiwibG9nZ2VyIiwiX3N0YXRlIiwiZ2V0Q2hhaW5JZCIsImNoYWluSWQiLCJuZXR3b3JrSWQiLCJuZXR3b3JrIiwiaW5jbHVkZXMiLCJFcnJvciIsImdldEFjY291bnRzIiwibmFtZXNwYWNlcyIsImFjY291bnRzIiwibWFwIiwieCIsImFjY291bnRJZCIsInNwbGl0IiwiY2xlYW51cCIsImZvckVhY2giLCJzdWJzY3JpcHRpb24iLCJyZW1vdmUiLCJzaWduT3V0IiwiZGlzY29ubmVjdCIsInRvcGljIiwicmVhc29uIiwiY29kZSIsIm1lc3NhZ2UiLCJzZXR1cEV2ZW50cyIsInB1c2giLCJvbiIsImV2ZW50IiwibG9nIiwiZW1pdCIsInNpZ25JbiIsImV4aXN0aW5nQWNjb3VudHMiLCJjb25uZWN0IiwicmVxdWlyZWROYW1lc3BhY2VzIiwibmVhciIsImNoYWlucyIsIm1ldGhvZHMiLCJldmVudHMiLCJlcnIiLCJ2ZXJpZnlPd25lciIsIm5hbWUiLCJzaWduQW5kU2VuZFRyYW5zYWN0aW9uIiwic2lnbmVySWQiLCJyZWNlaXZlcklkIiwiYWN0aW9ucyIsImNvbnRyYWN0IiwiZ2V0U3RhdGUiLCJhY2NvdW50IiwidHJhbnNhY3Rpb24iLCJjb250cmFjdElkIiwicmVxdWVzdCIsIm1ldGhvZCIsInNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zIiwidHJhbnNhY3Rpb25zIiwic2V0dXBXYWxsZXRDb25uZWN0IiwiaWNvblVybCIsImRlcHJlY2F0ZWQiLCJpZCIsInR5cGUiLCJkZXNjcmlwdGlvbiIsImF2YWlsYWJsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/wallet-connect/src/lib/wallet-connect.ts\n");

/***/ }),

/***/ "../../packages/wallet-utils/src/index.ts":
/*!************************************************!*\
  !*** ../../packages/wallet-utils/src/index.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createAction": () => (/* reexport safe */ _lib_wallet_utils__WEBPACK_IMPORTED_MODULE_0__.createAction),
/* harmony export */   "signTransactions": () => (/* reexport safe */ _lib_wallet_utils__WEBPACK_IMPORTED_MODULE_0__.signTransactions)
/* harmony export */ });
/* harmony import */ var _lib_wallet_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/wallet-utils */ "../../packages/wallet-utils/src/lib/wallet-utils.ts");


/***/ }),

/***/ "../../packages/wallet-utils/src/lib/create-action.ts":
/*!************************************************************!*\
  !*** ../../packages/wallet-utils/src/lib/create-action.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createAction\": () => (/* binding */ createAction)\n/* harmony export */ });\n/* harmony import */ var bn_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bn.js */ \"bn.js\");\n/* harmony import */ var bn_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bn_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! near-api-js */ \"near-api-js\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(near_api_js__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nconst getAccessKey = permission => {\n  if (permission === \"FullAccess\") {\n    return near_api_js__WEBPACK_IMPORTED_MODULE_1__.transactions.fullAccessKey();\n  }\n\n  const {\n    receiverId,\n    methodNames = []\n  } = permission;\n  const allowance = permission.allowance ? new bn_js__WEBPACK_IMPORTED_MODULE_0__.BN(permission.allowance) : undefined;\n  return near_api_js__WEBPACK_IMPORTED_MODULE_1__.transactions.functionCallAccessKey(receiverId, methodNames, allowance);\n};\n\nconst createAction = action => {\n  switch (action.type) {\n    case \"CreateAccount\":\n      return near_api_js__WEBPACK_IMPORTED_MODULE_1__.transactions.createAccount();\n\n    case \"DeployContract\":\n      {\n        const {\n          code\n        } = action.params;\n        return near_api_js__WEBPACK_IMPORTED_MODULE_1__.transactions.deployContract(code);\n      }\n\n    case \"FunctionCall\":\n      {\n        const {\n          methodName,\n          args,\n          gas,\n          deposit\n        } = action.params;\n        return near_api_js__WEBPACK_IMPORTED_MODULE_1__.transactions.functionCall(methodName, args, new bn_js__WEBPACK_IMPORTED_MODULE_0__.BN(gas), new bn_js__WEBPACK_IMPORTED_MODULE_0__.BN(deposit));\n      }\n\n    case \"Transfer\":\n      {\n        const {\n          deposit\n        } = action.params;\n        return near_api_js__WEBPACK_IMPORTED_MODULE_1__.transactions.transfer(new bn_js__WEBPACK_IMPORTED_MODULE_0__.BN(deposit));\n      }\n\n    case \"Stake\":\n      {\n        const {\n          stake,\n          publicKey\n        } = action.params;\n        return near_api_js__WEBPACK_IMPORTED_MODULE_1__.transactions.stake(new bn_js__WEBPACK_IMPORTED_MODULE_0__.BN(stake), near_api_js__WEBPACK_IMPORTED_MODULE_1__.utils.PublicKey.from(publicKey));\n      }\n\n    case \"AddKey\":\n      {\n        const {\n          publicKey,\n          accessKey\n        } = action.params;\n        return near_api_js__WEBPACK_IMPORTED_MODULE_1__.transactions.addKey(near_api_js__WEBPACK_IMPORTED_MODULE_1__.utils.PublicKey.from(publicKey), // TODO: Use accessKey.nonce? near-api-js seems to think 0 is fine?\n        getAccessKey(accessKey.permission));\n      }\n\n    case \"DeleteKey\":\n      {\n        const {\n          publicKey\n        } = action.params;\n        return near_api_js__WEBPACK_IMPORTED_MODULE_1__.transactions.deleteKey(near_api_js__WEBPACK_IMPORTED_MODULE_1__.utils.PublicKey.from(publicKey));\n      }\n\n    case \"DeleteAccount\":\n      {\n        const {\n          beneficiaryId\n        } = action.params;\n        return near_api_js__WEBPACK_IMPORTED_MODULE_1__.transactions.deleteAccount(beneficiaryId);\n      }\n\n    default:\n      throw new Error(\"Invalid action type\");\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvd2FsbGV0LXV0aWxzL3NyYy9saWIvY3JlYXRlLWFjdGlvbi50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7O0FBR0EsTUFBTUcsWUFBWSxHQUFJQyxVQUFELElBQWtDO0VBQ3JELElBQUlBLFVBQVUsS0FBSyxZQUFuQixFQUFpQztJQUMvQixPQUFPRixtRUFBQSxFQUFQO0VBQ0Q7O0VBRUQsTUFBTTtJQUFFSSxVQUFGO0lBQWNDLFdBQVcsR0FBRztFQUE1QixJQUFtQ0gsVUFBekM7RUFDQSxNQUFNSSxTQUFTLEdBQUdKLFVBQVUsQ0FBQ0ksU0FBWCxHQUNkLElBQUlSLHFDQUFKLENBQU9JLFVBQVUsQ0FBQ0ksU0FBbEIsQ0FEYyxHQUVkQyxTQUZKO0VBSUEsT0FBT1AsMkVBQUEsQ0FBbUNJLFVBQW5DLEVBQStDQyxXQUEvQyxFQUE0REMsU0FBNUQsQ0FBUDtBQUNELENBWEQ7O0FBYU8sTUFBTUcsWUFBWSxHQUFJQyxNQUFELElBQW9CO0VBQzlDLFFBQVFBLE1BQU0sQ0FBQ0MsSUFBZjtJQUNFLEtBQUssZUFBTDtNQUNFLE9BQU9YLG1FQUFBLEVBQVA7O0lBQ0YsS0FBSyxnQkFBTDtNQUF1QjtRQUNyQixNQUFNO1VBQUVhO1FBQUYsSUFBV0gsTUFBTSxDQUFDSSxNQUF4QjtRQUVBLE9BQU9kLG9FQUFBLENBQTRCYSxJQUE1QixDQUFQO01BQ0Q7O0lBQ0QsS0FBSyxjQUFMO01BQXFCO1FBQ25CLE1BQU07VUFBRUcsVUFBRjtVQUFjQyxJQUFkO1VBQW9CQyxHQUFwQjtVQUF5QkM7UUFBekIsSUFBcUNULE1BQU0sQ0FBQ0ksTUFBbEQ7UUFFQSxPQUFPZCxrRUFBQSxDQUNMZ0IsVUFESyxFQUVMQyxJQUZLLEVBR0wsSUFBSW5CLHFDQUFKLENBQU9vQixHQUFQLENBSEssRUFJTCxJQUFJcEIscUNBQUosQ0FBT3FCLE9BQVAsQ0FKSyxDQUFQO01BTUQ7O0lBQ0QsS0FBSyxVQUFMO01BQWlCO1FBQ2YsTUFBTTtVQUFFQTtRQUFGLElBQWNULE1BQU0sQ0FBQ0ksTUFBM0I7UUFFQSxPQUFPZCw4REFBQSxDQUFzQixJQUFJRixxQ0FBSixDQUFPcUIsT0FBUCxDQUF0QixDQUFQO01BQ0Q7O0lBQ0QsS0FBSyxPQUFMO01BQWM7UUFDWixNQUFNO1VBQUVHLEtBQUY7VUFBU0M7UUFBVCxJQUF1QmIsTUFBTSxDQUFDSSxNQUFwQztRQUVBLE9BQU9kLDJEQUFBLENBQW1CLElBQUlGLHFDQUFKLENBQU93QixLQUFQLENBQW5CLEVBQWtDdkIsNkRBQUEsQ0FBcUJ3QixTQUFyQixDQUFsQyxDQUFQO01BQ0Q7O0lBQ0QsS0FBSyxRQUFMO01BQWU7UUFDYixNQUFNO1VBQUVBLFNBQUY7VUFBYUc7UUFBYixJQUEyQmhCLE1BQU0sQ0FBQ0ksTUFBeEM7UUFFQSxPQUFPZCw0REFBQSxDQUNMRCw2REFBQSxDQUFxQndCLFNBQXJCLENBREssRUFFTDtRQUNBdEIsWUFBWSxDQUFDeUIsU0FBUyxDQUFDeEIsVUFBWCxDQUhQLENBQVA7TUFLRDs7SUFDRCxLQUFLLFdBQUw7TUFBa0I7UUFDaEIsTUFBTTtVQUFFcUI7UUFBRixJQUFnQmIsTUFBTSxDQUFDSSxNQUE3QjtRQUVBLE9BQU9kLCtEQUFBLENBQXVCRCw2REFBQSxDQUFxQndCLFNBQXJCLENBQXZCLENBQVA7TUFDRDs7SUFDRCxLQUFLLGVBQUw7TUFBc0I7UUFDcEIsTUFBTTtVQUFFTTtRQUFGLElBQW9CbkIsTUFBTSxDQUFDSSxNQUFqQztRQUVBLE9BQU9kLG1FQUFBLENBQTJCNkIsYUFBM0IsQ0FBUDtNQUNEOztJQUNEO01BQ0UsTUFBTSxJQUFJRSxLQUFKLENBQVUscUJBQVYsQ0FBTjtFQWhESjtBQWtERCxDQW5ETSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9wYWNrYWdlcy93YWxsZXQtdXRpbHMvc3JjL2xpYi9jcmVhdGUtYWN0aW9uLnRzPzgzZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQk4gfSBmcm9tIFwiYm4uanNcIjtcbmltcG9ydCB7IHV0aWxzLCB0cmFuc2FjdGlvbnMgfSBmcm9tIFwibmVhci1hcGktanNcIjtcbmltcG9ydCB0eXBlIHsgQWRkS2V5UGVybWlzc2lvbiwgQWN0aW9uIH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9jb3JlXCI7XG5cbmNvbnN0IGdldEFjY2Vzc0tleSA9IChwZXJtaXNzaW9uOiBBZGRLZXlQZXJtaXNzaW9uKSA9PiB7XG4gIGlmIChwZXJtaXNzaW9uID09PSBcIkZ1bGxBY2Nlc3NcIikge1xuICAgIHJldHVybiB0cmFuc2FjdGlvbnMuZnVsbEFjY2Vzc0tleSgpO1xuICB9XG5cbiAgY29uc3QgeyByZWNlaXZlcklkLCBtZXRob2ROYW1lcyA9IFtdIH0gPSBwZXJtaXNzaW9uO1xuICBjb25zdCBhbGxvd2FuY2UgPSBwZXJtaXNzaW9uLmFsbG93YW5jZVxuICAgID8gbmV3IEJOKHBlcm1pc3Npb24uYWxsb3dhbmNlKVxuICAgIDogdW5kZWZpbmVkO1xuXG4gIHJldHVybiB0cmFuc2FjdGlvbnMuZnVuY3Rpb25DYWxsQWNjZXNzS2V5KHJlY2VpdmVySWQsIG1ldGhvZE5hbWVzLCBhbGxvd2FuY2UpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUFjdGlvbiA9IChhY3Rpb246IEFjdGlvbikgPT4ge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBcIkNyZWF0ZUFjY291bnRcIjpcbiAgICAgIHJldHVybiB0cmFuc2FjdGlvbnMuY3JlYXRlQWNjb3VudCgpO1xuICAgIGNhc2UgXCJEZXBsb3lDb250cmFjdFwiOiB7XG4gICAgICBjb25zdCB7IGNvZGUgfSA9IGFjdGlvbi5wYXJhbXM7XG5cbiAgICAgIHJldHVybiB0cmFuc2FjdGlvbnMuZGVwbG95Q29udHJhY3QoY29kZSk7XG4gICAgfVxuICAgIGNhc2UgXCJGdW5jdGlvbkNhbGxcIjoge1xuICAgICAgY29uc3QgeyBtZXRob2ROYW1lLCBhcmdzLCBnYXMsIGRlcG9zaXQgfSA9IGFjdGlvbi5wYXJhbXM7XG5cbiAgICAgIHJldHVybiB0cmFuc2FjdGlvbnMuZnVuY3Rpb25DYWxsKFxuICAgICAgICBtZXRob2ROYW1lLFxuICAgICAgICBhcmdzLFxuICAgICAgICBuZXcgQk4oZ2FzKSxcbiAgICAgICAgbmV3IEJOKGRlcG9zaXQpXG4gICAgICApO1xuICAgIH1cbiAgICBjYXNlIFwiVHJhbnNmZXJcIjoge1xuICAgICAgY29uc3QgeyBkZXBvc2l0IH0gPSBhY3Rpb24ucGFyYW1zO1xuXG4gICAgICByZXR1cm4gdHJhbnNhY3Rpb25zLnRyYW5zZmVyKG5ldyBCTihkZXBvc2l0KSk7XG4gICAgfVxuICAgIGNhc2UgXCJTdGFrZVwiOiB7XG4gICAgICBjb25zdCB7IHN0YWtlLCBwdWJsaWNLZXkgfSA9IGFjdGlvbi5wYXJhbXM7XG5cbiAgICAgIHJldHVybiB0cmFuc2FjdGlvbnMuc3Rha2UobmV3IEJOKHN0YWtlKSwgdXRpbHMuUHVibGljS2V5LmZyb20ocHVibGljS2V5KSk7XG4gICAgfVxuICAgIGNhc2UgXCJBZGRLZXlcIjoge1xuICAgICAgY29uc3QgeyBwdWJsaWNLZXksIGFjY2Vzc0tleSB9ID0gYWN0aW9uLnBhcmFtcztcblxuICAgICAgcmV0dXJuIHRyYW5zYWN0aW9ucy5hZGRLZXkoXG4gICAgICAgIHV0aWxzLlB1YmxpY0tleS5mcm9tKHB1YmxpY0tleSksXG4gICAgICAgIC8vIFRPRE86IFVzZSBhY2Nlc3NLZXkubm9uY2U/IG5lYXItYXBpLWpzIHNlZW1zIHRvIHRoaW5rIDAgaXMgZmluZT9cbiAgICAgICAgZ2V0QWNjZXNzS2V5KGFjY2Vzc0tleS5wZXJtaXNzaW9uKVxuICAgICAgKTtcbiAgICB9XG4gICAgY2FzZSBcIkRlbGV0ZUtleVwiOiB7XG4gICAgICBjb25zdCB7IHB1YmxpY0tleSB9ID0gYWN0aW9uLnBhcmFtcztcblxuICAgICAgcmV0dXJuIHRyYW5zYWN0aW9ucy5kZWxldGVLZXkodXRpbHMuUHVibGljS2V5LmZyb20ocHVibGljS2V5KSk7XG4gICAgfVxuICAgIGNhc2UgXCJEZWxldGVBY2NvdW50XCI6IHtcbiAgICAgIGNvbnN0IHsgYmVuZWZpY2lhcnlJZCB9ID0gYWN0aW9uLnBhcmFtcztcblxuICAgICAgcmV0dXJuIHRyYW5zYWN0aW9ucy5kZWxldGVBY2NvdW50KGJlbmVmaWNpYXJ5SWQpO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhY3Rpb24gdHlwZVwiKTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJCTiIsInV0aWxzIiwidHJhbnNhY3Rpb25zIiwiZ2V0QWNjZXNzS2V5IiwicGVybWlzc2lvbiIsImZ1bGxBY2Nlc3NLZXkiLCJyZWNlaXZlcklkIiwibWV0aG9kTmFtZXMiLCJhbGxvd2FuY2UiLCJ1bmRlZmluZWQiLCJmdW5jdGlvbkNhbGxBY2Nlc3NLZXkiLCJjcmVhdGVBY3Rpb24iLCJhY3Rpb24iLCJ0eXBlIiwiY3JlYXRlQWNjb3VudCIsImNvZGUiLCJwYXJhbXMiLCJkZXBsb3lDb250cmFjdCIsIm1ldGhvZE5hbWUiLCJhcmdzIiwiZ2FzIiwiZGVwb3NpdCIsImZ1bmN0aW9uQ2FsbCIsInRyYW5zZmVyIiwic3Rha2UiLCJwdWJsaWNLZXkiLCJQdWJsaWNLZXkiLCJmcm9tIiwiYWNjZXNzS2V5IiwiYWRkS2V5IiwiZGVsZXRlS2V5IiwiYmVuZWZpY2lhcnlJZCIsImRlbGV0ZUFjY291bnQiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../packages/wallet-utils/src/lib/create-action.ts\n");

/***/ }),

/***/ "../../packages/wallet-utils/src/lib/sign-transactions.ts":
/*!****************************************************************!*\
  !*** ../../packages/wallet-utils/src/lib/sign-transactions.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"signTransactions\": () => (/* binding */ signTransactions)\n/* harmony export */ });\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! near-api-js */ \"near-api-js\");\n/* harmony import */ var near_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(near_api_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _create_action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./create-action */ \"../../packages/wallet-utils/src/lib/create-action.ts\");\n\n\nconst signTransactions = async (transactions, signer, network) => {\n  const provider = new near_api_js__WEBPACK_IMPORTED_MODULE_0__.providers.JsonRpcProvider({\n    url: network.nodeUrl\n  });\n  const signedTransactions = [];\n\n  for (let i = 0; i < transactions.length; i++) {\n    const publicKey = await signer.getPublicKey(transactions[i].signerId, network.networkId);\n    const [block, accessKey] = await Promise.all([provider.block({\n      finality: \"final\"\n    }), provider.query({\n      request_type: \"view_access_key\",\n      finality: \"final\",\n      account_id: transactions[i].signerId,\n      public_key: publicKey.toString()\n    })]);\n    const actions = transactions[i].actions.map(action => (0,_create_action__WEBPACK_IMPORTED_MODULE_1__.createAction)(action));\n    const transaction = near_api_js__WEBPACK_IMPORTED_MODULE_0__.transactions.createTransaction(transactions[i].signerId, near_api_js__WEBPACK_IMPORTED_MODULE_0__.utils.PublicKey.from(publicKey.toString()), transactions[i].receiverId, accessKey.nonce + i + 1, actions, near_api_js__WEBPACK_IMPORTED_MODULE_0__.utils.serialize.base_decode(block.header.hash));\n    const response = await near_api_js__WEBPACK_IMPORTED_MODULE_0__.transactions.signTransaction(transaction, signer, transactions[i].signerId, network.networkId);\n    signedTransactions.push(response[1]);\n  }\n\n  return signedTransactions;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvd2FsbGV0LXV0aWxzL3NyYy9saWIvc2lnbi10cmFuc2FjdGlvbnMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBUUE7QUFFTyxNQUFNSyxnQkFBZ0IsR0FBRyxPQUM5QkosWUFEOEIsRUFFOUJLLE1BRjhCLEVBRzlCQyxPQUg4QixLQUkzQjtFQUNILE1BQU1DLFFBQVEsR0FBRyxJQUFJTCxrRUFBSixDQUE4QjtJQUM3Q08sR0FBRyxFQUFFSCxPQUFPLENBQUNJO0VBRGdDLENBQTlCLENBQWpCO0VBSUEsTUFBTUMsa0JBQTZELEdBQUcsRUFBdEU7O0VBRUEsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHWixZQUFZLENBQUNhLE1BQWpDLEVBQXlDRCxDQUFDLEVBQTFDLEVBQThDO0lBQzVDLE1BQU1FLFNBQVMsR0FBRyxNQUFNVCxNQUFNLENBQUNVLFlBQVAsQ0FDdEJmLFlBQVksQ0FBQ1ksQ0FBRCxDQUFaLENBQWdCSSxRQURNLEVBRXRCVixPQUFPLENBQUNXLFNBRmMsQ0FBeEI7SUFLQSxNQUFNLENBQUNDLEtBQUQsRUFBUUMsU0FBUixJQUFxQixNQUFNQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxDQUMzQ2QsUUFBUSxDQUFDVyxLQUFULENBQWU7TUFBRUksUUFBUSxFQUFFO0lBQVosQ0FBZixDQUQyQyxFQUUzQ2YsUUFBUSxDQUFDZ0IsS0FBVCxDQUE4QjtNQUM1QkMsWUFBWSxFQUFFLGlCQURjO01BRTVCRixRQUFRLEVBQUUsT0FGa0I7TUFHNUJHLFVBQVUsRUFBRXpCLFlBQVksQ0FBQ1ksQ0FBRCxDQUFaLENBQWdCSSxRQUhBO01BSTVCVSxVQUFVLEVBQUVaLFNBQVMsQ0FBQ2EsUUFBVjtJQUpnQixDQUE5QixDQUYyQyxDQUFaLENBQWpDO0lBVUEsTUFBTUMsT0FBTyxHQUFHNUIsWUFBWSxDQUFDWSxDQUFELENBQVosQ0FBZ0JnQixPQUFoQixDQUF3QkMsR0FBeEIsQ0FBNkJDLE1BQUQsSUFDMUMzQiw0REFBWSxDQUFDMkIsTUFBRCxDQURFLENBQWhCO0lBSUEsTUFBTUMsV0FBVyxHQUFHOUIsdUVBQUEsQ0FDbEJELFlBQVksQ0FBQ1ksQ0FBRCxDQUFaLENBQWdCSSxRQURFLEVBRWxCakIsNkRBQUEsQ0FBcUJlLFNBQVMsQ0FBQ2EsUUFBVixFQUFyQixDQUZrQixFQUdsQjNCLFlBQVksQ0FBQ1ksQ0FBRCxDQUFaLENBQWdCdUIsVUFIRSxFQUlsQmhCLFNBQVMsQ0FBQ2lCLEtBQVYsR0FBa0J4QixDQUFsQixHQUFzQixDQUpKLEVBS2xCZ0IsT0FMa0IsRUFNbEI3QixvRUFBQSxDQUE0Qm1CLEtBQUssQ0FBQ3FCLE1BQU4sQ0FBYUMsSUFBekMsQ0FOa0IsQ0FBcEI7SUFTQSxNQUFNQyxRQUFRLEdBQUcsTUFBTXhDLHFFQUFBLENBQ3JCOEIsV0FEcUIsRUFFckIxQixNQUZxQixFQUdyQkwsWUFBWSxDQUFDWSxDQUFELENBQVosQ0FBZ0JJLFFBSEssRUFJckJWLE9BQU8sQ0FBQ1csU0FKYSxDQUF2QjtJQU9BTixrQkFBa0IsQ0FBQ2dDLElBQW5CLENBQXdCRixRQUFRLENBQUMsQ0FBRCxDQUFoQztFQUNEOztFQUVELE9BQU85QixrQkFBUDtBQUNELENBbkRNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL3BhY2thZ2VzL3dhbGxldC11dGlscy9zcmMvbGliL3NpZ24tdHJhbnNhY3Rpb25zLnRzPzVhN2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdXRpbHMsXG4gIHRyYW5zYWN0aW9ucyBhcyBuZWFyVHJhbnNhY3Rpb25zLFxuICBTaWduZXIsXG4gIHByb3ZpZGVycyxcbn0gZnJvbSBcIm5lYXItYXBpLWpzXCI7XG5pbXBvcnQgdHlwZSB7IE5ldHdvcmssIFRyYW5zYWN0aW9uIH0gZnJvbSBcIkBuZWFyLXdhbGxldC1zZWxlY3Rvci9jb3JlXCI7XG5pbXBvcnQgdHlwZSB7IEFjY2Vzc0tleVZpZXcgfSBmcm9tIFwibmVhci1hcGktanMvbGliL3Byb3ZpZGVycy9wcm92aWRlclwiO1xuaW1wb3J0IHsgY3JlYXRlQWN0aW9uIH0gZnJvbSBcIi4vY3JlYXRlLWFjdGlvblwiO1xuXG5leHBvcnQgY29uc3Qgc2lnblRyYW5zYWN0aW9ucyA9IGFzeW5jIChcbiAgdHJhbnNhY3Rpb25zOiBBcnJheTxUcmFuc2FjdGlvbj4sXG4gIHNpZ25lcjogU2lnbmVyLFxuICBuZXR3b3JrOiBOZXR3b3JrXG4pID0+IHtcbiAgY29uc3QgcHJvdmlkZXIgPSBuZXcgcHJvdmlkZXJzLkpzb25ScGNQcm92aWRlcih7XG4gICAgdXJsOiBuZXR3b3JrLm5vZGVVcmwsXG4gIH0pO1xuXG4gIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uczogQXJyYXk8bmVhclRyYW5zYWN0aW9ucy5TaWduZWRUcmFuc2FjdGlvbj4gPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYW5zYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHB1YmxpY0tleSA9IGF3YWl0IHNpZ25lci5nZXRQdWJsaWNLZXkoXG4gICAgICB0cmFuc2FjdGlvbnNbaV0uc2lnbmVySWQsXG4gICAgICBuZXR3b3JrLm5ldHdvcmtJZFxuICAgICk7XG5cbiAgICBjb25zdCBbYmxvY2ssIGFjY2Vzc0tleV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBwcm92aWRlci5ibG9jayh7IGZpbmFsaXR5OiBcImZpbmFsXCIgfSksXG4gICAgICBwcm92aWRlci5xdWVyeTxBY2Nlc3NLZXlWaWV3Pih7XG4gICAgICAgIHJlcXVlc3RfdHlwZTogXCJ2aWV3X2FjY2Vzc19rZXlcIixcbiAgICAgICAgZmluYWxpdHk6IFwiZmluYWxcIixcbiAgICAgICAgYWNjb3VudF9pZDogdHJhbnNhY3Rpb25zW2ldLnNpZ25lcklkLFxuICAgICAgICBwdWJsaWNfa2V5OiBwdWJsaWNLZXkudG9TdHJpbmcoKSxcbiAgICAgIH0pLFxuICAgIF0pO1xuXG4gICAgY29uc3QgYWN0aW9ucyA9IHRyYW5zYWN0aW9uc1tpXS5hY3Rpb25zLm1hcCgoYWN0aW9uKSA9PlxuICAgICAgY3JlYXRlQWN0aW9uKGFjdGlvbilcbiAgICApO1xuXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBuZWFyVHJhbnNhY3Rpb25zLmNyZWF0ZVRyYW5zYWN0aW9uKFxuICAgICAgdHJhbnNhY3Rpb25zW2ldLnNpZ25lcklkLFxuICAgICAgdXRpbHMuUHVibGljS2V5LmZyb20ocHVibGljS2V5LnRvU3RyaW5nKCkpLFxuICAgICAgdHJhbnNhY3Rpb25zW2ldLnJlY2VpdmVySWQsXG4gICAgICBhY2Nlc3NLZXkubm9uY2UgKyBpICsgMSxcbiAgICAgIGFjdGlvbnMsXG4gICAgICB1dGlscy5zZXJpYWxpemUuYmFzZV9kZWNvZGUoYmxvY2suaGVhZGVyLmhhc2gpXG4gICAgKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbmVhclRyYW5zYWN0aW9ucy5zaWduVHJhbnNhY3Rpb24oXG4gICAgICB0cmFuc2FjdGlvbixcbiAgICAgIHNpZ25lcixcbiAgICAgIHRyYW5zYWN0aW9uc1tpXS5zaWduZXJJZCxcbiAgICAgIG5ldHdvcmsubmV0d29ya0lkXG4gICAgKTtcblxuICAgIHNpZ25lZFRyYW5zYWN0aW9ucy5wdXNoKHJlc3BvbnNlWzFdKTtcbiAgfVxuXG4gIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbnM7XG59O1xuIl0sIm5hbWVzIjpbInV0aWxzIiwidHJhbnNhY3Rpb25zIiwibmVhclRyYW5zYWN0aW9ucyIsInByb3ZpZGVycyIsImNyZWF0ZUFjdGlvbiIsInNpZ25UcmFuc2FjdGlvbnMiLCJzaWduZXIiLCJuZXR3b3JrIiwicHJvdmlkZXIiLCJKc29uUnBjUHJvdmlkZXIiLCJ1cmwiLCJub2RlVXJsIiwic2lnbmVkVHJhbnNhY3Rpb25zIiwiaSIsImxlbmd0aCIsInB1YmxpY0tleSIsImdldFB1YmxpY0tleSIsInNpZ25lcklkIiwibmV0d29ya0lkIiwiYmxvY2siLCJhY2Nlc3NLZXkiLCJQcm9taXNlIiwiYWxsIiwiZmluYWxpdHkiLCJxdWVyeSIsInJlcXVlc3RfdHlwZSIsImFjY291bnRfaWQiLCJwdWJsaWNfa2V5IiwidG9TdHJpbmciLCJhY3Rpb25zIiwibWFwIiwiYWN0aW9uIiwidHJhbnNhY3Rpb24iLCJjcmVhdGVUcmFuc2FjdGlvbiIsIlB1YmxpY0tleSIsImZyb20iLCJyZWNlaXZlcklkIiwibm9uY2UiLCJzZXJpYWxpemUiLCJiYXNlX2RlY29kZSIsImhlYWRlciIsImhhc2giLCJyZXNwb25zZSIsInNpZ25UcmFuc2FjdGlvbiIsInB1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../packages/wallet-utils/src/lib/sign-transactions.ts\n");

/***/ }),

/***/ "../../packages/wallet-utils/src/lib/wallet-utils.ts":
/*!***********************************************************!*\
  !*** ../../packages/wallet-utils/src/lib/wallet-utils.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createAction\": () => (/* reexport safe */ _create_action__WEBPACK_IMPORTED_MODULE_0__.createAction),\n/* harmony export */   \"signTransactions\": () => (/* reexport safe */ _sign_transactions__WEBPACK_IMPORTED_MODULE_1__.signTransactions)\n/* harmony export */ });\n/* harmony import */ var _create_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./create-action */ \"../../packages/wallet-utils/src/lib/create-action.ts\");\n/* harmony import */ var _sign_transactions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sign-transactions */ \"../../packages/wallet-utils/src/lib/sign-transactions.ts\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vcGFja2FnZXMvd2FsbGV0LXV0aWxzL3NyYy9saWIvd2FsbGV0LXV0aWxzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL3BhY2thZ2VzL3dhbGxldC11dGlscy9zcmMvbGliL3dhbGxldC11dGlscy50cz84OWZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUFjdGlvbiB9IGZyb20gXCIuL2NyZWF0ZS1hY3Rpb25cIjtcbmltcG9ydCB7IHNpZ25UcmFuc2FjdGlvbnMgfSBmcm9tIFwiLi9zaWduLXRyYW5zYWN0aW9uc1wiO1xuXG5leHBvcnQgeyBjcmVhdGVBY3Rpb24sIHNpZ25UcmFuc2FjdGlvbnMgfTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVBY3Rpb24iLCJzaWduVHJhbnNhY3Rpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/wallet-utils/src/lib/wallet-utils.ts\n");

/***/ }),

/***/ "@ledgerhq/hw-transport-webhid":
/*!************************************************!*\
  !*** external "@ledgerhq/hw-transport-webhid" ***!
  \************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@ledgerhq/hw-transport-webhid");

/***/ }),

/***/ "@meteorwallet/sdk":
/*!************************************!*\
  !*** external "@meteorwallet/sdk" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@meteorwallet/sdk");

/***/ }),

/***/ "@nightlylabs/connect":
/*!***************************************!*\
  !*** external "@nightlylabs/connect" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nightlylabs/connect");

/***/ }),

/***/ "@walletconnect/qrcode-modal":
/*!**********************************************!*\
  !*** external "@walletconnect/qrcode-modal" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@walletconnect/qrcode-modal");

/***/ }),

/***/ "@walletconnect/sign-client":
/*!*********************************************!*\
  !*** external "@walletconnect/sign-client" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@walletconnect/sign-client");

/***/ }),

/***/ "bn.js":
/*!************************!*\
  !*** external "bn.js" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("bn.js");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "is-mobile":
/*!****************************!*\
  !*** external "is-mobile" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("is-mobile");

/***/ }),

/***/ "near-api-js":
/*!******************************!*\
  !*** external "near-api-js" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("near-api-js");

/***/ }),

/***/ "near-api-js/lib/utils/errors":
/*!***********************************************!*\
  !*** external "near-api-js/lib/utils/errors" ***!
  \***********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("near-api-js/lib/utils/errors");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom/client":
/*!***********************************!*\
  !*** external "react-dom/client" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom/client");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "rxjs":
/*!***********************!*\
  !*** external "rxjs" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("rxjs");

/***/ }),

/***/ "big.js":
/*!*************************!*\
  !*** external "big.js" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = import("big.js");;

/***/ }),

/***/ "../../dist/packages/modal-ui/index.js":
/*!*********************************************!*\
  !*** ../../dist/packages/modal-ui/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setupModal\": () => (/* binding */ setupModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"react/jsx-runtime\");\n/* harmony import */ var react_dom_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom/client */ \"react-dom/client\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n\n\n\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nvar fails$f = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n\nvar fails$e = fails$f;\n\nvar functionBindNative = !fails$e(function () {\n  // eslint-disable-next-line es-x/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n\nvar NATIVE_BIND$3 = functionBindNative;\n\nvar FunctionPrototype$2 = Function.prototype;\nvar bind$5 = FunctionPrototype$2.bind;\nvar call$e = FunctionPrototype$2.call;\nvar uncurryThis$g = NATIVE_BIND$3 && bind$5.bind(call$e, call$e);\n\nvar functionUncurryThis = NATIVE_BIND$3 ? function (fn) {\n  return fn && uncurryThis$g(fn);\n} : function (fn) {\n  return fn && function () {\n    return call$e.apply(fn, arguments);\n  };\n};\n\nvar uncurryThis$f = functionUncurryThis;\n\nvar toString$4 = uncurryThis$f({}.toString);\nvar stringSlice$1 = uncurryThis$f(''.slice);\n\nvar classofRaw$1 = function (it) {\n  return stringSlice$1(toString$4(it), 8, -1);\n};\n\nvar uncurryThis$e = functionUncurryThis;\nvar fails$d = fails$f;\nvar classof$5 = classofRaw$1;\n\nvar $Object$4 = Object;\nvar split = uncurryThis$e(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar indexedObject = fails$d(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object$4('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof$5(it) == 'String' ? split(it, '') : $Object$4(it);\n} : $Object$4;\n\nvar $TypeError$d = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nvar requireObjectCoercible$2 = function (it) {\n  if (it == undefined) throw $TypeError$d(\"Can't call method on \" + it);\n  return it;\n};\n\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject$2 = indexedObject;\nvar requireObjectCoercible$1 = requireObjectCoercible$2;\n\nvar toIndexedObject$5 = function (it) {\n  return IndexedObject$2(requireObjectCoercible$1(it));\n};\n\nvar check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global$k =\n  // eslint-disable-next-line es-x/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof commonjsGlobal == 'object' && commonjsGlobal) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n\nvar shared$3 = {exports: {}};\n\nvar global$j = global$k;\n\n// eslint-disable-next-line es-x/no-object-defineproperty -- safe\nvar defineProperty$6 = Object.defineProperty;\n\nvar defineGlobalProperty$3 = function (key, value) {\n  try {\n    defineProperty$6(global$j, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global$j[key] = value;\n  } return value;\n};\n\nvar global$i = global$k;\nvar defineGlobalProperty$2 = defineGlobalProperty$3;\n\nvar SHARED = '__core-js_shared__';\nvar store$3 = global$i[SHARED] || defineGlobalProperty$2(SHARED, {});\n\nvar sharedStore = store$3;\n\nvar store$2 = sharedStore;\n\n(shared$3.exports = function (key, value) {\n  return store$2[key] || (store$2[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.23.3',\n  mode: 'global',\n  copyright: ' 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.23.3/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n\nvar requireObjectCoercible = requireObjectCoercible$2;\n\nvar $Object$3 = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nvar toObject$5 = function (argument) {\n  return $Object$3(requireObjectCoercible(argument));\n};\n\nvar uncurryThis$d = functionUncurryThis;\nvar toObject$4 = toObject$5;\n\nvar hasOwnProperty = uncurryThis$d({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es-x/no-object-hasown -- safe\nvar hasOwnProperty_1 = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject$4(it), key);\n};\n\nvar uncurryThis$c = functionUncurryThis;\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString$3 = uncurryThis$c(1.0.toString);\n\nvar uid$2 = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString$3(++id + postfix, 36);\n};\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nvar isCallable$l = function (argument) {\n  return typeof argument == 'function';\n};\n\nvar global$h = global$k;\nvar isCallable$k = isCallable$l;\n\nvar aFunction = function (argument) {\n  return isCallable$k(argument) ? argument : undefined;\n};\n\nvar getBuiltIn$8 = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global$h[namespace]) : global$h[namespace] && global$h[namespace][method];\n};\n\nvar getBuiltIn$7 = getBuiltIn$8;\n\nvar engineUserAgent = getBuiltIn$7('navigator', 'userAgent') || '';\n\nvar global$g = global$k;\nvar userAgent$5 = engineUserAgent;\n\nvar process$3 = global$g.process;\nvar Deno$1 = global$g.Deno;\nvar versions = process$3 && process$3.versions || Deno$1 && Deno$1.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent$5) {\n  match = userAgent$5.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent$5.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nvar engineV8Version = version;\n\n/* eslint-disable es-x/no-symbol -- required for testing */\n\nvar V8_VERSION$1 = engineV8Version;\nvar fails$c = fails$f;\n\n// eslint-disable-next-line es-x/no-object-getownpropertysymbols -- required for testing\nvar nativeSymbol = !!Object.getOwnPropertySymbols && !fails$c(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION$1 && V8_VERSION$1 < 41;\n});\n\n/* eslint-disable es-x/no-symbol -- required for testing */\n\nvar NATIVE_SYMBOL$2 = nativeSymbol;\n\nvar useSymbolAsUid = NATIVE_SYMBOL$2\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n\nvar global$f = global$k;\nvar shared$2 = shared$3.exports;\nvar hasOwn$a = hasOwnProperty_1;\nvar uid$1 = uid$2;\nvar NATIVE_SYMBOL$1 = nativeSymbol;\nvar USE_SYMBOL_AS_UID$1 = useSymbolAsUid;\n\nvar WellKnownSymbolsStore = shared$2('wks');\nvar Symbol$1 = global$f.Symbol;\nvar symbolFor = Symbol$1 && Symbol$1['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID$1 ? Symbol$1 : Symbol$1 && Symbol$1.withoutSetter || uid$1;\n\nvar wellKnownSymbol$e = function (name) {\n  if (!hasOwn$a(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL$1 || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL$1 && hasOwn$a(Symbol$1, name)) {\n      WellKnownSymbolsStore[name] = Symbol$1[name];\n    } else if (USE_SYMBOL_AS_UID$1 && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n\nvar isCallable$j = isCallable$l;\n\nvar isObject$7 = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable$j(it);\n};\n\nvar isObject$6 = isObject$7;\n\nvar $String$3 = String;\nvar $TypeError$c = TypeError;\n\n// `Assert: Type(argument) is Object`\nvar anObject$a = function (argument) {\n  if (isObject$6(argument)) return argument;\n  throw $TypeError$c($String$3(argument) + ' is not an object');\n};\n\nvar objectDefineProperties = {};\n\nvar fails$b = fails$f;\n\n// Detect IE8's incomplete defineProperty implementation\nvar descriptors = !fails$b(function () {\n  // eslint-disable-next-line es-x/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n\nvar DESCRIPTORS$b = descriptors;\nvar fails$a = fails$f;\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nvar v8PrototypeDefineBug = DESCRIPTORS$b && fails$a(function () {\n  // eslint-disable-next-line es-x/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n\nvar objectDefineProperty = {};\n\nvar global$e = global$k;\nvar isObject$5 = isObject$7;\n\nvar document$3 = global$e.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS$1 = isObject$5(document$3) && isObject$5(document$3.createElement);\n\nvar documentCreateElement$2 = function (it) {\n  return EXISTS$1 ? document$3.createElement(it) : {};\n};\n\nvar DESCRIPTORS$a = descriptors;\nvar fails$9 = fails$f;\nvar createElement$1 = documentCreateElement$2;\n\n// Thanks to IE8 for its funny defineProperty\nvar ie8DomDefine = !DESCRIPTORS$a && !fails$9(function () {\n  // eslint-disable-next-line es-x/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement$1('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n\nvar NATIVE_BIND$2 = functionBindNative;\n\nvar call$d = Function.prototype.call;\n\nvar functionCall = NATIVE_BIND$2 ? call$d.bind(call$d) : function () {\n  return call$d.apply(call$d, arguments);\n};\n\nvar uncurryThis$b = functionUncurryThis;\n\nvar objectIsPrototypeOf = uncurryThis$b({}.isPrototypeOf);\n\nvar getBuiltIn$6 = getBuiltIn$8;\nvar isCallable$i = isCallable$l;\nvar isPrototypeOf$3 = objectIsPrototypeOf;\nvar USE_SYMBOL_AS_UID = useSymbolAsUid;\n\nvar $Object$2 = Object;\n\nvar isSymbol$2 = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn$6('Symbol');\n  return isCallable$i($Symbol) && isPrototypeOf$3($Symbol.prototype, $Object$2(it));\n};\n\nvar $String$2 = String;\n\nvar tryToString$5 = function (argument) {\n  try {\n    return $String$2(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n\nvar isCallable$h = isCallable$l;\nvar tryToString$4 = tryToString$5;\n\nvar $TypeError$b = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nvar aCallable$9 = function (argument) {\n  if (isCallable$h(argument)) return argument;\n  throw $TypeError$b(tryToString$4(argument) + ' is not a function');\n};\n\nvar aCallable$8 = aCallable$9;\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nvar getMethod$3 = function (V, P) {\n  var func = V[P];\n  return func == null ? undefined : aCallable$8(func);\n};\n\nvar call$c = functionCall;\nvar isCallable$g = isCallable$l;\nvar isObject$4 = isObject$7;\n\nvar $TypeError$a = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nvar ordinaryToPrimitive$1 = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable$g(fn = input.toString) && !isObject$4(val = call$c(fn, input))) return val;\n  if (isCallable$g(fn = input.valueOf) && !isObject$4(val = call$c(fn, input))) return val;\n  if (pref !== 'string' && isCallable$g(fn = input.toString) && !isObject$4(val = call$c(fn, input))) return val;\n  throw $TypeError$a(\"Can't convert object to primitive value\");\n};\n\nvar call$b = functionCall;\nvar isObject$3 = isObject$7;\nvar isSymbol$1 = isSymbol$2;\nvar getMethod$2 = getMethod$3;\nvar ordinaryToPrimitive = ordinaryToPrimitive$1;\nvar wellKnownSymbol$d = wellKnownSymbol$e;\n\nvar $TypeError$9 = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol$d('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nvar toPrimitive$1 = function (input, pref) {\n  if (!isObject$3(input) || isSymbol$1(input)) return input;\n  var exoticToPrim = getMethod$2(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call$b(exoticToPrim, input, pref);\n    if (!isObject$3(result) || isSymbol$1(result)) return result;\n    throw $TypeError$9(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n\nvar toPrimitive = toPrimitive$1;\nvar isSymbol = isSymbol$2;\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nvar toPropertyKey$3 = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n\nvar DESCRIPTORS$9 = descriptors;\nvar IE8_DOM_DEFINE$1 = ie8DomDefine;\nvar V8_PROTOTYPE_DEFINE_BUG$1 = v8PrototypeDefineBug;\nvar anObject$9 = anObject$a;\nvar toPropertyKey$2 = toPropertyKey$3;\n\nvar $TypeError$8 = TypeError;\n// eslint-disable-next-line es-x/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor$1 = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE$1 = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nobjectDefineProperty.f = DESCRIPTORS$9 ? V8_PROTOTYPE_DEFINE_BUG$1 ? function defineProperty(O, P, Attributes) {\n  anObject$9(O);\n  P = toPropertyKey$2(P);\n  anObject$9(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor$1(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE$1 in Attributes ? Attributes[CONFIGURABLE$1] : current[CONFIGURABLE$1],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject$9(O);\n  P = toPropertyKey$2(P);\n  anObject$9(Attributes);\n  if (IE8_DOM_DEFINE$1) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError$8('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\nvar ceil = Math.ceil;\nvar floor$1 = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es-x/no-math-trunc -- safe\nvar mathTrunc = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor$1 : ceil)(n);\n};\n\nvar trunc = mathTrunc;\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nvar toIntegerOrInfinity$2 = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n\nvar toIntegerOrInfinity$1 = toIntegerOrInfinity$2;\n\nvar max$1 = Math.max;\nvar min$1 = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nvar toAbsoluteIndex$2 = function (index, length) {\n  var integer = toIntegerOrInfinity$1(index);\n  return integer < 0 ? max$1(integer + length, 0) : min$1(integer, length);\n};\n\nvar toIntegerOrInfinity = toIntegerOrInfinity$2;\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nvar toLength$1 = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n\nvar toLength = toLength$1;\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nvar lengthOfArrayLike$5 = function (obj) {\n  return toLength(obj.length);\n};\n\nvar toIndexedObject$4 = toIndexedObject$5;\nvar toAbsoluteIndex$1 = toAbsoluteIndex$2;\nvar lengthOfArrayLike$4 = lengthOfArrayLike$5;\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod$1 = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject$4($this);\n    var length = lengthOfArrayLike$4(O);\n    var index = toAbsoluteIndex$1(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nvar arrayIncludes = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod$1(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod$1(false)\n};\n\nvar hiddenKeys$4 = {};\n\nvar uncurryThis$a = functionUncurryThis;\nvar hasOwn$9 = hasOwnProperty_1;\nvar toIndexedObject$3 = toIndexedObject$5;\nvar indexOf = arrayIncludes.indexOf;\nvar hiddenKeys$3 = hiddenKeys$4;\n\nvar push$1 = uncurryThis$a([].push);\n\nvar objectKeysInternal = function (object, names) {\n  var O = toIndexedObject$3(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn$9(hiddenKeys$3, key) && hasOwn$9(O, key) && push$1(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn$9(O, key = names[i++])) {\n    ~indexOf(result, key) || push$1(result, key);\n  }\n  return result;\n};\n\n// IE8- don't enum bug keys\nvar enumBugKeys$3 = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n\nvar internalObjectKeys$1 = objectKeysInternal;\nvar enumBugKeys$2 = enumBugKeys$3;\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es-x/no-object-keys -- safe\nvar objectKeys$2 = Object.keys || function keys(O) {\n  return internalObjectKeys$1(O, enumBugKeys$2);\n};\n\nvar DESCRIPTORS$8 = descriptors;\nvar V8_PROTOTYPE_DEFINE_BUG = v8PrototypeDefineBug;\nvar definePropertyModule$5 = objectDefineProperty;\nvar anObject$8 = anObject$a;\nvar toIndexedObject$2 = toIndexedObject$5;\nvar objectKeys$1 = objectKeys$2;\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es-x/no-object-defineproperties -- safe\nobjectDefineProperties.f = DESCRIPTORS$8 && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject$8(O);\n  var props = toIndexedObject$2(Properties);\n  var keys = objectKeys$1(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule$5.f(O, key = keys[index++], props[key]);\n  return O;\n};\n\nvar getBuiltIn$5 = getBuiltIn$8;\n\nvar html$2 = getBuiltIn$5('document', 'documentElement');\n\nvar shared$1 = shared$3.exports;\nvar uid = uid$2;\n\nvar keys = shared$1('keys');\n\nvar sharedKey$3 = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n\n/* global ActiveXObject -- old IE, WSH */\n\nvar anObject$7 = anObject$a;\nvar definePropertiesModule = objectDefineProperties;\nvar enumBugKeys$1 = enumBugKeys$3;\nvar hiddenKeys$2 = hiddenKeys$4;\nvar html$1 = html$2;\nvar documentCreateElement$1 = documentCreateElement$2;\nvar sharedKey$2 = sharedKey$3;\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO$1 = sharedKey$2('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement$1('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html$1.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys$1.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys$1[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys$2[IE_PROTO$1] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es-x/no-object-create -- safe\nvar objectCreate = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject$7(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO$1] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n\nvar wellKnownSymbol$c = wellKnownSymbol$e;\nvar create$1 = objectCreate;\nvar defineProperty$5 = objectDefineProperty.f;\n\nvar UNSCOPABLES = wellKnownSymbol$c('unscopables');\nvar ArrayPrototype$1 = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype$1[UNSCOPABLES] == undefined) {\n  defineProperty$5(ArrayPrototype$1, UNSCOPABLES, {\n    configurable: true,\n    value: create$1(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nvar addToUnscopables$1 = function (key) {\n  ArrayPrototype$1[UNSCOPABLES][key] = true;\n};\n\nvar iterators = {};\n\nvar uncurryThis$9 = functionUncurryThis;\nvar isCallable$f = isCallable$l;\nvar store$1 = sharedStore;\n\nvar functionToString = uncurryThis$9(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable$f(store$1.inspectSource)) {\n  store$1.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nvar inspectSource$4 = store$1.inspectSource;\n\nvar global$d = global$k;\nvar isCallable$e = isCallable$l;\nvar inspectSource$3 = inspectSource$4;\n\nvar WeakMap$1 = global$d.WeakMap;\n\nvar nativeWeakMap = isCallable$e(WeakMap$1) && /native code/.test(inspectSource$3(WeakMap$1));\n\nvar createPropertyDescriptor$4 = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\nvar DESCRIPTORS$7 = descriptors;\nvar definePropertyModule$4 = objectDefineProperty;\nvar createPropertyDescriptor$3 = createPropertyDescriptor$4;\n\nvar createNonEnumerableProperty$4 = DESCRIPTORS$7 ? function (object, key, value) {\n  return definePropertyModule$4.f(object, key, createPropertyDescriptor$3(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\nvar NATIVE_WEAK_MAP = nativeWeakMap;\nvar global$c = global$k;\nvar uncurryThis$8 = functionUncurryThis;\nvar isObject$2 = isObject$7;\nvar createNonEnumerableProperty$3 = createNonEnumerableProperty$4;\nvar hasOwn$8 = hasOwnProperty_1;\nvar shared = sharedStore;\nvar sharedKey$1 = sharedKey$3;\nvar hiddenKeys$1 = hiddenKeys$4;\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError$2 = global$c.TypeError;\nvar WeakMap = global$c.WeakMap;\nvar set$1, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set$1(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject$2(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError$2('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = uncurryThis$8(store.get);\n  var wmhas = uncurryThis$8(store.has);\n  var wmset = uncurryThis$8(store.set);\n  set$1 = function (it, metadata) {\n    if (wmhas(store, it)) throw new TypeError$2(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    wmset(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas(store, it);\n  };\n} else {\n  var STATE = sharedKey$1('state');\n  hiddenKeys$1[STATE] = true;\n  set$1 = function (it, metadata) {\n    if (hasOwn$8(it, STATE)) throw new TypeError$2(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty$3(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn$8(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn$8(it, STATE);\n  };\n}\n\nvar internalState = {\n  set: set$1,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n\nvar objectGetOwnPropertyDescriptor = {};\n\nvar objectPropertyIsEnumerable = {};\n\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor$2 = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor$2 && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nobjectPropertyIsEnumerable.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor$2(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n\nvar DESCRIPTORS$6 = descriptors;\nvar call$a = functionCall;\nvar propertyIsEnumerableModule$1 = objectPropertyIsEnumerable;\nvar createPropertyDescriptor$2 = createPropertyDescriptor$4;\nvar toIndexedObject$1 = toIndexedObject$5;\nvar toPropertyKey$1 = toPropertyKey$3;\nvar hasOwn$7 = hasOwnProperty_1;\nvar IE8_DOM_DEFINE = ie8DomDefine;\n\n// eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nobjectGetOwnPropertyDescriptor.f = DESCRIPTORS$6 ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject$1(O);\n  P = toPropertyKey$1(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn$7(O, P)) return createPropertyDescriptor$2(!call$a(propertyIsEnumerableModule$1.f, O, P), O[P]);\n};\n\nvar makeBuiltIn$2 = {exports: {}};\n\nvar DESCRIPTORS$5 = descriptors;\nvar hasOwn$6 = hasOwnProperty_1;\n\nvar FunctionPrototype$1 = Function.prototype;\n// eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS$5 && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn$6(FunctionPrototype$1, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS$5 || (DESCRIPTORS$5 && getDescriptor(FunctionPrototype$1, 'name').configurable));\n\nvar functionName = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n\nvar fails$8 = fails$f;\nvar isCallable$d = isCallable$l;\nvar hasOwn$5 = hasOwnProperty_1;\nvar DESCRIPTORS$4 = descriptors;\nvar CONFIGURABLE_FUNCTION_NAME$1 = functionName.CONFIGURABLE;\nvar inspectSource$2 = inspectSource$4;\nvar InternalStateModule$2 = internalState;\n\nvar enforceInternalState = InternalStateModule$2.enforce;\nvar getInternalState$1 = InternalStateModule$2.get;\n// eslint-disable-next-line es-x/no-object-defineproperty -- safe\nvar defineProperty$4 = Object.defineProperty;\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS$4 && !fails$8(function () {\n  return defineProperty$4(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn$1 = makeBuiltIn$2.exports = function (value, name, options) {\n  if (String(name).slice(0, 7) === 'Symbol(') {\n    name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn$5(value, 'name') || (CONFIGURABLE_FUNCTION_NAME$1 && value.name !== name)) {\n    if (DESCRIPTORS$4) defineProperty$4(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn$5(options, 'arity') && value.length !== options.arity) {\n    defineProperty$4(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn$5(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS$4) defineProperty$4(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn$5(state, 'source')) {\n    state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn$1(function toString() {\n  return isCallable$d(this) && getInternalState$1(this).source || inspectSource$2(this);\n}, 'toString');\n\nvar isCallable$c = isCallable$l;\nvar definePropertyModule$3 = objectDefineProperty;\nvar makeBuiltIn = makeBuiltIn$2.exports;\nvar defineGlobalProperty$1 = defineGlobalProperty$3;\n\nvar defineBuiltIn$5 = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable$c(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty$1(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule$3.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n\nvar objectGetOwnPropertyNames = {};\n\nvar internalObjectKeys = objectKeysInternal;\nvar enumBugKeys = enumBugKeys$3;\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es-x/no-object-getownpropertynames -- safe\nobjectGetOwnPropertyNames.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n\nvar objectGetOwnPropertySymbols = {};\n\n// eslint-disable-next-line es-x/no-object-getownpropertysymbols -- safe\nobjectGetOwnPropertySymbols.f = Object.getOwnPropertySymbols;\n\nvar getBuiltIn$4 = getBuiltIn$8;\nvar uncurryThis$7 = functionUncurryThis;\nvar getOwnPropertyNamesModule = objectGetOwnPropertyNames;\nvar getOwnPropertySymbolsModule$1 = objectGetOwnPropertySymbols;\nvar anObject$6 = anObject$a;\n\nvar concat$1 = uncurryThis$7([].concat);\n\n// all object keys, includes non-enumerable and symbols\nvar ownKeys$1 = getBuiltIn$4('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject$6(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule$1.f;\n  return getOwnPropertySymbols ? concat$1(keys, getOwnPropertySymbols(it)) : keys;\n};\n\nvar hasOwn$4 = hasOwnProperty_1;\nvar ownKeys = ownKeys$1;\nvar getOwnPropertyDescriptorModule = objectGetOwnPropertyDescriptor;\nvar definePropertyModule$2 = objectDefineProperty;\n\nvar copyConstructorProperties$2 = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule$2.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn$4(target, key) && !(exceptions && hasOwn$4(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n\nvar fails$7 = fails$f;\nvar isCallable$b = isCallable$l;\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced$2 = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable$b(detection) ? fails$7(detection)\n    : !!detection;\n};\n\nvar normalize = isForced$2.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced$2.data = {};\nvar NATIVE = isForced$2.NATIVE = 'N';\nvar POLYFILL = isForced$2.POLYFILL = 'P';\n\nvar isForced_1 = isForced$2;\n\nvar global$b = global$k;\nvar getOwnPropertyDescriptor$1 = objectGetOwnPropertyDescriptor.f;\nvar createNonEnumerableProperty$2 = createNonEnumerableProperty$4;\nvar defineBuiltIn$4 = defineBuiltIn$5;\nvar defineGlobalProperty = defineGlobalProperty$3;\nvar copyConstructorProperties$1 = copyConstructorProperties$2;\nvar isForced$1 = isForced_1;\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nvar _export = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global$b;\n  } else if (STATIC) {\n    target = global$b[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global$b[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor$1(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced$1(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties$1(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty$2(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn$4(target, key, sourceProperty, options);\n  }\n};\n\nvar fails$6 = fails$f;\n\nvar correctPrototypeGetter = !fails$6(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es-x/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n\nvar hasOwn$3 = hasOwnProperty_1;\nvar isCallable$a = isCallable$l;\nvar toObject$3 = toObject$5;\nvar sharedKey = sharedKey$3;\nvar CORRECT_PROTOTYPE_GETTER = correctPrototypeGetter;\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object$1 = Object;\nvar ObjectPrototype = $Object$1.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es-x/no-object-getprototypeof -- safe\nvar objectGetPrototypeOf = CORRECT_PROTOTYPE_GETTER ? $Object$1.getPrototypeOf : function (O) {\n  var object = toObject$3(O);\n  if (hasOwn$3(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable$a(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object$1 ? ObjectPrototype : null;\n};\n\nvar fails$5 = fails$f;\nvar isCallable$9 = isCallable$l;\nvar getPrototypeOf$1 = objectGetPrototypeOf;\nvar defineBuiltIn$3 = defineBuiltIn$5;\nvar wellKnownSymbol$b = wellKnownSymbol$e;\n\nvar ITERATOR$5 = wellKnownSymbol$b('iterator');\nvar BUGGY_SAFARI_ITERATORS$1 = false;\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype$2, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es-x/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS$1 = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf$1(getPrototypeOf$1(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype$2 = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = IteratorPrototype$2 == undefined || fails$5(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype$2[ITERATOR$5].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype$2 = {};\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif (!isCallable$9(IteratorPrototype$2[ITERATOR$5])) {\n  defineBuiltIn$3(IteratorPrototype$2, ITERATOR$5, function () {\n    return this;\n  });\n}\n\nvar iteratorsCore = {\n  IteratorPrototype: IteratorPrototype$2,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS$1\n};\n\nvar defineProperty$3 = objectDefineProperty.f;\nvar hasOwn$2 = hasOwnProperty_1;\nvar wellKnownSymbol$a = wellKnownSymbol$e;\n\nvar TO_STRING_TAG$3 = wellKnownSymbol$a('toStringTag');\n\nvar setToStringTag$3 = function (target, TAG, STATIC) {\n  if (target && !STATIC) target = target.prototype;\n  if (target && !hasOwn$2(target, TO_STRING_TAG$3)) {\n    defineProperty$3(target, TO_STRING_TAG$3, { configurable: true, value: TAG });\n  }\n};\n\nvar IteratorPrototype$1 = iteratorsCore.IteratorPrototype;\nvar create = objectCreate;\nvar createPropertyDescriptor$1 = createPropertyDescriptor$4;\nvar setToStringTag$2 = setToStringTag$3;\nvar Iterators$4 = iterators;\n\nvar returnThis$1 = function () { return this; };\n\nvar createIteratorConstructor$1 = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype$1, { next: createPropertyDescriptor$1(+!ENUMERABLE_NEXT, next) });\n  setToStringTag$2(IteratorConstructor, TO_STRING_TAG, false);\n  Iterators$4[TO_STRING_TAG] = returnThis$1;\n  return IteratorConstructor;\n};\n\nvar isCallable$8 = isCallable$l;\n\nvar $String$1 = String;\nvar $TypeError$7 = TypeError;\n\nvar aPossiblePrototype$1 = function (argument) {\n  if (typeof argument == 'object' || isCallable$8(argument)) return argument;\n  throw $TypeError$7(\"Can't set \" + $String$1(argument) + ' as a prototype');\n};\n\n/* eslint-disable no-proto -- safe */\n\nvar uncurryThis$6 = functionUncurryThis;\nvar anObject$5 = anObject$a;\nvar aPossiblePrototype = aPossiblePrototype$1;\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es-x/no-object-setprototypeof -- safe\nvar objectSetPrototypeOf = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\n    setter = uncurryThis$6(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject$5(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n\nvar $$a = _export;\nvar call$9 = functionCall;\nvar FunctionName = functionName;\nvar isCallable$7 = isCallable$l;\nvar createIteratorConstructor = createIteratorConstructor$1;\nvar getPrototypeOf = objectGetPrototypeOf;\nvar setPrototypeOf$1 = objectSetPrototypeOf;\nvar setToStringTag$1 = setToStringTag$3;\nvar createNonEnumerableProperty$1 = createNonEnumerableProperty$4;\nvar defineBuiltIn$2 = defineBuiltIn$5;\nvar wellKnownSymbol$9 = wellKnownSymbol$e;\nvar Iterators$3 = iterators;\nvar IteratorsCore = iteratorsCore;\n\nvar PROPER_FUNCTION_NAME = FunctionName.PROPER;\nvar CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR$4 = wellKnownSymbol$9('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nvar defineIterator$1 = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR$4]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf$1) {\n          setPrototypeOf$1(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (!isCallable$7(CurrentIteratorPrototype[ITERATOR$4])) {\n          defineBuiltIn$2(CurrentIteratorPrototype, ITERATOR$4, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag$1(CurrentIteratorPrototype, TO_STRING_TAG, true);\n    }\n  }\n\n  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF\n  if (PROPER_FUNCTION_NAME && DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    if (CONFIGURABLE_FUNCTION_NAME) {\n      createNonEnumerableProperty$1(IterablePrototype, 'name', VALUES);\n    } else {\n      INCORRECT_VALUES_NAME = true;\n      defaultIterator = function values() { return call$9(nativeIterator, this); };\n    }\n  }\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        defineBuiltIn$2(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $$a({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  // define iterator\n  if (IterablePrototype[ITERATOR$4] !== defaultIterator) {\n    defineBuiltIn$2(IterablePrototype, ITERATOR$4, defaultIterator, { name: DEFAULT });\n  }\n  Iterators$3[NAME] = defaultIterator;\n\n  return methods;\n};\n\nvar toIndexedObject = toIndexedObject$5;\nvar addToUnscopables = addToUnscopables$1;\nvar Iterators$2 = iterators;\nvar InternalStateModule$1 = internalState;\nvar defineProperty$2 = objectDefineProperty.f;\nvar defineIterator = defineIterator$1;\nvar DESCRIPTORS$3 = descriptors;\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState$1 = InternalStateModule$1.set;\nvar getInternalState = InternalStateModule$1.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\nvar es_array_iterator = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState$1(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nvar values = Iterators$2.Arguments = Iterators$2.Array;\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n// V8 ~ Chrome 45- bug\nif (DESCRIPTORS$3 && values.name !== 'values') try {\n  defineProperty$2(values, 'name', { value: 'values' });\n} catch (error) { /* empty */ }\n\n// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nvar domIterables = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n\n// in old WebKit versions, `element.classList` is not an instance of global `DOMTokenList`\nvar documentCreateElement = documentCreateElement$2;\n\nvar classList = documentCreateElement('span').classList;\nvar DOMTokenListPrototype$1 = classList && classList.constructor && classList.constructor.prototype;\n\nvar domTokenListPrototype = DOMTokenListPrototype$1 === Object.prototype ? undefined : DOMTokenListPrototype$1;\n\nvar global$a = global$k;\nvar DOMIterables = domIterables;\nvar DOMTokenListPrototype = domTokenListPrototype;\nvar ArrayIteratorMethods = es_array_iterator;\nvar createNonEnumerableProperty = createNonEnumerableProperty$4;\nvar wellKnownSymbol$8 = wellKnownSymbol$e;\n\nvar ITERATOR$3 = wellKnownSymbol$8('iterator');\nvar TO_STRING_TAG$2 = wellKnownSymbol$8('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nvar handlePrototype = function (CollectionPrototype, COLLECTION_NAME) {\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR$3] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR$3, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR$3] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG$2]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG$2, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  handlePrototype(global$a[COLLECTION_NAME] && global$a[COLLECTION_NAME].prototype, COLLECTION_NAME);\n}\n\nhandlePrototype(DOMTokenListPrototype, 'DOMTokenList');\n\nvar DESCRIPTORS$2 = descriptors;\nvar uncurryThis$5 = functionUncurryThis;\nvar call$8 = functionCall;\nvar fails$4 = fails$f;\nvar objectKeys = objectKeys$2;\nvar getOwnPropertySymbolsModule = objectGetOwnPropertySymbols;\nvar propertyIsEnumerableModule = objectPropertyIsEnumerable;\nvar toObject$2 = toObject$5;\nvar IndexedObject$1 = indexedObject;\n\n// eslint-disable-next-line es-x/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es-x/no-object-defineproperty -- required for testing\nvar defineProperty$1 = Object.defineProperty;\nvar concat = uncurryThis$5([].concat);\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nvar objectAssign = !$assign || fails$4(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS$2 && $assign({ b: 1 }, $assign(defineProperty$1({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty$1(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es-x/no-symbol -- safe\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject$2(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject$1(arguments[index++]);\n    var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS$2 || call$8(propertyIsEnumerable, S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n\nvar $$9 = _export;\nvar assign = objectAssign;\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\n// eslint-disable-next-line es-x/no-object-assign -- required for testing\n$$9({ target: 'Object', stat: true, arity: 2, forced: Object.assign !== assign }, {\n  assign: assign\n});\n\nconst WalletNetworkChanged = ({\n  selector,\n  onSwitchWallet,\n  onDismiss\n}) => {\n  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n    className: \"switch-network-message-wrapper\"\n  }, {\n    children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n      className: \"header\"\n    }, {\n      children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h2\", {\n        children: \"You Must Change Networks\"\n      })\n    })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"content\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", {\n        children: [\"We've detected that you need to change your wallet's network to\", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"strong\", {\n          children: ` ${selector.options.network.networkId}`\n        }), \" for this dApp.\"]\n      }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", {\n        children: \"Some wallets may not support changing networks. If you can not change networks you may consider switching to another wallet.\"\n      })]\n    })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"action-buttons\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n        className: \"left-button\",\n        onClick: onDismiss\n      }, {\n        children: \"Dismiss\"\n      })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n        className: \"right-button\",\n        onClick: onSwitchWallet\n      }, {\n        children: \"Switch Wallet\"\n      }))]\n    }))]\n  }));\n};\n\nvar tryToString$3 = tryToString$5;\n\nvar $TypeError$6 = TypeError;\n\nvar deletePropertyOrThrow$1 = function (O, P) {\n  if (!delete O[P]) throw $TypeError$6('Cannot delete property ' + tryToString$3(P) + ' of ' + tryToString$3(O));\n};\n\nvar wellKnownSymbol$7 = wellKnownSymbol$e;\n\nvar TO_STRING_TAG$1 = wellKnownSymbol$7('toStringTag');\nvar test$1 = {};\n\ntest$1[TO_STRING_TAG$1] = 'z';\n\nvar toStringTagSupport = String(test$1) === '[object z]';\n\nvar TO_STRING_TAG_SUPPORT = toStringTagSupport;\nvar isCallable$6 = isCallable$l;\nvar classofRaw = classofRaw$1;\nvar wellKnownSymbol$6 = wellKnownSymbol$e;\n\nvar TO_STRING_TAG = wellKnownSymbol$6('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nvar classof$4 = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable$6(O.callee) ? 'Arguments' : result;\n};\n\nvar classof$3 = classof$4;\n\nvar $String = String;\n\nvar toString$2 = function (argument) {\n  if (classof$3(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n\nvar toPropertyKey = toPropertyKey$3;\nvar definePropertyModule$1 = objectDefineProperty;\nvar createPropertyDescriptor = createPropertyDescriptor$4;\n\nvar createProperty$1 = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule$1.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n\nvar toAbsoluteIndex = toAbsoluteIndex$2;\nvar lengthOfArrayLike$3 = lengthOfArrayLike$5;\nvar createProperty = createProperty$1;\n\nvar $Array = Array;\nvar max = Math.max;\n\nvar arraySliceSimple = function (O, start, end) {\n  var length = lengthOfArrayLike$3(O);\n  var k = toAbsoluteIndex(start, length);\n  var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n  var result = $Array(max(fin - k, 0));\n  for (var n = 0; k < fin; k++, n++) createProperty(result, n, O[k]);\n  result.length = n;\n  return result;\n};\n\nvar arraySlice$2 = arraySliceSimple;\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice$2(array, 0, middle), comparefn),\n    mergeSort(arraySlice$2(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nvar arraySort = mergeSort;\n\nvar fails$3 = fails$f;\n\nvar arrayMethodIsStrict$2 = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails$3(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n\nvar userAgent$4 = engineUserAgent;\n\nvar firefox = userAgent$4.match(/firefox\\/(\\d+)/i);\n\nvar engineFfVersion = !!firefox && +firefox[1];\n\nvar UA = engineUserAgent;\n\nvar engineIsIeOrEdge = /MSIE|Trident/.test(UA);\n\nvar userAgent$3 = engineUserAgent;\n\nvar webkit = userAgent$3.match(/AppleWebKit\\/(\\d+)\\./);\n\nvar engineWebkitVersion = !!webkit && +webkit[1];\n\nvar $$8 = _export;\nvar uncurryThis$4 = functionUncurryThis;\nvar aCallable$7 = aCallable$9;\nvar toObject$1 = toObject$5;\nvar lengthOfArrayLike$2 = lengthOfArrayLike$5;\nvar deletePropertyOrThrow = deletePropertyOrThrow$1;\nvar toString$1 = toString$2;\nvar fails$2 = fails$f;\nvar internalSort = arraySort;\nvar arrayMethodIsStrict$1 = arrayMethodIsStrict$2;\nvar FF = engineFfVersion;\nvar IE_OR_EDGE = engineIsIeOrEdge;\nvar V8 = engineV8Version;\nvar WEBKIT = engineWebkitVersion;\n\nvar test = [];\nvar un$Sort = uncurryThis$4(test.sort);\nvar push = uncurryThis$4(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails$2(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails$2(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD$1 = arrayMethodIsStrict$1('sort');\n\nvar STABLE_SORT = !fails$2(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD$1 || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString$1(x) > toString$1(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$$8({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable$7(comparefn);\n\n    var array = toObject$1(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? un$Sort(array) : un$Sort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike$2(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) deletePropertyOrThrow(array, index++);\n\n    return array;\n  }\n});\n\nvar $$7 = _export;\nvar DESCRIPTORS$1 = descriptors;\nvar global$9 = global$k;\nvar uncurryThis$3 = functionUncurryThis;\nvar hasOwn$1 = hasOwnProperty_1;\nvar isCallable$5 = isCallable$l;\nvar isPrototypeOf$2 = objectIsPrototypeOf;\nvar toString = toString$2;\nvar defineProperty = objectDefineProperty.f;\nvar copyConstructorProperties = copyConstructorProperties$2;\n\nvar NativeSymbol = global$9.Symbol;\nvar SymbolPrototype = NativeSymbol && NativeSymbol.prototype;\n\nif (DESCRIPTORS$1 && isCallable$5(NativeSymbol) && (!('description' in SymbolPrototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);\n    var result = isPrototypeOf$2(SymbolPrototype, this)\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  SymbolWrapper.prototype = SymbolPrototype;\n  SymbolPrototype.constructor = SymbolWrapper;\n\n  var NATIVE_SYMBOL = String(NativeSymbol('test')) == 'Symbol(test)';\n  var symbolToString = uncurryThis$3(SymbolPrototype.toString);\n  var symbolValueOf = uncurryThis$3(SymbolPrototype.valueOf);\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  var replace = uncurryThis$3(''.replace);\n  var stringSlice = uncurryThis$3(''.slice);\n\n  defineProperty(SymbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = symbolValueOf(this);\n      var string = symbolToString(symbol);\n      if (hasOwn$1(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $$7({ global: true, constructor: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n\nvar aCallable$6 = aCallable$9;\nvar toObject = toObject$5;\nvar IndexedObject = indexedObject;\nvar lengthOfArrayLike$1 = lengthOfArrayLike$5;\n\nvar $TypeError$5 = TypeError;\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aCallable$6(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike$1(O);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw $TypeError$5('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nvar arrayReduce = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n\nvar classof$2 = classofRaw$1;\nvar global$8 = global$k;\n\nvar engineIsNode = classof$2(global$8.process) == 'process';\n\nvar $$6 = _export;\nvar $reduce = arrayReduce.left;\nvar arrayMethodIsStrict = arrayMethodIsStrict$2;\nvar CHROME_VERSION = engineV8Version;\nvar IS_NODE$3 = engineIsNode;\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE$3 && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$$6({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nconst WalletOptions = ({\n  selector,\n  options,\n  onWalletNotInstalled,\n  onError,\n  onConnectHardwareWallet,\n  onConnecting,\n  onConnected\n}) => {\n  const [walletInfoVisible, setWalletInfoVisible] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const [modules, setModules] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const subscription = selector.store.observable.subscribe(state => {\n      state.modules.sort((current, next) => {\n        if (current.metadata.deprecated === next.metadata.deprecated) {\n          return 0;\n        }\n\n        return current.metadata.deprecated ? 1 : -1;\n      });\n      setModules(state.modules);\n    });\n    return () => subscription.unsubscribe(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleWalletClick = module => () => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n      const {\n        deprecated,\n        available\n      } = module.metadata;\n\n      if (module.type === \"injected\" && !available) {\n        return onWalletNotInstalled(module);\n      }\n\n      if (deprecated) {\n        return onError(new Error(`${module.metadata.name} is deprecated. Please select another wallet.`));\n      }\n\n      const wallet = yield module.wallet();\n      onConnecting(wallet);\n\n      if (wallet.type === \"hardware\") {\n        return onConnectHardwareWallet();\n      }\n\n      yield wallet.signIn({\n        contractId: options.contractId,\n        methodNames: options.methodNames\n      });\n      onConnected();\n    } catch (err) {\n      const {\n        name\n      } = module.metadata;\n      const message = err instanceof Error ? err.message : \"Something went wrong\";\n      onError(new Error(`Failed to sign in with ${name}: ${message}`));\n    }\n  });\n\n  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {\n    children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"wallet-options-wrapper\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", Object.assign({\n        className: \"description\"\n      }, {\n        children: (options === null || options === void 0 ? void 0 : options.description) || \"Please select a wallet to sign in to this dApp:\"\n      })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"ul\", Object.assign({\n        className: \"options-list\"\n      }, {\n        children: modules.reduce((result, module) => {\n          const {\n            selectedWalletId\n          } = selector.store.getState();\n          const {\n            name,\n            description,\n            iconUrl,\n            deprecated\n          } = module.metadata;\n          const selected = module.id === selectedWalletId;\n          result.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"li\", Object.assign({\n            id: module.id,\n            className: (selected ? \"selected-wallet\" : \"\") + (deprecated ? \" deprecated-wallet\" : \"\"),\n            onClick: selected ? undefined : handleWalletClick(module)\n          }, {\n            children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n              title: description || \"\",\n              className: \"wallet-content\"\n            }, {\n              children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n                className: \"wallet-img-box\"\n              }, {\n                children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", {\n                  src: iconUrl,\n                  alt: name\n                })\n              })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n                  children: name\n                })\n              }), selected && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n                className: \"selected-wallet-text\"\n              }, {\n                children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n                  children: \"selected\"\n                })\n              }))]\n            }))\n          }), module.id));\n          return result;\n        }, [])\n      }))]\n    })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"info\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", Object.assign({\n        onClick: () => {\n          setWalletInfoVisible(!walletInfoVisible);\n        }\n      }, {\n        children: \"What is a Wallet?\"\n      })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n        className: `info-description ${walletInfoVisible ? \"show\" : \"hide\"}-explanation`\n      }, {\n        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", {\n          children: \"Wallets are used to send, receive and store digital assets. There are different types of wallets. They can be an extension added to your browser, a hardware device plugged into your computer, web-based or an app on your mobile device.\"\n        })\n      }))]\n    }))]\n  });\n};\n\nconst AlertMessage = ({\n  message,\n  onBack\n}) => {\n  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n    className: \"alert-message-wrapper\"\n  }, {\n    children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", {\n      children: message\n    }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n      className: \"action-buttons\"\n    }, {\n      children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n        className: \"left-button\",\n        onClick: onBack\n      }, {\n        children: \"OK\"\n      }))\n    }))]\n  }));\n};\n\nconst CloseButton = ({\n  onClick\n}) => {\n  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n    onClick: onClick,\n    className: \"close-button\"\n  }, {\n    children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", Object.assign({\n      xmlns: \"http://www.w3.org/2000/svg\",\n      height: \"24\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      fill: \"#A7A7A7\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n        d: \"M0 0h24v24H0z\",\n        fill: \"none\"\n      }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n        d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n      })]\n    }))\n  }));\n};\n\nvar getBuiltIn$3 = getBuiltIn$8;\nvar definePropertyModule = objectDefineProperty;\nvar wellKnownSymbol$5 = wellKnownSymbol$e;\nvar DESCRIPTORS = descriptors;\n\nvar SPECIES$2 = wellKnownSymbol$5('species');\n\nvar setSpecies$1 = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn$3(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES$2]) {\n    defineProperty(Constructor, SPECIES$2, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n\nvar isPrototypeOf$1 = objectIsPrototypeOf;\n\nvar $TypeError$4 = TypeError;\n\nvar anInstance$1 = function (it, Prototype) {\n  if (isPrototypeOf$1(Prototype, it)) return it;\n  throw $TypeError$4('Incorrect invocation');\n};\n\nvar uncurryThis$2 = functionUncurryThis;\nvar fails$1 = fails$f;\nvar isCallable$4 = isCallable$l;\nvar classof$1 = classof$4;\nvar getBuiltIn$2 = getBuiltIn$8;\nvar inspectSource$1 = inspectSource$4;\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn$2('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis$2(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable$4(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable$4(argument)) return false;\n  switch (classof$1(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource$1(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nvar isConstructor$1 = !construct || fails$1(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n\nvar isConstructor = isConstructor$1;\nvar tryToString$2 = tryToString$5;\n\nvar $TypeError$3 = TypeError;\n\n// `Assert: IsConstructor(argument) is true`\nvar aConstructor$1 = function (argument) {\n  if (isConstructor(argument)) return argument;\n  throw $TypeError$3(tryToString$2(argument) + ' is not a constructor');\n};\n\nvar anObject$4 = anObject$a;\nvar aConstructor = aConstructor$1;\nvar wellKnownSymbol$4 = wellKnownSymbol$e;\n\nvar SPECIES$1 = wellKnownSymbol$4('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nvar speciesConstructor$1 = function (O, defaultConstructor) {\n  var C = anObject$4(O).constructor;\n  var S;\n  return C === undefined || (S = anObject$4(C)[SPECIES$1]) == undefined ? defaultConstructor : aConstructor(S);\n};\n\nvar NATIVE_BIND$1 = functionBindNative;\n\nvar FunctionPrototype = Function.prototype;\nvar apply$1 = FunctionPrototype.apply;\nvar call$7 = FunctionPrototype.call;\n\n// eslint-disable-next-line es-x/no-reflect -- safe\nvar functionApply = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND$1 ? call$7.bind(apply$1) : function () {\n  return call$7.apply(apply$1, arguments);\n});\n\nvar uncurryThis$1 = functionUncurryThis;\nvar aCallable$5 = aCallable$9;\nvar NATIVE_BIND = functionBindNative;\n\nvar bind$4 = uncurryThis$1(uncurryThis$1.bind);\n\n// optional / simple context binding\nvar functionBindContext = function (fn, that) {\n  aCallable$5(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind$4(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\nvar uncurryThis = functionUncurryThis;\n\nvar arraySlice$1 = uncurryThis([].slice);\n\nvar $TypeError$2 = TypeError;\n\nvar validateArgumentsLength$1 = function (passed, required) {\n  if (passed < required) throw $TypeError$2('Not enough arguments');\n  return passed;\n};\n\nvar userAgent$2 = engineUserAgent;\n\nvar engineIsIos = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent$2);\n\nvar global$7 = global$k;\nvar apply = functionApply;\nvar bind$3 = functionBindContext;\nvar isCallable$3 = isCallable$l;\nvar hasOwn = hasOwnProperty_1;\nvar fails = fails$f;\nvar html = html$2;\nvar arraySlice = arraySlice$1;\nvar createElement = documentCreateElement$2;\nvar validateArgumentsLength = validateArgumentsLength$1;\nvar IS_IOS$1 = engineIsIos;\nvar IS_NODE$2 = engineIsNode;\n\nvar set = global$7.setImmediate;\nvar clear = global$7.clearImmediate;\nvar process$2 = global$7.process;\nvar Dispatch = global$7.Dispatch;\nvar Function$1 = global$7.Function;\nvar MessageChannel = global$7.MessageChannel;\nvar String$1 = global$7.String;\nvar counter = 0;\nvar queue$1 = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar location, defer, channel, port;\n\ntry {\n  // Deno throws a ReferenceError on `location` access without `--location` flag\n  location = global$7.location;\n} catch (error) { /* empty */ }\n\nvar run = function (id) {\n  if (hasOwn(queue$1, id)) {\n    var fn = queue$1[id];\n    delete queue$1[id];\n    fn();\n  }\n};\n\nvar runner = function (id) {\n  return function () {\n    run(id);\n  };\n};\n\nvar listener = function (event) {\n  run(event.data);\n};\n\nvar post = function (id) {\n  // old engines have not location.origin\n  global$7.postMessage(String$1(id), location.protocol + '//' + location.host);\n};\n\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!set || !clear) {\n  set = function setImmediate(handler) {\n    validateArgumentsLength(arguments.length, 1);\n    var fn = isCallable$3(handler) ? handler : Function$1(handler);\n    var args = arraySlice(arguments, 1);\n    queue$1[++counter] = function () {\n      apply(fn, undefined, args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clear = function clearImmediate(id) {\n    delete queue$1[id];\n  };\n  // Node.js 0.8-\n  if (IS_NODE$2) {\n    defer = function (id) {\n      process$2.nextTick(runner(id));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(runner(id));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  // except iOS - https://github.com/zloirock/core-js/issues/624\n  } else if (MessageChannel && !IS_IOS$1) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = bind$3(port.postMessage, port);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (\n    global$7.addEventListener &&\n    isCallable$3(global$7.postMessage) &&\n    !global$7.importScripts &&\n    location && location.protocol !== 'file:' &&\n    !fails(post)\n  ) {\n    defer = post;\n    global$7.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in createElement('script')) {\n    defer = function (id) {\n      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(runner(id), 0);\n    };\n  }\n}\n\nvar task$1 = {\n  set: set,\n  clear: clear\n};\n\nvar userAgent$1 = engineUserAgent;\nvar global$6 = global$k;\n\nvar engineIsIosPebble = /ipad|iphone|ipod/i.test(userAgent$1) && global$6.Pebble !== undefined;\n\nvar userAgent = engineUserAgent;\n\nvar engineIsWebosWebkit = /web0s(?!.*chrome)/i.test(userAgent);\n\nvar global$5 = global$k;\nvar bind$2 = functionBindContext;\nvar getOwnPropertyDescriptor = objectGetOwnPropertyDescriptor.f;\nvar macrotask = task$1.set;\nvar IS_IOS = engineIsIos;\nvar IS_IOS_PEBBLE = engineIsIosPebble;\nvar IS_WEBOS_WEBKIT = engineIsWebosWebkit;\nvar IS_NODE$1 = engineIsNode;\n\nvar MutationObserver = global$5.MutationObserver || global$5.WebKitMutationObserver;\nvar document$2 = global$5.document;\nvar process$1 = global$5.process;\nvar Promise$1 = global$5.Promise;\n// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`\nvar queueMicrotaskDescriptor = getOwnPropertyDescriptor(global$5, 'queueMicrotask');\nvar queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;\n\nvar flush, head, last, notify$1, toggle, node, promise, then;\n\n// modern engines have queueMicrotask method\nif (!queueMicrotask) {\n  flush = function () {\n    var parent, fn;\n    if (IS_NODE$1 && (parent = process$1.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (error) {\n        if (head) notify$1();\n        else last = undefined;\n        throw error;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339\n  // also except WebOS Webkit https://github.com/zloirock/core-js/issues/898\n  if (!IS_IOS && !IS_NODE$1 && !IS_WEBOS_WEBKIT && MutationObserver && document$2) {\n    toggle = true;\n    node = document$2.createTextNode('');\n    new MutationObserver(flush).observe(node, { characterData: true });\n    notify$1 = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (!IS_IOS_PEBBLE && Promise$1 && Promise$1.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    promise = Promise$1.resolve(undefined);\n    // workaround of WebKit ~ iOS Safari 10.1 bug\n    promise.constructor = Promise$1;\n    then = bind$2(promise.then, promise);\n    notify$1 = function () {\n      then(flush);\n    };\n  // Node.js without promises\n  } else if (IS_NODE$1) {\n    notify$1 = function () {\n      process$1.nextTick(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessage\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    // strange IE + webpack dev server bug - use .bind(global)\n    macrotask = bind$2(macrotask, global$5);\n    notify$1 = function () {\n      macrotask(flush);\n    };\n  }\n}\n\nvar microtask$1 = queueMicrotask || function (fn) {\n  var task = { fn: fn, next: undefined };\n  if (last) last.next = task;\n  if (!head) {\n    head = task;\n    notify$1();\n  } last = task;\n};\n\nvar global$4 = global$k;\n\nvar hostReportErrors$1 = function (a, b) {\n  var console = global$4.console;\n  if (console && console.error) {\n    arguments.length == 1 ? console.error(a) : console.error(a, b);\n  }\n};\n\nvar perform$3 = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n\nvar Queue$1 = function () {\n  this.head = null;\n  this.tail = null;\n};\n\nQueue$1.prototype = {\n  add: function (item) {\n    var entry = { item: item, next: null };\n    if (this.head) this.tail.next = entry;\n    else this.head = entry;\n    this.tail = entry;\n  },\n  get: function () {\n    var entry = this.head;\n    if (entry) {\n      this.head = entry.next;\n      if (this.tail === entry) this.tail = null;\n      return entry.item;\n    }\n  }\n};\n\nvar queue = Queue$1;\n\nvar global$3 = global$k;\n\nvar promiseNativeConstructor = global$3.Promise;\n\nvar engineIsBrowser = typeof window == 'object' && typeof Deno != 'object';\n\nvar global$2 = global$k;\nvar NativePromiseConstructor$3 = promiseNativeConstructor;\nvar isCallable$2 = isCallable$l;\nvar isForced = isForced_1;\nvar inspectSource = inspectSource$4;\nvar wellKnownSymbol$3 = wellKnownSymbol$e;\nvar IS_BROWSER = engineIsBrowser;\nvar V8_VERSION = engineV8Version;\n\nNativePromiseConstructor$3 && NativePromiseConstructor$3.prototype;\nvar SPECIES = wellKnownSymbol$3('species');\nvar SUBCLASSING = false;\nvar NATIVE_PROMISE_REJECTION_EVENT$1 = isCallable$2(global$2.PromiseRejectionEvent);\n\nvar FORCED_PROMISE_CONSTRUCTOR$5 = isForced('Promise', function () {\n  var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(NativePromiseConstructor$3);\n  var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(NativePromiseConstructor$3);\n  // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n  // We can't detect it synchronously, so just check versions\n  if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66) return true;\n  // We can't use @@species feature detection in V8 since it causes\n  // deoptimization and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if (V8_VERSION >= 51 && /native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) return false;\n  // Detect correctness of subclassing with @@species support\n  var promise = new NativePromiseConstructor$3(function (resolve) { resolve(1); });\n  var FakePromise = function (exec) {\n    exec(function () { /* empty */ }, function () { /* empty */ });\n  };\n  var constructor = promise.constructor = {};\n  constructor[SPECIES] = FakePromise;\n  SUBCLASSING = promise.then(function () { /* empty */ }) instanceof FakePromise;\n  if (!SUBCLASSING) return true;\n  // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n  return !GLOBAL_CORE_JS_PROMISE && IS_BROWSER && !NATIVE_PROMISE_REJECTION_EVENT$1;\n});\n\nvar promiseConstructorDetection = {\n  CONSTRUCTOR: FORCED_PROMISE_CONSTRUCTOR$5,\n  REJECTION_EVENT: NATIVE_PROMISE_REJECTION_EVENT$1,\n  SUBCLASSING: SUBCLASSING\n};\n\nvar newPromiseCapability$2 = {};\n\nvar aCallable$4 = aCallable$9;\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable$4(resolve);\n  this.reject = aCallable$4(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nnewPromiseCapability$2.f = function (C) {\n  return new PromiseCapability(C);\n};\n\nvar $$5 = _export;\nvar IS_NODE = engineIsNode;\nvar global$1 = global$k;\nvar call$6 = functionCall;\nvar defineBuiltIn$1 = defineBuiltIn$5;\nvar setPrototypeOf = objectSetPrototypeOf;\nvar setToStringTag = setToStringTag$3;\nvar setSpecies = setSpecies$1;\nvar aCallable$3 = aCallable$9;\nvar isCallable$1 = isCallable$l;\nvar isObject$1 = isObject$7;\nvar anInstance = anInstance$1;\nvar speciesConstructor = speciesConstructor$1;\nvar task = task$1.set;\nvar microtask = microtask$1;\nvar hostReportErrors = hostReportErrors$1;\nvar perform$2 = perform$3;\nvar Queue = queue;\nvar InternalStateModule = internalState;\nvar NativePromiseConstructor$2 = promiseNativeConstructor;\nvar PromiseConstructorDetection = promiseConstructorDetection;\nvar newPromiseCapabilityModule$3 = newPromiseCapability$2;\n\nvar PROMISE = 'Promise';\nvar FORCED_PROMISE_CONSTRUCTOR$4 = PromiseConstructorDetection.CONSTRUCTOR;\nvar NATIVE_PROMISE_REJECTION_EVENT = PromiseConstructorDetection.REJECTION_EVENT;\nvar NATIVE_PROMISE_SUBCLASSING = PromiseConstructorDetection.SUBCLASSING;\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\nvar setInternalState = InternalStateModule.set;\nvar NativePromisePrototype$1 = NativePromiseConstructor$2 && NativePromiseConstructor$2.prototype;\nvar PromiseConstructor = NativePromiseConstructor$2;\nvar PromisePrototype = NativePromisePrototype$1;\nvar TypeError$1 = global$1.TypeError;\nvar document$1 = global$1.document;\nvar process = global$1.process;\nvar newPromiseCapability$1 = newPromiseCapabilityModule$3.f;\nvar newGenericPromiseCapability = newPromiseCapability$1;\n\nvar DISPATCH_EVENT = !!(document$1 && document$1.createEvent && global$1.dispatchEvent);\nvar UNHANDLED_REJECTION = 'unhandledrejection';\nvar REJECTION_HANDLED = 'rejectionhandled';\nvar PENDING = 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\nvar HANDLED = 1;\nvar UNHANDLED = 2;\n\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject$1(it) && isCallable$1(then = it.then) ? then : false;\n};\n\nvar callReaction = function (reaction, state) {\n  var value = state.value;\n  var ok = state.state == FULFILLED;\n  var handler = ok ? reaction.ok : reaction.fail;\n  var resolve = reaction.resolve;\n  var reject = reaction.reject;\n  var domain = reaction.domain;\n  var result, then, exited;\n  try {\n    if (handler) {\n      if (!ok) {\n        if (state.rejection === UNHANDLED) onHandleUnhandled(state);\n        state.rejection = HANDLED;\n      }\n      if (handler === true) result = value;\n      else {\n        if (domain) domain.enter();\n        result = handler(value); // can throw\n        if (domain) {\n          domain.exit();\n          exited = true;\n        }\n      }\n      if (result === reaction.promise) {\n        reject(TypeError$1('Promise-chain cycle'));\n      } else if (then = isThenable(result)) {\n        call$6(then, result, resolve, reject);\n      } else resolve(result);\n    } else reject(value);\n  } catch (error) {\n    if (domain && !exited) domain.exit();\n    reject(error);\n  }\n};\n\nvar notify = function (state, isReject) {\n  if (state.notified) return;\n  state.notified = true;\n  microtask(function () {\n    var reactions = state.reactions;\n    var reaction;\n    while (reaction = reactions.get()) {\n      callReaction(reaction, state);\n    }\n    state.notified = false;\n    if (isReject && !state.rejection) onUnhandled(state);\n  });\n};\n\nvar dispatchEvent = function (name, promise, reason) {\n  var event, handler;\n  if (DISPATCH_EVENT) {\n    event = document$1.createEvent('Event');\n    event.promise = promise;\n    event.reason = reason;\n    event.initEvent(name, false, true);\n    global$1.dispatchEvent(event);\n  } else event = { promise: promise, reason: reason };\n  if (!NATIVE_PROMISE_REJECTION_EVENT && (handler = global$1['on' + name])) handler(event);\n  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\n};\n\nvar onUnhandled = function (state) {\n  call$6(task, global$1, function () {\n    var promise = state.facade;\n    var value = state.value;\n    var IS_UNHANDLED = isUnhandled(state);\n    var result;\n    if (IS_UNHANDLED) {\n      result = perform$2(function () {\n        if (IS_NODE) {\n          process.emit('unhandledRejection', value, promise);\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\n      if (result.error) throw result.value;\n    }\n  });\n};\n\nvar isUnhandled = function (state) {\n  return state.rejection !== HANDLED && !state.parent;\n};\n\nvar onHandleUnhandled = function (state) {\n  call$6(task, global$1, function () {\n    var promise = state.facade;\n    if (IS_NODE) {\n      process.emit('rejectionHandled', promise);\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\n  });\n};\n\nvar bind$1 = function (fn, state, unwrap) {\n  return function (value) {\n    fn(state, value, unwrap);\n  };\n};\n\nvar internalReject = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  state.value = value;\n  state.state = REJECTED;\n  notify(state, true);\n};\n\nvar internalResolve = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  try {\n    if (state.facade === value) throw TypeError$1(\"Promise can't be resolved itself\");\n    var then = isThenable(value);\n    if (then) {\n      microtask(function () {\n        var wrapper = { done: false };\n        try {\n          call$6(then, value,\n            bind$1(internalResolve, wrapper, state),\n            bind$1(internalReject, wrapper, state)\n          );\n        } catch (error) {\n          internalReject(wrapper, error, state);\n        }\n      });\n    } else {\n      state.value = value;\n      state.state = FULFILLED;\n      notify(state, false);\n    }\n  } catch (error) {\n    internalReject({ done: false }, error, state);\n  }\n};\n\n// constructor polyfill\nif (FORCED_PROMISE_CONSTRUCTOR$4) {\n  // 25.4.3.1 Promise(executor)\n  PromiseConstructor = function Promise(executor) {\n    anInstance(this, PromisePrototype);\n    aCallable$3(executor);\n    call$6(Internal, this);\n    var state = getInternalPromiseState(this);\n    try {\n      executor(bind$1(internalResolve, state), bind$1(internalReject, state));\n    } catch (error) {\n      internalReject(state, error);\n    }\n  };\n\n  PromisePrototype = PromiseConstructor.prototype;\n\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  Internal = function Promise(executor) {\n    setInternalState(this, {\n      type: PROMISE,\n      done: false,\n      notified: false,\n      parent: false,\n      reactions: new Queue(),\n      rejection: false,\n      state: PENDING,\n      value: undefined\n    });\n  };\n\n  // `Promise.prototype.then` method\n  // https://tc39.es/ecma262/#sec-promise.prototype.then\n  Internal.prototype = defineBuiltIn$1(PromisePrototype, 'then', function then(onFulfilled, onRejected) {\n    var state = getInternalPromiseState(this);\n    var reaction = newPromiseCapability$1(speciesConstructor(this, PromiseConstructor));\n    state.parent = true;\n    reaction.ok = isCallable$1(onFulfilled) ? onFulfilled : true;\n    reaction.fail = isCallable$1(onRejected) && onRejected;\n    reaction.domain = IS_NODE ? process.domain : undefined;\n    if (state.state == PENDING) state.reactions.add(reaction);\n    else microtask(function () {\n      callReaction(reaction, state);\n    });\n    return reaction.promise;\n  });\n\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    var state = getInternalPromiseState(promise);\n    this.promise = promise;\n    this.resolve = bind$1(internalResolve, state);\n    this.reject = bind$1(internalReject, state);\n  };\n\n  newPromiseCapabilityModule$3.f = newPromiseCapability$1 = function (C) {\n    return C === PromiseConstructor || C === PromiseWrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n\n  if (isCallable$1(NativePromiseConstructor$2) && NativePromisePrototype$1 !== Object.prototype) {\n    nativeThen = NativePromisePrototype$1.then;\n\n    if (!NATIVE_PROMISE_SUBCLASSING) {\n      // make `Promise#then` return a polyfilled `Promise` for native promise-based APIs\n      defineBuiltIn$1(NativePromisePrototype$1, 'then', function then(onFulfilled, onRejected) {\n        var that = this;\n        return new PromiseConstructor(function (resolve, reject) {\n          call$6(nativeThen, that, resolve, reject);\n        }).then(onFulfilled, onRejected);\n      // https://github.com/zloirock/core-js/issues/640\n      }, { unsafe: true });\n    }\n\n    // make `.constructor === Promise` work for native promise-based APIs\n    try {\n      delete NativePromisePrototype$1.constructor;\n    } catch (error) { /* empty */ }\n\n    // make `instanceof Promise` work for native promise-based APIs\n    if (setPrototypeOf) {\n      setPrototypeOf(NativePromisePrototype$1, PromisePrototype);\n    }\n  }\n}\n\n$$5({ global: true, constructor: true, wrap: true, forced: FORCED_PROMISE_CONSTRUCTOR$4 }, {\n  Promise: PromiseConstructor\n});\n\nsetToStringTag(PromiseConstructor, PROMISE, false);\nsetSpecies(PROMISE);\n\nvar wellKnownSymbol$2 = wellKnownSymbol$e;\nvar Iterators$1 = iterators;\n\nvar ITERATOR$2 = wellKnownSymbol$2('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nvar isArrayIteratorMethod$1 = function (it) {\n  return it !== undefined && (Iterators$1.Array === it || ArrayPrototype[ITERATOR$2] === it);\n};\n\nvar classof = classof$4;\nvar getMethod$1 = getMethod$3;\nvar Iterators = iterators;\nvar wellKnownSymbol$1 = wellKnownSymbol$e;\n\nvar ITERATOR$1 = wellKnownSymbol$1('iterator');\n\nvar getIteratorMethod$2 = function (it) {\n  if (it != undefined) return getMethod$1(it, ITERATOR$1)\n    || getMethod$1(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n\nvar call$5 = functionCall;\nvar aCallable$2 = aCallable$9;\nvar anObject$3 = anObject$a;\nvar tryToString$1 = tryToString$5;\nvar getIteratorMethod$1 = getIteratorMethod$2;\n\nvar $TypeError$1 = TypeError;\n\nvar getIterator$1 = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod$1(argument) : usingIterator;\n  if (aCallable$2(iteratorMethod)) return anObject$3(call$5(iteratorMethod, argument));\n  throw $TypeError$1(tryToString$1(argument) + ' is not iterable');\n};\n\nvar call$4 = functionCall;\nvar anObject$2 = anObject$a;\nvar getMethod = getMethod$3;\n\nvar iteratorClose$1 = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject$2(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call$4(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject$2(innerResult);\n  return value;\n};\n\nvar bind = functionBindContext;\nvar call$3 = functionCall;\nvar anObject$1 = anObject$a;\nvar tryToString = tryToString$5;\nvar isArrayIteratorMethod = isArrayIteratorMethod$1;\nvar lengthOfArrayLike = lengthOfArrayLike$5;\nvar isPrototypeOf = objectIsPrototypeOf;\nvar getIterator = getIterator$1;\nvar getIteratorMethod = getIteratorMethod$2;\nvar iteratorClose = iteratorClose$1;\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nvar iterate$2 = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject$1(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = iterator.next;\n  while (!(step = call$3(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n\nvar wellKnownSymbol = wellKnownSymbol$e;\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line es-x/no-array-from, no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nvar checkCorrectnessOfIteration$1 = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n\nvar NativePromiseConstructor$1 = promiseNativeConstructor;\nvar checkCorrectnessOfIteration = checkCorrectnessOfIteration$1;\nvar FORCED_PROMISE_CONSTRUCTOR$3 = promiseConstructorDetection.CONSTRUCTOR;\n\nvar promiseStaticsIncorrectIteration = FORCED_PROMISE_CONSTRUCTOR$3 || !checkCorrectnessOfIteration(function (iterable) {\n  NativePromiseConstructor$1.all(iterable).then(undefined, function () { /* empty */ });\n});\n\nvar $$4 = _export;\nvar call$2 = functionCall;\nvar aCallable$1 = aCallable$9;\nvar newPromiseCapabilityModule$2 = newPromiseCapability$2;\nvar perform$1 = perform$3;\nvar iterate$1 = iterate$2;\nvar PROMISE_STATICS_INCORRECT_ITERATION$1 = promiseStaticsIncorrectIteration;\n\n// `Promise.all` method\n// https://tc39.es/ecma262/#sec-promise.all\n$$4({ target: 'Promise', stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION$1 }, {\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule$2.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform$1(function () {\n      var $promiseResolve = aCallable$1(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate$1(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        remaining++;\n        call$2($promiseResolve, C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n\nvar $$3 = _export;\nvar FORCED_PROMISE_CONSTRUCTOR$2 = promiseConstructorDetection.CONSTRUCTOR;\nvar NativePromiseConstructor = promiseNativeConstructor;\nvar getBuiltIn$1 = getBuiltIn$8;\nvar isCallable = isCallable$l;\nvar defineBuiltIn = defineBuiltIn$5;\n\nvar NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;\n\n// `Promise.prototype.catch` method\n// https://tc39.es/ecma262/#sec-promise.prototype.catch\n$$3({ target: 'Promise', proto: true, forced: FORCED_PROMISE_CONSTRUCTOR$2, real: true }, {\n  'catch': function (onRejected) {\n    return this.then(undefined, onRejected);\n  }\n});\n\n// makes sure that native promise-based APIs `Promise#catch` properly works with patched `Promise#then`\nif (isCallable(NativePromiseConstructor)) {\n  var method = getBuiltIn$1('Promise').prototype['catch'];\n  if (NativePromisePrototype['catch'] !== method) {\n    defineBuiltIn(NativePromisePrototype, 'catch', method, { unsafe: true });\n  }\n}\n\nvar $$2 = _export;\nvar call$1 = functionCall;\nvar aCallable = aCallable$9;\nvar newPromiseCapabilityModule$1 = newPromiseCapability$2;\nvar perform = perform$3;\nvar iterate = iterate$2;\nvar PROMISE_STATICS_INCORRECT_ITERATION = promiseStaticsIncorrectIteration;\n\n// `Promise.race` method\n// https://tc39.es/ecma262/#sec-promise.race\n$$2({ target: 'Promise', stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule$1.f(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aCallable(C.resolve);\n      iterate(iterable, function (promise) {\n        call$1($promiseResolve, C, promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n\nvar $$1 = _export;\nvar call = functionCall;\nvar newPromiseCapabilityModule = newPromiseCapability$2;\nvar FORCED_PROMISE_CONSTRUCTOR$1 = promiseConstructorDetection.CONSTRUCTOR;\n\n// `Promise.reject` method\n// https://tc39.es/ecma262/#sec-promise.reject\n$$1({ target: 'Promise', stat: true, forced: FORCED_PROMISE_CONSTRUCTOR$1 }, {\n  reject: function reject(r) {\n    var capability = newPromiseCapabilityModule.f(this);\n    call(capability.reject, undefined, r);\n    return capability.promise;\n  }\n});\n\nvar anObject = anObject$a;\nvar isObject = isObject$7;\nvar newPromiseCapability = newPromiseCapability$2;\n\nvar promiseResolve$1 = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\nvar $ = _export;\nvar getBuiltIn = getBuiltIn$8;\nvar FORCED_PROMISE_CONSTRUCTOR = promiseConstructorDetection.CONSTRUCTOR;\nvar promiseResolve = promiseResolve$1;\n\ngetBuiltIn('Promise');\n\n// `Promise.resolve` method\n// https://tc39.es/ecma262/#sec-promise.resolve\n$({ target: 'Promise', stat: true, forced: FORCED_PROMISE_CONSTRUCTOR }, {\n  resolve: function resolve(x) {\n    return promiseResolve(this, x);\n  }\n});\n\nconst HardwareWalletAccountsForm = ({\n  accounts,\n  onSelectedChanged,\n  onSubmit\n}) => {\n  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n    className: \"choose-ledger-account-form-wrapper\"\n  }, {\n    children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", {\n      children: [\"We found \", accounts.length, \" accounts on your device. Select the account(s) you wish to connect.\"]\n    }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"form\", Object.assign({\n      className: \"form\",\n      onSubmit: e => {\n        onSubmit(accounts, e);\n      }\n    }, {\n      children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n        children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n          className: \"form-control\"\n        }, {\n          children: accounts.map((account, index) => (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n            children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", {\n              onChange: e => {\n                onSelectedChanged(index, e.target.checked);\n              },\n              checked: account.selected,\n              type: \"checkbox\",\n              id: account.accountId,\n              name: account.accountId,\n              value: account.accountId\n            }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"label\", Object.assign({\n              htmlFor: account.accountId\n            }, {\n              children: [\" \", account.accountId]\n            })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"br\", {})]\n          }, index))\n        })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n          className: \"action-buttons\"\n        }, {\n          children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n            className: \"right-button\",\n            type: \"submit\",\n            disabled: !accounts.some(x => x.selected)\n          }, {\n            children: \"Continue\"\n          }))\n        }))]\n      })\n    }))]\n  }));\n};\n\nconst WalletConnecting = ({\n  wallet,\n  onBack\n}) => {\n  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n    className: \"connecting-wrapper\"\n  }, {\n    children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"content\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n        className: \"spinner\",\n        id: wallet === null || wallet === void 0 ? void 0 : wallet.id\n      }, {\n        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n          className: \"icon\"\n        }, {\n          children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", {\n            src: wallet === null || wallet === void 0 ? void 0 : wallet.metadata.iconUrl,\n            alt: \"\"\n          })\n        }))\n      })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n        children: \"Connecting...\"\n      })]\n    })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n      className: \"action-buttons\"\n    }, {\n      children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n        className: \"left-button\",\n        onClick: onBack\n      }, {\n        children: \"Back\"\n      }))\n    }))]\n  }));\n};\n\nconst DEFAULT_DERIVATION_PATH = \"44'/397'/0'/0'/1'\";\nconst DerivationPath = ({\n  selector,\n  options,\n  onBack,\n  onConnected,\n  params,\n  onError\n}) => {\n  const [route, setRoute] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"EnterDerivationPath\");\n  const [derivationPath, setDerivationPath] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(DEFAULT_DERIVATION_PATH);\n  const [accounts, setAccounts] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n  const [hardwareWallet, setHardwareWallet] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n  const [customAccountId, setCustomAccountId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n  const [connecting, setConnecting] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n\n  const getAccountIds = publicKey => __awaiter(void 0, void 0, void 0, function* () {\n    const response = yield fetch(`${selector.options.network.indexerUrl}/publicKey/ed25519:${publicKey}/accounts`);\n\n    if (!response.ok) {\n      throw new Error(\"Failed to get account id from public key\");\n    }\n\n    const accountIds = yield response.json();\n\n    if (!Array.isArray(accountIds) || !accountIds.length) {\n      return [];\n    }\n\n    return accountIds;\n  });\n\n  const resolveAccounts = wallet => __awaiter(void 0, void 0, void 0, function* () {\n    const publicKey = yield wallet.getPublicKey(derivationPath);\n\n    try {\n      const accountIds = yield getAccountIds(publicKey);\n      return accountIds.map((accountId, index) => {\n        return {\n          derivationPath,\n          publicKey,\n          accountId,\n          selected: index === 0\n        };\n      });\n    } catch (e) {\n      return null;\n    }\n  });\n\n  const handleValidateAccount = () => __awaiter(void 0, void 0, void 0, function* () {\n    const wallet = yield selector.wallet(params.walletId);\n\n    if (wallet.type !== \"hardware\") {\n      return;\n    }\n\n    setConnecting(true);\n    setHardwareWallet(wallet);\n\n    try {\n      const resolvedAccounts = yield resolveAccounts(wallet);\n\n      if (!resolvedAccounts) {\n        setRoute(\"AddCustomAccountId\");\n        return;\n      }\n\n      const noAccounts = resolvedAccounts.length === 0;\n      const multipleAccounts = resolvedAccounts.length > 1;\n\n      if (noAccounts) {\n        setRoute(\"NoAccountsFound\");\n        return;\n      }\n\n      setAccounts(resolvedAccounts);\n\n      if (!multipleAccounts) {\n        setRoute(\"OverviewAccounts\");\n      } else {\n        setRoute(\"ChooseAccount\");\n      }\n    } catch (err) {\n      setConnecting(false);\n      const message = err instanceof Error ? err.message : \"Something went wrong\";\n      onError(message);\n    } finally {\n      setConnecting(false);\n    }\n  });\n\n  const handleAddCustomAccountId = () => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n      setConnecting(true);\n      const publicKey = yield hardwareWallet.getPublicKey(derivationPath);\n      setAccounts([{\n        derivationPath: derivationPath,\n        publicKey,\n        accountId: customAccountId,\n        selected: true\n      }]);\n      setRoute(\"OverviewAccounts\");\n    } catch (err) {\n      setConnecting(false);\n      const message = err instanceof Error ? err.message : \"Something went wrong\";\n      onError(message);\n    } finally {\n      setConnecting(false);\n    }\n  });\n\n  const handleSignIn = () => {\n    const mapAccounts = accounts.map(account => {\n      return {\n        derivationPath: account.derivationPath,\n        publicKey: account.publicKey,\n        accountId: account.accountId\n      };\n    });\n    return hardwareWallet.signIn({\n      contractId: options.contractId,\n      methodNames: options.methodNames,\n      accounts: mapAccounts\n    }).then(() => onConnected()).catch(err => {\n      onError(`Error: ${err.message}`);\n    });\n  };\n\n  const handleEnterClick = e => __awaiter(void 0, void 0, void 0, function* () {\n    if (e.key === \"Enter\") {\n      yield handleValidateAccount();\n    }\n  });\n\n  if (connecting) {\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n      className: \"derivation-path-wrapper\"\n    }, {\n      children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(WalletConnecting, {\n        wallet: hardwareWallet,\n        onBack: () => {\n          setConnecting(false);\n        }\n      })\n    }));\n  }\n\n  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n    className: \"derivation-path-wrapper\"\n  }, {\n    children: [route === \"EnterDerivationPath\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"enter-derivation-path\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n        children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", {\n          children: \"Make sure your device is plugged in, then enter a derivation path to connect:\"\n        }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", {\n          type: \"text\",\n          placeholder: \"Derivation Path\",\n          value: derivationPath,\n          onChange: e => {\n            setDerivationPath(e.target.value);\n          },\n          onKeyPress: handleEnterClick\n        })]\n      }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n        className: \"action-buttons\"\n      }, {\n        children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n          className: \"left-button\",\n          onClick: onBack\n        }, {\n          children: \"Back\"\n        })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n          className: \"right-button\",\n          onClick: handleValidateAccount\n        }, {\n          children: \"Continue\"\n        }))]\n      }))]\n    })), route === \"NoAccountsFound\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"no-accounts-found-wrapper\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", {\n        children: [\"Can't found any account associated with this Ledger. Please create a new NEAR account on\", \" \", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", Object.assign({\n          href: `https://${selector.options.network.networkId === \"testnet\" ? \"testnet\" : \"app\"}.mynearwallet.com/create`,\n          target: \"_blank\"\n        }, {\n          children: \"MyNearWallet\"\n        })), \" \", \"or connect an another Ledger.\"]\n      }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n        className: \"action-buttons\"\n      }, {\n        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n          className: \"left-button\",\n          onClick: () => {\n            setRoute(\"EnterDerivationPath\");\n          }\n        }, {\n          children: \"Back\"\n        }))\n      }))]\n    })), route === \"ChooseAccount\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(HardwareWalletAccountsForm, {\n      accounts: accounts,\n      onSelectedChanged: (index, selected) => {\n        setAccounts(prevAccounts => {\n          const updateAccounts = prevAccounts.map((account, idx) => {\n            const selectedValue = index === idx ? selected : account.selected;\n            return Object.assign(Object.assign({}, account), {\n              selected: selectedValue\n            });\n          });\n          return [...updateAccounts];\n        });\n      },\n      onSubmit: (acc, e) => {\n        e.preventDefault();\n        setAccounts(prevAccounts => {\n          const selectedAccounts = prevAccounts.filter(account => account.selected);\n          return [...selectedAccounts];\n        });\n        setRoute(\"OverviewAccounts\");\n      }\n    }), route === \"AddCustomAccountId\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"enter-custom-account\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", {\n        children: \"Failed to automatically find account id. Provide it manually:\"\n      }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n        className: \"input-wrapper\"\n      }, {\n        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", {\n          type: \"text\",\n          placeholder: \"Account ID\",\n          value: customAccountId,\n          onChange: e => {\n            setCustomAccountId(e.target.value);\n          }\n        })\n      })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n        className: \"action-buttons\"\n      }, {\n        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n          className: \"right-button\",\n          onClick: handleAddCustomAccountId\n        }, {\n          children: \"Continue\"\n        }))\n      }))]\n    })), route === \"OverviewAccounts\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"overview-wrapper\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n        className: \"overview-header\"\n      }, {\n        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h4\", {\n          children: \"Accounts\"\n        })\n      })), accounts.map((account, index) => (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n          className: \"account\"\n        }, {\n          children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n            children: account.accountId\n          })\n        }))\n      }, account.accountId)), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n        className: \"action-buttons\"\n      }, {\n        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n          className: \"right-button\",\n          onClick: handleSignIn,\n          disabled: accounts.length === 0\n        }, {\n          children: \"Connect\"\n        }))\n      }))]\n    }))]\n  }));\n};\n\nconst WalletNotInstalled = ({\n  module,\n  onBack\n}) => {\n  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n    className: \"wallet-not-installed-wrapper\"\n  }, {\n    children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"wallet-data\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", Object.assign({\n        className: `wallet-icon-box ${module.id}`\n      }, {\n        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", {\n          src: module.metadata.iconUrl,\n          alt: module.metadata.name\n        })\n      })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", {\n        children: module.metadata.name\n      })]\n    })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", {\n      children: [`You'll need to install ${module.metadata.name} to continue. After installing`, (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", Object.assign({\n        className: \"refresh-link\",\n        onClick: () => window.location.reload()\n      }, {\n        children: \"\\u00A0refresh the page.\"\n      }))]\n    }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"action-buttons\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n        className: \"left-button\",\n        onClick: onBack\n      }, {\n        children: \"Back\"\n      })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", Object.assign({\n        className: \"right-button\",\n        onClick: () => {\n          if (module.type !== \"injected\") {\n            return;\n          }\n\n          window.open(module.metadata.downloadUrl, \"_blank\");\n        }\n      }, {\n        children: `Open ${module.metadata.name}`\n      }))]\n    }))]\n  }));\n};\n\nconst getThemeClass = theme => {\n  switch (theme) {\n    case \"dark\":\n      return \"dark-theme\";\n\n    case \"light\":\n      return \"light-theme\";\n\n    default:\n      return \"\";\n  }\n};\n\nconst Modal = ({\n  selector,\n  options,\n  visible,\n  hide\n}) => {\n  var _a, _b;\n\n  const [route, setRoute] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({\n    name: \"WalletOptions\"\n  });\n  const [alertMessage, setAlertMessage] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    setRoute({\n      name: \"WalletOptions\"\n    });\n  }, [visible]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const subscription = selector.on(\"networkChanged\", ({\n      networkId\n    }) => {\n      // Switched back to the correct network.\n      if (networkId === selector.options.network.networkId) {\n        return handleDismissClick();\n      }\n\n      setRoute({\n        name: \"WalletNetworkChanged\"\n      });\n    });\n    return () => subscription.remove(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const handleDismissClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    setAlertMessage(null);\n    setRoute({\n      name: \"WalletOptions\"\n    });\n    hide();\n  }, [hide]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const close = e => {\n      if (e.key === \"Escape\") {\n        handleDismissClick();\n      }\n    };\n\n    window.addEventListener(\"keydown\", close);\n    return () => window.removeEventListener(\"keydown\", close);\n  }, [handleDismissClick]);\n\n  if (!visible) {\n    return null;\n  }\n\n  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n    className: `nws-modal-wrapper ${getThemeClass(options === null || options === void 0 ? void 0 : options.theme)} ${visible ? \"open\" : \"\"}`\n  }, {\n    children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n      className: \"modal-overlay\",\n      onClick: handleDismissClick\n    }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n      className: \"modal\"\n    }, {\n      children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n        className: \"modal-header\"\n      }, {\n        children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h2\", {\n          children: \"Connect Wallet\"\n        }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CloseButton, {\n          onClick: handleDismissClick\n        })]\n      })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", Object.assign({\n        className: \"modal-body\"\n      }, {\n        children: [route.name === \"AlertMessage\" && alertMessage && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(AlertMessage, {\n          message: alertMessage,\n          onBack: () => {\n            setAlertMessage(null);\n            setRoute({\n              name: \"WalletOptions\"\n            });\n          }\n        }), route.name === \"WalletOptions\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(WalletOptions, {\n          selector: selector,\n          options: options,\n          onWalletNotInstalled: module => {\n            setRoute({\n              name: \"WalletNotInstalled\",\n              params: {\n                module: module\n              }\n            });\n          },\n          onConnectHardwareWallet: () => {\n            setRoute({\n              name: \"DerivationPath\",\n              params: {\n                walletId: selector.store.getState().selectedWalletId || \"ledger\"\n              }\n            });\n          },\n          onConnecting: wallet => {\n            setRoute({\n              name: \"WalletConnecting\",\n              params: {\n                wallet: wallet\n              }\n            });\n          },\n          onConnected: handleDismissClick,\n          onError: err => {\n            setAlertMessage(err.message);\n            setRoute({\n              name: \"AlertMessage\"\n            });\n          }\n        }), route.name === \"DerivationPath\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DerivationPath, {\n          selector: selector,\n          options: options,\n          onConnected: handleDismissClick,\n          params: route.params,\n          onBack: () => setRoute({\n            name: \"WalletOptions\"\n          }),\n          onError: message => {\n            setAlertMessage(message);\n            setRoute({\n              name: \"AlertMessage\"\n            });\n          }\n        }), route.name === \"WalletNetworkChanged\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(WalletNetworkChanged, {\n          selector: selector,\n          onSwitchWallet: () => setRoute({\n            name: \"WalletOptions\"\n          }),\n          onDismiss: handleDismissClick\n        }), route.name === \"WalletNotInstalled\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(WalletNotInstalled, {\n          module: (_a = route.params) === null || _a === void 0 ? void 0 : _a.module,\n          onBack: () => {\n            setRoute({\n              name: \"WalletOptions\"\n            });\n          }\n        }), route.name === \"WalletConnecting\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(WalletConnecting, {\n          wallet: (_b = route.params) === null || _b === void 0 ? void 0 : _b.wallet,\n          onBack: () => {\n            setRoute({\n              name: \"WalletOptions\"\n            });\n          }\n        })]\n      }))]\n    }))]\n  }));\n};\n\nconst MODAL_ELEMENT_ID = \"near-wallet-selector-modal\";\nlet modalInstance = null;\nconst setupModal = (selector, options) => {\n  const el = document.createElement(\"div\");\n  el.id = MODAL_ELEMENT_ID;\n  document.body.appendChild(el);\n  const container = document.getElementById(MODAL_ELEMENT_ID);\n  const root = (0,react_dom_client__WEBPACK_IMPORTED_MODULE_1__.createRoot)(container);\n\n  const render = (visible = false) => {\n    root.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Modal, {\n      selector: selector,\n      options: options,\n      visible: visible,\n      hide: () => render(false)\n    }));\n  };\n\n  render();\n\n  if (!modalInstance) {\n    modalInstance = {\n      show: () => {\n        render(true);\n      },\n      hide: () => {\n        render(false);\n      }\n    };\n  }\n\n  return modalInstance;\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vZGlzdC9wYWNrYWdlcy9tb2RhbC11aS9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThDO0FBQ0E7QUFDcUI7O0FBRW5FOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLDRCQUE0QixhQUFhO0FBQ3pDO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsaUNBQWlDO0FBQ2pDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGNBQWM7O0FBRS9CLGdCQUFnQjs7QUFFaEI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0NBQXNDLGtEQUFrRDtBQUN4RixJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG1FQUFtRTs7QUFFbkU7O0FBRUE7O0FBRUE7QUFDQSx5RUFBeUU7QUFDekUsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxxQ0FBcUM7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsT0FBTyxtQkFBbUIsYUFBYTtBQUN4RSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsYUFBYTtBQUMxRDtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QixHQUFHO0FBQ0gsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsMENBQTBDOztBQUUxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnQkFBZ0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGO0FBQ2xGOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHNCQUFzQixtQkFBbUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLFdBQVcsZ0JBQWdCO0FBQ2pDO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQ0FBcUM7O0FBRXJDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnQkFBZ0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFF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Q0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGdCQUFnQjs7QUFFbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNB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QUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vZGlzdC9wYWNrYWdlcy9tb2RhbC11aS9pbmRleC5qcz82MTc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeHMsIGpzeCB9IGZyb20gJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCB7IGNyZWF0ZVJvb3QgfSBmcm9tICdyZWFjdC1kb20vY2xpZW50JztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIEZyYWdtZW50LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxudmFyIGNvbW1vbmpzR2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge307XG5cbnZhciBmYWlscyRmID0gZnVuY3Rpb24gKGV4ZWMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gISFleGVjKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbnZhciBmYWlscyRlID0gZmFpbHMkZjtcblxudmFyIGZ1bmN0aW9uQmluZE5hdGl2ZSA9ICFmYWlscyRlKGZ1bmN0aW9uICgpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tZnVuY3Rpb24tcHJvdG90eXBlLWJpbmQgLS0gc2FmZVxuICB2YXIgdGVzdCA9IChmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH0pLmJpbmQoKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucyAtLSBzYWZlXG4gIHJldHVybiB0eXBlb2YgdGVzdCAhPSAnZnVuY3Rpb24nIHx8IHRlc3QuaGFzT3duUHJvcGVydHkoJ3Byb3RvdHlwZScpO1xufSk7XG5cbnZhciBOQVRJVkVfQklORCQzID0gZnVuY3Rpb25CaW5kTmF0aXZlO1xuXG52YXIgRnVuY3Rpb25Qcm90b3R5cGUkMiA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbnZhciBiaW5kJDUgPSBGdW5jdGlvblByb3RvdHlwZSQyLmJpbmQ7XG52YXIgY2FsbCRlID0gRnVuY3Rpb25Qcm90b3R5cGUkMi5jYWxsO1xudmFyIHVuY3VycnlUaGlzJGcgPSBOQVRJVkVfQklORCQzICYmIGJpbmQkNS5iaW5kKGNhbGwkZSwgY2FsbCRlKTtcblxudmFyIGZ1bmN0aW9uVW5jdXJyeVRoaXMgPSBOQVRJVkVfQklORCQzID8gZnVuY3Rpb24gKGZuKSB7XG4gIHJldHVybiBmbiAmJiB1bmN1cnJ5VGhpcyRnKGZuKTtcbn0gOiBmdW5jdGlvbiAoZm4pIHtcbiAgcmV0dXJuIGZuICYmIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY2FsbCRlLmFwcGx5KGZuLCBhcmd1bWVudHMpO1xuICB9O1xufTtcblxudmFyIHVuY3VycnlUaGlzJGYgPSBmdW5jdGlvblVuY3VycnlUaGlzO1xuXG52YXIgdG9TdHJpbmckNCA9IHVuY3VycnlUaGlzJGYoe30udG9TdHJpbmcpO1xudmFyIHN0cmluZ1NsaWNlJDEgPSB1bmN1cnJ5VGhpcyRmKCcnLnNsaWNlKTtcblxudmFyIGNsYXNzb2ZSYXckMSA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gc3RyaW5nU2xpY2UkMSh0b1N0cmluZyQ0KGl0KSwgOCwgLTEpO1xufTtcblxudmFyIHVuY3VycnlUaGlzJGUgPSBmdW5jdGlvblVuY3VycnlUaGlzO1xudmFyIGZhaWxzJGQgPSBmYWlscyRmO1xudmFyIGNsYXNzb2YkNSA9IGNsYXNzb2ZSYXckMTtcblxudmFyICRPYmplY3QkNCA9IE9iamVjdDtcbnZhciBzcGxpdCA9IHVuY3VycnlUaGlzJGUoJycuc3BsaXQpO1xuXG4vLyBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIGFuZCBub24tZW51bWVyYWJsZSBvbGQgVjggc3RyaW5nc1xudmFyIGluZGV4ZWRPYmplY3QgPSBmYWlscyRkKGZ1bmN0aW9uICgpIHtcbiAgLy8gdGhyb3dzIGFuIGVycm9yIGluIHJoaW5vLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvcmhpbm8vaXNzdWVzLzM0NlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zIC0tIHNhZmVcbiAgcmV0dXJuICEkT2JqZWN0JDQoJ3onKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKTtcbn0pID8gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBjbGFzc29mJDUoaXQpID09ICdTdHJpbmcnID8gc3BsaXQoaXQsICcnKSA6ICRPYmplY3QkNChpdCk7XG59IDogJE9iamVjdCQ0O1xuXG52YXIgJFR5cGVFcnJvciRkID0gVHlwZUVycm9yO1xuXG4vLyBgUmVxdWlyZU9iamVjdENvZXJjaWJsZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXJlcXVpcmVvYmplY3Rjb2VyY2libGVcbnZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlJDIgPSBmdW5jdGlvbiAoaXQpIHtcbiAgaWYgKGl0ID09IHVuZGVmaW5lZCkgdGhyb3cgJFR5cGVFcnJvciRkKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gXCIgKyBpdCk7XG4gIHJldHVybiBpdDtcbn07XG5cbi8vIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXG52YXIgSW5kZXhlZE9iamVjdCQyID0gaW5kZXhlZE9iamVjdDtcbnZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlJDEgPSByZXF1aXJlT2JqZWN0Q29lcmNpYmxlJDI7XG5cbnZhciB0b0luZGV4ZWRPYmplY3QkNSA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gSW5kZXhlZE9iamVjdCQyKHJlcXVpcmVPYmplY3RDb2VyY2libGUkMShpdCkpO1xufTtcblxudmFyIGNoZWNrID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpdCAmJiBpdC5NYXRoID09IE1hdGggJiYgaXQ7XG59O1xuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxudmFyIGdsb2JhbCRrID1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tZ2xvYmFsLXRoaXMgLS0gc2FmZVxuICBjaGVjayh0eXBlb2YgZ2xvYmFsVGhpcyA9PSAnb2JqZWN0JyAmJiBnbG9iYWxUaGlzKSB8fFxuICBjaGVjayh0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIHdpbmRvdykgfHxcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAtLSBzYWZlXG4gIGNoZWNrKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYpIHx8XG4gIGNoZWNrKHR5cGVvZiBjb21tb25qc0dsb2JhbCA9PSAnb2JqZWN0JyAmJiBjb21tb25qc0dsb2JhbCkgfHxcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jIC0tIGZhbGxiYWNrXG4gIChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KSgpIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbnZhciBzaGFyZWQkMyA9IHtleHBvcnRzOiB7fX07XG5cbnZhciBnbG9iYWwkaiA9IGdsb2JhbCRrO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZGVmaW5lcHJvcGVydHkgLS0gc2FmZVxudmFyIGRlZmluZVByb3BlcnR5JDYgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG5cbnZhciBkZWZpbmVHbG9iYWxQcm9wZXJ0eSQzID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgdHJ5IHtcbiAgICBkZWZpbmVQcm9wZXJ0eSQ2KGdsb2JhbCRqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGdsb2JhbCRqW2tleV0gPSB2YWx1ZTtcbiAgfSByZXR1cm4gdmFsdWU7XG59O1xuXG52YXIgZ2xvYmFsJGkgPSBnbG9iYWwkaztcbnZhciBkZWZpbmVHbG9iYWxQcm9wZXJ0eSQyID0gZGVmaW5lR2xvYmFsUHJvcGVydHkkMztcblxudmFyIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nO1xudmFyIHN0b3JlJDMgPSBnbG9iYWwkaVtTSEFSRURdIHx8IGRlZmluZUdsb2JhbFByb3BlcnR5JDIoU0hBUkVELCB7fSk7XG5cbnZhciBzaGFyZWRTdG9yZSA9IHN0b3JlJDM7XG5cbnZhciBzdG9yZSQyID0gc2hhcmVkU3RvcmU7XG5cbihzaGFyZWQkMy5leHBvcnRzID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgcmV0dXJuIHN0b3JlJDJba2V5XSB8fCAoc3RvcmUkMltrZXldID0gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoge30pO1xufSkoJ3ZlcnNpb25zJywgW10pLnB1c2goe1xuICB2ZXJzaW9uOiAnMy4yMy4zJyxcbiAgbW9kZTogJ2dsb2JhbCcsXG4gIGNvcHlyaWdodDogJ8KpIDIwMTQtMjAyMiBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KScsXG4gIGxpY2Vuc2U6ICdodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9ibG9iL3YzLjIzLjMvTElDRU5TRScsXG4gIHNvdXJjZTogJ2h0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzJ1xufSk7XG5cbnZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlID0gcmVxdWlyZU9iamVjdENvZXJjaWJsZSQyO1xuXG52YXIgJE9iamVjdCQzID0gT2JqZWN0O1xuXG4vLyBgVG9PYmplY3RgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy10b29iamVjdFxudmFyIHRvT2JqZWN0JDUgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgcmV0dXJuICRPYmplY3QkMyhyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KSk7XG59O1xuXG52YXIgdW5jdXJyeVRoaXMkZCA9IGZ1bmN0aW9uVW5jdXJyeVRoaXM7XG52YXIgdG9PYmplY3QkNCA9IHRvT2JqZWN0JDU7XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IHVuY3VycnlUaGlzJGQoe30uaGFzT3duUHJvcGVydHkpO1xuXG4vLyBgSGFzT3duUHJvcGVydHlgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1oYXNvd25wcm9wZXJ0eVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tb2JqZWN0LWhhc293biAtLSBzYWZlXG52YXIgaGFzT3duUHJvcGVydHlfMSA9IE9iamVjdC5oYXNPd24gfHwgZnVuY3Rpb24gaGFzT3duKGl0LCBrZXkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5KHRvT2JqZWN0JDQoaXQpLCBrZXkpO1xufTtcblxudmFyIHVuY3VycnlUaGlzJGMgPSBmdW5jdGlvblVuY3VycnlUaGlzO1xuXG52YXIgaWQgPSAwO1xudmFyIHBvc3RmaXggPSBNYXRoLnJhbmRvbSgpO1xudmFyIHRvU3RyaW5nJDMgPSB1bmN1cnJ5VGhpcyRjKDEuMC50b1N0cmluZyk7XG5cbnZhciB1aWQkMiA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgcmV0dXJuICdTeW1ib2woJyArIChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5KSArICcpXycgKyB0b1N0cmluZyQzKCsraWQgKyBwb3N0Zml4LCAzNik7XG59O1xuXG4vLyBgSXNDYWxsYWJsZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWlzY2FsbGFibGVcbnZhciBpc0NhbGxhYmxlJGwgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmd1bWVudCA9PSAnZnVuY3Rpb24nO1xufTtcblxudmFyIGdsb2JhbCRoID0gZ2xvYmFsJGs7XG52YXIgaXNDYWxsYWJsZSRrID0gaXNDYWxsYWJsZSRsO1xuXG52YXIgYUZ1bmN0aW9uID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIHJldHVybiBpc0NhbGxhYmxlJGsoYXJndW1lbnQpID8gYXJndW1lbnQgOiB1bmRlZmluZWQ7XG59O1xuXG52YXIgZ2V0QnVpbHRJbiQ4ID0gZnVuY3Rpb24gKG5hbWVzcGFjZSwgbWV0aG9kKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IGFGdW5jdGlvbihnbG9iYWwkaFtuYW1lc3BhY2VdKSA6IGdsb2JhbCRoW25hbWVzcGFjZV0gJiYgZ2xvYmFsJGhbbmFtZXNwYWNlXVttZXRob2RdO1xufTtcblxudmFyIGdldEJ1aWx0SW4kNyA9IGdldEJ1aWx0SW4kODtcblxudmFyIGVuZ2luZVVzZXJBZ2VudCA9IGdldEJ1aWx0SW4kNygnbmF2aWdhdG9yJywgJ3VzZXJBZ2VudCcpIHx8ICcnO1xuXG52YXIgZ2xvYmFsJGcgPSBnbG9iYWwkaztcbnZhciB1c2VyQWdlbnQkNSA9IGVuZ2luZVVzZXJBZ2VudDtcblxudmFyIHByb2Nlc3MkMyA9IGdsb2JhbCRnLnByb2Nlc3M7XG52YXIgRGVubyQxID0gZ2xvYmFsJGcuRGVubztcbnZhciB2ZXJzaW9ucyA9IHByb2Nlc3MkMyAmJiBwcm9jZXNzJDMudmVyc2lvbnMgfHwgRGVubyQxICYmIERlbm8kMS52ZXJzaW9uO1xudmFyIHY4ID0gdmVyc2lvbnMgJiYgdmVyc2lvbnMudjg7XG52YXIgbWF0Y2gsIHZlcnNpb247XG5cbmlmICh2OCkge1xuICBtYXRjaCA9IHY4LnNwbGl0KCcuJyk7XG4gIC8vIGluIG9sZCBDaHJvbWUsIHZlcnNpb25zIG9mIFY4IGlzbid0IFY4ID0gQ2hyb21lIC8gMTBcbiAgLy8gYnV0IHRoZWlyIGNvcnJlY3QgdmVyc2lvbnMgYXJlIG5vdCBpbnRlcmVzdGluZyBmb3IgdXNcbiAgdmVyc2lvbiA9IG1hdGNoWzBdID4gMCAmJiBtYXRjaFswXSA8IDQgPyAxIDogKyhtYXRjaFswXSArIG1hdGNoWzFdKTtcbn1cblxuLy8gQnJvd3NlckZTIE5vZGVKUyBgcHJvY2Vzc2AgcG9seWZpbGwgaW5jb3JyZWN0bHkgc2V0IGAudjhgIHRvIGAwLjBgXG4vLyBzbyBjaGVjayBgdXNlckFnZW50YCBldmVuIGlmIGAudjhgIGV4aXN0cywgYnV0IDBcbmlmICghdmVyc2lvbiAmJiB1c2VyQWdlbnQkNSkge1xuICBtYXRjaCA9IHVzZXJBZ2VudCQ1Lm1hdGNoKC9FZGdlXFwvKFxcZCspLyk7XG4gIGlmICghbWF0Y2ggfHwgbWF0Y2hbMV0gPj0gNzQpIHtcbiAgICBtYXRjaCA9IHVzZXJBZ2VudCQ1Lm1hdGNoKC9DaHJvbWVcXC8oXFxkKykvKTtcbiAgICBpZiAobWF0Y2gpIHZlcnNpb24gPSArbWF0Y2hbMV07XG4gIH1cbn1cblxudmFyIGVuZ2luZVY4VmVyc2lvbiA9IHZlcnNpb247XG5cbi8qIGVzbGludC1kaXNhYmxlIGVzLXgvbm8tc3ltYm9sIC0tIHJlcXVpcmVkIGZvciB0ZXN0aW5nICovXG5cbnZhciBWOF9WRVJTSU9OJDEgPSBlbmdpbmVWOFZlcnNpb247XG52YXIgZmFpbHMkYyA9IGZhaWxzJGY7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy14L25vLW9iamVjdC1nZXRvd25wcm9wZXJ0eXN5bWJvbHMgLS0gcmVxdWlyZWQgZm9yIHRlc3RpbmdcbnZhciBuYXRpdmVTeW1ib2wgPSAhIU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYgIWZhaWxzJGMoZnVuY3Rpb24gKCkge1xuICB2YXIgc3ltYm9sID0gU3ltYm9sKCk7XG4gIC8vIENocm9tZSAzOCBTeW1ib2wgaGFzIGluY29ycmVjdCB0b1N0cmluZyBjb252ZXJzaW9uXG4gIC8vIGBnZXQtb3duLXByb3BlcnR5LXN5bWJvbHNgIHBvbHlmaWxsIHN5bWJvbHMgY29udmVydGVkIHRvIG9iamVjdCBhcmUgbm90IFN5bWJvbCBpbnN0YW5jZXNcbiAgcmV0dXJuICFTdHJpbmcoc3ltYm9sKSB8fCAhKE9iamVjdChzeW1ib2wpIGluc3RhbmNlb2YgU3ltYm9sKSB8fFxuICAgIC8vIENocm9tZSAzOC00MCBzeW1ib2xzIGFyZSBub3QgaW5oZXJpdGVkIGZyb20gRE9NIGNvbGxlY3Rpb25zIHByb3RvdHlwZXMgdG8gaW5zdGFuY2VzXG4gICAgIVN5bWJvbC5zaGFtICYmIFY4X1ZFUlNJT04kMSAmJiBWOF9WRVJTSU9OJDEgPCA0MTtcbn0pO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBlcy14L25vLXN5bWJvbCAtLSByZXF1aXJlZCBmb3IgdGVzdGluZyAqL1xuXG52YXIgTkFUSVZFX1NZTUJPTCQyID0gbmF0aXZlU3ltYm9sO1xuXG52YXIgdXNlU3ltYm9sQXNVaWQgPSBOQVRJVkVfU1lNQk9MJDJcbiAgJiYgIVN5bWJvbC5zaGFtXG4gICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT0gJ3N5bWJvbCc7XG5cbnZhciBnbG9iYWwkZiA9IGdsb2JhbCRrO1xudmFyIHNoYXJlZCQyID0gc2hhcmVkJDMuZXhwb3J0cztcbnZhciBoYXNPd24kYSA9IGhhc093blByb3BlcnR5XzE7XG52YXIgdWlkJDEgPSB1aWQkMjtcbnZhciBOQVRJVkVfU1lNQk9MJDEgPSBuYXRpdmVTeW1ib2w7XG52YXIgVVNFX1NZTUJPTF9BU19VSUQkMSA9IHVzZVN5bWJvbEFzVWlkO1xuXG52YXIgV2VsbEtub3duU3ltYm9sc1N0b3JlID0gc2hhcmVkJDIoJ3drcycpO1xudmFyIFN5bWJvbCQxID0gZ2xvYmFsJGYuU3ltYm9sO1xudmFyIHN5bWJvbEZvciA9IFN5bWJvbCQxICYmIFN5bWJvbCQxWydmb3InXTtcbnZhciBjcmVhdGVXZWxsS25vd25TeW1ib2wgPSBVU0VfU1lNQk9MX0FTX1VJRCQxID8gU3ltYm9sJDEgOiBTeW1ib2wkMSAmJiBTeW1ib2wkMS53aXRob3V0U2V0dGVyIHx8IHVpZCQxO1xuXG52YXIgd2VsbEtub3duU3ltYm9sJGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICBpZiAoIWhhc093biRhKFdlbGxLbm93blN5bWJvbHNTdG9yZSwgbmFtZSkgfHwgIShOQVRJVkVfU1lNQk9MJDEgfHwgdHlwZW9mIFdlbGxLbm93blN5bWJvbHNTdG9yZVtuYW1lXSA9PSAnc3RyaW5nJykpIHtcbiAgICB2YXIgZGVzY3JpcHRpb24gPSAnU3ltYm9sLicgKyBuYW1lO1xuICAgIGlmIChOQVRJVkVfU1lNQk9MJDEgJiYgaGFzT3duJGEoU3ltYm9sJDEsIG5hbWUpKSB7XG4gICAgICBXZWxsS25vd25TeW1ib2xzU3RvcmVbbmFtZV0gPSBTeW1ib2wkMVtuYW1lXTtcbiAgICB9IGVsc2UgaWYgKFVTRV9TWU1CT0xfQVNfVUlEJDEgJiYgc3ltYm9sRm9yKSB7XG4gICAgICBXZWxsS25vd25TeW1ib2xzU3RvcmVbbmFtZV0gPSBzeW1ib2xGb3IoZGVzY3JpcHRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBXZWxsS25vd25TeW1ib2xzU3RvcmVbbmFtZV0gPSBjcmVhdGVXZWxsS25vd25TeW1ib2woZGVzY3JpcHRpb24pO1xuICAgIH1cbiAgfSByZXR1cm4gV2VsbEtub3duU3ltYm9sc1N0b3JlW25hbWVdO1xufTtcblxudmFyIGlzQ2FsbGFibGUkaiA9IGlzQ2FsbGFibGUkbDtcblxudmFyIGlzT2JqZWN0JDcgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIHR5cGVvZiBpdCA9PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogaXNDYWxsYWJsZSRqKGl0KTtcbn07XG5cbnZhciBpc09iamVjdCQ2ID0gaXNPYmplY3QkNztcblxudmFyICRTdHJpbmckMyA9IFN0cmluZztcbnZhciAkVHlwZUVycm9yJGMgPSBUeXBlRXJyb3I7XG5cbi8vIGBBc3NlcnQ6IFR5cGUoYXJndW1lbnQpIGlzIE9iamVjdGBcbnZhciBhbk9iamVjdCRhID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIGlmIChpc09iamVjdCQ2KGFyZ3VtZW50KSkgcmV0dXJuIGFyZ3VtZW50O1xuICB0aHJvdyAkVHlwZUVycm9yJGMoJFN0cmluZyQzKGFyZ3VtZW50KSArICcgaXMgbm90IGFuIG9iamVjdCcpO1xufTtcblxudmFyIG9iamVjdERlZmluZVByb3BlcnRpZXMgPSB7fTtcblxudmFyIGZhaWxzJGIgPSBmYWlscyRmO1xuXG4vLyBEZXRlY3QgSUU4J3MgaW5jb21wbGV0ZSBkZWZpbmVQcm9wZXJ0eSBpbXBsZW1lbnRhdGlvblxudmFyIGRlc2NyaXB0b3JzID0gIWZhaWxzJGIoZnVuY3Rpb24gKCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZGVmaW5lcHJvcGVydHkgLS0gcmVxdWlyZWQgZm9yIHRlc3RpbmdcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgMSwgeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDc7IH0gfSlbMV0gIT0gNztcbn0pO1xuXG52YXIgREVTQ1JJUFRPUlMkYiA9IGRlc2NyaXB0b3JzO1xudmFyIGZhaWxzJGEgPSBmYWlscyRmO1xuXG4vLyBWOCB+IENocm9tZSAzNi1cbi8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMzMzRcbnZhciB2OFByb3RvdHlwZURlZmluZUJ1ZyA9IERFU0NSSVBUT1JTJGIgJiYgZmFpbHMkYShmdW5jdGlvbiAoKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy14L25vLW9iamVjdC1kZWZpbmVwcm9wZXJ0eSAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfSwgJ3Byb3RvdHlwZScsIHtcbiAgICB2YWx1ZTogNDIsXG4gICAgd3JpdGFibGU6IGZhbHNlXG4gIH0pLnByb3RvdHlwZSAhPSA0Mjtcbn0pO1xuXG52YXIgb2JqZWN0RGVmaW5lUHJvcGVydHkgPSB7fTtcblxudmFyIGdsb2JhbCRlID0gZ2xvYmFsJGs7XG52YXIgaXNPYmplY3QkNSA9IGlzT2JqZWN0JDc7XG5cbnZhciBkb2N1bWVudCQzID0gZ2xvYmFsJGUuZG9jdW1lbnQ7XG4vLyB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0JyBpbiBvbGQgSUVcbnZhciBFWElTVFMkMSA9IGlzT2JqZWN0JDUoZG9jdW1lbnQkMykgJiYgaXNPYmplY3QkNShkb2N1bWVudCQzLmNyZWF0ZUVsZW1lbnQpO1xuXG52YXIgZG9jdW1lbnRDcmVhdGVFbGVtZW50JDIgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIEVYSVNUUyQxID8gZG9jdW1lbnQkMy5jcmVhdGVFbGVtZW50KGl0KSA6IHt9O1xufTtcblxudmFyIERFU0NSSVBUT1JTJGEgPSBkZXNjcmlwdG9ycztcbnZhciBmYWlscyQ5ID0gZmFpbHMkZjtcbnZhciBjcmVhdGVFbGVtZW50JDEgPSBkb2N1bWVudENyZWF0ZUVsZW1lbnQkMjtcblxuLy8gVGhhbmtzIHRvIElFOCBmb3IgaXRzIGZ1bm55IGRlZmluZVByb3BlcnR5XG52YXIgaWU4RG9tRGVmaW5lID0gIURFU0NSSVBUT1JTJGEgJiYgIWZhaWxzJDkoZnVuY3Rpb24gKCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZGVmaW5lcHJvcGVydHkgLS0gcmVxdWlyZWQgZm9yIHRlc3RpbmdcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjcmVhdGVFbGVtZW50JDEoJ2RpdicpLCAnYScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDc7IH1cbiAgfSkuYSAhPSA3O1xufSk7XG5cbnZhciBOQVRJVkVfQklORCQyID0gZnVuY3Rpb25CaW5kTmF0aXZlO1xuXG52YXIgY2FsbCRkID0gRnVuY3Rpb24ucHJvdG90eXBlLmNhbGw7XG5cbnZhciBmdW5jdGlvbkNhbGwgPSBOQVRJVkVfQklORCQyID8gY2FsbCRkLmJpbmQoY2FsbCRkKSA6IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGNhbGwkZC5hcHBseShjYWxsJGQsIGFyZ3VtZW50cyk7XG59O1xuXG52YXIgdW5jdXJyeVRoaXMkYiA9IGZ1bmN0aW9uVW5jdXJyeVRoaXM7XG5cbnZhciBvYmplY3RJc1Byb3RvdHlwZU9mID0gdW5jdXJyeVRoaXMkYih7fS5pc1Byb3RvdHlwZU9mKTtcblxudmFyIGdldEJ1aWx0SW4kNiA9IGdldEJ1aWx0SW4kODtcbnZhciBpc0NhbGxhYmxlJGkgPSBpc0NhbGxhYmxlJGw7XG52YXIgaXNQcm90b3R5cGVPZiQzID0gb2JqZWN0SXNQcm90b3R5cGVPZjtcbnZhciBVU0VfU1lNQk9MX0FTX1VJRCA9IHVzZVN5bWJvbEFzVWlkO1xuXG52YXIgJE9iamVjdCQyID0gT2JqZWN0O1xuXG52YXIgaXNTeW1ib2wkMiA9IFVTRV9TWU1CT0xfQVNfVUlEID8gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCc7XG59IDogZnVuY3Rpb24gKGl0KSB7XG4gIHZhciAkU3ltYm9sID0gZ2V0QnVpbHRJbiQ2KCdTeW1ib2wnKTtcbiAgcmV0dXJuIGlzQ2FsbGFibGUkaSgkU3ltYm9sKSAmJiBpc1Byb3RvdHlwZU9mJDMoJFN5bWJvbC5wcm90b3R5cGUsICRPYmplY3QkMihpdCkpO1xufTtcblxudmFyICRTdHJpbmckMiA9IFN0cmluZztcblxudmFyIHRyeVRvU3RyaW5nJDUgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gJFN0cmluZyQyKGFyZ3VtZW50KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gJ09iamVjdCc7XG4gIH1cbn07XG5cbnZhciBpc0NhbGxhYmxlJGggPSBpc0NhbGxhYmxlJGw7XG52YXIgdHJ5VG9TdHJpbmckNCA9IHRyeVRvU3RyaW5nJDU7XG5cbnZhciAkVHlwZUVycm9yJGIgPSBUeXBlRXJyb3I7XG5cbi8vIGBBc3NlcnQ6IElzQ2FsbGFibGUoYXJndW1lbnQpIGlzIHRydWVgXG52YXIgYUNhbGxhYmxlJDkgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgaWYgKGlzQ2FsbGFibGUkaChhcmd1bWVudCkpIHJldHVybiBhcmd1bWVudDtcbiAgdGhyb3cgJFR5cGVFcnJvciRiKHRyeVRvU3RyaW5nJDQoYXJndW1lbnQpICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xufTtcblxudmFyIGFDYWxsYWJsZSQ4ID0gYUNhbGxhYmxlJDk7XG5cbi8vIGBHZXRNZXRob2RgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1nZXRtZXRob2RcbnZhciBnZXRNZXRob2QkMyA9IGZ1bmN0aW9uIChWLCBQKSB7XG4gIHZhciBmdW5jID0gVltQXTtcbiAgcmV0dXJuIGZ1bmMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGFDYWxsYWJsZSQ4KGZ1bmMpO1xufTtcblxudmFyIGNhbGwkYyA9IGZ1bmN0aW9uQ2FsbDtcbnZhciBpc0NhbGxhYmxlJGcgPSBpc0NhbGxhYmxlJGw7XG52YXIgaXNPYmplY3QkNCA9IGlzT2JqZWN0JDc7XG5cbnZhciAkVHlwZUVycm9yJGEgPSBUeXBlRXJyb3I7XG5cbi8vIGBPcmRpbmFyeVRvUHJpbWl0aXZlYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb3JkaW5hcnl0b3ByaW1pdGl2ZVxudmFyIG9yZGluYXJ5VG9QcmltaXRpdmUkMSA9IGZ1bmN0aW9uIChpbnB1dCwgcHJlZikge1xuICB2YXIgZm4sIHZhbDtcbiAgaWYgKHByZWYgPT09ICdzdHJpbmcnICYmIGlzQ2FsbGFibGUkZyhmbiA9IGlucHV0LnRvU3RyaW5nKSAmJiAhaXNPYmplY3QkNCh2YWwgPSBjYWxsJGMoZm4sIGlucHV0KSkpIHJldHVybiB2YWw7XG4gIGlmIChpc0NhbGxhYmxlJGcoZm4gPSBpbnB1dC52YWx1ZU9mKSAmJiAhaXNPYmplY3QkNCh2YWwgPSBjYWxsJGMoZm4sIGlucHV0KSkpIHJldHVybiB2YWw7XG4gIGlmIChwcmVmICE9PSAnc3RyaW5nJyAmJiBpc0NhbGxhYmxlJGcoZm4gPSBpbnB1dC50b1N0cmluZykgJiYgIWlzT2JqZWN0JDQodmFsID0gY2FsbCRjKGZuLCBpbnB1dCkpKSByZXR1cm4gdmFsO1xuICB0aHJvdyAkVHlwZUVycm9yJGEoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIik7XG59O1xuXG52YXIgY2FsbCRiID0gZnVuY3Rpb25DYWxsO1xudmFyIGlzT2JqZWN0JDMgPSBpc09iamVjdCQ3O1xudmFyIGlzU3ltYm9sJDEgPSBpc1N5bWJvbCQyO1xudmFyIGdldE1ldGhvZCQyID0gZ2V0TWV0aG9kJDM7XG52YXIgb3JkaW5hcnlUb1ByaW1pdGl2ZSA9IG9yZGluYXJ5VG9QcmltaXRpdmUkMTtcbnZhciB3ZWxsS25vd25TeW1ib2wkZCA9IHdlbGxLbm93blN5bWJvbCRlO1xuXG52YXIgJFR5cGVFcnJvciQ5ID0gVHlwZUVycm9yO1xudmFyIFRPX1BSSU1JVElWRSA9IHdlbGxLbm93blN5bWJvbCRkKCd0b1ByaW1pdGl2ZScpO1xuXG4vLyBgVG9QcmltaXRpdmVgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy10b3ByaW1pdGl2ZVxudmFyIHRvUHJpbWl0aXZlJDEgPSBmdW5jdGlvbiAoaW5wdXQsIHByZWYpIHtcbiAgaWYgKCFpc09iamVjdCQzKGlucHV0KSB8fCBpc1N5bWJvbCQxKGlucHV0KSkgcmV0dXJuIGlucHV0O1xuICB2YXIgZXhvdGljVG9QcmltID0gZ2V0TWV0aG9kJDIoaW5wdXQsIFRPX1BSSU1JVElWRSk7XG4gIHZhciByZXN1bHQ7XG4gIGlmIChleG90aWNUb1ByaW0pIHtcbiAgICBpZiAocHJlZiA9PT0gdW5kZWZpbmVkKSBwcmVmID0gJ2RlZmF1bHQnO1xuICAgIHJlc3VsdCA9IGNhbGwkYihleG90aWNUb1ByaW0sIGlucHV0LCBwcmVmKTtcbiAgICBpZiAoIWlzT2JqZWN0JDMocmVzdWx0KSB8fCBpc1N5bWJvbCQxKHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XG4gICAgdGhyb3cgJFR5cGVFcnJvciQ5KFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpO1xuICB9XG4gIGlmIChwcmVmID09PSB1bmRlZmluZWQpIHByZWYgPSAnbnVtYmVyJztcbiAgcmV0dXJuIG9yZGluYXJ5VG9QcmltaXRpdmUoaW5wdXQsIHByZWYpO1xufTtcblxudmFyIHRvUHJpbWl0aXZlID0gdG9QcmltaXRpdmUkMTtcbnZhciBpc1N5bWJvbCA9IGlzU3ltYm9sJDI7XG5cbi8vIGBUb1Byb3BlcnR5S2V5YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtdG9wcm9wZXJ0eWtleVxudmFyIHRvUHJvcGVydHlLZXkkMyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICB2YXIga2V5ID0gdG9QcmltaXRpdmUoYXJndW1lbnQsICdzdHJpbmcnKTtcbiAgcmV0dXJuIGlzU3ltYm9sKGtleSkgPyBrZXkgOiBrZXkgKyAnJztcbn07XG5cbnZhciBERVNDUklQVE9SUyQ5ID0gZGVzY3JpcHRvcnM7XG52YXIgSUU4X0RPTV9ERUZJTkUkMSA9IGllOERvbURlZmluZTtcbnZhciBWOF9QUk9UT1RZUEVfREVGSU5FX0JVRyQxID0gdjhQcm90b3R5cGVEZWZpbmVCdWc7XG52YXIgYW5PYmplY3QkOSA9IGFuT2JqZWN0JGE7XG52YXIgdG9Qcm9wZXJ0eUtleSQyID0gdG9Qcm9wZXJ0eUtleSQzO1xuXG52YXIgJFR5cGVFcnJvciQ4ID0gVHlwZUVycm9yO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tb2JqZWN0LWRlZmluZXByb3BlcnR5IC0tIHNhZmVcbnZhciAkZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9yIC0tIHNhZmVcbnZhciAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJDEgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIEVOVU1FUkFCTEUgPSAnZW51bWVyYWJsZSc7XG52YXIgQ09ORklHVVJBQkxFJDEgPSAnY29uZmlndXJhYmxlJztcbnZhciBXUklUQUJMRSA9ICd3cml0YWJsZSc7XG5cbi8vIGBPYmplY3QuZGVmaW5lUHJvcGVydHlgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuZGVmaW5lcHJvcGVydHlcbm9iamVjdERlZmluZVByb3BlcnR5LmYgPSBERVNDUklQVE9SUyQ5ID8gVjhfUFJPVE9UWVBFX0RFRklORV9CVUckMSA/IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpIHtcbiAgYW5PYmplY3QkOShPKTtcbiAgUCA9IHRvUHJvcGVydHlLZXkkMihQKTtcbiAgYW5PYmplY3QkOShBdHRyaWJ1dGVzKTtcbiAgaWYgKHR5cGVvZiBPID09PSAnZnVuY3Rpb24nICYmIFAgPT09ICdwcm90b3R5cGUnICYmICd2YWx1ZScgaW4gQXR0cmlidXRlcyAmJiBXUklUQUJMRSBpbiBBdHRyaWJ1dGVzICYmICFBdHRyaWJ1dGVzW1dSSVRBQkxFXSkge1xuICAgIHZhciBjdXJyZW50ID0gJGdldE93blByb3BlcnR5RGVzY3JpcHRvciQxKE8sIFApO1xuICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnRbV1JJVEFCTEVdKSB7XG4gICAgICBPW1BdID0gQXR0cmlidXRlcy52YWx1ZTtcbiAgICAgIEF0dHJpYnV0ZXMgPSB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogQ09ORklHVVJBQkxFJDEgaW4gQXR0cmlidXRlcyA/IEF0dHJpYnV0ZXNbQ09ORklHVVJBQkxFJDFdIDogY3VycmVudFtDT05GSUdVUkFCTEUkMV0sXG4gICAgICAgIGVudW1lcmFibGU6IEVOVU1FUkFCTEUgaW4gQXR0cmlidXRlcyA/IEF0dHJpYnV0ZXNbRU5VTUVSQUJMRV0gOiBjdXJyZW50W0VOVU1FUkFCTEVdLFxuICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICB9IHJldHVybiAkZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyk7XG59IDogJGRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykge1xuICBhbk9iamVjdCQ5KE8pO1xuICBQID0gdG9Qcm9wZXJ0eUtleSQyKFApO1xuICBhbk9iamVjdCQ5KEF0dHJpYnV0ZXMpO1xuICBpZiAoSUU4X0RPTV9ERUZJTkUkMSkgdHJ5IHtcbiAgICByZXR1cm4gJGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpO1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gIGlmICgnZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpIHRocm93ICRUeXBlRXJyb3IkOCgnQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgaWYgKCd2YWx1ZScgaW4gQXR0cmlidXRlcykgT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7XG4gIHJldHVybiBPO1xufTtcblxudmFyIGNlaWwgPSBNYXRoLmNlaWw7XG52YXIgZmxvb3IkMSA9IE1hdGguZmxvb3I7XG5cbi8vIGBNYXRoLnRydW5jYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtbWF0aC50cnVuY1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tbWF0aC10cnVuYyAtLSBzYWZlXG52YXIgbWF0aFRydW5jID0gTWF0aC50cnVuYyB8fCBmdW5jdGlvbiB0cnVuYyh4KSB7XG4gIHZhciBuID0gK3g7XG4gIHJldHVybiAobiA+IDAgPyBmbG9vciQxIDogY2VpbCkobik7XG59O1xuXG52YXIgdHJ1bmMgPSBtYXRoVHJ1bmM7XG5cbi8vIGBUb0ludGVnZXJPckluZmluaXR5YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtdG9pbnRlZ2Vyb3JpbmZpbml0eVxudmFyIHRvSW50ZWdlck9ySW5maW5pdHkkMiA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICB2YXIgbnVtYmVyID0gK2FyZ3VtZW50O1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlIC0tIE5hTiBjaGVja1xuICByZXR1cm4gbnVtYmVyICE9PSBudW1iZXIgfHwgbnVtYmVyID09PSAwID8gMCA6IHRydW5jKG51bWJlcik7XG59O1xuXG52YXIgdG9JbnRlZ2VyT3JJbmZpbml0eSQxID0gdG9JbnRlZ2VyT3JJbmZpbml0eSQyO1xuXG52YXIgbWF4JDEgPSBNYXRoLm1heDtcbnZhciBtaW4kMSA9IE1hdGgubWluO1xuXG4vLyBIZWxwZXIgZm9yIGEgcG9wdWxhciByZXBlYXRpbmcgY2FzZSBvZiB0aGUgc3BlYzpcbi8vIExldCBpbnRlZ2VyIGJlID8gVG9JbnRlZ2VyKGluZGV4KS5cbi8vIElmIGludGVnZXIgPCAwLCBsZXQgcmVzdWx0IGJlIG1heCgobGVuZ3RoICsgaW50ZWdlciksIDApOyBlbHNlIGxldCByZXN1bHQgYmUgbWluKGludGVnZXIsIGxlbmd0aCkuXG52YXIgdG9BYnNvbHV0ZUluZGV4JDIgPSBmdW5jdGlvbiAoaW5kZXgsIGxlbmd0aCkge1xuICB2YXIgaW50ZWdlciA9IHRvSW50ZWdlck9ySW5maW5pdHkkMShpbmRleCk7XG4gIHJldHVybiBpbnRlZ2VyIDwgMCA/IG1heCQxKGludGVnZXIgKyBsZW5ndGgsIDApIDogbWluJDEoaW50ZWdlciwgbGVuZ3RoKTtcbn07XG5cbnZhciB0b0ludGVnZXJPckluZmluaXR5ID0gdG9JbnRlZ2VyT3JJbmZpbml0eSQyO1xuXG52YXIgbWluID0gTWF0aC5taW47XG5cbi8vIGBUb0xlbmd0aGAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXRvbGVuZ3RoXG52YXIgdG9MZW5ndGgkMSA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICByZXR1cm4gYXJndW1lbnQgPiAwID8gbWluKHRvSW50ZWdlck9ySW5maW5pdHkoYXJndW1lbnQpLCAweDFGRkZGRkZGRkZGRkZGKSA6IDA7IC8vIDIgKiogNTMgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTFcbn07XG5cbnZhciB0b0xlbmd0aCA9IHRvTGVuZ3RoJDE7XG5cbi8vIGBMZW5ndGhPZkFycmF5TGlrZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWxlbmd0aG9mYXJyYXlsaWtlXG52YXIgbGVuZ3RoT2ZBcnJheUxpa2UkNSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHRvTGVuZ3RoKG9iai5sZW5ndGgpO1xufTtcblxudmFyIHRvSW5kZXhlZE9iamVjdCQ0ID0gdG9JbmRleGVkT2JqZWN0JDU7XG52YXIgdG9BYnNvbHV0ZUluZGV4JDEgPSB0b0Fic29sdXRlSW5kZXgkMjtcbnZhciBsZW5ndGhPZkFycmF5TGlrZSQ0ID0gbGVuZ3RoT2ZBcnJheUxpa2UkNTtcblxuLy8gYEFycmF5LnByb3RvdHlwZS57IGluZGV4T2YsIGluY2x1ZGVzIH1gIG1ldGhvZHMgaW1wbGVtZW50YXRpb25cbnZhciBjcmVhdGVNZXRob2QkMSA9IGZ1bmN0aW9uIChJU19JTkNMVURFUykge1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzLCBlbCwgZnJvbUluZGV4KSB7XG4gICAgdmFyIE8gPSB0b0luZGV4ZWRPYmplY3QkNCgkdGhpcyk7XG4gICAgdmFyIGxlbmd0aCA9IGxlbmd0aE9mQXJyYXlMaWtlJDQoTyk7XG4gICAgdmFyIGluZGV4ID0gdG9BYnNvbHV0ZUluZGV4JDEoZnJvbUluZGV4LCBsZW5ndGgpO1xuICAgIHZhciB2YWx1ZTtcbiAgICAvLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZSAtLSBOYU4gY2hlY2tcbiAgICBpZiAoSVNfSU5DTFVERVMgJiYgZWwgIT0gZWwpIHdoaWxlIChsZW5ndGggPiBpbmRleCkge1xuICAgICAgdmFsdWUgPSBPW2luZGV4KytdO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZSAtLSBOYU4gY2hlY2tcbiAgICAgIGlmICh2YWx1ZSAhPSB2YWx1ZSkgcmV0dXJuIHRydWU7XG4gICAgLy8gQXJyYXkjaW5kZXhPZiBpZ25vcmVzIGhvbGVzLCBBcnJheSNpbmNsdWRlcyAtIG5vdFxuICAgIH0gZWxzZSBmb3IgKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKykge1xuICAgICAgaWYgKChJU19JTkNMVURFUyB8fCBpbmRleCBpbiBPKSAmJiBPW2luZGV4XSA9PT0gZWwpIHJldHVybiBJU19JTkNMVURFUyB8fCBpbmRleCB8fCAwO1xuICAgIH0gcmV0dXJuICFJU19JTkNMVURFUyAmJiAtMTtcbiAgfTtcbn07XG5cbnZhciBhcnJheUluY2x1ZGVzID0ge1xuICAvLyBgQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuaW5jbHVkZXNcbiAgaW5jbHVkZXM6IGNyZWF0ZU1ldGhvZCQxKHRydWUpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmluZGV4T2ZgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5pbmRleG9mXG4gIGluZGV4T2Y6IGNyZWF0ZU1ldGhvZCQxKGZhbHNlKVxufTtcblxudmFyIGhpZGRlbktleXMkNCA9IHt9O1xuXG52YXIgdW5jdXJyeVRoaXMkYSA9IGZ1bmN0aW9uVW5jdXJyeVRoaXM7XG52YXIgaGFzT3duJDkgPSBoYXNPd25Qcm9wZXJ0eV8xO1xudmFyIHRvSW5kZXhlZE9iamVjdCQzID0gdG9JbmRleGVkT2JqZWN0JDU7XG52YXIgaW5kZXhPZiA9IGFycmF5SW5jbHVkZXMuaW5kZXhPZjtcbnZhciBoaWRkZW5LZXlzJDMgPSBoaWRkZW5LZXlzJDQ7XG5cbnZhciBwdXNoJDEgPSB1bmN1cnJ5VGhpcyRhKFtdLnB1c2gpO1xuXG52YXIgb2JqZWN0S2V5c0ludGVybmFsID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZXMpIHtcbiAgdmFyIE8gPSB0b0luZGV4ZWRPYmplY3QkMyhvYmplY3QpO1xuICB2YXIgaSA9IDA7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgdmFyIGtleTtcbiAgZm9yIChrZXkgaW4gTykgIWhhc093biQ5KGhpZGRlbktleXMkMywga2V5KSAmJiBoYXNPd24kOShPLCBrZXkpICYmIHB1c2gkMShyZXN1bHQsIGtleSk7XG4gIC8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXNcbiAgd2hpbGUgKG5hbWVzLmxlbmd0aCA+IGkpIGlmIChoYXNPd24kOShPLCBrZXkgPSBuYW1lc1tpKytdKSkge1xuICAgIH5pbmRleE9mKHJlc3VsdCwga2V5KSB8fCBwdXNoJDEocmVzdWx0LCBrZXkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyBJRTgtIGRvbid0IGVudW0gYnVnIGtleXNcbnZhciBlbnVtQnVnS2V5cyQzID0gW1xuICAnY29uc3RydWN0b3InLFxuICAnaGFzT3duUHJvcGVydHknLFxuICAnaXNQcm90b3R5cGVPZicsXG4gICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICd0b0xvY2FsZVN0cmluZycsXG4gICd0b1N0cmluZycsXG4gICd2YWx1ZU9mJ1xuXTtcblxudmFyIGludGVybmFsT2JqZWN0S2V5cyQxID0gb2JqZWN0S2V5c0ludGVybmFsO1xudmFyIGVudW1CdWdLZXlzJDIgPSBlbnVtQnVnS2V5cyQzO1xuXG4vLyBgT2JqZWN0LmtleXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3Qua2V5c1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tb2JqZWN0LWtleXMgLS0gc2FmZVxudmFyIG9iamVjdEtleXMkMiA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIGtleXMoTykge1xuICByZXR1cm4gaW50ZXJuYWxPYmplY3RLZXlzJDEoTywgZW51bUJ1Z0tleXMkMik7XG59O1xuXG52YXIgREVTQ1JJUFRPUlMkOCA9IGRlc2NyaXB0b3JzO1xudmFyIFY4X1BST1RPVFlQRV9ERUZJTkVfQlVHID0gdjhQcm90b3R5cGVEZWZpbmVCdWc7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUkNSA9IG9iamVjdERlZmluZVByb3BlcnR5O1xudmFyIGFuT2JqZWN0JDggPSBhbk9iamVjdCRhO1xudmFyIHRvSW5kZXhlZE9iamVjdCQyID0gdG9JbmRleGVkT2JqZWN0JDU7XG52YXIgb2JqZWN0S2V5cyQxID0gb2JqZWN0S2V5cyQyO1xuXG4vLyBgT2JqZWN0LmRlZmluZVByb3BlcnRpZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuZGVmaW5lcHJvcGVydGllc1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tb2JqZWN0LWRlZmluZXByb3BlcnRpZXMgLS0gc2FmZVxub2JqZWN0RGVmaW5lUHJvcGVydGllcy5mID0gREVTQ1JJUFRPUlMkOCAmJiAhVjhfUFJPVE9UWVBFX0RFRklORV9CVUcgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykge1xuICBhbk9iamVjdCQ4KE8pO1xuICB2YXIgcHJvcHMgPSB0b0luZGV4ZWRPYmplY3QkMihQcm9wZXJ0aWVzKTtcbiAgdmFyIGtleXMgPSBvYmplY3RLZXlzJDEoUHJvcGVydGllcyk7XG4gIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGtleTtcbiAgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSBkZWZpbmVQcm9wZXJ0eU1vZHVsZSQ1LmYoTywga2V5ID0ga2V5c1tpbmRleCsrXSwgcHJvcHNba2V5XSk7XG4gIHJldHVybiBPO1xufTtcblxudmFyIGdldEJ1aWx0SW4kNSA9IGdldEJ1aWx0SW4kODtcblxudmFyIGh0bWwkMiA9IGdldEJ1aWx0SW4kNSgnZG9jdW1lbnQnLCAnZG9jdW1lbnRFbGVtZW50Jyk7XG5cbnZhciBzaGFyZWQkMSA9IHNoYXJlZCQzLmV4cG9ydHM7XG52YXIgdWlkID0gdWlkJDI7XG5cbnZhciBrZXlzID0gc2hhcmVkJDEoJ2tleXMnKTtcblxudmFyIHNoYXJlZEtleSQzID0gZnVuY3Rpb24gKGtleSkge1xuICByZXR1cm4ga2V5c1trZXldIHx8IChrZXlzW2tleV0gPSB1aWQoa2V5KSk7XG59O1xuXG4vKiBnbG9iYWwgQWN0aXZlWE9iamVjdCAtLSBvbGQgSUUsIFdTSCAqL1xuXG52YXIgYW5PYmplY3QkNyA9IGFuT2JqZWN0JGE7XG52YXIgZGVmaW5lUHJvcGVydGllc01vZHVsZSA9IG9iamVjdERlZmluZVByb3BlcnRpZXM7XG52YXIgZW51bUJ1Z0tleXMkMSA9IGVudW1CdWdLZXlzJDM7XG52YXIgaGlkZGVuS2V5cyQyID0gaGlkZGVuS2V5cyQ0O1xudmFyIGh0bWwkMSA9IGh0bWwkMjtcbnZhciBkb2N1bWVudENyZWF0ZUVsZW1lbnQkMSA9IGRvY3VtZW50Q3JlYXRlRWxlbWVudCQyO1xudmFyIHNoYXJlZEtleSQyID0gc2hhcmVkS2V5JDM7XG5cbnZhciBHVCA9ICc+JztcbnZhciBMVCA9ICc8JztcbnZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcbnZhciBTQ1JJUFQgPSAnc2NyaXB0JztcbnZhciBJRV9QUk9UTyQxID0gc2hhcmVkS2V5JDIoJ0lFX1BST1RPJyk7XG5cbnZhciBFbXB0eUNvbnN0cnVjdG9yID0gZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9O1xuXG52YXIgc2NyaXB0VGFnID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgcmV0dXJuIExUICsgU0NSSVBUICsgR1QgKyBjb250ZW50ICsgTFQgKyAnLycgKyBTQ1JJUFQgKyBHVDtcbn07XG5cbi8vIENyZWF0ZSBvYmplY3Qgd2l0aCBmYWtlIGBudWxsYCBwcm90b3R5cGU6IHVzZSBBY3RpdmVYIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlXG52YXIgTnVsbFByb3RvT2JqZWN0VmlhQWN0aXZlWCA9IGZ1bmN0aW9uIChhY3RpdmVYRG9jdW1lbnQpIHtcbiAgYWN0aXZlWERvY3VtZW50LndyaXRlKHNjcmlwdFRhZygnJykpO1xuICBhY3RpdmVYRG9jdW1lbnQuY2xvc2UoKTtcbiAgdmFyIHRlbXAgPSBhY3RpdmVYRG9jdW1lbnQucGFyZW50V2luZG93Lk9iamVjdDtcbiAgYWN0aXZlWERvY3VtZW50ID0gbnVsbDsgLy8gYXZvaWQgbWVtb3J5IGxlYWtcbiAgcmV0dXJuIHRlbXA7XG59O1xuXG4vLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlXG52YXIgTnVsbFByb3RvT2JqZWN0VmlhSUZyYW1lID0gZnVuY3Rpb24gKCkge1xuICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Z1xuICB2YXIgaWZyYW1lID0gZG9jdW1lbnRDcmVhdGVFbGVtZW50JDEoJ2lmcmFtZScpO1xuICB2YXIgSlMgPSAnamF2YScgKyBTQ1JJUFQgKyAnOic7XG4gIHZhciBpZnJhbWVEb2N1bWVudDtcbiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGh0bWwkMS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvNDc1XG4gIGlmcmFtZS5zcmMgPSBTdHJpbmcoSlMpO1xuICBpZnJhbWVEb2N1bWVudCA9IGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50O1xuICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7XG4gIGlmcmFtZURvY3VtZW50LndyaXRlKHNjcmlwdFRhZygnZG9jdW1lbnQuRj1PYmplY3QnKSk7XG4gIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7XG4gIHJldHVybiBpZnJhbWVEb2N1bWVudC5GO1xufTtcblxuLy8gQ2hlY2sgZm9yIGRvY3VtZW50LmRvbWFpbiBhbmQgYWN0aXZlIHggc3VwcG9ydFxuLy8gTm8gbmVlZCB0byB1c2UgYWN0aXZlIHggYXBwcm9hY2ggd2hlbiBkb2N1bWVudC5kb21haW4gaXMgbm90IHNldFxuLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbS9pc3N1ZXMvMTUwXG4vLyB2YXJpYXRpb24gb2YgaHR0cHM6Ly9naXRodWIuY29tL2tpdGNhbWJyaWRnZS9lczUtc2hpbS9jb21taXQvNGY3MzhhYzA2NjM0NlxuLy8gYXZvaWQgSUUgR0MgYnVnXG52YXIgYWN0aXZlWERvY3VtZW50O1xudmFyIE51bGxQcm90b09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICBhY3RpdmVYRG9jdW1lbnQgPSBuZXcgQWN0aXZlWE9iamVjdCgnaHRtbGZpbGUnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogaWdub3JlICovIH1cbiAgTnVsbFByb3RvT2JqZWN0ID0gdHlwZW9mIGRvY3VtZW50ICE9ICd1bmRlZmluZWQnXG4gICAgPyBkb2N1bWVudC5kb21haW4gJiYgYWN0aXZlWERvY3VtZW50XG4gICAgICA/IE51bGxQcm90b09iamVjdFZpYUFjdGl2ZVgoYWN0aXZlWERvY3VtZW50KSAvLyBvbGQgSUVcbiAgICAgIDogTnVsbFByb3RvT2JqZWN0VmlhSUZyYW1lKClcbiAgICA6IE51bGxQcm90b09iamVjdFZpYUFjdGl2ZVgoYWN0aXZlWERvY3VtZW50KTsgLy8gV1NIXG4gIHZhciBsZW5ndGggPSBlbnVtQnVnS2V5cyQxLmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSBkZWxldGUgTnVsbFByb3RvT2JqZWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXMkMVtsZW5ndGhdXTtcbiAgcmV0dXJuIE51bGxQcm90b09iamVjdCgpO1xufTtcblxuaGlkZGVuS2V5cyQyW0lFX1BST1RPJDFdID0gdHJ1ZTtcblxuLy8gYE9iamVjdC5jcmVhdGVgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuY3JlYXRlXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtY3JlYXRlIC0tIHNhZmVcbnZhciBvYmplY3RDcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZShPLCBQcm9wZXJ0aWVzKSB7XG4gIHZhciByZXN1bHQ7XG4gIGlmIChPICE9PSBudWxsKSB7XG4gICAgRW1wdHlDb25zdHJ1Y3RvcltQUk9UT1RZUEVdID0gYW5PYmplY3QkNyhPKTtcbiAgICByZXN1bHQgPSBuZXcgRW1wdHlDb25zdHJ1Y3RvcigpO1xuICAgIEVtcHR5Q29uc3RydWN0b3JbUFJPVE9UWVBFXSA9IG51bGw7XG4gICAgLy8gYWRkIFwiX19wcm90b19fXCIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbFxuICAgIHJlc3VsdFtJRV9QUk9UTyQxXSA9IE87XG4gIH0gZWxzZSByZXN1bHQgPSBOdWxsUHJvdG9PYmplY3QoKTtcbiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRlZmluZVByb3BlcnRpZXNNb2R1bGUuZihyZXN1bHQsIFByb3BlcnRpZXMpO1xufTtcblxudmFyIHdlbGxLbm93blN5bWJvbCRjID0gd2VsbEtub3duU3ltYm9sJGU7XG52YXIgY3JlYXRlJDEgPSBvYmplY3RDcmVhdGU7XG52YXIgZGVmaW5lUHJvcGVydHkkNSA9IG9iamVjdERlZmluZVByb3BlcnR5LmY7XG5cbnZhciBVTlNDT1BBQkxFUyA9IHdlbGxLbm93blN5bWJvbCRjKCd1bnNjb3BhYmxlcycpO1xudmFyIEFycmF5UHJvdG90eXBlJDEgPSBBcnJheS5wcm90b3R5cGU7XG5cbi8vIEFycmF5LnByb3RvdHlwZVtAQHVuc2NvcGFibGVzXVxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUtQEB1bnNjb3BhYmxlc1xuaWYgKEFycmF5UHJvdG90eXBlJDFbVU5TQ09QQUJMRVNdID09IHVuZGVmaW5lZCkge1xuICBkZWZpbmVQcm9wZXJ0eSQ1KEFycmF5UHJvdG90eXBlJDEsIFVOU0NPUEFCTEVTLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiBjcmVhdGUkMShudWxsKVxuICB9KTtcbn1cblxuLy8gYWRkIGEga2V5IHRvIEFycmF5LnByb3RvdHlwZVtAQHVuc2NvcGFibGVzXVxudmFyIGFkZFRvVW5zY29wYWJsZXMkMSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgQXJyYXlQcm90b3R5cGUkMVtVTlNDT1BBQkxFU11ba2V5XSA9IHRydWU7XG59O1xuXG52YXIgaXRlcmF0b3JzID0ge307XG5cbnZhciB1bmN1cnJ5VGhpcyQ5ID0gZnVuY3Rpb25VbmN1cnJ5VGhpcztcbnZhciBpc0NhbGxhYmxlJGYgPSBpc0NhbGxhYmxlJGw7XG52YXIgc3RvcmUkMSA9IHNoYXJlZFN0b3JlO1xuXG52YXIgZnVuY3Rpb25Ub1N0cmluZyA9IHVuY3VycnlUaGlzJDkoRnVuY3Rpb24udG9TdHJpbmcpO1xuXG4vLyB0aGlzIGhlbHBlciBicm9rZW4gaW4gYGNvcmUtanNAMy40LjEtMy40LjRgLCBzbyB3ZSBjYW4ndCB1c2UgYHNoYXJlZGAgaGVscGVyXG5pZiAoIWlzQ2FsbGFibGUkZihzdG9yZSQxLmluc3BlY3RTb3VyY2UpKSB7XG4gIHN0b3JlJDEuaW5zcGVjdFNvdXJjZSA9IGZ1bmN0aW9uIChpdCkge1xuICAgIHJldHVybiBmdW5jdGlvblRvU3RyaW5nKGl0KTtcbiAgfTtcbn1cblxudmFyIGluc3BlY3RTb3VyY2UkNCA9IHN0b3JlJDEuaW5zcGVjdFNvdXJjZTtcblxudmFyIGdsb2JhbCRkID0gZ2xvYmFsJGs7XG52YXIgaXNDYWxsYWJsZSRlID0gaXNDYWxsYWJsZSRsO1xudmFyIGluc3BlY3RTb3VyY2UkMyA9IGluc3BlY3RTb3VyY2UkNDtcblxudmFyIFdlYWtNYXAkMSA9IGdsb2JhbCRkLldlYWtNYXA7XG5cbnZhciBuYXRpdmVXZWFrTWFwID0gaXNDYWxsYWJsZSRlKFdlYWtNYXAkMSkgJiYgL25hdGl2ZSBjb2RlLy50ZXN0KGluc3BlY3RTb3VyY2UkMyhXZWFrTWFwJDEpKTtcblxudmFyIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciQ0ID0gZnVuY3Rpb24gKGJpdG1hcCwgdmFsdWUpIHtcbiAgcmV0dXJuIHtcbiAgICBlbnVtZXJhYmxlOiAhKGJpdG1hcCAmIDEpLFxuICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSxcbiAgICB3cml0YWJsZTogIShiaXRtYXAgJiA0KSxcbiAgICB2YWx1ZTogdmFsdWVcbiAgfTtcbn07XG5cbnZhciBERVNDUklQVE9SUyQ3ID0gZGVzY3JpcHRvcnM7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUkNCA9IG9iamVjdERlZmluZVByb3BlcnR5O1xudmFyIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciQzID0gY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDQ7XG5cbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNCA9IERFU0NSSVBUT1JTJDcgPyBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIHJldHVybiBkZWZpbmVQcm9wZXJ0eU1vZHVsZSQ0LmYob2JqZWN0LCBrZXksIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciQzKDEsIHZhbHVlKSk7XG59IDogZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICByZXR1cm4gb2JqZWN0O1xufTtcblxudmFyIE5BVElWRV9XRUFLX01BUCA9IG5hdGl2ZVdlYWtNYXA7XG52YXIgZ2xvYmFsJGMgPSBnbG9iYWwkaztcbnZhciB1bmN1cnJ5VGhpcyQ4ID0gZnVuY3Rpb25VbmN1cnJ5VGhpcztcbnZhciBpc09iamVjdCQyID0gaXNPYmplY3QkNztcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkMyA9IGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSQ0O1xudmFyIGhhc093biQ4ID0gaGFzT3duUHJvcGVydHlfMTtcbnZhciBzaGFyZWQgPSBzaGFyZWRTdG9yZTtcbnZhciBzaGFyZWRLZXkkMSA9IHNoYXJlZEtleSQzO1xudmFyIGhpZGRlbktleXMkMSA9IGhpZGRlbktleXMkNDtcblxudmFyIE9CSkVDVF9BTFJFQURZX0lOSVRJQUxJWkVEID0gJ09iamVjdCBhbHJlYWR5IGluaXRpYWxpemVkJztcbnZhciBUeXBlRXJyb3IkMiA9IGdsb2JhbCRjLlR5cGVFcnJvcjtcbnZhciBXZWFrTWFwID0gZ2xvYmFsJGMuV2Vha01hcDtcbnZhciBzZXQkMSwgZ2V0LCBoYXM7XG5cbnZhciBlbmZvcmNlID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBoYXMoaXQpID8gZ2V0KGl0KSA6IHNldCQxKGl0LCB7fSk7XG59O1xuXG52YXIgZ2V0dGVyRm9yID0gZnVuY3Rpb24gKFRZUEUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChpdCkge1xuICAgIHZhciBzdGF0ZTtcbiAgICBpZiAoIWlzT2JqZWN0JDIoaXQpIHx8IChzdGF0ZSA9IGdldChpdCkpLnR5cGUgIT09IFRZUEUpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvciQyKCdJbmNvbXBhdGlibGUgcmVjZWl2ZXIsICcgKyBUWVBFICsgJyByZXF1aXJlZCcpO1xuICAgIH0gcmV0dXJuIHN0YXRlO1xuICB9O1xufTtcblxuaWYgKE5BVElWRV9XRUFLX01BUCB8fCBzaGFyZWQuc3RhdGUpIHtcbiAgdmFyIHN0b3JlID0gc2hhcmVkLnN0YXRlIHx8IChzaGFyZWQuc3RhdGUgPSBuZXcgV2Vha01hcCgpKTtcbiAgdmFyIHdtZ2V0ID0gdW5jdXJyeVRoaXMkOChzdG9yZS5nZXQpO1xuICB2YXIgd21oYXMgPSB1bmN1cnJ5VGhpcyQ4KHN0b3JlLmhhcyk7XG4gIHZhciB3bXNldCA9IHVuY3VycnlUaGlzJDgoc3RvcmUuc2V0KTtcbiAgc2V0JDEgPSBmdW5jdGlvbiAoaXQsIG1ldGFkYXRhKSB7XG4gICAgaWYgKHdtaGFzKHN0b3JlLCBpdCkpIHRocm93IG5ldyBUeXBlRXJyb3IkMihPQkpFQ1RfQUxSRUFEWV9JTklUSUFMSVpFRCk7XG4gICAgbWV0YWRhdGEuZmFjYWRlID0gaXQ7XG4gICAgd21zZXQoc3RvcmUsIGl0LCBtZXRhZGF0YSk7XG4gICAgcmV0dXJuIG1ldGFkYXRhO1xuICB9O1xuICBnZXQgPSBmdW5jdGlvbiAoaXQpIHtcbiAgICByZXR1cm4gd21nZXQoc3RvcmUsIGl0KSB8fCB7fTtcbiAgfTtcbiAgaGFzID0gZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIHdtaGFzKHN0b3JlLCBpdCk7XG4gIH07XG59IGVsc2Uge1xuICB2YXIgU1RBVEUgPSBzaGFyZWRLZXkkMSgnc3RhdGUnKTtcbiAgaGlkZGVuS2V5cyQxW1NUQVRFXSA9IHRydWU7XG4gIHNldCQxID0gZnVuY3Rpb24gKGl0LCBtZXRhZGF0YSkge1xuICAgIGlmIChoYXNPd24kOChpdCwgU1RBVEUpKSB0aHJvdyBuZXcgVHlwZUVycm9yJDIoT0JKRUNUX0FMUkVBRFlfSU5JVElBTElaRUQpO1xuICAgIG1ldGFkYXRhLmZhY2FkZSA9IGl0O1xuICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSQzKGl0LCBTVEFURSwgbWV0YWRhdGEpO1xuICAgIHJldHVybiBtZXRhZGF0YTtcbiAgfTtcbiAgZ2V0ID0gZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIGhhc093biQ4KGl0LCBTVEFURSkgPyBpdFtTVEFURV0gOiB7fTtcbiAgfTtcbiAgaGFzID0gZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIGhhc093biQ4KGl0LCBTVEFURSk7XG4gIH07XG59XG5cbnZhciBpbnRlcm5hbFN0YXRlID0ge1xuICBzZXQ6IHNldCQxLFxuICBnZXQ6IGdldCxcbiAgaGFzOiBoYXMsXG4gIGVuZm9yY2U6IGVuZm9yY2UsXG4gIGdldHRlckZvcjogZ2V0dGVyRm9yXG59O1xuXG52YXIgb2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0ge307XG5cbnZhciBvYmplY3RQcm9wZXJ0eUlzRW51bWVyYWJsZSA9IHt9O1xuXG52YXIgJHByb3BlcnR5SXNFbnVtZXJhYmxlID0ge30ucHJvcGVydHlJc0VudW1lcmFibGU7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9yIC0tIHNhZmVcbnZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkMiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5cbi8vIE5hc2hvcm4gfiBKREs4IGJ1Z1xudmFyIE5BU0hPUk5fQlVHID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJDIgJiYgISRwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHsgMTogMiB9LCAxKTtcblxuLy8gYE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGVgIG1ldGhvZCBpbXBsZW1lbnRhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QucHJvdG90eXBlLnByb3BlcnR5aXNlbnVtZXJhYmxlXG5vYmplY3RQcm9wZXJ0eUlzRW51bWVyYWJsZS5mID0gTkFTSE9STl9CVUcgPyBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShWKSB7XG4gIHZhciBkZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJDIodGhpcywgVik7XG4gIHJldHVybiAhIWRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci5lbnVtZXJhYmxlO1xufSA6ICRwcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxudmFyIERFU0NSSVBUT1JTJDYgPSBkZXNjcmlwdG9ycztcbnZhciBjYWxsJGEgPSBmdW5jdGlvbkNhbGw7XG52YXIgcHJvcGVydHlJc0VudW1lcmFibGVNb2R1bGUkMSA9IG9iamVjdFByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciQyID0gY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDQ7XG52YXIgdG9JbmRleGVkT2JqZWN0JDEgPSB0b0luZGV4ZWRPYmplY3QkNTtcbnZhciB0b1Byb3BlcnR5S2V5JDEgPSB0b1Byb3BlcnR5S2V5JDM7XG52YXIgaGFzT3duJDcgPSBoYXNPd25Qcm9wZXJ0eV8xO1xudmFyIElFOF9ET01fREVGSU5FID0gaWU4RG9tRGVmaW5lO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9yIC0tIHNhZmVcbnZhciAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcblxuLy8gYE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9yXG5vYmplY3RHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IuZiA9IERFU0NSSVBUT1JTJDYgPyAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIDogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApIHtcbiAgTyA9IHRvSW5kZXhlZE9iamVjdCQxKE8pO1xuICBQID0gdG9Qcm9wZXJ0eUtleSQxKFApO1xuICBpZiAoSUU4X0RPTV9ERUZJTkUpIHRyeSB7XG4gICAgcmV0dXJuICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cbiAgaWYgKGhhc093biQ3KE8sIFApKSByZXR1cm4gY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDIoIWNhbGwkYShwcm9wZXJ0eUlzRW51bWVyYWJsZU1vZHVsZSQxLmYsIE8sIFApLCBPW1BdKTtcbn07XG5cbnZhciBtYWtlQnVpbHRJbiQyID0ge2V4cG9ydHM6IHt9fTtcblxudmFyIERFU0NSSVBUT1JTJDUgPSBkZXNjcmlwdG9ycztcbnZhciBoYXNPd24kNiA9IGhhc093blByb3BlcnR5XzE7XG5cbnZhciBGdW5jdGlvblByb3RvdHlwZSQxID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tb2JqZWN0LWdldG93bnByb3BlcnR5ZGVzY3JpcHRvciAtLSBzYWZlXG52YXIgZ2V0RGVzY3JpcHRvciA9IERFU0NSSVBUT1JTJDUgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcblxudmFyIEVYSVNUUyA9IGhhc093biQ2KEZ1bmN0aW9uUHJvdG90eXBlJDEsICduYW1lJyk7XG4vLyBhZGRpdGlvbmFsIHByb3RlY3Rpb24gZnJvbSBtaW5pZmllZCAvIG1hbmdsZWQgLyBkcm9wcGVkIGZ1bmN0aW9uIG5hbWVzXG52YXIgUFJPUEVSID0gRVhJU1RTICYmIChmdW5jdGlvbiBzb21ldGhpbmcoKSB7IC8qIGVtcHR5ICovIH0pLm5hbWUgPT09ICdzb21ldGhpbmcnO1xudmFyIENPTkZJR1VSQUJMRSA9IEVYSVNUUyAmJiAoIURFU0NSSVBUT1JTJDUgfHwgKERFU0NSSVBUT1JTJDUgJiYgZ2V0RGVzY3JpcHRvcihGdW5jdGlvblByb3RvdHlwZSQxLCAnbmFtZScpLmNvbmZpZ3VyYWJsZSkpO1xuXG52YXIgZnVuY3Rpb25OYW1lID0ge1xuICBFWElTVFM6IEVYSVNUUyxcbiAgUFJPUEVSOiBQUk9QRVIsXG4gIENPTkZJR1VSQUJMRTogQ09ORklHVVJBQkxFXG59O1xuXG52YXIgZmFpbHMkOCA9IGZhaWxzJGY7XG52YXIgaXNDYWxsYWJsZSRkID0gaXNDYWxsYWJsZSRsO1xudmFyIGhhc093biQ1ID0gaGFzT3duUHJvcGVydHlfMTtcbnZhciBERVNDUklQVE9SUyQ0ID0gZGVzY3JpcHRvcnM7XG52YXIgQ09ORklHVVJBQkxFX0ZVTkNUSU9OX05BTUUkMSA9IGZ1bmN0aW9uTmFtZS5DT05GSUdVUkFCTEU7XG52YXIgaW5zcGVjdFNvdXJjZSQyID0gaW5zcGVjdFNvdXJjZSQ0O1xudmFyIEludGVybmFsU3RhdGVNb2R1bGUkMiA9IGludGVybmFsU3RhdGU7XG5cbnZhciBlbmZvcmNlSW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUkMi5lbmZvcmNlO1xudmFyIGdldEludGVybmFsU3RhdGUkMSA9IEludGVybmFsU3RhdGVNb2R1bGUkMi5nZXQ7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZGVmaW5lcHJvcGVydHkgLS0gc2FmZVxudmFyIGRlZmluZVByb3BlcnR5JDQgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG5cbnZhciBDT05GSUdVUkFCTEVfTEVOR1RIID0gREVTQ1JJUFRPUlMkNCAmJiAhZmFpbHMkOChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBkZWZpbmVQcm9wZXJ0eSQ0KGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfSwgJ2xlbmd0aCcsIHsgdmFsdWU6IDggfSkubGVuZ3RoICE9PSA4O1xufSk7XG5cbnZhciBURU1QTEFURSA9IFN0cmluZyhTdHJpbmcpLnNwbGl0KCdTdHJpbmcnKTtcblxudmFyIG1ha2VCdWlsdEluJDEgPSBtYWtlQnVpbHRJbiQyLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsdWUsIG5hbWUsIG9wdGlvbnMpIHtcbiAgaWYgKFN0cmluZyhuYW1lKS5zbGljZSgwLCA3KSA9PT0gJ1N5bWJvbCgnKSB7XG4gICAgbmFtZSA9ICdbJyArIFN0cmluZyhuYW1lKS5yZXBsYWNlKC9eU3ltYm9sXFwoKFteKV0qKVxcKS8sICckMScpICsgJ10nO1xuICB9XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2V0dGVyKSBuYW1lID0gJ2dldCAnICsgbmFtZTtcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zZXR0ZXIpIG5hbWUgPSAnc2V0ICcgKyBuYW1lO1xuICBpZiAoIWhhc093biQ1KHZhbHVlLCAnbmFtZScpIHx8IChDT05GSUdVUkFCTEVfRlVOQ1RJT05fTkFNRSQxICYmIHZhbHVlLm5hbWUgIT09IG5hbWUpKSB7XG4gICAgaWYgKERFU0NSSVBUT1JTJDQpIGRlZmluZVByb3BlcnR5JDQodmFsdWUsICduYW1lJywgeyB2YWx1ZTogbmFtZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xuICAgIGVsc2UgdmFsdWUubmFtZSA9IG5hbWU7XG4gIH1cbiAgaWYgKENPTkZJR1VSQUJMRV9MRU5HVEggJiYgb3B0aW9ucyAmJiBoYXNPd24kNShvcHRpb25zLCAnYXJpdHknKSAmJiB2YWx1ZS5sZW5ndGggIT09IG9wdGlvbnMuYXJpdHkpIHtcbiAgICBkZWZpbmVQcm9wZXJ0eSQ0KHZhbHVlLCAnbGVuZ3RoJywgeyB2YWx1ZTogb3B0aW9ucy5hcml0eSB9KTtcbiAgfVxuICB0cnkge1xuICAgIGlmIChvcHRpb25zICYmIGhhc093biQ1KG9wdGlvbnMsICdjb25zdHJ1Y3RvcicpICYmIG9wdGlvbnMuY29uc3RydWN0b3IpIHtcbiAgICAgIGlmIChERVNDUklQVE9SUyQ0KSBkZWZpbmVQcm9wZXJ0eSQ0KHZhbHVlLCAncHJvdG90eXBlJywgeyB3cml0YWJsZTogZmFsc2UgfSk7XG4gICAgLy8gaW4gVjggfiBDaHJvbWUgNTMsIHByb3RvdHlwZXMgb2Ygc29tZSBtZXRob2RzLCBsaWtlIGBBcnJheS5wcm90b3R5cGUudmFsdWVzYCwgYXJlIG5vbi13cml0YWJsZVxuICAgIH0gZWxzZSBpZiAodmFsdWUucHJvdG90eXBlKSB2YWx1ZS5wcm90b3R5cGUgPSB1bmRlZmluZWQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cbiAgdmFyIHN0YXRlID0gZW5mb3JjZUludGVybmFsU3RhdGUodmFsdWUpO1xuICBpZiAoIWhhc093biQ1KHN0YXRlLCAnc291cmNlJykpIHtcbiAgICBzdGF0ZS5zb3VyY2UgPSBURU1QTEFURS5qb2luKHR5cGVvZiBuYW1lID09ICdzdHJpbmcnID8gbmFtZSA6ICcnKTtcbiAgfSByZXR1cm4gdmFsdWU7XG59O1xuXG4vLyBhZGQgZmFrZSBGdW5jdGlvbiN0b1N0cmluZyBmb3IgY29ycmVjdCB3b3JrIHdyYXBwZWQgbWV0aG9kcyAvIGNvbnN0cnVjdG9ycyB3aXRoIG1ldGhvZHMgbGlrZSBMb0Rhc2ggaXNOYXRpdmVcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1leHRlbmQtbmF0aXZlIC0tIHJlcXVpcmVkXG5GdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBtYWtlQnVpbHRJbiQxKGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gaXNDYWxsYWJsZSRkKHRoaXMpICYmIGdldEludGVybmFsU3RhdGUkMSh0aGlzKS5zb3VyY2UgfHwgaW5zcGVjdFNvdXJjZSQyKHRoaXMpO1xufSwgJ3RvU3RyaW5nJyk7XG5cbnZhciBpc0NhbGxhYmxlJGMgPSBpc0NhbGxhYmxlJGw7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUkMyA9IG9iamVjdERlZmluZVByb3BlcnR5O1xudmFyIG1ha2VCdWlsdEluID0gbWFrZUJ1aWx0SW4kMi5leHBvcnRzO1xudmFyIGRlZmluZUdsb2JhbFByb3BlcnR5JDEgPSBkZWZpbmVHbG9iYWxQcm9wZXJ0eSQzO1xuXG52YXIgZGVmaW5lQnVpbHRJbiQ1ID0gZnVuY3Rpb24gKE8sIGtleSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gIHZhciBzaW1wbGUgPSBvcHRpb25zLmVudW1lcmFibGU7XG4gIHZhciBuYW1lID0gb3B0aW9ucy5uYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5hbWUgOiBrZXk7XG4gIGlmIChpc0NhbGxhYmxlJGModmFsdWUpKSBtYWtlQnVpbHRJbih2YWx1ZSwgbmFtZSwgb3B0aW9ucyk7XG4gIGlmIChvcHRpb25zLmdsb2JhbCkge1xuICAgIGlmIChzaW1wbGUpIE9ba2V5XSA9IHZhbHVlO1xuICAgIGVsc2UgZGVmaW5lR2xvYmFsUHJvcGVydHkkMShrZXksIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFvcHRpb25zLnVuc2FmZSkgZGVsZXRlIE9ba2V5XTtcbiAgICAgIGVsc2UgaWYgKE9ba2V5XSkgc2ltcGxlID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gICAgaWYgKHNpbXBsZSkgT1trZXldID0gdmFsdWU7XG4gICAgZWxzZSBkZWZpbmVQcm9wZXJ0eU1vZHVsZSQzLmYoTywga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogIW9wdGlvbnMubm9uQ29uZmlndXJhYmxlLFxuICAgICAgd3JpdGFibGU6ICFvcHRpb25zLm5vbldyaXRhYmxlXG4gICAgfSk7XG4gIH0gcmV0dXJuIE87XG59O1xuXG52YXIgb2JqZWN0R2V0T3duUHJvcGVydHlOYW1lcyA9IHt9O1xuXG52YXIgaW50ZXJuYWxPYmplY3RLZXlzID0gb2JqZWN0S2V5c0ludGVybmFsO1xudmFyIGVudW1CdWdLZXlzID0gZW51bUJ1Z0tleXMkMztcblxudmFyIGhpZGRlbktleXMgPSBlbnVtQnVnS2V5cy5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTtcblxuLy8gYE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LmdldG93bnByb3BlcnR5bmFtZXNcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy14L25vLW9iamVjdC1nZXRvd25wcm9wZXJ0eW5hbWVzIC0tIHNhZmVcbm9iamVjdEdldE93blByb3BlcnR5TmFtZXMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoTykge1xuICByZXR1cm4gaW50ZXJuYWxPYmplY3RLZXlzKE8sIGhpZGRlbktleXMpO1xufTtcblxudmFyIG9iamVjdEdldE93blByb3BlcnR5U3ltYm9scyA9IHt9O1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZ2V0b3ducHJvcGVydHlzeW1ib2xzIC0tIHNhZmVcbm9iamVjdEdldE93blByb3BlcnR5U3ltYm9scy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcblxudmFyIGdldEJ1aWx0SW4kNCA9IGdldEJ1aWx0SW4kODtcbnZhciB1bmN1cnJ5VGhpcyQ3ID0gZnVuY3Rpb25VbmN1cnJ5VGhpcztcbnZhciBnZXRPd25Qcm9wZXJ0eU5hbWVzTW9kdWxlID0gb2JqZWN0R2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHNNb2R1bGUkMSA9IG9iamVjdEdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBhbk9iamVjdCQ2ID0gYW5PYmplY3QkYTtcblxudmFyIGNvbmNhdCQxID0gdW5jdXJyeVRoaXMkNyhbXS5jb25jYXQpO1xuXG4vLyBhbGwgb2JqZWN0IGtleXMsIGluY2x1ZGVzIG5vbi1lbnVtZXJhYmxlIGFuZCBzeW1ib2xzXG52YXIgb3duS2V5cyQxID0gZ2V0QnVpbHRJbiQ0KCdSZWZsZWN0JywgJ293bktleXMnKSB8fCBmdW5jdGlvbiBvd25LZXlzKGl0KSB7XG4gIHZhciBrZXlzID0gZ2V0T3duUHJvcGVydHlOYW1lc01vZHVsZS5mKGFuT2JqZWN0JDYoaXQpKTtcbiAgdmFyIGdldE93blByb3BlcnR5U3ltYm9scyA9IGdldE93blByb3BlcnR5U3ltYm9sc01vZHVsZSQxLmY7XG4gIHJldHVybiBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPyBjb25jYXQkMShrZXlzLCBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaXQpKSA6IGtleXM7XG59O1xuXG52YXIgaGFzT3duJDQgPSBoYXNPd25Qcm9wZXJ0eV8xO1xudmFyIG93bktleXMgPSBvd25LZXlzJDE7XG52YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yTW9kdWxlID0gb2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlJDIgPSBvYmplY3REZWZpbmVQcm9wZXJ0eTtcblxudmFyIGNvcHlDb25zdHJ1Y3RvclByb3BlcnRpZXMkMiA9IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSwgZXhjZXB0aW9ucykge1xuICB2YXIga2V5cyA9IG93bktleXMoc291cmNlKTtcbiAgdmFyIGRlZmluZVByb3BlcnR5ID0gZGVmaW5lUHJvcGVydHlNb2R1bGUkMi5mO1xuICB2YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yTW9kdWxlLmY7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgIGlmICghaGFzT3duJDQodGFyZ2V0LCBrZXkpICYmICEoZXhjZXB0aW9ucyAmJiBoYXNPd24kNChleGNlcHRpb25zLCBrZXkpKSkge1xuICAgICAgZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGZhaWxzJDcgPSBmYWlscyRmO1xudmFyIGlzQ2FsbGFibGUkYiA9IGlzQ2FsbGFibGUkbDtcblxudmFyIHJlcGxhY2VtZW50ID0gLyN8XFwucHJvdG90eXBlXFwuLztcblxudmFyIGlzRm9yY2VkJDIgPSBmdW5jdGlvbiAoZmVhdHVyZSwgZGV0ZWN0aW9uKSB7XG4gIHZhciB2YWx1ZSA9IGRhdGFbbm9ybWFsaXplKGZlYXR1cmUpXTtcbiAgcmV0dXJuIHZhbHVlID09IFBPTFlGSUxMID8gdHJ1ZVxuICAgIDogdmFsdWUgPT0gTkFUSVZFID8gZmFsc2VcbiAgICA6IGlzQ2FsbGFibGUkYihkZXRlY3Rpb24pID8gZmFpbHMkNyhkZXRlY3Rpb24pXG4gICAgOiAhIWRldGVjdGlvbjtcbn07XG5cbnZhciBub3JtYWxpemUgPSBpc0ZvcmNlZCQyLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgcmV0dXJuIFN0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVwbGFjZW1lbnQsICcuJykudG9Mb3dlckNhc2UoKTtcbn07XG5cbnZhciBkYXRhID0gaXNGb3JjZWQkMi5kYXRhID0ge307XG52YXIgTkFUSVZFID0gaXNGb3JjZWQkMi5OQVRJVkUgPSAnTic7XG52YXIgUE9MWUZJTEwgPSBpc0ZvcmNlZCQyLlBPTFlGSUxMID0gJ1AnO1xuXG52YXIgaXNGb3JjZWRfMSA9IGlzRm9yY2VkJDI7XG5cbnZhciBnbG9iYWwkYiA9IGdsb2JhbCRrO1xudmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciQxID0gb2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLmY7XG52YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5JDIgPSBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNDtcbnZhciBkZWZpbmVCdWlsdEluJDQgPSBkZWZpbmVCdWlsdEluJDU7XG52YXIgZGVmaW5lR2xvYmFsUHJvcGVydHkgPSBkZWZpbmVHbG9iYWxQcm9wZXJ0eSQzO1xudmFyIGNvcHlDb25zdHJ1Y3RvclByb3BlcnRpZXMkMSA9IGNvcHlDb25zdHJ1Y3RvclByb3BlcnRpZXMkMjtcbnZhciBpc0ZvcmNlZCQxID0gaXNGb3JjZWRfMTtcblxuLypcbiAgb3B0aW9ucy50YXJnZXQgICAgICAgICAtIG5hbWUgb2YgdGhlIHRhcmdldCBvYmplY3RcbiAgb3B0aW9ucy5nbG9iYWwgICAgICAgICAtIHRhcmdldCBpcyB0aGUgZ2xvYmFsIG9iamVjdFxuICBvcHRpb25zLnN0YXQgICAgICAgICAgIC0gZXhwb3J0IGFzIHN0YXRpYyBtZXRob2RzIG9mIHRhcmdldFxuICBvcHRpb25zLnByb3RvICAgICAgICAgIC0gZXhwb3J0IGFzIHByb3RvdHlwZSBtZXRob2RzIG9mIHRhcmdldFxuICBvcHRpb25zLnJlYWwgICAgICAgICAgIC0gcmVhbCBwcm90b3R5cGUgbWV0aG9kIGZvciB0aGUgYHB1cmVgIHZlcnNpb25cbiAgb3B0aW9ucy5mb3JjZWQgICAgICAgICAtIGV4cG9ydCBldmVuIGlmIHRoZSBuYXRpdmUgZmVhdHVyZSBpcyBhdmFpbGFibGVcbiAgb3B0aW9ucy5iaW5kICAgICAgICAgICAtIGJpbmQgbWV0aG9kcyB0byB0aGUgdGFyZ2V0LCByZXF1aXJlZCBmb3IgdGhlIGBwdXJlYCB2ZXJzaW9uXG4gIG9wdGlvbnMud3JhcCAgICAgICAgICAgLSB3cmFwIGNvbnN0cnVjdG9ycyB0byBwcmV2ZW50aW5nIGdsb2JhbCBwb2xsdXRpb24sIHJlcXVpcmVkIGZvciB0aGUgYHB1cmVgIHZlcnNpb25cbiAgb3B0aW9ucy51bnNhZmUgICAgICAgICAtIHVzZSB0aGUgc2ltcGxlIGFzc2lnbm1lbnQgb2YgcHJvcGVydHkgaW5zdGVhZCBvZiBkZWxldGUgKyBkZWZpbmVQcm9wZXJ0eVxuICBvcHRpb25zLnNoYW0gICAgICAgICAgIC0gYWRkIGEgZmxhZyB0byBub3QgY29tcGxldGVseSBmdWxsIHBvbHlmaWxsc1xuICBvcHRpb25zLmVudW1lcmFibGUgICAgIC0gZXhwb3J0IGFzIGVudW1lcmFibGUgcHJvcGVydHlcbiAgb3B0aW9ucy5kb250Q2FsbEdldFNldCAtIHByZXZlbnQgY2FsbGluZyBhIGdldHRlciBvbiB0YXJnZXRcbiAgb3B0aW9ucy5uYW1lICAgICAgICAgICAtIHRoZSAubmFtZSBvZiB0aGUgZnVuY3Rpb24gaWYgaXQgZG9lcyBub3QgbWF0Y2ggdGhlIGtleVxuKi9cbnZhciBfZXhwb3J0ID0gZnVuY3Rpb24gKG9wdGlvbnMsIHNvdXJjZSkge1xuICB2YXIgVEFSR0VUID0gb3B0aW9ucy50YXJnZXQ7XG4gIHZhciBHTE9CQUwgPSBvcHRpb25zLmdsb2JhbDtcbiAgdmFyIFNUQVRJQyA9IG9wdGlvbnMuc3RhdDtcbiAgdmFyIEZPUkNFRCwgdGFyZ2V0LCBrZXksIHRhcmdldFByb3BlcnR5LCBzb3VyY2VQcm9wZXJ0eSwgZGVzY3JpcHRvcjtcbiAgaWYgKEdMT0JBTCkge1xuICAgIHRhcmdldCA9IGdsb2JhbCRiO1xuICB9IGVsc2UgaWYgKFNUQVRJQykge1xuICAgIHRhcmdldCA9IGdsb2JhbCRiW1RBUkdFVF0gfHwgZGVmaW5lR2xvYmFsUHJvcGVydHkoVEFSR0VULCB7fSk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0ID0gKGdsb2JhbCRiW1RBUkdFVF0gfHwge30pLnByb3RvdHlwZTtcbiAgfVxuICBpZiAodGFyZ2V0KSBmb3IgKGtleSBpbiBzb3VyY2UpIHtcbiAgICBzb3VyY2VQcm9wZXJ0eSA9IHNvdXJjZVtrZXldO1xuICAgIGlmIChvcHRpb25zLmRvbnRDYWxsR2V0U2V0KSB7XG4gICAgICBkZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJDEodGFyZ2V0LCBrZXkpO1xuICAgICAgdGFyZ2V0UHJvcGVydHkgPSBkZXNjcmlwdG9yICYmIGRlc2NyaXB0b3IudmFsdWU7XG4gICAgfSBlbHNlIHRhcmdldFByb3BlcnR5ID0gdGFyZ2V0W2tleV07XG4gICAgRk9SQ0VEID0gaXNGb3JjZWQkMShHTE9CQUwgPyBrZXkgOiBUQVJHRVQgKyAoU1RBVElDID8gJy4nIDogJyMnKSArIGtleSwgb3B0aW9ucy5mb3JjZWQpO1xuICAgIC8vIGNvbnRhaW5lZCBpbiB0YXJnZXRcbiAgICBpZiAoIUZPUkNFRCAmJiB0YXJnZXRQcm9wZXJ0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodHlwZW9mIHNvdXJjZVByb3BlcnR5ID09IHR5cGVvZiB0YXJnZXRQcm9wZXJ0eSkgY29udGludWU7XG4gICAgICBjb3B5Q29uc3RydWN0b3JQcm9wZXJ0aWVzJDEoc291cmNlUHJvcGVydHksIHRhcmdldFByb3BlcnR5KTtcbiAgICB9XG4gICAgLy8gYWRkIGEgZmxhZyB0byBub3QgY29tcGxldGVseSBmdWxsIHBvbHlmaWxsc1xuICAgIGlmIChvcHRpb25zLnNoYW0gfHwgKHRhcmdldFByb3BlcnR5ICYmIHRhcmdldFByb3BlcnR5LnNoYW0pKSB7XG4gICAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkMihzb3VyY2VQcm9wZXJ0eSwgJ3NoYW0nLCB0cnVlKTtcbiAgICB9XG4gICAgZGVmaW5lQnVpbHRJbiQ0KHRhcmdldCwga2V5LCBzb3VyY2VQcm9wZXJ0eSwgb3B0aW9ucyk7XG4gIH1cbn07XG5cbnZhciBmYWlscyQ2ID0gZmFpbHMkZjtcblxudmFyIGNvcnJlY3RQcm90b3R5cGVHZXR0ZXIgPSAhZmFpbHMkNihmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEYoKSB7IC8qIGVtcHR5ICovIH1cbiAgRi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBudWxsO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZ2V0cHJvdG90eXBlb2YgLS0gcmVxdWlyZWQgZm9yIHRlc3RpbmdcbiAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihuZXcgRigpKSAhPT0gRi5wcm90b3R5cGU7XG59KTtcblxudmFyIGhhc093biQzID0gaGFzT3duUHJvcGVydHlfMTtcbnZhciBpc0NhbGxhYmxlJGEgPSBpc0NhbGxhYmxlJGw7XG52YXIgdG9PYmplY3QkMyA9IHRvT2JqZWN0JDU7XG52YXIgc2hhcmVkS2V5ID0gc2hhcmVkS2V5JDM7XG52YXIgQ09SUkVDVF9QUk9UT1RZUEVfR0VUVEVSID0gY29ycmVjdFByb3RvdHlwZUdldHRlcjtcblxudmFyIElFX1BST1RPID0gc2hhcmVkS2V5KCdJRV9QUk9UTycpO1xudmFyICRPYmplY3QkMSA9IE9iamVjdDtcbnZhciBPYmplY3RQcm90b3R5cGUgPSAkT2JqZWN0JDEucHJvdG90eXBlO1xuXG4vLyBgT2JqZWN0LmdldFByb3RvdHlwZU9mYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LmdldHByb3RvdHlwZW9mXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZ2V0cHJvdG90eXBlb2YgLS0gc2FmZVxudmFyIG9iamVjdEdldFByb3RvdHlwZU9mID0gQ09SUkVDVF9QUk9UT1RZUEVfR0VUVEVSID8gJE9iamVjdCQxLmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gKE8pIHtcbiAgdmFyIG9iamVjdCA9IHRvT2JqZWN0JDMoTyk7XG4gIGlmIChoYXNPd24kMyhvYmplY3QsIElFX1BST1RPKSkgcmV0dXJuIG9iamVjdFtJRV9QUk9UT107XG4gIHZhciBjb25zdHJ1Y3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcjtcbiAgaWYgKGlzQ2FsbGFibGUkYShjb25zdHJ1Y3RvcikgJiYgb2JqZWN0IGluc3RhbmNlb2YgY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gY29uc3RydWN0b3IucHJvdG90eXBlO1xuICB9IHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiAkT2JqZWN0JDEgPyBPYmplY3RQcm90b3R5cGUgOiBudWxsO1xufTtcblxudmFyIGZhaWxzJDUgPSBmYWlscyRmO1xudmFyIGlzQ2FsbGFibGUkOSA9IGlzQ2FsbGFibGUkbDtcbnZhciBnZXRQcm90b3R5cGVPZiQxID0gb2JqZWN0R2V0UHJvdG90eXBlT2Y7XG52YXIgZGVmaW5lQnVpbHRJbiQzID0gZGVmaW5lQnVpbHRJbiQ1O1xudmFyIHdlbGxLbm93blN5bWJvbCRiID0gd2VsbEtub3duU3ltYm9sJGU7XG5cbnZhciBJVEVSQVRPUiQ1ID0gd2VsbEtub3duU3ltYm9sJGIoJ2l0ZXJhdG9yJyk7XG52YXIgQlVHR1lfU0FGQVJJX0lURVJBVE9SUyQxID0gZmFsc2U7XG5cbi8vIGAlSXRlcmF0b3JQcm90b3R5cGUlYCBvYmplY3Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtJWl0ZXJhdG9ycHJvdG90eXBlJS1vYmplY3RcbnZhciBJdGVyYXRvclByb3RvdHlwZSQyLCBQcm90b3R5cGVPZkFycmF5SXRlcmF0b3JQcm90b3R5cGUsIGFycmF5SXRlcmF0b3I7XG5cbi8qIGVzbGludC1kaXNhYmxlIGVzLXgvbm8tYXJyYXktcHJvdG90eXBlLWtleXMgLS0gc2FmZSAqL1xuaWYgKFtdLmtleXMpIHtcbiAgYXJyYXlJdGVyYXRvciA9IFtdLmtleXMoKTtcbiAgLy8gU2FmYXJpIDggaGFzIGJ1Z2d5IGl0ZXJhdG9ycyB3L28gYG5leHRgXG4gIGlmICghKCduZXh0JyBpbiBhcnJheUl0ZXJhdG9yKSkgQlVHR1lfU0FGQVJJX0lURVJBVE9SUyQxID0gdHJ1ZTtcbiAgZWxzZSB7XG4gICAgUHJvdG90eXBlT2ZBcnJheUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YkMShnZXRQcm90b3R5cGVPZiQxKGFycmF5SXRlcmF0b3IpKTtcbiAgICBpZiAoUHJvdG90eXBlT2ZBcnJheUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPYmplY3QucHJvdG90eXBlKSBJdGVyYXRvclByb3RvdHlwZSQyID0gUHJvdG90eXBlT2ZBcnJheUl0ZXJhdG9yUHJvdG90eXBlO1xuICB9XG59XG5cbnZhciBORVdfSVRFUkFUT1JfUFJPVE9UWVBFID0gSXRlcmF0b3JQcm90b3R5cGUkMiA9PSB1bmRlZmluZWQgfHwgZmFpbHMkNShmdW5jdGlvbiAoKSB7XG4gIHZhciB0ZXN0ID0ge307XG4gIC8vIEZGNDQtIGxlZ2FjeSBpdGVyYXRvcnMgY2FzZVxuICByZXR1cm4gSXRlcmF0b3JQcm90b3R5cGUkMltJVEVSQVRPUiQ1XS5jYWxsKHRlc3QpICE9PSB0ZXN0O1xufSk7XG5cbmlmIChORVdfSVRFUkFUT1JfUFJPVE9UWVBFKSBJdGVyYXRvclByb3RvdHlwZSQyID0ge307XG5cbi8vIGAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKClgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy0laXRlcmF0b3Jwcm90b3R5cGUlLUBAaXRlcmF0b3JcbmlmICghaXNDYWxsYWJsZSQ5KEl0ZXJhdG9yUHJvdG90eXBlJDJbSVRFUkFUT1IkNV0pKSB7XG4gIGRlZmluZUJ1aWx0SW4kMyhJdGVyYXRvclByb3RvdHlwZSQyLCBJVEVSQVRPUiQ1LCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pO1xufVxuXG52YXIgaXRlcmF0b3JzQ29yZSA9IHtcbiAgSXRlcmF0b3JQcm90b3R5cGU6IEl0ZXJhdG9yUHJvdG90eXBlJDIsXG4gIEJVR0dZX1NBRkFSSV9JVEVSQVRPUlM6IEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMkMVxufTtcblxudmFyIGRlZmluZVByb3BlcnR5JDMgPSBvYmplY3REZWZpbmVQcm9wZXJ0eS5mO1xudmFyIGhhc093biQyID0gaGFzT3duUHJvcGVydHlfMTtcbnZhciB3ZWxsS25vd25TeW1ib2wkYSA9IHdlbGxLbm93blN5bWJvbCRlO1xuXG52YXIgVE9fU1RSSU5HX1RBRyQzID0gd2VsbEtub3duU3ltYm9sJGEoJ3RvU3RyaW5nVGFnJyk7XG5cbnZhciBzZXRUb1N0cmluZ1RhZyQzID0gZnVuY3Rpb24gKHRhcmdldCwgVEFHLCBTVEFUSUMpIHtcbiAgaWYgKHRhcmdldCAmJiAhU1RBVElDKSB0YXJnZXQgPSB0YXJnZXQucHJvdG90eXBlO1xuICBpZiAodGFyZ2V0ICYmICFoYXNPd24kMih0YXJnZXQsIFRPX1NUUklOR19UQUckMykpIHtcbiAgICBkZWZpbmVQcm9wZXJ0eSQzKHRhcmdldCwgVE9fU1RSSU5HX1RBRyQzLCB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IFRBRyB9KTtcbiAgfVxufTtcblxudmFyIEl0ZXJhdG9yUHJvdG90eXBlJDEgPSBpdGVyYXRvcnNDb3JlLkl0ZXJhdG9yUHJvdG90eXBlO1xudmFyIGNyZWF0ZSA9IG9iamVjdENyZWF0ZTtcbnZhciBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IkMSA9IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciQ0O1xudmFyIHNldFRvU3RyaW5nVGFnJDIgPSBzZXRUb1N0cmluZ1RhZyQzO1xudmFyIEl0ZXJhdG9ycyQ0ID0gaXRlcmF0b3JzO1xuXG52YXIgcmV0dXJuVGhpcyQxID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcblxudmFyIGNyZWF0ZUl0ZXJhdG9yQ29uc3RydWN0b3IkMSA9IGZ1bmN0aW9uIChJdGVyYXRvckNvbnN0cnVjdG9yLCBOQU1FLCBuZXh0LCBFTlVNRVJBQkxFX05FWFQpIHtcbiAgdmFyIFRPX1NUUklOR19UQUcgPSBOQU1FICsgJyBJdGVyYXRvcic7XG4gIEl0ZXJhdG9yQ29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlJDEsIHsgbmV4dDogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDEoKyFFTlVNRVJBQkxFX05FWFQsIG5leHQpIH0pO1xuICBzZXRUb1N0cmluZ1RhZyQyKEl0ZXJhdG9yQ29uc3RydWN0b3IsIFRPX1NUUklOR19UQUcsIGZhbHNlKTtcbiAgSXRlcmF0b3JzJDRbVE9fU1RSSU5HX1RBR10gPSByZXR1cm5UaGlzJDE7XG4gIHJldHVybiBJdGVyYXRvckNvbnN0cnVjdG9yO1xufTtcblxudmFyIGlzQ2FsbGFibGUkOCA9IGlzQ2FsbGFibGUkbDtcblxudmFyICRTdHJpbmckMSA9IFN0cmluZztcbnZhciAkVHlwZUVycm9yJDcgPSBUeXBlRXJyb3I7XG5cbnZhciBhUG9zc2libGVQcm90b3R5cGUkMSA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICBpZiAodHlwZW9mIGFyZ3VtZW50ID09ICdvYmplY3QnIHx8IGlzQ2FsbGFibGUkOChhcmd1bWVudCkpIHJldHVybiBhcmd1bWVudDtcbiAgdGhyb3cgJFR5cGVFcnJvciQ3KFwiQ2FuJ3Qgc2V0IFwiICsgJFN0cmluZyQxKGFyZ3VtZW50KSArICcgYXMgYSBwcm90b3R5cGUnKTtcbn07XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvIC0tIHNhZmUgKi9cblxudmFyIHVuY3VycnlUaGlzJDYgPSBmdW5jdGlvblVuY3VycnlUaGlzO1xudmFyIGFuT2JqZWN0JDUgPSBhbk9iamVjdCRhO1xudmFyIGFQb3NzaWJsZVByb3RvdHlwZSA9IGFQb3NzaWJsZVByb3RvdHlwZSQxO1xuXG4vLyBgT2JqZWN0LnNldFByb3RvdHlwZU9mYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LnNldHByb3RvdHlwZW9mXG4vLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy14L25vLW9iamVjdC1zZXRwcm90b3R5cGVvZiAtLSBzYWZlXG52YXIgb2JqZWN0U2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgKCdfX3Byb3RvX18nIGluIHt9ID8gZnVuY3Rpb24gKCkge1xuICB2YXIgQ09SUkVDVF9TRVRURVIgPSBmYWxzZTtcbiAgdmFyIHRlc3QgPSB7fTtcbiAgdmFyIHNldHRlcjtcbiAgdHJ5IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9yIC0tIHNhZmVcbiAgICBzZXR0ZXIgPSB1bmN1cnJ5VGhpcyQ2KE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoT2JqZWN0LnByb3RvdHlwZSwgJ19fcHJvdG9fXycpLnNldCk7XG4gICAgc2V0dGVyKHRlc3QsIFtdKTtcbiAgICBDT1JSRUNUX1NFVFRFUiA9IHRlc3QgaW5zdGFuY2VvZiBBcnJheTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxuICByZXR1cm4gZnVuY3Rpb24gc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pIHtcbiAgICBhbk9iamVjdCQ1KE8pO1xuICAgIGFQb3NzaWJsZVByb3RvdHlwZShwcm90byk7XG4gICAgaWYgKENPUlJFQ1RfU0VUVEVSKSBzZXR0ZXIoTywgcHJvdG8pO1xuICAgIGVsc2UgTy5fX3Byb3RvX18gPSBwcm90bztcbiAgICByZXR1cm4gTztcbiAgfTtcbn0oKSA6IHVuZGVmaW5lZCk7XG5cbnZhciAkJGEgPSBfZXhwb3J0O1xudmFyIGNhbGwkOSA9IGZ1bmN0aW9uQ2FsbDtcbnZhciBGdW5jdGlvbk5hbWUgPSBmdW5jdGlvbk5hbWU7XG52YXIgaXNDYWxsYWJsZSQ3ID0gaXNDYWxsYWJsZSRsO1xudmFyIGNyZWF0ZUl0ZXJhdG9yQ29uc3RydWN0b3IgPSBjcmVhdGVJdGVyYXRvckNvbnN0cnVjdG9yJDE7XG52YXIgZ2V0UHJvdG90eXBlT2YgPSBvYmplY3RHZXRQcm90b3R5cGVPZjtcbnZhciBzZXRQcm90b3R5cGVPZiQxID0gb2JqZWN0U2V0UHJvdG90eXBlT2Y7XG52YXIgc2V0VG9TdHJpbmdUYWckMSA9IHNldFRvU3RyaW5nVGFnJDM7XG52YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5JDEgPSBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNDtcbnZhciBkZWZpbmVCdWlsdEluJDIgPSBkZWZpbmVCdWlsdEluJDU7XG52YXIgd2VsbEtub3duU3ltYm9sJDkgPSB3ZWxsS25vd25TeW1ib2wkZTtcbnZhciBJdGVyYXRvcnMkMyA9IGl0ZXJhdG9ycztcbnZhciBJdGVyYXRvcnNDb3JlID0gaXRlcmF0b3JzQ29yZTtcblxudmFyIFBST1BFUl9GVU5DVElPTl9OQU1FID0gRnVuY3Rpb25OYW1lLlBST1BFUjtcbnZhciBDT05GSUdVUkFCTEVfRlVOQ1RJT05fTkFNRSA9IEZ1bmN0aW9uTmFtZS5DT05GSUdVUkFCTEU7XG52YXIgSXRlcmF0b3JQcm90b3R5cGUgPSBJdGVyYXRvcnNDb3JlLkl0ZXJhdG9yUHJvdG90eXBlO1xudmFyIEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgPSBJdGVyYXRvcnNDb3JlLkJVR0dZX1NBRkFSSV9JVEVSQVRPUlM7XG52YXIgSVRFUkFUT1IkNCA9IHdlbGxLbm93blN5bWJvbCQ5KCdpdGVyYXRvcicpO1xudmFyIEtFWVMgPSAna2V5cyc7XG52YXIgVkFMVUVTID0gJ3ZhbHVlcyc7XG52YXIgRU5UUklFUyA9ICdlbnRyaWVzJztcblxudmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuXG52YXIgZGVmaW5lSXRlcmF0b3IkMSA9IGZ1bmN0aW9uIChJdGVyYWJsZSwgTkFNRSwgSXRlcmF0b3JDb25zdHJ1Y3RvciwgbmV4dCwgREVGQVVMVCwgSVNfU0VULCBGT1JDRUQpIHtcbiAgY3JlYXRlSXRlcmF0b3JDb25zdHJ1Y3RvcihJdGVyYXRvckNvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KTtcblxuICB2YXIgZ2V0SXRlcmF0aW9uTWV0aG9kID0gZnVuY3Rpb24gKEtJTkQpIHtcbiAgICBpZiAoS0lORCA9PT0gREVGQVVMVCAmJiBkZWZhdWx0SXRlcmF0b3IpIHJldHVybiBkZWZhdWx0SXRlcmF0b3I7XG4gICAgaWYgKCFCVUdHWV9TQUZBUklfSVRFUkFUT1JTICYmIEtJTkQgaW4gSXRlcmFibGVQcm90b3R5cGUpIHJldHVybiBJdGVyYWJsZVByb3RvdHlwZVtLSU5EXTtcbiAgICBzd2l0Y2ggKEtJTkQpIHtcbiAgICAgIGNhc2UgS0VZUzogcmV0dXJuIGZ1bmN0aW9uIGtleXMoKSB7IHJldHVybiBuZXcgSXRlcmF0b3JDb25zdHJ1Y3Rvcih0aGlzLCBLSU5EKTsgfTtcbiAgICAgIGNhc2UgVkFMVUVTOiByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCkgeyByZXR1cm4gbmV3IEl0ZXJhdG9yQ29uc3RydWN0b3IodGhpcywgS0lORCk7IH07XG4gICAgICBjYXNlIEVOVFJJRVM6IHJldHVybiBmdW5jdGlvbiBlbnRyaWVzKCkgeyByZXR1cm4gbmV3IEl0ZXJhdG9yQ29uc3RydWN0b3IodGhpcywgS0lORCk7IH07XG4gICAgfSByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IEl0ZXJhdG9yQ29uc3RydWN0b3IodGhpcyk7IH07XG4gIH07XG5cbiAgdmFyIFRPX1NUUklOR19UQUcgPSBOQU1FICsgJyBJdGVyYXRvcic7XG4gIHZhciBJTkNPUlJFQ1RfVkFMVUVTX05BTUUgPSBmYWxzZTtcbiAgdmFyIEl0ZXJhYmxlUHJvdG90eXBlID0gSXRlcmFibGUucHJvdG90eXBlO1xuICB2YXIgbmF0aXZlSXRlcmF0b3IgPSBJdGVyYWJsZVByb3RvdHlwZVtJVEVSQVRPUiQ0XVxuICAgIHx8IEl0ZXJhYmxlUHJvdG90eXBlWydAQGl0ZXJhdG9yJ11cbiAgICB8fCBERUZBVUxUICYmIEl0ZXJhYmxlUHJvdG90eXBlW0RFRkFVTFRdO1xuICB2YXIgZGVmYXVsdEl0ZXJhdG9yID0gIUJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgJiYgbmF0aXZlSXRlcmF0b3IgfHwgZ2V0SXRlcmF0aW9uTWV0aG9kKERFRkFVTFQpO1xuICB2YXIgYW55TmF0aXZlSXRlcmF0b3IgPSBOQU1FID09ICdBcnJheScgPyBJdGVyYWJsZVByb3RvdHlwZS5lbnRyaWVzIHx8IG5hdGl2ZUl0ZXJhdG9yIDogbmF0aXZlSXRlcmF0b3I7XG4gIHZhciBDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUsIG1ldGhvZHMsIEtFWTtcblxuICAvLyBmaXggbmF0aXZlXG4gIGlmIChhbnlOYXRpdmVJdGVyYXRvcikge1xuICAgIEN1cnJlbnRJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKGFueU5hdGl2ZUl0ZXJhdG9yLmNhbGwobmV3IEl0ZXJhYmxlKCkpKTtcbiAgICBpZiAoQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlICE9PSBPYmplY3QucHJvdG90eXBlICYmIEN1cnJlbnRJdGVyYXRvclByb3RvdHlwZS5uZXh0KSB7XG4gICAgICBpZiAoZ2V0UHJvdG90eXBlT2YoQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlKSAhPT0gSXRlcmF0b3JQcm90b3R5cGUpIHtcbiAgICAgICAgaWYgKHNldFByb3RvdHlwZU9mJDEpIHtcbiAgICAgICAgICBzZXRQcm90b3R5cGVPZiQxKEN1cnJlbnRJdGVyYXRvclByb3RvdHlwZSwgSXRlcmF0b3JQcm90b3R5cGUpO1xuICAgICAgICB9IGVsc2UgaWYgKCFpc0NhbGxhYmxlJDcoQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlW0lURVJBVE9SJDRdKSkge1xuICAgICAgICAgIGRlZmluZUJ1aWx0SW4kMihDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SJDQsIHJldHVyblRoaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzXG4gICAgICBzZXRUb1N0cmluZ1RhZyQxKEN1cnJlbnRJdGVyYXRvclByb3RvdHlwZSwgVE9fU1RSSU5HX1RBRywgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZml4IEFycmF5LnByb3RvdHlwZS57IHZhbHVlcywgQEBpdGVyYXRvciB9Lm5hbWUgaW4gVjggLyBGRlxuICBpZiAoUFJPUEVSX0ZVTkNUSU9OX05BTUUgJiYgREVGQVVMVCA9PSBWQUxVRVMgJiYgbmF0aXZlSXRlcmF0b3IgJiYgbmF0aXZlSXRlcmF0b3IubmFtZSAhPT0gVkFMVUVTKSB7XG4gICAgaWYgKENPTkZJR1VSQUJMRV9GVU5DVElPTl9OQU1FKSB7XG4gICAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkMShJdGVyYWJsZVByb3RvdHlwZSwgJ25hbWUnLCBWQUxVRVMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBJTkNPUlJFQ1RfVkFMVUVTX05BTUUgPSB0cnVlO1xuICAgICAgZGVmYXVsdEl0ZXJhdG9yID0gZnVuY3Rpb24gdmFsdWVzKCkgeyByZXR1cm4gY2FsbCQ5KG5hdGl2ZUl0ZXJhdG9yLCB0aGlzKTsgfTtcbiAgICB9XG4gIH1cblxuICAvLyBleHBvcnQgYWRkaXRpb25hbCBtZXRob2RzXG4gIGlmIChERUZBVUxUKSB7XG4gICAgbWV0aG9kcyA9IHtcbiAgICAgIHZhbHVlczogZ2V0SXRlcmF0aW9uTWV0aG9kKFZBTFVFUyksXG4gICAgICBrZXlzOiBJU19TRVQgPyBkZWZhdWx0SXRlcmF0b3IgOiBnZXRJdGVyYXRpb25NZXRob2QoS0VZUyksXG4gICAgICBlbnRyaWVzOiBnZXRJdGVyYXRpb25NZXRob2QoRU5UUklFUylcbiAgICB9O1xuICAgIGlmIChGT1JDRUQpIGZvciAoS0VZIGluIG1ldGhvZHMpIHtcbiAgICAgIGlmIChCVUdHWV9TQUZBUklfSVRFUkFUT1JTIHx8IElOQ09SUkVDVF9WQUxVRVNfTkFNRSB8fCAhKEtFWSBpbiBJdGVyYWJsZVByb3RvdHlwZSkpIHtcbiAgICAgICAgZGVmaW5lQnVpbHRJbiQyKEl0ZXJhYmxlUHJvdG90eXBlLCBLRVksIG1ldGhvZHNbS0VZXSk7XG4gICAgICB9XG4gICAgfSBlbHNlICQkYSh7IHRhcmdldDogTkFNRSwgcHJvdG86IHRydWUsIGZvcmNlZDogQlVHR1lfU0FGQVJJX0lURVJBVE9SUyB8fCBJTkNPUlJFQ1RfVkFMVUVTX05BTUUgfSwgbWV0aG9kcyk7XG4gIH1cblxuICAvLyBkZWZpbmUgaXRlcmF0b3JcbiAgaWYgKEl0ZXJhYmxlUHJvdG90eXBlW0lURVJBVE9SJDRdICE9PSBkZWZhdWx0SXRlcmF0b3IpIHtcbiAgICBkZWZpbmVCdWlsdEluJDIoSXRlcmFibGVQcm90b3R5cGUsIElURVJBVE9SJDQsIGRlZmF1bHRJdGVyYXRvciwgeyBuYW1lOiBERUZBVUxUIH0pO1xuICB9XG4gIEl0ZXJhdG9ycyQzW05BTUVdID0gZGVmYXVsdEl0ZXJhdG9yO1xuXG4gIHJldHVybiBtZXRob2RzO1xufTtcblxudmFyIHRvSW5kZXhlZE9iamVjdCA9IHRvSW5kZXhlZE9iamVjdCQ1O1xudmFyIGFkZFRvVW5zY29wYWJsZXMgPSBhZGRUb1Vuc2NvcGFibGVzJDE7XG52YXIgSXRlcmF0b3JzJDIgPSBpdGVyYXRvcnM7XG52YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSQxID0gaW50ZXJuYWxTdGF0ZTtcbnZhciBkZWZpbmVQcm9wZXJ0eSQyID0gb2JqZWN0RGVmaW5lUHJvcGVydHkuZjtcbnZhciBkZWZpbmVJdGVyYXRvciA9IGRlZmluZUl0ZXJhdG9yJDE7XG52YXIgREVTQ1JJUFRPUlMkMyA9IGRlc2NyaXB0b3JzO1xuXG52YXIgQVJSQVlfSVRFUkFUT1IgPSAnQXJyYXkgSXRlcmF0b3InO1xudmFyIHNldEludGVybmFsU3RhdGUkMSA9IEludGVybmFsU3RhdGVNb2R1bGUkMS5zZXQ7XG52YXIgZ2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUkMS5nZXR0ZXJGb3IoQVJSQVlfSVRFUkFUT1IpO1xuXG4vLyBgQXJyYXkucHJvdG90eXBlLmVudHJpZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZW50cmllc1xuLy8gYEFycmF5LnByb3RvdHlwZS5rZXlzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmtleXNcbi8vIGBBcnJheS5wcm90b3R5cGUudmFsdWVzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLnZhbHVlc1xuLy8gYEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS1AQGl0ZXJhdG9yXG4vLyBgQ3JlYXRlQXJyYXlJdGVyYXRvcmAgaW50ZXJuYWwgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWNyZWF0ZWFycmF5aXRlcmF0b3JcbnZhciBlc19hcnJheV9pdGVyYXRvciA9IGRlZmluZUl0ZXJhdG9yKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbiAoaXRlcmF0ZWQsIGtpbmQpIHtcbiAgc2V0SW50ZXJuYWxTdGF0ZSQxKHRoaXMsIHtcbiAgICB0eXBlOiBBUlJBWV9JVEVSQVRPUixcbiAgICB0YXJnZXQ6IHRvSW5kZXhlZE9iamVjdChpdGVyYXRlZCksIC8vIHRhcmdldFxuICAgIGluZGV4OiAwLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleFxuICAgIGtpbmQ6IGtpbmQgICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2luZFxuICB9KTtcbi8vIGAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLSVhcnJheWl0ZXJhdG9ycHJvdG90eXBlJS5uZXh0XG59LCBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IGdldEludGVybmFsU3RhdGUodGhpcyk7XG4gIHZhciB0YXJnZXQgPSBzdGF0ZS50YXJnZXQ7XG4gIHZhciBraW5kID0gc3RhdGUua2luZDtcbiAgdmFyIGluZGV4ID0gc3RhdGUuaW5kZXgrKztcbiAgaWYgKCF0YXJnZXQgfHwgaW5kZXggPj0gdGFyZ2V0Lmxlbmd0aCkge1xuICAgIHN0YXRlLnRhcmdldCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cbiAgaWYgKGtpbmQgPT0gJ2tleXMnKSByZXR1cm4geyB2YWx1ZTogaW5kZXgsIGRvbmU6IGZhbHNlIH07XG4gIGlmIChraW5kID09ICd2YWx1ZXMnKSByZXR1cm4geyB2YWx1ZTogdGFyZ2V0W2luZGV4XSwgZG9uZTogZmFsc2UgfTtcbiAgcmV0dXJuIHsgdmFsdWU6IFtpbmRleCwgdGFyZ2V0W2luZGV4XV0sIGRvbmU6IGZhbHNlIH07XG59LCAndmFsdWVzJyk7XG5cbi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJVxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1jcmVhdGV1bm1hcHBlZGFyZ3VtZW50c29iamVjdFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1jcmVhdGVtYXBwZWRhcmd1bWVudHNvYmplY3RcbnZhciB2YWx1ZXMgPSBJdGVyYXRvcnMkMi5Bcmd1bWVudHMgPSBJdGVyYXRvcnMkMi5BcnJheTtcblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUtQEB1bnNjb3BhYmxlc1xuYWRkVG9VbnNjb3BhYmxlcygna2V5cycpO1xuYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7XG5hZGRUb1Vuc2NvcGFibGVzKCdlbnRyaWVzJyk7XG5cbi8vIFY4IH4gQ2hyb21lIDQ1LSBidWdcbmlmIChERVNDUklQVE9SUyQzICYmIHZhbHVlcy5uYW1lICE9PSAndmFsdWVzJykgdHJ5IHtcbiAgZGVmaW5lUHJvcGVydHkkMih2YWx1ZXMsICduYW1lJywgeyB2YWx1ZTogJ3ZhbHVlcycgfSk7XG59IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG5cbi8vIGl0ZXJhYmxlIERPTSBjb2xsZWN0aW9uc1xuLy8gZmxhZyAtIGBpdGVyYWJsZWAgaW50ZXJmYWNlIC0gJ2VudHJpZXMnLCAna2V5cycsICd2YWx1ZXMnLCAnZm9yRWFjaCcgbWV0aG9kc1xudmFyIGRvbUl0ZXJhYmxlcyA9IHtcbiAgQ1NTUnVsZUxpc3Q6IDAsXG4gIENTU1N0eWxlRGVjbGFyYXRpb246IDAsXG4gIENTU1ZhbHVlTGlzdDogMCxcbiAgQ2xpZW50UmVjdExpc3Q6IDAsXG4gIERPTVJlY3RMaXN0OiAwLFxuICBET01TdHJpbmdMaXN0OiAwLFxuICBET01Ub2tlbkxpc3Q6IDEsXG4gIERhdGFUcmFuc2Zlckl0ZW1MaXN0OiAwLFxuICBGaWxlTGlzdDogMCxcbiAgSFRNTEFsbENvbGxlY3Rpb246IDAsXG4gIEhUTUxDb2xsZWN0aW9uOiAwLFxuICBIVE1MRm9ybUVsZW1lbnQ6IDAsXG4gIEhUTUxTZWxlY3RFbGVtZW50OiAwLFxuICBNZWRpYUxpc3Q6IDAsXG4gIE1pbWVUeXBlQXJyYXk6IDAsXG4gIE5hbWVkTm9kZU1hcDogMCxcbiAgTm9kZUxpc3Q6IDEsXG4gIFBhaW50UmVxdWVzdExpc3Q6IDAsXG4gIFBsdWdpbjogMCxcbiAgUGx1Z2luQXJyYXk6IDAsXG4gIFNWR0xlbmd0aExpc3Q6IDAsXG4gIFNWR051bWJlckxpc3Q6IDAsXG4gIFNWR1BhdGhTZWdMaXN0OiAwLFxuICBTVkdQb2ludExpc3Q6IDAsXG4gIFNWR1N0cmluZ0xpc3Q6IDAsXG4gIFNWR1RyYW5zZm9ybUxpc3Q6IDAsXG4gIFNvdXJjZUJ1ZmZlckxpc3Q6IDAsXG4gIFN0eWxlU2hlZXRMaXN0OiAwLFxuICBUZXh0VHJhY2tDdWVMaXN0OiAwLFxuICBUZXh0VHJhY2tMaXN0OiAwLFxuICBUb3VjaExpc3Q6IDBcbn07XG5cbi8vIGluIG9sZCBXZWJLaXQgdmVyc2lvbnMsIGBlbGVtZW50LmNsYXNzTGlzdGAgaXMgbm90IGFuIGluc3RhbmNlIG9mIGdsb2JhbCBgRE9NVG9rZW5MaXN0YFxudmFyIGRvY3VtZW50Q3JlYXRlRWxlbWVudCA9IGRvY3VtZW50Q3JlYXRlRWxlbWVudCQyO1xuXG52YXIgY2xhc3NMaXN0ID0gZG9jdW1lbnRDcmVhdGVFbGVtZW50KCdzcGFuJykuY2xhc3NMaXN0O1xudmFyIERPTVRva2VuTGlzdFByb3RvdHlwZSQxID0gY2xhc3NMaXN0ICYmIGNsYXNzTGlzdC5jb25zdHJ1Y3RvciAmJiBjbGFzc0xpc3QuY29uc3RydWN0b3IucHJvdG90eXBlO1xuXG52YXIgZG9tVG9rZW5MaXN0UHJvdG90eXBlID0gRE9NVG9rZW5MaXN0UHJvdG90eXBlJDEgPT09IE9iamVjdC5wcm90b3R5cGUgPyB1bmRlZmluZWQgOiBET01Ub2tlbkxpc3RQcm90b3R5cGUkMTtcblxudmFyIGdsb2JhbCRhID0gZ2xvYmFsJGs7XG52YXIgRE9NSXRlcmFibGVzID0gZG9tSXRlcmFibGVzO1xudmFyIERPTVRva2VuTGlzdFByb3RvdHlwZSA9IGRvbVRva2VuTGlzdFByb3RvdHlwZTtcbnZhciBBcnJheUl0ZXJhdG9yTWV0aG9kcyA9IGVzX2FycmF5X2l0ZXJhdG9yO1xudmFyIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSA9IGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSQ0O1xudmFyIHdlbGxLbm93blN5bWJvbCQ4ID0gd2VsbEtub3duU3ltYm9sJGU7XG5cbnZhciBJVEVSQVRPUiQzID0gd2VsbEtub3duU3ltYm9sJDgoJ2l0ZXJhdG9yJyk7XG52YXIgVE9fU1RSSU5HX1RBRyQyID0gd2VsbEtub3duU3ltYm9sJDgoJ3RvU3RyaW5nVGFnJyk7XG52YXIgQXJyYXlWYWx1ZXMgPSBBcnJheUl0ZXJhdG9yTWV0aG9kcy52YWx1ZXM7XG5cbnZhciBoYW5kbGVQcm90b3R5cGUgPSBmdW5jdGlvbiAoQ29sbGVjdGlvblByb3RvdHlwZSwgQ09MTEVDVElPTl9OQU1FKSB7XG4gIGlmIChDb2xsZWN0aW9uUHJvdG90eXBlKSB7XG4gICAgLy8gc29tZSBDaHJvbWUgdmVyc2lvbnMgaGF2ZSBub24tY29uZmlndXJhYmxlIG1ldGhvZHMgb24gRE9NVG9rZW5MaXN0XG4gICAgaWYgKENvbGxlY3Rpb25Qcm90b3R5cGVbSVRFUkFUT1IkM10gIT09IEFycmF5VmFsdWVzKSB0cnkge1xuICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KENvbGxlY3Rpb25Qcm90b3R5cGUsIElURVJBVE9SJDMsIEFycmF5VmFsdWVzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgQ29sbGVjdGlvblByb3RvdHlwZVtJVEVSQVRPUiQzXSA9IEFycmF5VmFsdWVzO1xuICAgIH1cbiAgICBpZiAoIUNvbGxlY3Rpb25Qcm90b3R5cGVbVE9fU1RSSU5HX1RBRyQyXSkge1xuICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KENvbGxlY3Rpb25Qcm90b3R5cGUsIFRPX1NUUklOR19UQUckMiwgQ09MTEVDVElPTl9OQU1FKTtcbiAgICB9XG4gICAgaWYgKERPTUl0ZXJhYmxlc1tDT0xMRUNUSU9OX05BTUVdKSBmb3IgKHZhciBNRVRIT0RfTkFNRSBpbiBBcnJheUl0ZXJhdG9yTWV0aG9kcykge1xuICAgICAgLy8gc29tZSBDaHJvbWUgdmVyc2lvbnMgaGF2ZSBub24tY29uZmlndXJhYmxlIG1ldGhvZHMgb24gRE9NVG9rZW5MaXN0XG4gICAgICBpZiAoQ29sbGVjdGlvblByb3RvdHlwZVtNRVRIT0RfTkFNRV0gIT09IEFycmF5SXRlcmF0b3JNZXRob2RzW01FVEhPRF9OQU1FXSkgdHJ5IHtcbiAgICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KENvbGxlY3Rpb25Qcm90b3R5cGUsIE1FVEhPRF9OQU1FLCBBcnJheUl0ZXJhdG9yTWV0aG9kc1tNRVRIT0RfTkFNRV0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgQ29sbGVjdGlvblByb3RvdHlwZVtNRVRIT0RfTkFNRV0gPSBBcnJheUl0ZXJhdG9yTWV0aG9kc1tNRVRIT0RfTkFNRV07XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5mb3IgKHZhciBDT0xMRUNUSU9OX05BTUUgaW4gRE9NSXRlcmFibGVzKSB7XG4gIGhhbmRsZVByb3RvdHlwZShnbG9iYWwkYVtDT0xMRUNUSU9OX05BTUVdICYmIGdsb2JhbCRhW0NPTExFQ1RJT05fTkFNRV0ucHJvdG90eXBlLCBDT0xMRUNUSU9OX05BTUUpO1xufVxuXG5oYW5kbGVQcm90b3R5cGUoRE9NVG9rZW5MaXN0UHJvdG90eXBlLCAnRE9NVG9rZW5MaXN0Jyk7XG5cbnZhciBERVNDUklQVE9SUyQyID0gZGVzY3JpcHRvcnM7XG52YXIgdW5jdXJyeVRoaXMkNSA9IGZ1bmN0aW9uVW5jdXJyeVRoaXM7XG52YXIgY2FsbCQ4ID0gZnVuY3Rpb25DYWxsO1xudmFyIGZhaWxzJDQgPSBmYWlscyRmO1xudmFyIG9iamVjdEtleXMgPSBvYmplY3RLZXlzJDI7XG52YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzTW9kdWxlID0gb2JqZWN0R2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlTW9kdWxlID0gb2JqZWN0UHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgdG9PYmplY3QkMiA9IHRvT2JqZWN0JDU7XG52YXIgSW5kZXhlZE9iamVjdCQxID0gaW5kZXhlZE9iamVjdDtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tb2JqZWN0LWFzc2lnbiAtLSBzYWZlXG52YXIgJGFzc2lnbiA9IE9iamVjdC5hc3NpZ247XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMteC9uby1vYmplY3QtZGVmaW5lcHJvcGVydHkgLS0gcmVxdWlyZWQgZm9yIHRlc3RpbmdcbnZhciBkZWZpbmVQcm9wZXJ0eSQxID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIGNvbmNhdCA9IHVuY3VycnlUaGlzJDUoW10uY29uY2F0KTtcblxuLy8gYE9iamVjdC5hc3NpZ25gIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuYXNzaWduXG52YXIgb2JqZWN0QXNzaWduID0gISRhc3NpZ24gfHwgZmFpbHMkNChmdW5jdGlvbiAoKSB7XG4gIC8vIHNob3VsZCBoYXZlIGNvcnJlY3Qgb3JkZXIgb2Ygb3BlcmF0aW9ucyAoRWRnZSBidWcpXG4gIGlmIChERVNDUklQVE9SUyQyICYmICRhc3NpZ24oeyBiOiAxIH0sICRhc3NpZ24oZGVmaW5lUHJvcGVydHkkMSh7fSwgJ2EnLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlZmluZVByb3BlcnR5JDEodGhpcywgJ2InLCB7XG4gICAgICAgIHZhbHVlOiAzLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9KSwgeyBiOiAyIH0pKS5iICE9PSAxKSByZXR1cm4gdHJ1ZTtcbiAgLy8gc2hvdWxkIHdvcmsgd2l0aCBzeW1ib2xzIGFuZCBzaG91bGQgaGF2ZSBkZXRlcm1pbmlzdGljIHByb3BlcnR5IG9yZGVyIChWOCBidWcpXG4gIHZhciBBID0ge307XG4gIHZhciBCID0ge307XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy14L25vLXN5bWJvbCAtLSBzYWZlXG4gIHZhciBzeW1ib2wgPSBTeW1ib2woKTtcbiAgdmFyIGFscGhhYmV0ID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0JztcbiAgQVtzeW1ib2xdID0gNztcbiAgYWxwaGFiZXQuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24gKGNocikgeyBCW2Nocl0gPSBjaHI7IH0pO1xuICByZXR1cm4gJGFzc2lnbih7fSwgQSlbc3ltYm9sXSAhPSA3IHx8IG9iamVjdEtleXMoJGFzc2lnbih7fSwgQikpLmpvaW4oJycpICE9IGFscGhhYmV0O1xufSkgPyBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2UpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycyAtLSByZXF1aXJlZCBmb3IgYC5sZW5ndGhgXG4gIHZhciBUID0gdG9PYmplY3QkMih0YXJnZXQpO1xuICB2YXIgYXJndW1lbnRzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgdmFyIGluZGV4ID0gMTtcbiAgdmFyIGdldE93blByb3BlcnR5U3ltYm9scyA9IGdldE93blByb3BlcnR5U3ltYm9sc01vZHVsZS5mO1xuICB2YXIgcHJvcGVydHlJc0VudW1lcmFibGUgPSBwcm9wZXJ0eUlzRW51bWVyYWJsZU1vZHVsZS5mO1xuICB3aGlsZSAoYXJndW1lbnRzTGVuZ3RoID4gaW5kZXgpIHtcbiAgICB2YXIgUyA9IEluZGV4ZWRPYmplY3QkMShhcmd1bWVudHNbaW5kZXgrK10pO1xuICAgIHZhciBrZXlzID0gZ2V0T3duUHJvcGVydHlTeW1ib2xzID8gY29uY2F0KG9iamVjdEtleXMoUyksIGdldE93blByb3BlcnR5U3ltYm9scyhTKSkgOiBvYmplY3RLZXlzKFMpO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgaiA9IDA7XG4gICAgdmFyIGtleTtcbiAgICB3aGlsZSAobGVuZ3RoID4gaikge1xuICAgICAga2V5ID0ga2V5c1tqKytdO1xuICAgICAgaWYgKCFERVNDUklQVE9SUyQyIHx8IGNhbGwkOChwcm9wZXJ0eUlzRW51bWVyYWJsZSwgUywga2V5KSkgVFtrZXldID0gU1trZXldO1xuICAgIH1cbiAgfSByZXR1cm4gVDtcbn0gOiAkYXNzaWduO1xuXG52YXIgJCQ5ID0gX2V4cG9ydDtcbnZhciBhc3NpZ24gPSBvYmplY3RBc3NpZ247XG5cbi8vIGBPYmplY3QuYXNzaWduYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LmFzc2lnblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tb2JqZWN0LWFzc2lnbiAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xuJCQ5KHsgdGFyZ2V0OiAnT2JqZWN0Jywgc3RhdDogdHJ1ZSwgYXJpdHk6IDIsIGZvcmNlZDogT2JqZWN0LmFzc2lnbiAhPT0gYXNzaWduIH0sIHtcbiAgYXNzaWduOiBhc3NpZ25cbn0pO1xuXG5jb25zdCBXYWxsZXROZXR3b3JrQ2hhbmdlZCA9ICh7XG4gIHNlbGVjdG9yLFxuICBvblN3aXRjaFdhbGxldCxcbiAgb25EaXNtaXNzXG59KSA9PiB7XG4gIHJldHVybiBqc3hzKFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgIGNsYXNzTmFtZTogXCJzd2l0Y2gtbmV0d29yay1tZXNzYWdlLXdyYXBwZXJcIlxuICB9LCB7XG4gICAgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICBjbGFzc05hbWU6IFwiaGVhZGVyXCJcbiAgICB9LCB7XG4gICAgICBjaGlsZHJlbjoganN4KFwiaDJcIiwge1xuICAgICAgICBjaGlsZHJlbjogXCJZb3UgTXVzdCBDaGFuZ2UgTmV0d29ya3NcIlxuICAgICAgfSlcbiAgICB9KSksIGpzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICBjbGFzc05hbWU6IFwiY29udGVudFwiXG4gICAgfSwge1xuICAgICAgY2hpbGRyZW46IFtqc3hzKFwicFwiLCB7XG4gICAgICAgIGNoaWxkcmVuOiBbXCJXZSd2ZSBkZXRlY3RlZCB0aGF0IHlvdSBuZWVkIHRvIGNoYW5nZSB5b3VyIHdhbGxldCdzIG5ldHdvcmsgdG9cIiwganN4KFwic3Ryb25nXCIsIHtcbiAgICAgICAgICBjaGlsZHJlbjogYCAke3NlbGVjdG9yLm9wdGlvbnMubmV0d29yay5uZXR3b3JrSWR9YFxuICAgICAgICB9KSwgXCIgZm9yIHRoaXMgZEFwcC5cIl1cbiAgICAgIH0pLCBqc3goXCJwXCIsIHtcbiAgICAgICAgY2hpbGRyZW46IFwiU29tZSB3YWxsZXRzIG1heSBub3Qgc3VwcG9ydCBjaGFuZ2luZyBuZXR3b3Jrcy4gSWYgeW91IGNhbiBub3QgY2hhbmdlIG5ldHdvcmtzIHlvdSBtYXkgY29uc2lkZXIgc3dpdGNoaW5nIHRvIGFub3RoZXIgd2FsbGV0LlwiXG4gICAgICB9KV1cbiAgICB9KSksIGpzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICBjbGFzc05hbWU6IFwiYWN0aW9uLWJ1dHRvbnNcIlxuICAgIH0sIHtcbiAgICAgIGNoaWxkcmVuOiBbanN4KFwiYnV0dG9uXCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICBjbGFzc05hbWU6IFwibGVmdC1idXR0b25cIixcbiAgICAgICAgb25DbGljazogb25EaXNtaXNzXG4gICAgICB9LCB7XG4gICAgICAgIGNoaWxkcmVuOiBcIkRpc21pc3NcIlxuICAgICAgfSkpLCBqc3goXCJidXR0b25cIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGNsYXNzTmFtZTogXCJyaWdodC1idXR0b25cIixcbiAgICAgICAgb25DbGljazogb25Td2l0Y2hXYWxsZXRcbiAgICAgIH0sIHtcbiAgICAgICAgY2hpbGRyZW46IFwiU3dpdGNoIFdhbGxldFwiXG4gICAgICB9KSldXG4gICAgfSkpXVxuICB9KSk7XG59O1xuXG52YXIgdHJ5VG9TdHJpbmckMyA9IHRyeVRvU3RyaW5nJDU7XG5cbnZhciAkVHlwZUVycm9yJDYgPSBUeXBlRXJyb3I7XG5cbnZhciBkZWxldGVQcm9wZXJ0eU9yVGhyb3ckMSA9IGZ1bmN0aW9uIChPLCBQKSB7XG4gIGlmICghZGVsZXRlIE9bUF0pIHRocm93ICRUeXBlRXJyb3IkNignQ2Fubm90IGRlbGV0ZSBwcm9wZXJ0eSAnICsgdHJ5VG9TdHJpbmckMyhQKSArICcgb2YgJyArIHRyeVRvU3RyaW5nJDMoTykpO1xufTtcblxudmFyIHdlbGxLbm93blN5bWJvbCQ3ID0gd2VsbEtub3duU3ltYm9sJGU7XG5cbnZhciBUT19TVFJJTkdfVEFHJDEgPSB3ZWxsS25vd25TeW1ib2wkNygndG9TdHJpbmdUYWcnKTtcbnZhciB0ZXN0JDEgPSB7fTtcblxudGVzdCQxW1RPX1NUUklOR19UQUckMV0gPSAneic7XG5cbnZhciB0b1N0cmluZ1RhZ1N1cHBvcnQgPSBTdHJpbmcodGVzdCQxKSA9PT0gJ1tvYmplY3Qgel0nO1xuXG52YXIgVE9fU1RSSU5HX1RBR19TVVBQT1JUID0gdG9TdHJpbmdUYWdTdXBwb3J0O1xudmFyIGlzQ2FsbGFibGUkNiA9IGlzQ2FsbGFibGUkbDtcbnZhciBjbGFzc29mUmF3ID0gY2xhc3NvZlJhdyQxO1xudmFyIHdlbGxLbm93blN5bWJvbCQ2ID0gd2VsbEtub3duU3ltYm9sJGU7XG5cbnZhciBUT19TVFJJTkdfVEFHID0gd2VsbEtub3duU3ltYm9sJDYoJ3RvU3RyaW5nVGFnJyk7XG52YXIgJE9iamVjdCA9IE9iamVjdDtcblxuLy8gRVMzIHdyb25nIGhlcmVcbnZhciBDT1JSRUNUX0FSR1VNRU5UUyA9IGNsYXNzb2ZSYXcoZnVuY3Rpb24gKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID09ICdBcmd1bWVudHMnO1xuXG4vLyBmYWxsYmFjayBmb3IgSUUxMSBTY3JpcHQgQWNjZXNzIERlbmllZCBlcnJvclxudmFyIHRyeUdldCA9IGZ1bmN0aW9uIChpdCwga2V5KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGl0W2tleV07XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cbn07XG5cbi8vIGdldHRpbmcgdGFnIGZyb20gRVM2KyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2BcbnZhciBjbGFzc29mJDQgPSBUT19TVFJJTkdfVEFHX1NVUFBPUlQgPyBjbGFzc29mUmF3IDogZnVuY3Rpb24gKGl0KSB7XG4gIHZhciBPLCB0YWcsIHJlc3VsdDtcbiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnXG4gICAgLy8gQEB0b1N0cmluZ1RhZyBjYXNlXG4gICAgOiB0eXBlb2YgKHRhZyA9IHRyeUdldChPID0gJE9iamVjdChpdCksIFRPX1NUUklOR19UQUcpKSA9PSAnc3RyaW5nJyA/IHRhZ1xuICAgIC8vIGJ1aWx0aW5UYWcgY2FzZVxuICAgIDogQ09SUkVDVF9BUkdVTUVOVFMgPyBjbGFzc29mUmF3KE8pXG4gICAgLy8gRVMzIGFyZ3VtZW50cyBmYWxsYmFja1xuICAgIDogKHJlc3VsdCA9IGNsYXNzb2ZSYXcoTykpID09ICdPYmplY3QnICYmIGlzQ2FsbGFibGUkNihPLmNhbGxlZSkgPyAnQXJndW1lbnRzJyA6IHJlc3VsdDtcbn07XG5cbnZhciBjbGFzc29mJDMgPSBjbGFzc29mJDQ7XG5cbnZhciAkU3RyaW5nID0gU3RyaW5nO1xuXG52YXIgdG9TdHJpbmckMiA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICBpZiAoY2xhc3NvZiQzKGFyZ3VtZW50KSA9PT0gJ1N5bWJvbCcpIHRocm93IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgYSBTeW1ib2wgdmFsdWUgdG8gYSBzdHJpbmcnKTtcbiAgcmV0dXJuICRTdHJpbmcoYXJndW1lbnQpO1xufTtcblxudmFyIHRvUHJvcGVydHlLZXkgPSB0b1Byb3BlcnR5S2V5JDM7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUkMSA9IG9iamVjdERlZmluZVByb3BlcnR5O1xudmFyIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciA9IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciQ0O1xuXG52YXIgY3JlYXRlUHJvcGVydHkkMSA9IGZ1bmN0aW9uIChvYmplY3QsIGtleSwgdmFsdWUpIHtcbiAgdmFyIHByb3BlcnR5S2V5ID0gdG9Qcm9wZXJ0eUtleShrZXkpO1xuICBpZiAocHJvcGVydHlLZXkgaW4gb2JqZWN0KSBkZWZpbmVQcm9wZXJ0eU1vZHVsZSQxLmYob2JqZWN0LCBwcm9wZXJ0eUtleSwgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKDAsIHZhbHVlKSk7XG4gIGVsc2Ugb2JqZWN0W3Byb3BlcnR5S2V5XSA9IHZhbHVlO1xufTtcblxudmFyIHRvQWJzb2x1dGVJbmRleCA9IHRvQWJzb2x1dGVJbmRleCQyO1xudmFyIGxlbmd0aE9mQXJyYXlMaWtlJDMgPSBsZW5ndGhPZkFycmF5TGlrZSQ1O1xudmFyIGNyZWF0ZVByb3BlcnR5ID0gY3JlYXRlUHJvcGVydHkkMTtcblxudmFyICRBcnJheSA9IEFycmF5O1xudmFyIG1heCA9IE1hdGgubWF4O1xuXG52YXIgYXJyYXlTbGljZVNpbXBsZSA9IGZ1bmN0aW9uIChPLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW5ndGggPSBsZW5ndGhPZkFycmF5TGlrZSQzKE8pO1xuICB2YXIgayA9IHRvQWJzb2x1dGVJbmRleChzdGFydCwgbGVuZ3RoKTtcbiAgdmFyIGZpbiA9IHRvQWJzb2x1dGVJbmRleChlbmQgPT09IHVuZGVmaW5lZCA/IGxlbmd0aCA6IGVuZCwgbGVuZ3RoKTtcbiAgdmFyIHJlc3VsdCA9ICRBcnJheShtYXgoZmluIC0gaywgMCkpO1xuICBmb3IgKHZhciBuID0gMDsgayA8IGZpbjsgaysrLCBuKyspIGNyZWF0ZVByb3BlcnR5KHJlc3VsdCwgbiwgT1trXSk7XG4gIHJlc3VsdC5sZW5ndGggPSBuO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxudmFyIGFycmF5U2xpY2UkMiA9IGFycmF5U2xpY2VTaW1wbGU7XG5cbnZhciBmbG9vciA9IE1hdGguZmxvb3I7XG5cbnZhciBtZXJnZVNvcnQgPSBmdW5jdGlvbiAoYXJyYXksIGNvbXBhcmVmbikge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICB2YXIgbWlkZGxlID0gZmxvb3IobGVuZ3RoIC8gMik7XG4gIHJldHVybiBsZW5ndGggPCA4ID8gaW5zZXJ0aW9uU29ydChhcnJheSwgY29tcGFyZWZuKSA6IG1lcmdlKFxuICAgIGFycmF5LFxuICAgIG1lcmdlU29ydChhcnJheVNsaWNlJDIoYXJyYXksIDAsIG1pZGRsZSksIGNvbXBhcmVmbiksXG4gICAgbWVyZ2VTb3J0KGFycmF5U2xpY2UkMihhcnJheSwgbWlkZGxlKSwgY29tcGFyZWZuKSxcbiAgICBjb21wYXJlZm5cbiAgKTtcbn07XG5cbnZhciBpbnNlcnRpb25Tb3J0ID0gZnVuY3Rpb24gKGFycmF5LCBjb21wYXJlZm4pIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgdmFyIGkgPSAxO1xuICB2YXIgZWxlbWVudCwgajtcblxuICB3aGlsZSAoaSA8IGxlbmd0aCkge1xuICAgIGogPSBpO1xuICAgIGVsZW1lbnQgPSBhcnJheVtpXTtcbiAgICB3aGlsZSAoaiAmJiBjb21wYXJlZm4oYXJyYXlbaiAtIDFdLCBlbGVtZW50KSA+IDApIHtcbiAgICAgIGFycmF5W2pdID0gYXJyYXlbLS1qXTtcbiAgICB9XG4gICAgaWYgKGogIT09IGkrKykgYXJyYXlbal0gPSBlbGVtZW50O1xuICB9IHJldHVybiBhcnJheTtcbn07XG5cbnZhciBtZXJnZSA9IGZ1bmN0aW9uIChhcnJheSwgbGVmdCwgcmlnaHQsIGNvbXBhcmVmbikge1xuICB2YXIgbGxlbmd0aCA9IGxlZnQubGVuZ3RoO1xuICB2YXIgcmxlbmd0aCA9IHJpZ2h0Lmxlbmd0aDtcbiAgdmFyIGxpbmRleCA9IDA7XG4gIHZhciByaW5kZXggPSAwO1xuXG4gIHdoaWxlIChsaW5kZXggPCBsbGVuZ3RoIHx8IHJpbmRleCA8IHJsZW5ndGgpIHtcbiAgICBhcnJheVtsaW5kZXggKyByaW5kZXhdID0gKGxpbmRleCA8IGxsZW5ndGggJiYgcmluZGV4IDwgcmxlbmd0aClcbiAgICAgID8gY29tcGFyZWZuKGxlZnRbbGluZGV4XSwgcmlnaHRbcmluZGV4XSkgPD0gMCA/IGxlZnRbbGluZGV4KytdIDogcmlnaHRbcmluZGV4KytdXG4gICAgICA6IGxpbmRleCA8IGxsZW5ndGggPyBsZWZ0W2xpbmRleCsrXSA6IHJpZ2h0W3JpbmRleCsrXTtcbiAgfSByZXR1cm4gYXJyYXk7XG59O1xuXG52YXIgYXJyYXlTb3J0ID0gbWVyZ2VTb3J0O1xuXG52YXIgZmFpbHMkMyA9IGZhaWxzJGY7XG5cbnZhciBhcnJheU1ldGhvZElzU3RyaWN0JDIgPSBmdW5jdGlvbiAoTUVUSE9EX05BTUUsIGFyZ3VtZW50KSB7XG4gIHZhciBtZXRob2QgPSBbXVtNRVRIT0RfTkFNRV07XG4gIHJldHVybiAhIW1ldGhvZCAmJiBmYWlscyQzKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1jYWxsIC0tIHJlcXVpcmVkIGZvciB0ZXN0aW5nXG4gICAgbWV0aG9kLmNhbGwobnVsbCwgYXJndW1lbnQgfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gMTsgfSwgMSk7XG4gIH0pO1xufTtcblxudmFyIHVzZXJBZ2VudCQ0ID0gZW5naW5lVXNlckFnZW50O1xuXG52YXIgZmlyZWZveCA9IHVzZXJBZ2VudCQ0Lm1hdGNoKC9maXJlZm94XFwvKFxcZCspL2kpO1xuXG52YXIgZW5naW5lRmZWZXJzaW9uID0gISFmaXJlZm94ICYmICtmaXJlZm94WzFdO1xuXG52YXIgVUEgPSBlbmdpbmVVc2VyQWdlbnQ7XG5cbnZhciBlbmdpbmVJc0llT3JFZGdlID0gL01TSUV8VHJpZGVudC8udGVzdChVQSk7XG5cbnZhciB1c2VyQWdlbnQkMyA9IGVuZ2luZVVzZXJBZ2VudDtcblxudmFyIHdlYmtpdCA9IHVzZXJBZ2VudCQzLm1hdGNoKC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8pO1xuXG52YXIgZW5naW5lV2Via2l0VmVyc2lvbiA9ICEhd2Via2l0ICYmICt3ZWJraXRbMV07XG5cbnZhciAkJDggPSBfZXhwb3J0O1xudmFyIHVuY3VycnlUaGlzJDQgPSBmdW5jdGlvblVuY3VycnlUaGlzO1xudmFyIGFDYWxsYWJsZSQ3ID0gYUNhbGxhYmxlJDk7XG52YXIgdG9PYmplY3QkMSA9IHRvT2JqZWN0JDU7XG52YXIgbGVuZ3RoT2ZBcnJheUxpa2UkMiA9IGxlbmd0aE9mQXJyYXlMaWtlJDU7XG52YXIgZGVsZXRlUHJvcGVydHlPclRocm93ID0gZGVsZXRlUHJvcGVydHlPclRocm93JDE7XG52YXIgdG9TdHJpbmckMSA9IHRvU3RyaW5nJDI7XG52YXIgZmFpbHMkMiA9IGZhaWxzJGY7XG52YXIgaW50ZXJuYWxTb3J0ID0gYXJyYXlTb3J0O1xudmFyIGFycmF5TWV0aG9kSXNTdHJpY3QkMSA9IGFycmF5TWV0aG9kSXNTdHJpY3QkMjtcbnZhciBGRiA9IGVuZ2luZUZmVmVyc2lvbjtcbnZhciBJRV9PUl9FREdFID0gZW5naW5lSXNJZU9yRWRnZTtcbnZhciBWOCA9IGVuZ2luZVY4VmVyc2lvbjtcbnZhciBXRUJLSVQgPSBlbmdpbmVXZWJraXRWZXJzaW9uO1xuXG52YXIgdGVzdCA9IFtdO1xudmFyIHVuJFNvcnQgPSB1bmN1cnJ5VGhpcyQ0KHRlc3Quc29ydCk7XG52YXIgcHVzaCA9IHVuY3VycnlUaGlzJDQodGVzdC5wdXNoKTtcblxuLy8gSUU4LVxudmFyIEZBSUxTX09OX1VOREVGSU5FRCA9IGZhaWxzJDIoZnVuY3Rpb24gKCkge1xuICB0ZXN0LnNvcnQodW5kZWZpbmVkKTtcbn0pO1xuLy8gVjggYnVnXG52YXIgRkFJTFNfT05fTlVMTCA9IGZhaWxzJDIoZnVuY3Rpb24gKCkge1xuICB0ZXN0LnNvcnQobnVsbCk7XG59KTtcbi8vIE9sZCBXZWJLaXRcbnZhciBTVFJJQ1RfTUVUSE9EJDEgPSBhcnJheU1ldGhvZElzU3RyaWN0JDEoJ3NvcnQnKTtcblxudmFyIFNUQUJMRV9TT1JUID0gIWZhaWxzJDIoZnVuY3Rpb24gKCkge1xuICAvLyBmZWF0dXJlIGRldGVjdGlvbiBjYW4gYmUgdG9vIHNsb3csIHNvIGNoZWNrIGVuZ2luZXMgdmVyc2lvbnNcbiAgaWYgKFY4KSByZXR1cm4gVjggPCA3MDtcbiAgaWYgKEZGICYmIEZGID4gMykgcmV0dXJuO1xuICBpZiAoSUVfT1JfRURHRSkgcmV0dXJuIHRydWU7XG4gIGlmIChXRUJLSVQpIHJldHVybiBXRUJLSVQgPCA2MDM7XG5cbiAgdmFyIHJlc3VsdCA9ICcnO1xuICB2YXIgY29kZSwgY2hyLCB2YWx1ZSwgaW5kZXg7XG5cbiAgLy8gZ2VuZXJhdGUgYW4gYXJyYXkgd2l0aCBtb3JlIDUxMiBlbGVtZW50cyAoQ2hha3JhIGFuZCBvbGQgVjggZmFpbHMgb25seSBpbiB0aGlzIGNhc2UpXG4gIGZvciAoY29kZSA9IDY1OyBjb2RlIDwgNzY7IGNvZGUrKykge1xuICAgIGNociA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7XG5cbiAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgIGNhc2UgNjY6IGNhc2UgNjk6IGNhc2UgNzA6IGNhc2UgNzI6IHZhbHVlID0gMzsgYnJlYWs7XG4gICAgICBjYXNlIDY4OiBjYXNlIDcxOiB2YWx1ZSA9IDQ7IGJyZWFrO1xuICAgICAgZGVmYXVsdDogdmFsdWUgPSAyO1xuICAgIH1cblxuICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IDQ3OyBpbmRleCsrKSB7XG4gICAgICB0ZXN0LnB1c2goeyBrOiBjaHIgKyBpbmRleCwgdjogdmFsdWUgfSk7XG4gICAgfVxuICB9XG5cbiAgdGVzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBiLnYgLSBhLnY7IH0pO1xuXG4gIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IHRlc3QubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgY2hyID0gdGVzdFtpbmRleF0uay5jaGFyQXQoMCk7XG4gICAgaWYgKHJlc3VsdC5jaGFyQXQocmVzdWx0Lmxlbmd0aCAtIDEpICE9PSBjaHIpIHJlc3VsdCArPSBjaHI7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0ICE9PSAnREdCRUZIQUNJSksnO1xufSk7XG5cbnZhciBGT1JDRUQgPSBGQUlMU19PTl9VTkRFRklORUQgfHwgIUZBSUxTX09OX05VTEwgfHwgIVNUUklDVF9NRVRIT0QkMSB8fCAhU1RBQkxFX1NPUlQ7XG5cbnZhciBnZXRTb3J0Q29tcGFyZSA9IGZ1bmN0aW9uIChjb21wYXJlZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgaWYgKHkgPT09IHVuZGVmaW5lZCkgcmV0dXJuIC0xO1xuICAgIGlmICh4ID09PSB1bmRlZmluZWQpIHJldHVybiAxO1xuICAgIGlmIChjb21wYXJlZm4gIT09IHVuZGVmaW5lZCkgcmV0dXJuICtjb21wYXJlZm4oeCwgeSkgfHwgMDtcbiAgICByZXR1cm4gdG9TdHJpbmckMSh4KSA+IHRvU3RyaW5nJDEoeSkgPyAxIDogLTE7XG4gIH07XG59O1xuXG4vLyBgQXJyYXkucHJvdG90eXBlLnNvcnRgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuc29ydFxuJCQ4KHsgdGFyZ2V0OiAnQXJyYXknLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiBGT1JDRUQgfSwge1xuICBzb3J0OiBmdW5jdGlvbiBzb3J0KGNvbXBhcmVmbikge1xuICAgIGlmIChjb21wYXJlZm4gIT09IHVuZGVmaW5lZCkgYUNhbGxhYmxlJDcoY29tcGFyZWZuKTtcblxuICAgIHZhciBhcnJheSA9IHRvT2JqZWN0JDEodGhpcyk7XG5cbiAgICBpZiAoU1RBQkxFX1NPUlQpIHJldHVybiBjb21wYXJlZm4gPT09IHVuZGVmaW5lZCA/IHVuJFNvcnQoYXJyYXkpIDogdW4kU29ydChhcnJheSwgY29tcGFyZWZuKTtcblxuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHZhciBhcnJheUxlbmd0aCA9IGxlbmd0aE9mQXJyYXlMaWtlJDIoYXJyYXkpO1xuICAgIHZhciBpdGVtc0xlbmd0aCwgaW5kZXg7XG5cbiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBhcnJheUxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKGluZGV4IGluIGFycmF5KSBwdXNoKGl0ZW1zLCBhcnJheVtpbmRleF0pO1xuICAgIH1cblxuICAgIGludGVybmFsU29ydChpdGVtcywgZ2V0U29ydENvbXBhcmUoY29tcGFyZWZuKSk7XG5cbiAgICBpdGVtc0xlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcbiAgICBpbmRleCA9IDA7XG5cbiAgICB3aGlsZSAoaW5kZXggPCBpdGVtc0xlbmd0aCkgYXJyYXlbaW5kZXhdID0gaXRlbXNbaW5kZXgrK107XG4gICAgd2hpbGUgKGluZGV4IDwgYXJyYXlMZW5ndGgpIGRlbGV0ZVByb3BlcnR5T3JUaHJvdyhhcnJheSwgaW5kZXgrKyk7XG5cbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cbn0pO1xuXG52YXIgJCQ3ID0gX2V4cG9ydDtcbnZhciBERVNDUklQVE9SUyQxID0gZGVzY3JpcHRvcnM7XG52YXIgZ2xvYmFsJDkgPSBnbG9iYWwkaztcbnZhciB1bmN1cnJ5VGhpcyQzID0gZnVuY3Rpb25VbmN1cnJ5VGhpcztcbnZhciBoYXNPd24kMSA9IGhhc093blByb3BlcnR5XzE7XG52YXIgaXNDYWxsYWJsZSQ1ID0gaXNDYWxsYWJsZSRsO1xudmFyIGlzUHJvdG90eXBlT2YkMiA9IG9iamVjdElzUHJvdG90eXBlT2Y7XG52YXIgdG9TdHJpbmcgPSB0b1N0cmluZyQyO1xudmFyIGRlZmluZVByb3BlcnR5ID0gb2JqZWN0RGVmaW5lUHJvcGVydHkuZjtcbnZhciBjb3B5Q29uc3RydWN0b3JQcm9wZXJ0aWVzID0gY29weUNvbnN0cnVjdG9yUHJvcGVydGllcyQyO1xuXG52YXIgTmF0aXZlU3ltYm9sID0gZ2xvYmFsJDkuU3ltYm9sO1xudmFyIFN5bWJvbFByb3RvdHlwZSA9IE5hdGl2ZVN5bWJvbCAmJiBOYXRpdmVTeW1ib2wucHJvdG90eXBlO1xuXG5pZiAoREVTQ1JJUFRPUlMkMSAmJiBpc0NhbGxhYmxlJDUoTmF0aXZlU3ltYm9sKSAmJiAoISgnZGVzY3JpcHRpb24nIGluIFN5bWJvbFByb3RvdHlwZSkgfHxcbiAgLy8gU2FmYXJpIDEyIGJ1Z1xuICBOYXRpdmVTeW1ib2woKS5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkXG4pKSB7XG4gIHZhciBFbXB0eVN0cmluZ0Rlc2NyaXB0aW9uU3RvcmUgPSB7fTtcbiAgLy8gd3JhcCBTeW1ib2wgY29uc3RydWN0b3IgZm9yIGNvcnJlY3Qgd29yayB3aXRoIHVuZGVmaW5lZCBkZXNjcmlwdGlvblxuICB2YXIgU3ltYm9sV3JhcHBlciA9IGZ1bmN0aW9uIFN5bWJvbCgpIHtcbiAgICB2YXIgZGVzY3JpcHRpb24gPSBhcmd1bWVudHMubGVuZ3RoIDwgMSB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHRvU3RyaW5nKGFyZ3VtZW50c1swXSk7XG4gICAgdmFyIHJlc3VsdCA9IGlzUHJvdG90eXBlT2YkMihTeW1ib2xQcm90b3R5cGUsIHRoaXMpXG4gICAgICA/IG5ldyBOYXRpdmVTeW1ib2woZGVzY3JpcHRpb24pXG4gICAgICAvLyBpbiBFZGdlIDEzLCBTdHJpbmcoU3ltYm9sKHVuZGVmaW5lZCkpID09PSAnU3ltYm9sKHVuZGVmaW5lZCknXG4gICAgICA6IGRlc2NyaXB0aW9uID09PSB1bmRlZmluZWQgPyBOYXRpdmVTeW1ib2woKSA6IE5hdGl2ZVN5bWJvbChkZXNjcmlwdGlvbik7XG4gICAgaWYgKGRlc2NyaXB0aW9uID09PSAnJykgRW1wdHlTdHJpbmdEZXNjcmlwdGlvblN0b3JlW3Jlc3VsdF0gPSB0cnVlO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgY29weUNvbnN0cnVjdG9yUHJvcGVydGllcyhTeW1ib2xXcmFwcGVyLCBOYXRpdmVTeW1ib2wpO1xuICBTeW1ib2xXcmFwcGVyLnByb3RvdHlwZSA9IFN5bWJvbFByb3RvdHlwZTtcbiAgU3ltYm9sUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ltYm9sV3JhcHBlcjtcblxuICB2YXIgTkFUSVZFX1NZTUJPTCA9IFN0cmluZyhOYXRpdmVTeW1ib2woJ3Rlc3QnKSkgPT0gJ1N5bWJvbCh0ZXN0KSc7XG4gIHZhciBzeW1ib2xUb1N0cmluZyA9IHVuY3VycnlUaGlzJDMoU3ltYm9sUHJvdG90eXBlLnRvU3RyaW5nKTtcbiAgdmFyIHN5bWJvbFZhbHVlT2YgPSB1bmN1cnJ5VGhpcyQzKFN5bWJvbFByb3RvdHlwZS52YWx1ZU9mKTtcbiAgdmFyIHJlZ2V4cCA9IC9eU3ltYm9sXFwoKC4qKVxcKVteKV0rJC87XG4gIHZhciByZXBsYWNlID0gdW5jdXJyeVRoaXMkMygnJy5yZXBsYWNlKTtcbiAgdmFyIHN0cmluZ1NsaWNlID0gdW5jdXJyeVRoaXMkMygnJy5zbGljZSk7XG5cbiAgZGVmaW5lUHJvcGVydHkoU3ltYm9sUHJvdG90eXBlLCAnZGVzY3JpcHRpb24nLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7XG4gICAgICB2YXIgc3ltYm9sID0gc3ltYm9sVmFsdWVPZih0aGlzKTtcbiAgICAgIHZhciBzdHJpbmcgPSBzeW1ib2xUb1N0cmluZyhzeW1ib2wpO1xuICAgICAgaWYgKGhhc093biQxKEVtcHR5U3RyaW5nRGVzY3JpcHRpb25TdG9yZSwgc3ltYm9sKSkgcmV0dXJuICcnO1xuICAgICAgdmFyIGRlc2MgPSBOQVRJVkVfU1lNQk9MID8gc3RyaW5nU2xpY2Uoc3RyaW5nLCA3LCAtMSkgOiByZXBsYWNlKHN0cmluZywgcmVnZXhwLCAnJDEnKTtcbiAgICAgIHJldHVybiBkZXNjID09PSAnJyA/IHVuZGVmaW5lZCA6IGRlc2M7XG4gICAgfVxuICB9KTtcblxuICAkJDcoeyBnbG9iYWw6IHRydWUsIGNvbnN0cnVjdG9yOiB0cnVlLCBmb3JjZWQ6IHRydWUgfSwge1xuICAgIFN5bWJvbDogU3ltYm9sV3JhcHBlclxuICB9KTtcbn1cblxudmFyIGFDYWxsYWJsZSQ2ID0gYUNhbGxhYmxlJDk7XG52YXIgdG9PYmplY3QgPSB0b09iamVjdCQ1O1xudmFyIEluZGV4ZWRPYmplY3QgPSBpbmRleGVkT2JqZWN0O1xudmFyIGxlbmd0aE9mQXJyYXlMaWtlJDEgPSBsZW5ndGhPZkFycmF5TGlrZSQ1O1xuXG52YXIgJFR5cGVFcnJvciQ1ID0gVHlwZUVycm9yO1xuXG4vLyBgQXJyYXkucHJvdG90eXBlLnsgcmVkdWNlLCByZWR1Y2VSaWdodCB9YCBtZXRob2RzIGltcGxlbWVudGF0aW9uXG52YXIgY3JlYXRlTWV0aG9kID0gZnVuY3Rpb24gKElTX1JJR0hUKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodGhhdCwgY2FsbGJhY2tmbiwgYXJndW1lbnRzTGVuZ3RoLCBtZW1vKSB7XG4gICAgYUNhbGxhYmxlJDYoY2FsbGJhY2tmbik7XG4gICAgdmFyIE8gPSB0b09iamVjdCh0aGF0KTtcbiAgICB2YXIgc2VsZiA9IEluZGV4ZWRPYmplY3QoTyk7XG4gICAgdmFyIGxlbmd0aCA9IGxlbmd0aE9mQXJyYXlMaWtlJDEoTyk7XG4gICAgdmFyIGluZGV4ID0gSVNfUklHSFQgPyBsZW5ndGggLSAxIDogMDtcbiAgICB2YXIgaSA9IElTX1JJR0hUID8gLTEgOiAxO1xuICAgIGlmIChhcmd1bWVudHNMZW5ndGggPCAyKSB3aGlsZSAodHJ1ZSkge1xuICAgICAgaWYgKGluZGV4IGluIHNlbGYpIHtcbiAgICAgICAgbWVtbyA9IHNlbGZbaW5kZXhdO1xuICAgICAgICBpbmRleCArPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGluZGV4ICs9IGk7XG4gICAgICBpZiAoSVNfUklHSFQgPyBpbmRleCA8IDAgOiBsZW5ndGggPD0gaW5kZXgpIHtcbiAgICAgICAgdGhyb3cgJFR5cGVFcnJvciQ1KCdSZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoO0lTX1JJR0hUID8gaW5kZXggPj0gMCA6IGxlbmd0aCA+IGluZGV4OyBpbmRleCArPSBpKSBpZiAoaW5kZXggaW4gc2VsZikge1xuICAgICAgbWVtbyA9IGNhbGxiYWNrZm4obWVtbywgc2VsZltpbmRleF0sIGluZGV4LCBPKTtcbiAgICB9XG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59O1xuXG52YXIgYXJyYXlSZWR1Y2UgPSB7XG4gIC8vIGBBcnJheS5wcm90b3R5cGUucmVkdWNlYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUucmVkdWNlXG4gIGxlZnQ6IGNyZWF0ZU1ldGhvZChmYWxzZSksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUucmVkdWNlUmlnaHRgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5yZWR1Y2VyaWdodFxuICByaWdodDogY3JlYXRlTWV0aG9kKHRydWUpXG59O1xuXG52YXIgY2xhc3NvZiQyID0gY2xhc3NvZlJhdyQxO1xudmFyIGdsb2JhbCQ4ID0gZ2xvYmFsJGs7XG5cbnZhciBlbmdpbmVJc05vZGUgPSBjbGFzc29mJDIoZ2xvYmFsJDgucHJvY2VzcykgPT0gJ3Byb2Nlc3MnO1xuXG52YXIgJCQ2ID0gX2V4cG9ydDtcbnZhciAkcmVkdWNlID0gYXJyYXlSZWR1Y2UubGVmdDtcbnZhciBhcnJheU1ldGhvZElzU3RyaWN0ID0gYXJyYXlNZXRob2RJc1N0cmljdCQyO1xudmFyIENIUk9NRV9WRVJTSU9OID0gZW5naW5lVjhWZXJzaW9uO1xudmFyIElTX05PREUkMyA9IGVuZ2luZUlzTm9kZTtcblxudmFyIFNUUklDVF9NRVRIT0QgPSBhcnJheU1ldGhvZElzU3RyaWN0KCdyZWR1Y2UnKTtcbi8vIENocm9tZSA4MC04MiBoYXMgYSBjcml0aWNhbCBidWdcbi8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEwNDk5ODJcbnZhciBDSFJPTUVfQlVHID0gIUlTX05PREUkMyAmJiBDSFJPTUVfVkVSU0lPTiA+IDc5ICYmIENIUk9NRV9WRVJTSU9OIDwgODM7XG5cbi8vIGBBcnJheS5wcm90b3R5cGUucmVkdWNlYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLnJlZHVjZVxuJCQ2KHsgdGFyZ2V0OiAnQXJyYXknLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiAhU1RSSUNUX01FVEhPRCB8fCBDSFJPTUVfQlVHIH0sIHtcbiAgcmVkdWNlOiBmdW5jdGlvbiByZWR1Y2UoY2FsbGJhY2tmbiAvKiAsIGluaXRpYWxWYWx1ZSAqLykge1xuICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHJldHVybiAkcmVkdWNlKHRoaXMsIGNhbGxiYWNrZm4sIGxlbmd0aCwgbGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gIH1cbn0pO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbmZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cblxuY29uc3QgV2FsbGV0T3B0aW9ucyA9ICh7XG4gIHNlbGVjdG9yLFxuICBvcHRpb25zLFxuICBvbldhbGxldE5vdEluc3RhbGxlZCxcbiAgb25FcnJvcixcbiAgb25Db25uZWN0SGFyZHdhcmVXYWxsZXQsXG4gIG9uQ29ubmVjdGluZyxcbiAgb25Db25uZWN0ZWRcbn0pID0+IHtcbiAgY29uc3QgW3dhbGxldEluZm9WaXNpYmxlLCBzZXRXYWxsZXRJbmZvVmlzaWJsZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2R1bGVzLCBzZXRNb2R1bGVzXSA9IHVzZVN0YXRlKFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBzZWxlY3Rvci5zdG9yZS5vYnNlcnZhYmxlLnN1YnNjcmliZShzdGF0ZSA9PiB7XG4gICAgICBzdGF0ZS5tb2R1bGVzLnNvcnQoKGN1cnJlbnQsIG5leHQpID0+IHtcbiAgICAgICAgaWYgKGN1cnJlbnQubWV0YWRhdGEuZGVwcmVjYXRlZCA9PT0gbmV4dC5tZXRhZGF0YS5kZXByZWNhdGVkKSB7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY3VycmVudC5tZXRhZGF0YS5kZXByZWNhdGVkID8gMSA6IC0xO1xuICAgICAgfSk7XG4gICAgICBzZXRNb2R1bGVzKHN0YXRlLm1vZHVsZXMpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlV2FsbGV0Q2xpY2sgPSBtb2R1bGUgPT4gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZGVwcmVjYXRlZCxcbiAgICAgICAgYXZhaWxhYmxlXG4gICAgICB9ID0gbW9kdWxlLm1ldGFkYXRhO1xuXG4gICAgICBpZiAobW9kdWxlLnR5cGUgPT09IFwiaW5qZWN0ZWRcIiAmJiAhYXZhaWxhYmxlKSB7XG4gICAgICAgIHJldHVybiBvbldhbGxldE5vdEluc3RhbGxlZChtb2R1bGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVwcmVjYXRlZCkge1xuICAgICAgICByZXR1cm4gb25FcnJvcihuZXcgRXJyb3IoYCR7bW9kdWxlLm1ldGFkYXRhLm5hbWV9IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSBzZWxlY3QgYW5vdGhlciB3YWxsZXQuYCkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3YWxsZXQgPSB5aWVsZCBtb2R1bGUud2FsbGV0KCk7XG4gICAgICBvbkNvbm5lY3Rpbmcod2FsbGV0KTtcblxuICAgICAgaWYgKHdhbGxldC50eXBlID09PSBcImhhcmR3YXJlXCIpIHtcbiAgICAgICAgcmV0dXJuIG9uQ29ubmVjdEhhcmR3YXJlV2FsbGV0KCk7XG4gICAgICB9XG5cbiAgICAgIHlpZWxkIHdhbGxldC5zaWduSW4oe1xuICAgICAgICBjb250cmFjdElkOiBvcHRpb25zLmNvbnRyYWN0SWQsXG4gICAgICAgIG1ldGhvZE5hbWVzOiBvcHRpb25zLm1ldGhvZE5hbWVzXG4gICAgICB9KTtcbiAgICAgIG9uQ29ubmVjdGVkKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIG5hbWVcbiAgICAgIH0gPSBtb2R1bGUubWV0YWRhdGE7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIjtcbiAgICAgIG9uRXJyb3IobmV3IEVycm9yKGBGYWlsZWQgdG8gc2lnbiBpbiB3aXRoICR7bmFtZX06ICR7bWVzc2FnZX1gKSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4ganN4cyhGcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiBbanN4cyhcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgIGNsYXNzTmFtZTogXCJ3YWxsZXQtb3B0aW9ucy13cmFwcGVyXCJcbiAgICB9LCB7XG4gICAgICBjaGlsZHJlbjogW2pzeChcInBcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGNsYXNzTmFtZTogXCJkZXNjcmlwdGlvblwiXG4gICAgICB9LCB7XG4gICAgICAgIGNoaWxkcmVuOiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRlc2NyaXB0aW9uKSB8fCBcIlBsZWFzZSBzZWxlY3QgYSB3YWxsZXQgdG8gc2lnbiBpbiB0byB0aGlzIGRBcHA6XCJcbiAgICAgIH0pKSwganN4KFwidWxcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGNsYXNzTmFtZTogXCJvcHRpb25zLWxpc3RcIlxuICAgICAgfSwge1xuICAgICAgICBjaGlsZHJlbjogbW9kdWxlcy5yZWR1Y2UoKHJlc3VsdCwgbW9kdWxlKSA9PiB7XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgc2VsZWN0ZWRXYWxsZXRJZFxuICAgICAgICAgIH0gPSBzZWxlY3Rvci5zdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGljb25VcmwsXG4gICAgICAgICAgICBkZXByZWNhdGVkXG4gICAgICAgICAgfSA9IG1vZHVsZS5tZXRhZGF0YTtcbiAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IG1vZHVsZS5pZCA9PT0gc2VsZWN0ZWRXYWxsZXRJZDtcbiAgICAgICAgICByZXN1bHQucHVzaChqc3goXCJsaVwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGlkOiBtb2R1bGUuaWQsXG4gICAgICAgICAgICBjbGFzc05hbWU6IChzZWxlY3RlZCA/IFwic2VsZWN0ZWQtd2FsbGV0XCIgOiBcIlwiKSArIChkZXByZWNhdGVkID8gXCIgZGVwcmVjYXRlZC13YWxsZXRcIiA6IFwiXCIpLFxuICAgICAgICAgICAgb25DbGljazogc2VsZWN0ZWQgPyB1bmRlZmluZWQgOiBoYW5kbGVXYWxsZXRDbGljayhtb2R1bGUpXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgY2hpbGRyZW46IGpzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgIHRpdGxlOiBkZXNjcmlwdGlvbiB8fCBcIlwiLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwid2FsbGV0LWNvbnRlbnRcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW2pzeChcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwid2FsbGV0LWltZy1ib3hcIlxuICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IGpzeChcImltZ1wiLCB7XG4gICAgICAgICAgICAgICAgICBzcmM6IGljb25VcmwsXG4gICAgICAgICAgICAgICAgICBhbHQ6IG5hbWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KSksIGpzeChcImRpdlwiLCB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IGpzeChcInNwYW5cIiwge1xuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IG5hbWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KSwgc2VsZWN0ZWQgJiYganN4KFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzZWxlY3RlZC13YWxsZXQtdGV4dFwiXG4gICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjoganN4KFwic3BhblwiLCB7XG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJzZWxlY3RlZFwiXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSkpXVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgfSksIG1vZHVsZS5pZCkpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0sIFtdKVxuICAgICAgfSkpXVxuICAgIH0pKSwganN4cyhcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgIGNsYXNzTmFtZTogXCJpbmZvXCJcbiAgICB9LCB7XG4gICAgICBjaGlsZHJlbjogW2pzeChcInNwYW5cIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICBzZXRXYWxsZXRJbmZvVmlzaWJsZSghd2FsbGV0SW5mb1Zpc2libGUpO1xuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIGNoaWxkcmVuOiBcIldoYXQgaXMgYSBXYWxsZXQ/XCJcbiAgICAgIH0pKSwganN4KFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICBjbGFzc05hbWU6IGBpbmZvLWRlc2NyaXB0aW9uICR7d2FsbGV0SW5mb1Zpc2libGUgPyBcInNob3dcIiA6IFwiaGlkZVwifS1leHBsYW5hdGlvbmBcbiAgICAgIH0sIHtcbiAgICAgICAgY2hpbGRyZW46IGpzeChcInBcIiwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIldhbGxldHMgYXJlIHVzZWQgdG8gc2VuZCwgcmVjZWl2ZSBhbmQgc3RvcmUgZGlnaXRhbCBhc3NldHMuIFRoZXJlIGFyZSBkaWZmZXJlbnQgdHlwZXMgb2Ygd2FsbGV0cy4gVGhleSBjYW4gYmUgYW4gZXh0ZW5zaW9uIGFkZGVkIHRvIHlvdXIgYnJvd3NlciwgYSBoYXJkd2FyZSBkZXZpY2UgcGx1Z2dlZCBpbnRvIHlvdXIgY29tcHV0ZXIsIHdlYi1iYXNlZCBvciBhbiBhcHAgb24geW91ciBtb2JpbGUgZGV2aWNlLlwiXG4gICAgICAgIH0pXG4gICAgICB9KSldXG4gICAgfSkpXVxuICB9KTtcbn07XG5cbmNvbnN0IEFsZXJ0TWVzc2FnZSA9ICh7XG4gIG1lc3NhZ2UsXG4gIG9uQmFja1xufSkgPT4ge1xuICByZXR1cm4ganN4cyhcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICBjbGFzc05hbWU6IFwiYWxlcnQtbWVzc2FnZS13cmFwcGVyXCJcbiAgfSwge1xuICAgIGNoaWxkcmVuOiBbanN4KFwicFwiLCB7XG4gICAgICBjaGlsZHJlbjogbWVzc2FnZVxuICAgIH0pLCBqc3goXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICBjbGFzc05hbWU6IFwiYWN0aW9uLWJ1dHRvbnNcIlxuICAgIH0sIHtcbiAgICAgIGNoaWxkcmVuOiBqc3goXCJidXR0b25cIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGNsYXNzTmFtZTogXCJsZWZ0LWJ1dHRvblwiLFxuICAgICAgICBvbkNsaWNrOiBvbkJhY2tcbiAgICAgIH0sIHtcbiAgICAgICAgY2hpbGRyZW46IFwiT0tcIlxuICAgICAgfSkpXG4gICAgfSkpXVxuICB9KSk7XG59O1xuXG5jb25zdCBDbG9zZUJ1dHRvbiA9ICh7XG4gIG9uQ2xpY2tcbn0pID0+IHtcbiAgcmV0dXJuIGpzeChcImJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHtcbiAgICBvbkNsaWNrOiBvbkNsaWNrLFxuICAgIGNsYXNzTmFtZTogXCJjbG9zZS1idXR0b25cIlxuICB9LCB7XG4gICAgY2hpbGRyZW46IGpzeHMoXCJzdmdcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICAgICAgaGVpZ2h0OiBcIjI0XCIsXG4gICAgICB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiLFxuICAgICAgd2lkdGg6IFwiMjRcIixcbiAgICAgIGZpbGw6IFwiI0E3QTdBN1wiXG4gICAgfSwge1xuICAgICAgY2hpbGRyZW46IFtqc3goXCJwYXRoXCIsIHtcbiAgICAgICAgZDogXCJNMCAwaDI0djI0SDB6XCIsXG4gICAgICAgIGZpbGw6IFwibm9uZVwiXG4gICAgICB9KSwganN4KFwicGF0aFwiLCB7XG4gICAgICAgIGQ6IFwiTTE5IDYuNDFMMTcuNTkgNSAxMiAxMC41OSA2LjQxIDUgNSA2LjQxIDEwLjU5IDEyIDUgMTcuNTkgNi40MSAxOSAxMiAxMy40MSAxNy41OSAxOSAxOSAxNy41OSAxMy40MSAxMnpcIlxuICAgICAgfSldXG4gICAgfSkpXG4gIH0pKTtcbn07XG5cbnZhciBnZXRCdWlsdEluJDMgPSBnZXRCdWlsdEluJDg7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUgPSBvYmplY3REZWZpbmVQcm9wZXJ0eTtcbnZhciB3ZWxsS25vd25TeW1ib2wkNSA9IHdlbGxLbm93blN5bWJvbCRlO1xudmFyIERFU0NSSVBUT1JTID0gZGVzY3JpcHRvcnM7XG5cbnZhciBTUEVDSUVTJDIgPSB3ZWxsS25vd25TeW1ib2wkNSgnc3BlY2llcycpO1xuXG52YXIgc2V0U3BlY2llcyQxID0gZnVuY3Rpb24gKENPTlNUUlVDVE9SX05BTUUpIHtcbiAgdmFyIENvbnN0cnVjdG9yID0gZ2V0QnVpbHRJbiQzKENPTlNUUlVDVE9SX05BTUUpO1xuICB2YXIgZGVmaW5lUHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eU1vZHVsZS5mO1xuXG4gIGlmIChERVNDUklQVE9SUyAmJiBDb25zdHJ1Y3RvciAmJiAhQ29uc3RydWN0b3JbU1BFQ0lFUyQyXSkge1xuICAgIGRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBTUEVDSUVTJDIsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfVxuICAgIH0pO1xuICB9XG59O1xuXG52YXIgaXNQcm90b3R5cGVPZiQxID0gb2JqZWN0SXNQcm90b3R5cGVPZjtcblxudmFyICRUeXBlRXJyb3IkNCA9IFR5cGVFcnJvcjtcblxudmFyIGFuSW5zdGFuY2UkMSA9IGZ1bmN0aW9uIChpdCwgUHJvdG90eXBlKSB7XG4gIGlmIChpc1Byb3RvdHlwZU9mJDEoUHJvdG90eXBlLCBpdCkpIHJldHVybiBpdDtcbiAgdGhyb3cgJFR5cGVFcnJvciQ0KCdJbmNvcnJlY3QgaW52b2NhdGlvbicpO1xufTtcblxudmFyIHVuY3VycnlUaGlzJDIgPSBmdW5jdGlvblVuY3VycnlUaGlzO1xudmFyIGZhaWxzJDEgPSBmYWlscyRmO1xudmFyIGlzQ2FsbGFibGUkNCA9IGlzQ2FsbGFibGUkbDtcbnZhciBjbGFzc29mJDEgPSBjbGFzc29mJDQ7XG52YXIgZ2V0QnVpbHRJbiQyID0gZ2V0QnVpbHRJbiQ4O1xudmFyIGluc3BlY3RTb3VyY2UkMSA9IGluc3BlY3RTb3VyY2UkNDtcblxudmFyIG5vb3AgPSBmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH07XG52YXIgZW1wdHkgPSBbXTtcbnZhciBjb25zdHJ1Y3QgPSBnZXRCdWlsdEluJDIoJ1JlZmxlY3QnLCAnY29uc3RydWN0Jyk7XG52YXIgY29uc3RydWN0b3JSZWdFeHAgPSAvXlxccyooPzpjbGFzc3xmdW5jdGlvbilcXGIvO1xudmFyIGV4ZWMgPSB1bmN1cnJ5VGhpcyQyKGNvbnN0cnVjdG9yUmVnRXhwLmV4ZWMpO1xudmFyIElOQ09SUkVDVF9UT19TVFJJTkcgPSAhY29uc3RydWN0b3JSZWdFeHAuZXhlYyhub29wKTtcblxudmFyIGlzQ29uc3RydWN0b3JNb2Rlcm4gPSBmdW5jdGlvbiBpc0NvbnN0cnVjdG9yKGFyZ3VtZW50KSB7XG4gIGlmICghaXNDYWxsYWJsZSQ0KGFyZ3VtZW50KSkgcmV0dXJuIGZhbHNlO1xuICB0cnkge1xuICAgIGNvbnN0cnVjdChub29wLCBlbXB0eSwgYXJndW1lbnQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxudmFyIGlzQ29uc3RydWN0b3JMZWdhY3kgPSBmdW5jdGlvbiBpc0NvbnN0cnVjdG9yKGFyZ3VtZW50KSB7XG4gIGlmICghaXNDYWxsYWJsZSQ0KGFyZ3VtZW50KSkgcmV0dXJuIGZhbHNlO1xuICBzd2l0Y2ggKGNsYXNzb2YkMShhcmd1bWVudCkpIHtcbiAgICBjYXNlICdBc3luY0Z1bmN0aW9uJzpcbiAgICBjYXNlICdHZW5lcmF0b3JGdW5jdGlvbic6XG4gICAgY2FzZSAnQXN5bmNHZW5lcmF0b3JGdW5jdGlvbic6IHJldHVybiBmYWxzZTtcbiAgfVxuICB0cnkge1xuICAgIC8vIHdlIGNhbid0IGNoZWNrIC5wcm90b3R5cGUgc2luY2UgY29uc3RydWN0b3JzIHByb2R1Y2VkIGJ5IC5iaW5kIGhhdmVuJ3QgaXRcbiAgICAvLyBgRnVuY3Rpb24jdG9TdHJpbmdgIHRocm93cyBvbiBzb21lIGJ1aWx0LWl0IGZ1bmN0aW9uIGluIHNvbWUgbGVnYWN5IGVuZ2luZXNcbiAgICAvLyAoZm9yIGV4YW1wbGUsIGBET01RdWFkYCBhbmQgc2ltaWxhciBpbiBGRjQxLSlcbiAgICByZXR1cm4gSU5DT1JSRUNUX1RPX1NUUklORyB8fCAhIWV4ZWMoY29uc3RydWN0b3JSZWdFeHAsIGluc3BlY3RTb3VyY2UkMShhcmd1bWVudCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG5pc0NvbnN0cnVjdG9yTGVnYWN5LnNoYW0gPSB0cnVlO1xuXG4vLyBgSXNDb25zdHJ1Y3RvcmAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWlzY29uc3RydWN0b3JcbnZhciBpc0NvbnN0cnVjdG9yJDEgPSAhY29uc3RydWN0IHx8IGZhaWxzJDEoZnVuY3Rpb24gKCkge1xuICB2YXIgY2FsbGVkO1xuICByZXR1cm4gaXNDb25zdHJ1Y3Rvck1vZGVybihpc0NvbnN0cnVjdG9yTW9kZXJuLmNhbGwpXG4gICAgfHwgIWlzQ29uc3RydWN0b3JNb2Rlcm4oT2JqZWN0KVxuICAgIHx8ICFpc0NvbnN0cnVjdG9yTW9kZXJuKGZ1bmN0aW9uICgpIHsgY2FsbGVkID0gdHJ1ZTsgfSlcbiAgICB8fCBjYWxsZWQ7XG59KSA/IGlzQ29uc3RydWN0b3JMZWdhY3kgOiBpc0NvbnN0cnVjdG9yTW9kZXJuO1xuXG52YXIgaXNDb25zdHJ1Y3RvciA9IGlzQ29uc3RydWN0b3IkMTtcbnZhciB0cnlUb1N0cmluZyQyID0gdHJ5VG9TdHJpbmckNTtcblxudmFyICRUeXBlRXJyb3IkMyA9IFR5cGVFcnJvcjtcblxuLy8gYEFzc2VydDogSXNDb25zdHJ1Y3Rvcihhcmd1bWVudCkgaXMgdHJ1ZWBcbnZhciBhQ29uc3RydWN0b3IkMSA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICBpZiAoaXNDb25zdHJ1Y3Rvcihhcmd1bWVudCkpIHJldHVybiBhcmd1bWVudDtcbiAgdGhyb3cgJFR5cGVFcnJvciQzKHRyeVRvU3RyaW5nJDIoYXJndW1lbnQpICsgJyBpcyBub3QgYSBjb25zdHJ1Y3RvcicpO1xufTtcblxudmFyIGFuT2JqZWN0JDQgPSBhbk9iamVjdCRhO1xudmFyIGFDb25zdHJ1Y3RvciA9IGFDb25zdHJ1Y3RvciQxO1xudmFyIHdlbGxLbm93blN5bWJvbCQ0ID0gd2VsbEtub3duU3ltYm9sJGU7XG5cbnZhciBTUEVDSUVTJDEgPSB3ZWxsS25vd25TeW1ib2wkNCgnc3BlY2llcycpO1xuXG4vLyBgU3BlY2llc0NvbnN0cnVjdG9yYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtc3BlY2llc2NvbnN0cnVjdG9yXG52YXIgc3BlY2llc0NvbnN0cnVjdG9yJDEgPSBmdW5jdGlvbiAoTywgZGVmYXVsdENvbnN0cnVjdG9yKSB7XG4gIHZhciBDID0gYW5PYmplY3QkNChPKS5jb25zdHJ1Y3RvcjtcbiAgdmFyIFM7XG4gIHJldHVybiBDID09PSB1bmRlZmluZWQgfHwgKFMgPSBhbk9iamVjdCQ0KEMpW1NQRUNJRVMkMV0pID09IHVuZGVmaW5lZCA/IGRlZmF1bHRDb25zdHJ1Y3RvciA6IGFDb25zdHJ1Y3RvcihTKTtcbn07XG5cbnZhciBOQVRJVkVfQklORCQxID0gZnVuY3Rpb25CaW5kTmF0aXZlO1xuXG52YXIgRnVuY3Rpb25Qcm90b3R5cGUgPSBGdW5jdGlvbi5wcm90b3R5cGU7XG52YXIgYXBwbHkkMSA9IEZ1bmN0aW9uUHJvdG90eXBlLmFwcGx5O1xudmFyIGNhbGwkNyA9IEZ1bmN0aW9uUHJvdG90eXBlLmNhbGw7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy14L25vLXJlZmxlY3QgLS0gc2FmZVxudmFyIGZ1bmN0aW9uQXBwbHkgPSB0eXBlb2YgUmVmbGVjdCA9PSAnb2JqZWN0JyAmJiBSZWZsZWN0LmFwcGx5IHx8IChOQVRJVkVfQklORCQxID8gY2FsbCQ3LmJpbmQoYXBwbHkkMSkgOiBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBjYWxsJDcuYXBwbHkoYXBwbHkkMSwgYXJndW1lbnRzKTtcbn0pO1xuXG52YXIgdW5jdXJyeVRoaXMkMSA9IGZ1bmN0aW9uVW5jdXJyeVRoaXM7XG52YXIgYUNhbGxhYmxlJDUgPSBhQ2FsbGFibGUkOTtcbnZhciBOQVRJVkVfQklORCA9IGZ1bmN0aW9uQmluZE5hdGl2ZTtcblxudmFyIGJpbmQkNCA9IHVuY3VycnlUaGlzJDEodW5jdXJyeVRoaXMkMS5iaW5kKTtcblxuLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG52YXIgZnVuY3Rpb25CaW5kQ29udGV4dCA9IGZ1bmN0aW9uIChmbiwgdGhhdCkge1xuICBhQ2FsbGFibGUkNShmbik7XG4gIHJldHVybiB0aGF0ID09PSB1bmRlZmluZWQgPyBmbiA6IE5BVElWRV9CSU5EID8gYmluZCQ0KGZuLCB0aGF0KSA6IGZ1bmN0aW9uICgvKiAuLi5hcmdzICovKSB7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gIH07XG59O1xuXG52YXIgdW5jdXJyeVRoaXMgPSBmdW5jdGlvblVuY3VycnlUaGlzO1xuXG52YXIgYXJyYXlTbGljZSQxID0gdW5jdXJyeVRoaXMoW10uc2xpY2UpO1xuXG52YXIgJFR5cGVFcnJvciQyID0gVHlwZUVycm9yO1xuXG52YXIgdmFsaWRhdGVBcmd1bWVudHNMZW5ndGgkMSA9IGZ1bmN0aW9uIChwYXNzZWQsIHJlcXVpcmVkKSB7XG4gIGlmIChwYXNzZWQgPCByZXF1aXJlZCkgdGhyb3cgJFR5cGVFcnJvciQyKCdOb3QgZW5vdWdoIGFyZ3VtZW50cycpO1xuICByZXR1cm4gcGFzc2VkO1xufTtcblxudmFyIHVzZXJBZ2VudCQyID0gZW5naW5lVXNlckFnZW50O1xuXG52YXIgZW5naW5lSXNJb3MgPSAvKD86aXBhZHxpcGhvbmV8aXBvZCkuKmFwcGxld2Via2l0L2kudGVzdCh1c2VyQWdlbnQkMik7XG5cbnZhciBnbG9iYWwkNyA9IGdsb2JhbCRrO1xudmFyIGFwcGx5ID0gZnVuY3Rpb25BcHBseTtcbnZhciBiaW5kJDMgPSBmdW5jdGlvbkJpbmRDb250ZXh0O1xudmFyIGlzQ2FsbGFibGUkMyA9IGlzQ2FsbGFibGUkbDtcbnZhciBoYXNPd24gPSBoYXNPd25Qcm9wZXJ0eV8xO1xudmFyIGZhaWxzID0gZmFpbHMkZjtcbnZhciBodG1sID0gaHRtbCQyO1xudmFyIGFycmF5U2xpY2UgPSBhcnJheVNsaWNlJDE7XG52YXIgY3JlYXRlRWxlbWVudCA9IGRvY3VtZW50Q3JlYXRlRWxlbWVudCQyO1xudmFyIHZhbGlkYXRlQXJndW1lbnRzTGVuZ3RoID0gdmFsaWRhdGVBcmd1bWVudHNMZW5ndGgkMTtcbnZhciBJU19JT1MkMSA9IGVuZ2luZUlzSW9zO1xudmFyIElTX05PREUkMiA9IGVuZ2luZUlzTm9kZTtcblxudmFyIHNldCA9IGdsb2JhbCQ3LnNldEltbWVkaWF0ZTtcbnZhciBjbGVhciA9IGdsb2JhbCQ3LmNsZWFySW1tZWRpYXRlO1xudmFyIHByb2Nlc3MkMiA9IGdsb2JhbCQ3LnByb2Nlc3M7XG52YXIgRGlzcGF0Y2ggPSBnbG9iYWwkNy5EaXNwYXRjaDtcbnZhciBGdW5jdGlvbiQxID0gZ2xvYmFsJDcuRnVuY3Rpb247XG52YXIgTWVzc2FnZUNoYW5uZWwgPSBnbG9iYWwkNy5NZXNzYWdlQ2hhbm5lbDtcbnZhciBTdHJpbmckMSA9IGdsb2JhbCQ3LlN0cmluZztcbnZhciBjb3VudGVyID0gMDtcbnZhciBxdWV1ZSQxID0ge307XG52YXIgT05SRUFEWVNUQVRFQ0hBTkdFID0gJ29ucmVhZHlzdGF0ZWNoYW5nZSc7XG52YXIgbG9jYXRpb24sIGRlZmVyLCBjaGFubmVsLCBwb3J0O1xuXG50cnkge1xuICAvLyBEZW5vIHRocm93cyBhIFJlZmVyZW5jZUVycm9yIG9uIGBsb2NhdGlvbmAgYWNjZXNzIHdpdGhvdXQgYC0tbG9jYXRpb25gIGZsYWdcbiAgbG9jYXRpb24gPSBnbG9iYWwkNy5sb2NhdGlvbjtcbn0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cblxudmFyIHJ1biA9IGZ1bmN0aW9uIChpZCkge1xuICBpZiAoaGFzT3duKHF1ZXVlJDEsIGlkKSkge1xuICAgIHZhciBmbiA9IHF1ZXVlJDFbaWRdO1xuICAgIGRlbGV0ZSBxdWV1ZSQxW2lkXTtcbiAgICBmbigpO1xuICB9XG59O1xuXG52YXIgcnVubmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcnVuKGlkKTtcbiAgfTtcbn07XG5cbnZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCkge1xuICBydW4oZXZlbnQuZGF0YSk7XG59O1xuXG52YXIgcG9zdCA9IGZ1bmN0aW9uIChpZCkge1xuICAvLyBvbGQgZW5naW5lcyBoYXZlIG5vdCBsb2NhdGlvbi5vcmlnaW5cbiAgZ2xvYmFsJDcucG9zdE1lc3NhZ2UoU3RyaW5nJDEoaWQpLCBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0KTtcbn07XG5cbi8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZTpcbmlmICghc2V0IHx8ICFjbGVhcikge1xuICBzZXQgPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoaGFuZGxlcikge1xuICAgIHZhbGlkYXRlQXJndW1lbnRzTGVuZ3RoKGFyZ3VtZW50cy5sZW5ndGgsIDEpO1xuICAgIHZhciBmbiA9IGlzQ2FsbGFibGUkMyhoYW5kbGVyKSA/IGhhbmRsZXIgOiBGdW5jdGlvbiQxKGhhbmRsZXIpO1xuICAgIHZhciBhcmdzID0gYXJyYXlTbGljZShhcmd1bWVudHMsIDEpO1xuICAgIHF1ZXVlJDFbKytjb3VudGVyXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGFwcGx5KGZuLCB1bmRlZmluZWQsIGFyZ3MpO1xuICAgIH07XG4gICAgZGVmZXIoY291bnRlcik7XG4gICAgcmV0dXJuIGNvdW50ZXI7XG4gIH07XG4gIGNsZWFyID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaWQpIHtcbiAgICBkZWxldGUgcXVldWUkMVtpZF07XG4gIH07XG4gIC8vIE5vZGUuanMgMC44LVxuICBpZiAoSVNfTk9ERSQyKSB7XG4gICAgZGVmZXIgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgIHByb2Nlc3MkMi5uZXh0VGljayhydW5uZXIoaWQpKTtcbiAgICB9O1xuICAvLyBTcGhlcmUgKEpTIGdhbWUgZW5naW5lKSBEaXNwYXRjaCBBUElcbiAgfSBlbHNlIGlmIChEaXNwYXRjaCAmJiBEaXNwYXRjaC5ub3cpIHtcbiAgICBkZWZlciA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgRGlzcGF0Y2gubm93KHJ1bm5lcihpZCkpO1xuICAgIH07XG4gIC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnNcbiAgLy8gZXhjZXB0IGlPUyAtIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy82MjRcbiAgfSBlbHNlIGlmIChNZXNzYWdlQ2hhbm5lbCAmJiAhSVNfSU9TJDEpIHtcbiAgICBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgcG9ydCA9IGNoYW5uZWwucG9ydDI7XG4gICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaXN0ZW5lcjtcbiAgICBkZWZlciA9IGJpbmQkMyhwb3J0LnBvc3RNZXNzYWdlLCBwb3J0KTtcbiAgLy8gQnJvd3NlcnMgd2l0aCBwb3N0TWVzc2FnZSwgc2tpcCBXZWJXb3JrZXJzXG4gIC8vIElFOCBoYXMgcG9zdE1lc3NhZ2UsIGJ1dCBpdCdzIHN5bmMgJiB0eXBlb2YgaXRzIHBvc3RNZXNzYWdlIGlzICdvYmplY3QnXG4gIH0gZWxzZSBpZiAoXG4gICAgZ2xvYmFsJDcuYWRkRXZlbnRMaXN0ZW5lciAmJlxuICAgIGlzQ2FsbGFibGUkMyhnbG9iYWwkNy5wb3N0TWVzc2FnZSkgJiZcbiAgICAhZ2xvYmFsJDcuaW1wb3J0U2NyaXB0cyAmJlxuICAgIGxvY2F0aW9uICYmIGxvY2F0aW9uLnByb3RvY29sICE9PSAnZmlsZTonICYmXG4gICAgIWZhaWxzKHBvc3QpXG4gICkge1xuICAgIGRlZmVyID0gcG9zdDtcbiAgICBnbG9iYWwkNy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbGlzdGVuZXIsIGZhbHNlKTtcbiAgLy8gSUU4LVxuICB9IGVsc2UgaWYgKE9OUkVBRFlTVEFURUNIQU5HRSBpbiBjcmVhdGVFbGVtZW50KCdzY3JpcHQnKSkge1xuICAgIGRlZmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBodG1sLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpKVtPTlJFQURZU1RBVEVDSEFOR0VdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgICBydW4oaWQpO1xuICAgICAgfTtcbiAgICB9O1xuICAvLyBSZXN0IG9sZCBicm93c2Vyc1xuICB9IGVsc2Uge1xuICAgIGRlZmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBzZXRUaW1lb3V0KHJ1bm5lcihpZCksIDApO1xuICAgIH07XG4gIH1cbn1cblxudmFyIHRhc2skMSA9IHtcbiAgc2V0OiBzZXQsXG4gIGNsZWFyOiBjbGVhclxufTtcblxudmFyIHVzZXJBZ2VudCQxID0gZW5naW5lVXNlckFnZW50O1xudmFyIGdsb2JhbCQ2ID0gZ2xvYmFsJGs7XG5cbnZhciBlbmdpbmVJc0lvc1BlYmJsZSA9IC9pcGFkfGlwaG9uZXxpcG9kL2kudGVzdCh1c2VyQWdlbnQkMSkgJiYgZ2xvYmFsJDYuUGViYmxlICE9PSB1bmRlZmluZWQ7XG5cbnZhciB1c2VyQWdlbnQgPSBlbmdpbmVVc2VyQWdlbnQ7XG5cbnZhciBlbmdpbmVJc1dlYm9zV2Via2l0ID0gL3dlYjBzKD8hLipjaHJvbWUpL2kudGVzdCh1c2VyQWdlbnQpO1xuXG52YXIgZ2xvYmFsJDUgPSBnbG9iYWwkaztcbnZhciBiaW5kJDIgPSBmdW5jdGlvbkJpbmRDb250ZXh0O1xudmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IG9iamVjdEdldE93blByb3BlcnR5RGVzY3JpcHRvci5mO1xudmFyIG1hY3JvdGFzayA9IHRhc2skMS5zZXQ7XG52YXIgSVNfSU9TID0gZW5naW5lSXNJb3M7XG52YXIgSVNfSU9TX1BFQkJMRSA9IGVuZ2luZUlzSW9zUGViYmxlO1xudmFyIElTX1dFQk9TX1dFQktJVCA9IGVuZ2luZUlzV2Vib3NXZWJraXQ7XG52YXIgSVNfTk9ERSQxID0gZW5naW5lSXNOb2RlO1xuXG52YXIgTXV0YXRpb25PYnNlcnZlciA9IGdsb2JhbCQ1Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsJDUuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBkb2N1bWVudCQyID0gZ2xvYmFsJDUuZG9jdW1lbnQ7XG52YXIgcHJvY2VzcyQxID0gZ2xvYmFsJDUucHJvY2VzcztcbnZhciBQcm9taXNlJDEgPSBnbG9iYWwkNS5Qcm9taXNlO1xuLy8gTm9kZS5qcyAxMSBzaG93cyBFeHBlcmltZW50YWxXYXJuaW5nIG9uIGdldHRpbmcgYHF1ZXVlTWljcm90YXNrYFxudmFyIHF1ZXVlTWljcm90YXNrRGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihnbG9iYWwkNSwgJ3F1ZXVlTWljcm90YXNrJyk7XG52YXIgcXVldWVNaWNyb3Rhc2sgPSBxdWV1ZU1pY3JvdGFza0Rlc2NyaXB0b3IgJiYgcXVldWVNaWNyb3Rhc2tEZXNjcmlwdG9yLnZhbHVlO1xuXG52YXIgZmx1c2gsIGhlYWQsIGxhc3QsIG5vdGlmeSQxLCB0b2dnbGUsIG5vZGUsIHByb21pc2UsIHRoZW47XG5cbi8vIG1vZGVybiBlbmdpbmVzIGhhdmUgcXVldWVNaWNyb3Rhc2sgbWV0aG9kXG5pZiAoIXF1ZXVlTWljcm90YXNrKSB7XG4gIGZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwYXJlbnQsIGZuO1xuICAgIGlmIChJU19OT0RFJDEgJiYgKHBhcmVudCA9IHByb2Nlc3MkMS5kb21haW4pKSBwYXJlbnQuZXhpdCgpO1xuICAgIHdoaWxlIChoZWFkKSB7XG4gICAgICBmbiA9IGhlYWQuZm47XG4gICAgICBoZWFkID0gaGVhZC5uZXh0O1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm4oKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChoZWFkKSBub3RpZnkkMSgpO1xuICAgICAgICBlbHNlIGxhc3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH0gbGFzdCA9IHVuZGVmaW5lZDtcbiAgICBpZiAocGFyZW50KSBwYXJlbnQuZW50ZXIoKTtcbiAgfTtcblxuICAvLyBicm93c2VycyB3aXRoIE11dGF0aW9uT2JzZXJ2ZXIsIGV4Y2VwdCBpT1MgLSBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMzM5XG4gIC8vIGFsc28gZXhjZXB0IFdlYk9TIFdlYmtpdCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODk4XG4gIGlmICghSVNfSU9TICYmICFJU19OT0RFJDEgJiYgIUlTX1dFQk9TX1dFQktJVCAmJiBNdXRhdGlvbk9ic2VydmVyICYmIGRvY3VtZW50JDIpIHtcbiAgICB0b2dnbGUgPSB0cnVlO1xuICAgIG5vZGUgPSBkb2N1bWVudCQyLmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgICBuZXcgTXV0YXRpb25PYnNlcnZlcihmbHVzaCkub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG4gICAgbm90aWZ5JDEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBub2RlLmRhdGEgPSB0b2dnbGUgPSAhdG9nZ2xlO1xuICAgIH07XG4gIC8vIGVudmlyb25tZW50cyB3aXRoIG1heWJlIG5vbi1jb21wbGV0ZWx5IGNvcnJlY3QsIGJ1dCBleGlzdGVudCBQcm9taXNlXG4gIH0gZWxzZSBpZiAoIUlTX0lPU19QRUJCTEUgJiYgUHJvbWlzZSQxICYmIFByb21pc2UkMS5yZXNvbHZlKSB7XG4gICAgLy8gUHJvbWlzZS5yZXNvbHZlIHdpdGhvdXQgYW4gYXJndW1lbnQgdGhyb3dzIGFuIGVycm9yIGluIExHIFdlYk9TIDJcbiAgICBwcm9taXNlID0gUHJvbWlzZSQxLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAvLyB3b3JrYXJvdW5kIG9mIFdlYktpdCB+IGlPUyBTYWZhcmkgMTAuMSBidWdcbiAgICBwcm9taXNlLmNvbnN0cnVjdG9yID0gUHJvbWlzZSQxO1xuICAgIHRoZW4gPSBiaW5kJDIocHJvbWlzZS50aGVuLCBwcm9taXNlKTtcbiAgICBub3RpZnkkMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoZW4oZmx1c2gpO1xuICAgIH07XG4gIC8vIE5vZGUuanMgd2l0aG91dCBwcm9taXNlc1xuICB9IGVsc2UgaWYgKElTX05PREUkMSkge1xuICAgIG5vdGlmeSQxID0gZnVuY3Rpb24gKCkge1xuICAgICAgcHJvY2VzcyQxLm5leHRUaWNrKGZsdXNoKTtcbiAgICB9O1xuICAvLyBmb3Igb3RoZXIgZW52aXJvbm1lbnRzIC0gbWFjcm90YXNrIGJhc2VkIG9uOlxuICAvLyAtIHNldEltbWVkaWF0ZVxuICAvLyAtIE1lc3NhZ2VDaGFubmVsXG4gIC8vIC0gd2luZG93LnBvc3RNZXNzYWdlXG4gIC8vIC0gb25yZWFkeXN0YXRlY2hhbmdlXG4gIC8vIC0gc2V0VGltZW91dFxuICB9IGVsc2Uge1xuICAgIC8vIHN0cmFuZ2UgSUUgKyB3ZWJwYWNrIGRldiBzZXJ2ZXIgYnVnIC0gdXNlIC5iaW5kKGdsb2JhbClcbiAgICBtYWNyb3Rhc2sgPSBiaW5kJDIobWFjcm90YXNrLCBnbG9iYWwkNSk7XG4gICAgbm90aWZ5JDEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBtYWNyb3Rhc2soZmx1c2gpO1xuICAgIH07XG4gIH1cbn1cblxudmFyIG1pY3JvdGFzayQxID0gcXVldWVNaWNyb3Rhc2sgfHwgZnVuY3Rpb24gKGZuKSB7XG4gIHZhciB0YXNrID0geyBmbjogZm4sIG5leHQ6IHVuZGVmaW5lZCB9O1xuICBpZiAobGFzdCkgbGFzdC5uZXh0ID0gdGFzaztcbiAgaWYgKCFoZWFkKSB7XG4gICAgaGVhZCA9IHRhc2s7XG4gICAgbm90aWZ5JDEoKTtcbiAgfSBsYXN0ID0gdGFzaztcbn07XG5cbnZhciBnbG9iYWwkNCA9IGdsb2JhbCRrO1xuXG52YXIgaG9zdFJlcG9ydEVycm9ycyQxID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgdmFyIGNvbnNvbGUgPSBnbG9iYWwkNC5jb25zb2xlO1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLmVycm9yKSB7XG4gICAgYXJndW1lbnRzLmxlbmd0aCA9PSAxID8gY29uc29sZS5lcnJvcihhKSA6IGNvbnNvbGUuZXJyb3IoYSwgYik7XG4gIH1cbn07XG5cbnZhciBwZXJmb3JtJDMgPSBmdW5jdGlvbiAoZXhlYykge1xuICB0cnkge1xuICAgIHJldHVybiB7IGVycm9yOiBmYWxzZSwgdmFsdWU6IGV4ZWMoKSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yOiB0cnVlLCB2YWx1ZTogZXJyb3IgfTtcbiAgfVxufTtcblxudmFyIFF1ZXVlJDEgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuaGVhZCA9IG51bGw7XG4gIHRoaXMudGFpbCA9IG51bGw7XG59O1xuXG5RdWV1ZSQxLnByb3RvdHlwZSA9IHtcbiAgYWRkOiBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBlbnRyeSA9IHsgaXRlbTogaXRlbSwgbmV4dDogbnVsbCB9O1xuICAgIGlmICh0aGlzLmhlYWQpIHRoaXMudGFpbC5uZXh0ID0gZW50cnk7XG4gICAgZWxzZSB0aGlzLmhlYWQgPSBlbnRyeTtcbiAgICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgfSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5oZWFkO1xuICAgIGlmIChlbnRyeSkge1xuICAgICAgdGhpcy5oZWFkID0gZW50cnkubmV4dDtcbiAgICAgIGlmICh0aGlzLnRhaWwgPT09IGVudHJ5KSB0aGlzLnRhaWwgPSBudWxsO1xuICAgICAgcmV0dXJuIGVudHJ5Lml0ZW07XG4gICAgfVxuICB9XG59O1xuXG52YXIgcXVldWUgPSBRdWV1ZSQxO1xuXG52YXIgZ2xvYmFsJDMgPSBnbG9iYWwkaztcblxudmFyIHByb21pc2VOYXRpdmVDb25zdHJ1Y3RvciA9IGdsb2JhbCQzLlByb21pc2U7XG5cbnZhciBlbmdpbmVJc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIHR5cGVvZiBEZW5vICE9ICdvYmplY3QnO1xuXG52YXIgZ2xvYmFsJDIgPSBnbG9iYWwkaztcbnZhciBOYXRpdmVQcm9taXNlQ29uc3RydWN0b3IkMyA9IHByb21pc2VOYXRpdmVDb25zdHJ1Y3RvcjtcbnZhciBpc0NhbGxhYmxlJDIgPSBpc0NhbGxhYmxlJGw7XG52YXIgaXNGb3JjZWQgPSBpc0ZvcmNlZF8xO1xudmFyIGluc3BlY3RTb3VyY2UgPSBpbnNwZWN0U291cmNlJDQ7XG52YXIgd2VsbEtub3duU3ltYm9sJDMgPSB3ZWxsS25vd25TeW1ib2wkZTtcbnZhciBJU19CUk9XU0VSID0gZW5naW5lSXNCcm93c2VyO1xudmFyIFY4X1ZFUlNJT04gPSBlbmdpbmVWOFZlcnNpb247XG5cbk5hdGl2ZVByb21pc2VDb25zdHJ1Y3RvciQzICYmIE5hdGl2ZVByb21pc2VDb25zdHJ1Y3RvciQzLnByb3RvdHlwZTtcbnZhciBTUEVDSUVTID0gd2VsbEtub3duU3ltYm9sJDMoJ3NwZWNpZXMnKTtcbnZhciBTVUJDTEFTU0lORyA9IGZhbHNlO1xudmFyIE5BVElWRV9QUk9NSVNFX1JFSkVDVElPTl9FVkVOVCQxID0gaXNDYWxsYWJsZSQyKGdsb2JhbCQyLlByb21pc2VSZWplY3Rpb25FdmVudCk7XG5cbnZhciBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiQ1ID0gaXNGb3JjZWQoJ1Byb21pc2UnLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBQUk9NSVNFX0NPTlNUUlVDVE9SX1NPVVJDRSA9IGluc3BlY3RTb3VyY2UoTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yJDMpO1xuICB2YXIgR0xPQkFMX0NPUkVfSlNfUFJPTUlTRSA9IFBST01JU0VfQ09OU1RSVUNUT1JfU09VUkNFICE9PSBTdHJpbmcoTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yJDMpO1xuICAvLyBWOCA2LjYgKE5vZGUgMTAgYW5kIENocm9tZSA2NikgaGF2ZSBhIGJ1ZyB3aXRoIHJlc29sdmluZyBjdXN0b20gdGhlbmFibGVzXG4gIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTgzMDU2NVxuICAvLyBXZSBjYW4ndCBkZXRlY3QgaXQgc3luY2hyb25vdXNseSwgc28ganVzdCBjaGVjayB2ZXJzaW9uc1xuICBpZiAoIUdMT0JBTF9DT1JFX0pTX1BST01JU0UgJiYgVjhfVkVSU0lPTiA9PT0gNjYpIHJldHVybiB0cnVlO1xuICAvLyBXZSBjYW4ndCB1c2UgQEBzcGVjaWVzIGZlYXR1cmUgZGV0ZWN0aW9uIGluIFY4IHNpbmNlIGl0IGNhdXNlc1xuICAvLyBkZW9wdGltaXphdGlvbiBhbmQgcGVyZm9ybWFuY2UgZGVncmFkYXRpb25cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzY3OVxuICBpZiAoVjhfVkVSU0lPTiA+PSA1MSAmJiAvbmF0aXZlIGNvZGUvLnRlc3QoUFJPTUlTRV9DT05TVFJVQ1RPUl9TT1VSQ0UpKSByZXR1cm4gZmFsc2U7XG4gIC8vIERldGVjdCBjb3JyZWN0bmVzcyBvZiBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0XG4gIHZhciBwcm9taXNlID0gbmV3IE5hdGl2ZVByb21pc2VDb25zdHJ1Y3RvciQzKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUoMSk7IH0pO1xuICB2YXIgRmFrZVByb21pc2UgPSBmdW5jdGlvbiAoZXhlYykge1xuICAgIGV4ZWMoZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9LCBmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH0pO1xuICB9O1xuICB2YXIgY29uc3RydWN0b3IgPSBwcm9taXNlLmNvbnN0cnVjdG9yID0ge307XG4gIGNvbnN0cnVjdG9yW1NQRUNJRVNdID0gRmFrZVByb21pc2U7XG4gIFNVQkNMQVNTSU5HID0gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfSkgaW5zdGFuY2VvZiBGYWtlUHJvbWlzZTtcbiAgaWYgKCFTVUJDTEFTU0lORykgcmV0dXJuIHRydWU7XG4gIC8vIFVuaGFuZGxlZCByZWplY3Rpb25zIHRyYWNraW5nIHN1cHBvcnQsIE5vZGVKUyBQcm9taXNlIHdpdGhvdXQgaXQgZmFpbHMgQEBzcGVjaWVzIHRlc3RcbiAgcmV0dXJuICFHTE9CQUxfQ09SRV9KU19QUk9NSVNFICYmIElTX0JST1dTRVIgJiYgIU5BVElWRV9QUk9NSVNFX1JFSkVDVElPTl9FVkVOVCQxO1xufSk7XG5cbnZhciBwcm9taXNlQ29uc3RydWN0b3JEZXRlY3Rpb24gPSB7XG4gIENPTlNUUlVDVE9SOiBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiQ1LFxuICBSRUpFQ1RJT05fRVZFTlQ6IE5BVElWRV9QUk9NSVNFX1JFSkVDVElPTl9FVkVOVCQxLFxuICBTVUJDTEFTU0lORzogU1VCQ0xBU1NJTkdcbn07XG5cbnZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSQyID0ge307XG5cbnZhciBhQ2FsbGFibGUkNCA9IGFDYWxsYWJsZSQ5O1xuXG52YXIgUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbiAoQykge1xuICB2YXIgcmVzb2x2ZSwgcmVqZWN0O1xuICB0aGlzLnByb21pc2UgPSBuZXcgQyhmdW5jdGlvbiAoJCRyZXNvbHZlLCAkJHJlamVjdCkge1xuICAgIGlmIChyZXNvbHZlICE9PSB1bmRlZmluZWQgfHwgcmVqZWN0ICE9PSB1bmRlZmluZWQpIHRocm93IFR5cGVFcnJvcignQmFkIFByb21pc2UgY29uc3RydWN0b3InKTtcbiAgICByZXNvbHZlID0gJCRyZXNvbHZlO1xuICAgIHJlamVjdCA9ICQkcmVqZWN0O1xuICB9KTtcbiAgdGhpcy5yZXNvbHZlID0gYUNhbGxhYmxlJDQocmVzb2x2ZSk7XG4gIHRoaXMucmVqZWN0ID0gYUNhbGxhYmxlJDQocmVqZWN0KTtcbn07XG5cbi8vIGBOZXdQcm9taXNlQ2FwYWJpbGl0eWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW5ld3Byb21pc2VjYXBhYmlsaXR5XG5uZXdQcm9taXNlQ2FwYWJpbGl0eSQyLmYgPSBmdW5jdGlvbiAoQykge1xuICByZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpO1xufTtcblxudmFyICQkNSA9IF9leHBvcnQ7XG52YXIgSVNfTk9ERSA9IGVuZ2luZUlzTm9kZTtcbnZhciBnbG9iYWwkMSA9IGdsb2JhbCRrO1xudmFyIGNhbGwkNiA9IGZ1bmN0aW9uQ2FsbDtcbnZhciBkZWZpbmVCdWlsdEluJDEgPSBkZWZpbmVCdWlsdEluJDU7XG52YXIgc2V0UHJvdG90eXBlT2YgPSBvYmplY3RTZXRQcm90b3R5cGVPZjtcbnZhciBzZXRUb1N0cmluZ1RhZyA9IHNldFRvU3RyaW5nVGFnJDM7XG52YXIgc2V0U3BlY2llcyA9IHNldFNwZWNpZXMkMTtcbnZhciBhQ2FsbGFibGUkMyA9IGFDYWxsYWJsZSQ5O1xudmFyIGlzQ2FsbGFibGUkMSA9IGlzQ2FsbGFibGUkbDtcbnZhciBpc09iamVjdCQxID0gaXNPYmplY3QkNztcbnZhciBhbkluc3RhbmNlID0gYW5JbnN0YW5jZSQxO1xudmFyIHNwZWNpZXNDb25zdHJ1Y3RvciA9IHNwZWNpZXNDb25zdHJ1Y3RvciQxO1xudmFyIHRhc2sgPSB0YXNrJDEuc2V0O1xudmFyIG1pY3JvdGFzayA9IG1pY3JvdGFzayQxO1xudmFyIGhvc3RSZXBvcnRFcnJvcnMgPSBob3N0UmVwb3J0RXJyb3JzJDE7XG52YXIgcGVyZm9ybSQyID0gcGVyZm9ybSQzO1xudmFyIFF1ZXVlID0gcXVldWU7XG52YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSA9IGludGVybmFsU3RhdGU7XG52YXIgTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yJDIgPSBwcm9taXNlTmF0aXZlQ29uc3RydWN0b3I7XG52YXIgUHJvbWlzZUNvbnN0cnVjdG9yRGV0ZWN0aW9uID0gcHJvbWlzZUNvbnN0cnVjdG9yRGV0ZWN0aW9uO1xudmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlJDMgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSQyO1xuXG52YXIgUFJPTUlTRSA9ICdQcm9taXNlJztcbnZhciBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiQ0ID0gUHJvbWlzZUNvbnN0cnVjdG9yRGV0ZWN0aW9uLkNPTlNUUlVDVE9SO1xudmFyIE5BVElWRV9QUk9NSVNFX1JFSkVDVElPTl9FVkVOVCA9IFByb21pc2VDb25zdHJ1Y3RvckRldGVjdGlvbi5SRUpFQ1RJT05fRVZFTlQ7XG52YXIgTkFUSVZFX1BST01JU0VfU1VCQ0xBU1NJTkcgPSBQcm9taXNlQ29uc3RydWN0b3JEZXRlY3Rpb24uU1VCQ0xBU1NJTkc7XG52YXIgZ2V0SW50ZXJuYWxQcm9taXNlU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLmdldHRlckZvcihQUk9NSVNFKTtcbnZhciBzZXRJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5zZXQ7XG52YXIgTmF0aXZlUHJvbWlzZVByb3RvdHlwZSQxID0gTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yJDIgJiYgTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yJDIucHJvdG90eXBlO1xudmFyIFByb21pc2VDb25zdHJ1Y3RvciA9IE5hdGl2ZVByb21pc2VDb25zdHJ1Y3RvciQyO1xudmFyIFByb21pc2VQcm90b3R5cGUgPSBOYXRpdmVQcm9taXNlUHJvdG90eXBlJDE7XG52YXIgVHlwZUVycm9yJDEgPSBnbG9iYWwkMS5UeXBlRXJyb3I7XG52YXIgZG9jdW1lbnQkMSA9IGdsb2JhbCQxLmRvY3VtZW50O1xudmFyIHByb2Nlc3MgPSBnbG9iYWwkMS5wcm9jZXNzO1xudmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5JDEgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZSQzLmY7XG52YXIgbmV3R2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkkMTtcblxudmFyIERJU1BBVENIX0VWRU5UID0gISEoZG9jdW1lbnQkMSAmJiBkb2N1bWVudCQxLmNyZWF0ZUV2ZW50ICYmIGdsb2JhbCQxLmRpc3BhdGNoRXZlbnQpO1xudmFyIFVOSEFORExFRF9SRUpFQ1RJT04gPSAndW5oYW5kbGVkcmVqZWN0aW9uJztcbnZhciBSRUpFQ1RJT05fSEFORExFRCA9ICdyZWplY3Rpb25oYW5kbGVkJztcbnZhciBQRU5ESU5HID0gMDtcbnZhciBGVUxGSUxMRUQgPSAxO1xudmFyIFJFSkVDVEVEID0gMjtcbnZhciBIQU5ETEVEID0gMTtcbnZhciBVTkhBTkRMRUQgPSAyO1xuXG52YXIgSW50ZXJuYWwsIE93blByb21pc2VDYXBhYmlsaXR5LCBQcm9taXNlV3JhcHBlciwgbmF0aXZlVGhlbjtcblxuLy8gaGVscGVyc1xudmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbiAoaXQpIHtcbiAgdmFyIHRoZW47XG4gIHJldHVybiBpc09iamVjdCQxKGl0KSAmJiBpc0NhbGxhYmxlJDEodGhlbiA9IGl0LnRoZW4pID8gdGhlbiA6IGZhbHNlO1xufTtcblxudmFyIGNhbGxSZWFjdGlvbiA9IGZ1bmN0aW9uIChyZWFjdGlvbiwgc3RhdGUpIHtcbiAgdmFyIHZhbHVlID0gc3RhdGUudmFsdWU7XG4gIHZhciBvayA9IHN0YXRlLnN0YXRlID09IEZVTEZJTExFRDtcbiAgdmFyIGhhbmRsZXIgPSBvayA/IHJlYWN0aW9uLm9rIDogcmVhY3Rpb24uZmFpbDtcbiAgdmFyIHJlc29sdmUgPSByZWFjdGlvbi5yZXNvbHZlO1xuICB2YXIgcmVqZWN0ID0gcmVhY3Rpb24ucmVqZWN0O1xuICB2YXIgZG9tYWluID0gcmVhY3Rpb24uZG9tYWluO1xuICB2YXIgcmVzdWx0LCB0aGVuLCBleGl0ZWQ7XG4gIHRyeSB7XG4gICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgIGlmICghb2spIHtcbiAgICAgICAgaWYgKHN0YXRlLnJlamVjdGlvbiA9PT0gVU5IQU5ETEVEKSBvbkhhbmRsZVVuaGFuZGxlZChzdGF0ZSk7XG4gICAgICAgIHN0YXRlLnJlamVjdGlvbiA9IEhBTkRMRUQ7XG4gICAgICB9XG4gICAgICBpZiAoaGFuZGxlciA9PT0gdHJ1ZSkgcmVzdWx0ID0gdmFsdWU7XG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKGRvbWFpbikgZG9tYWluLmVudGVyKCk7XG4gICAgICAgIHJlc3VsdCA9IGhhbmRsZXIodmFsdWUpOyAvLyBjYW4gdGhyb3dcbiAgICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICAgIGRvbWFpbi5leGl0KCk7XG4gICAgICAgICAgZXhpdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdCA9PT0gcmVhY3Rpb24ucHJvbWlzZSkge1xuICAgICAgICByZWplY3QoVHlwZUVycm9yJDEoJ1Byb21pc2UtY2hhaW4gY3ljbGUnKSk7XG4gICAgICB9IGVsc2UgaWYgKHRoZW4gPSBpc1RoZW5hYmxlKHJlc3VsdCkpIHtcbiAgICAgICAgY2FsbCQ2KHRoZW4sIHJlc3VsdCwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgIH0gZWxzZSByZXNvbHZlKHJlc3VsdCk7XG4gICAgfSBlbHNlIHJlamVjdCh2YWx1ZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGRvbWFpbiAmJiAhZXhpdGVkKSBkb21haW4uZXhpdCgpO1xuICAgIHJlamVjdChlcnJvcik7XG4gIH1cbn07XG5cbnZhciBub3RpZnkgPSBmdW5jdGlvbiAoc3RhdGUsIGlzUmVqZWN0KSB7XG4gIGlmIChzdGF0ZS5ub3RpZmllZCkgcmV0dXJuO1xuICBzdGF0ZS5ub3RpZmllZCA9IHRydWU7XG4gIG1pY3JvdGFzayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlYWN0aW9ucyA9IHN0YXRlLnJlYWN0aW9ucztcbiAgICB2YXIgcmVhY3Rpb247XG4gICAgd2hpbGUgKHJlYWN0aW9uID0gcmVhY3Rpb25zLmdldCgpKSB7XG4gICAgICBjYWxsUmVhY3Rpb24ocmVhY3Rpb24sIHN0YXRlKTtcbiAgICB9XG4gICAgc3RhdGUubm90aWZpZWQgPSBmYWxzZTtcbiAgICBpZiAoaXNSZWplY3QgJiYgIXN0YXRlLnJlamVjdGlvbikgb25VbmhhbmRsZWQoc3RhdGUpO1xuICB9KTtcbn07XG5cbnZhciBkaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24gKG5hbWUsIHByb21pc2UsIHJlYXNvbikge1xuICB2YXIgZXZlbnQsIGhhbmRsZXI7XG4gIGlmIChESVNQQVRDSF9FVkVOVCkge1xuICAgIGV2ZW50ID0gZG9jdW1lbnQkMS5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICBldmVudC5wcm9taXNlID0gcHJvbWlzZTtcbiAgICBldmVudC5yZWFzb24gPSByZWFzb247XG4gICAgZXZlbnQuaW5pdEV2ZW50KG5hbWUsIGZhbHNlLCB0cnVlKTtcbiAgICBnbG9iYWwkMS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfSBlbHNlIGV2ZW50ID0geyBwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHJlYXNvbiB9O1xuICBpZiAoIU5BVElWRV9QUk9NSVNFX1JFSkVDVElPTl9FVkVOVCAmJiAoaGFuZGxlciA9IGdsb2JhbCQxWydvbicgKyBuYW1lXSkpIGhhbmRsZXIoZXZlbnQpO1xuICBlbHNlIGlmIChuYW1lID09PSBVTkhBTkRMRURfUkVKRUNUSU9OKSBob3N0UmVwb3J0RXJyb3JzKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24nLCByZWFzb24pO1xufTtcblxudmFyIG9uVW5oYW5kbGVkID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gIGNhbGwkNih0YXNrLCBnbG9iYWwkMSwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9taXNlID0gc3RhdGUuZmFjYWRlO1xuICAgIHZhciB2YWx1ZSA9IHN0YXRlLnZhbHVlO1xuICAgIHZhciBJU19VTkhBTkRMRUQgPSBpc1VuaGFuZGxlZChzdGF0ZSk7XG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoSVNfVU5IQU5ETEVEKSB7XG4gICAgICByZXN1bHQgPSBwZXJmb3JtJDIoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoSVNfTk9ERSkge1xuICAgICAgICAgIHByb2Nlc3MuZW1pdCgndW5oYW5kbGVkUmVqZWN0aW9uJywgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2UgZGlzcGF0Y2hFdmVudChVTkhBTkRMRURfUkVKRUNUSU9OLCBwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgIC8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkXG4gICAgICBzdGF0ZS5yZWplY3Rpb24gPSBJU19OT0RFIHx8IGlzVW5oYW5kbGVkKHN0YXRlKSA/IFVOSEFORExFRCA6IEhBTkRMRUQ7XG4gICAgICBpZiAocmVzdWx0LmVycm9yKSB0aHJvdyByZXN1bHQudmFsdWU7XG4gICAgfVxuICB9KTtcbn07XG5cbnZhciBpc1VuaGFuZGxlZCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICByZXR1cm4gc3RhdGUucmVqZWN0aW9uICE9PSBIQU5ETEVEICYmICFzdGF0ZS5wYXJlbnQ7XG59O1xuXG52YXIgb25IYW5kbGVVbmhhbmRsZWQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgY2FsbCQ2KHRhc2ssIGdsb2JhbCQxLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHByb21pc2UgPSBzdGF0ZS5mYWNhZGU7XG4gICAgaWYgKElTX05PREUpIHtcbiAgICAgIHByb2Nlc3MuZW1pdCgncmVqZWN0aW9uSGFuZGxlZCcsIHByb21pc2UpO1xuICAgIH0gZWxzZSBkaXNwYXRjaEV2ZW50KFJFSkVDVElPTl9IQU5ETEVELCBwcm9taXNlLCBzdGF0ZS52YWx1ZSk7XG4gIH0pO1xufTtcblxudmFyIGJpbmQkMSA9IGZ1bmN0aW9uIChmbiwgc3RhdGUsIHVud3JhcCkge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgZm4oc3RhdGUsIHZhbHVlLCB1bndyYXApO1xuICB9O1xufTtcblxudmFyIGludGVybmFsUmVqZWN0ID0gZnVuY3Rpb24gKHN0YXRlLCB2YWx1ZSwgdW53cmFwKSB7XG4gIGlmIChzdGF0ZS5kb25lKSByZXR1cm47XG4gIHN0YXRlLmRvbmUgPSB0cnVlO1xuICBpZiAodW53cmFwKSBzdGF0ZSA9IHVud3JhcDtcbiAgc3RhdGUudmFsdWUgPSB2YWx1ZTtcbiAgc3RhdGUuc3RhdGUgPSBSRUpFQ1RFRDtcbiAgbm90aWZ5KHN0YXRlLCB0cnVlKTtcbn07XG5cbnZhciBpbnRlcm5hbFJlc29sdmUgPSBmdW5jdGlvbiAoc3RhdGUsIHZhbHVlLCB1bndyYXApIHtcbiAgaWYgKHN0YXRlLmRvbmUpIHJldHVybjtcbiAgc3RhdGUuZG9uZSA9IHRydWU7XG4gIGlmICh1bndyYXApIHN0YXRlID0gdW53cmFwO1xuICB0cnkge1xuICAgIGlmIChzdGF0ZS5mYWNhZGUgPT09IHZhbHVlKSB0aHJvdyBUeXBlRXJyb3IkMShcIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmXCIpO1xuICAgIHZhciB0aGVuID0gaXNUaGVuYWJsZSh2YWx1ZSk7XG4gICAgaWYgKHRoZW4pIHtcbiAgICAgIG1pY3JvdGFzayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3cmFwcGVyID0geyBkb25lOiBmYWxzZSB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNhbGwkNih0aGVuLCB2YWx1ZSxcbiAgICAgICAgICAgIGJpbmQkMShpbnRlcm5hbFJlc29sdmUsIHdyYXBwZXIsIHN0YXRlKSxcbiAgICAgICAgICAgIGJpbmQkMShpbnRlcm5hbFJlamVjdCwgd3JhcHBlciwgc3RhdGUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBpbnRlcm5hbFJlamVjdCh3cmFwcGVyLCBlcnJvciwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHN0YXRlLnN0YXRlID0gRlVMRklMTEVEO1xuICAgICAgbm90aWZ5KHN0YXRlLCBmYWxzZSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGludGVybmFsUmVqZWN0KHsgZG9uZTogZmFsc2UgfSwgZXJyb3IsIHN0YXRlKTtcbiAgfVxufTtcblxuLy8gY29uc3RydWN0b3IgcG9seWZpbGxcbmlmIChGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiQ0KSB7XG4gIC8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpXG4gIFByb21pc2VDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpIHtcbiAgICBhbkluc3RhbmNlKHRoaXMsIFByb21pc2VQcm90b3R5cGUpO1xuICAgIGFDYWxsYWJsZSQzKGV4ZWN1dG9yKTtcbiAgICBjYWxsJDYoSW50ZXJuYWwsIHRoaXMpO1xuICAgIHZhciBzdGF0ZSA9IGdldEludGVybmFsUHJvbWlzZVN0YXRlKHRoaXMpO1xuICAgIHRyeSB7XG4gICAgICBleGVjdXRvcihiaW5kJDEoaW50ZXJuYWxSZXNvbHZlLCBzdGF0ZSksIGJpbmQkMShpbnRlcm5hbFJlamVjdCwgc3RhdGUpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaW50ZXJuYWxSZWplY3Qoc3RhdGUsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgUHJvbWlzZVByb3RvdHlwZSA9IFByb21pc2VDb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzIC0tIHJlcXVpcmVkIGZvciBgLmxlbmd0aGBcbiAgSW50ZXJuYWwgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKSB7XG4gICAgc2V0SW50ZXJuYWxTdGF0ZSh0aGlzLCB7XG4gICAgICB0eXBlOiBQUk9NSVNFLFxuICAgICAgZG9uZTogZmFsc2UsXG4gICAgICBub3RpZmllZDogZmFsc2UsXG4gICAgICBwYXJlbnQ6IGZhbHNlLFxuICAgICAgcmVhY3Rpb25zOiBuZXcgUXVldWUoKSxcbiAgICAgIHJlamVjdGlvbjogZmFsc2UsXG4gICAgICBzdGF0ZTogUEVORElORyxcbiAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgfTtcblxuICAvLyBgUHJvbWlzZS5wcm90b3R5cGUudGhlbmAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcHJvbWlzZS5wcm90b3R5cGUudGhlblxuICBJbnRlcm5hbC5wcm90b3R5cGUgPSBkZWZpbmVCdWlsdEluJDEoUHJvbWlzZVByb3RvdHlwZSwgJ3RoZW4nLCBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxQcm9taXNlU3RhdGUodGhpcyk7XG4gICAgdmFyIHJlYWN0aW9uID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkkMShzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgUHJvbWlzZUNvbnN0cnVjdG9yKSk7XG4gICAgc3RhdGUucGFyZW50ID0gdHJ1ZTtcbiAgICByZWFjdGlvbi5vayA9IGlzQ2FsbGFibGUkMShvbkZ1bGZpbGxlZCkgPyBvbkZ1bGZpbGxlZCA6IHRydWU7XG4gICAgcmVhY3Rpb24uZmFpbCA9IGlzQ2FsbGFibGUkMShvblJlamVjdGVkKSAmJiBvblJlamVjdGVkO1xuICAgIHJlYWN0aW9uLmRvbWFpbiA9IElTX05PREUgPyBwcm9jZXNzLmRvbWFpbiA6IHVuZGVmaW5lZDtcbiAgICBpZiAoc3RhdGUuc3RhdGUgPT0gUEVORElORykgc3RhdGUucmVhY3Rpb25zLmFkZChyZWFjdGlvbik7XG4gICAgZWxzZSBtaWNyb3Rhc2soZnVuY3Rpb24gKCkge1xuICAgICAgY2FsbFJlYWN0aW9uKHJlYWN0aW9uLCBzdGF0ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlYWN0aW9uLnByb21pc2U7XG4gIH0pO1xuXG4gIE93blByb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9taXNlID0gbmV3IEludGVybmFsKCk7XG4gICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxQcm9taXNlU3RhdGUocHJvbWlzZSk7XG4gICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICB0aGlzLnJlc29sdmUgPSBiaW5kJDEoaW50ZXJuYWxSZXNvbHZlLCBzdGF0ZSk7XG4gICAgdGhpcy5yZWplY3QgPSBiaW5kJDEoaW50ZXJuYWxSZWplY3QsIHN0YXRlKTtcbiAgfTtcblxuICBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZSQzLmYgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSQxID0gZnVuY3Rpb24gKEMpIHtcbiAgICByZXR1cm4gQyA9PT0gUHJvbWlzZUNvbnN0cnVjdG9yIHx8IEMgPT09IFByb21pc2VXcmFwcGVyXG4gICAgICA/IG5ldyBPd25Qcm9taXNlQ2FwYWJpbGl0eShDKVxuICAgICAgOiBuZXdHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkoQyk7XG4gIH07XG5cbiAgaWYgKGlzQ2FsbGFibGUkMShOYXRpdmVQcm9taXNlQ29uc3RydWN0b3IkMikgJiYgTmF0aXZlUHJvbWlzZVByb3RvdHlwZSQxICE9PSBPYmplY3QucHJvdG90eXBlKSB7XG4gICAgbmF0aXZlVGhlbiA9IE5hdGl2ZVByb21pc2VQcm90b3R5cGUkMS50aGVuO1xuXG4gICAgaWYgKCFOQVRJVkVfUFJPTUlTRV9TVUJDTEFTU0lORykge1xuICAgICAgLy8gbWFrZSBgUHJvbWlzZSN0aGVuYCByZXR1cm4gYSBwb2x5ZmlsbGVkIGBQcm9taXNlYCBmb3IgbmF0aXZlIHByb21pc2UtYmFzZWQgQVBJc1xuICAgICAgZGVmaW5lQnVpbHRJbiQxKE5hdGl2ZVByb21pc2VQcm90b3R5cGUkMSwgJ3RoZW4nLCBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlQ29uc3RydWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGNhbGwkNihuYXRpdmVUaGVuLCB0aGF0LCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKTtcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy82NDBcbiAgICAgIH0sIHsgdW5zYWZlOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIC8vIG1ha2UgYC5jb25zdHJ1Y3RvciA9PT0gUHJvbWlzZWAgd29yayBmb3IgbmF0aXZlIHByb21pc2UtYmFzZWQgQVBJc1xuICAgIHRyeSB7XG4gICAgICBkZWxldGUgTmF0aXZlUHJvbWlzZVByb3RvdHlwZSQxLmNvbnN0cnVjdG9yO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cblxuICAgIC8vIG1ha2UgYGluc3RhbmNlb2YgUHJvbWlzZWAgd29yayBmb3IgbmF0aXZlIHByb21pc2UtYmFzZWQgQVBJc1xuICAgIGlmIChzZXRQcm90b3R5cGVPZikge1xuICAgICAgc2V0UHJvdG90eXBlT2YoTmF0aXZlUHJvbWlzZVByb3RvdHlwZSQxLCBQcm9taXNlUHJvdG90eXBlKTtcbiAgICB9XG4gIH1cbn1cblxuJCQ1KHsgZ2xvYmFsOiB0cnVlLCBjb25zdHJ1Y3RvcjogdHJ1ZSwgd3JhcDogdHJ1ZSwgZm9yY2VkOiBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiQ0IH0sIHtcbiAgUHJvbWlzZTogUHJvbWlzZUNvbnN0cnVjdG9yXG59KTtcblxuc2V0VG9TdHJpbmdUYWcoUHJvbWlzZUNvbnN0cnVjdG9yLCBQUk9NSVNFLCBmYWxzZSk7XG5zZXRTcGVjaWVzKFBST01JU0UpO1xuXG52YXIgd2VsbEtub3duU3ltYm9sJDIgPSB3ZWxsS25vd25TeW1ib2wkZTtcbnZhciBJdGVyYXRvcnMkMSA9IGl0ZXJhdG9ycztcblxudmFyIElURVJBVE9SJDIgPSB3ZWxsS25vd25TeW1ib2wkMignaXRlcmF0b3InKTtcbnZhciBBcnJheVByb3RvdHlwZSA9IEFycmF5LnByb3RvdHlwZTtcblxuLy8gY2hlY2sgb24gZGVmYXVsdCBBcnJheSBpdGVyYXRvclxudmFyIGlzQXJyYXlJdGVyYXRvck1ldGhvZCQxID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpdCAhPT0gdW5kZWZpbmVkICYmIChJdGVyYXRvcnMkMS5BcnJheSA9PT0gaXQgfHwgQXJyYXlQcm90b3R5cGVbSVRFUkFUT1IkMl0gPT09IGl0KTtcbn07XG5cbnZhciBjbGFzc29mID0gY2xhc3NvZiQ0O1xudmFyIGdldE1ldGhvZCQxID0gZ2V0TWV0aG9kJDM7XG52YXIgSXRlcmF0b3JzID0gaXRlcmF0b3JzO1xudmFyIHdlbGxLbm93blN5bWJvbCQxID0gd2VsbEtub3duU3ltYm9sJGU7XG5cbnZhciBJVEVSQVRPUiQxID0gd2VsbEtub3duU3ltYm9sJDEoJ2l0ZXJhdG9yJyk7XG5cbnZhciBnZXRJdGVyYXRvck1ldGhvZCQyID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmIChpdCAhPSB1bmRlZmluZWQpIHJldHVybiBnZXRNZXRob2QkMShpdCwgSVRFUkFUT1IkMSlcbiAgICB8fCBnZXRNZXRob2QkMShpdCwgJ0BAaXRlcmF0b3InKVxuICAgIHx8IEl0ZXJhdG9yc1tjbGFzc29mKGl0KV07XG59O1xuXG52YXIgY2FsbCQ1ID0gZnVuY3Rpb25DYWxsO1xudmFyIGFDYWxsYWJsZSQyID0gYUNhbGxhYmxlJDk7XG52YXIgYW5PYmplY3QkMyA9IGFuT2JqZWN0JGE7XG52YXIgdHJ5VG9TdHJpbmckMSA9IHRyeVRvU3RyaW5nJDU7XG52YXIgZ2V0SXRlcmF0b3JNZXRob2QkMSA9IGdldEl0ZXJhdG9yTWV0aG9kJDI7XG5cbnZhciAkVHlwZUVycm9yJDEgPSBUeXBlRXJyb3I7XG5cbnZhciBnZXRJdGVyYXRvciQxID0gZnVuY3Rpb24gKGFyZ3VtZW50LCB1c2luZ0l0ZXJhdG9yKSB7XG4gIHZhciBpdGVyYXRvck1ldGhvZCA9IGFyZ3VtZW50cy5sZW5ndGggPCAyID8gZ2V0SXRlcmF0b3JNZXRob2QkMShhcmd1bWVudCkgOiB1c2luZ0l0ZXJhdG9yO1xuICBpZiAoYUNhbGxhYmxlJDIoaXRlcmF0b3JNZXRob2QpKSByZXR1cm4gYW5PYmplY3QkMyhjYWxsJDUoaXRlcmF0b3JNZXRob2QsIGFyZ3VtZW50KSk7XG4gIHRocm93ICRUeXBlRXJyb3IkMSh0cnlUb1N0cmluZyQxKGFyZ3VtZW50KSArICcgaXMgbm90IGl0ZXJhYmxlJyk7XG59O1xuXG52YXIgY2FsbCQ0ID0gZnVuY3Rpb25DYWxsO1xudmFyIGFuT2JqZWN0JDIgPSBhbk9iamVjdCRhO1xudmFyIGdldE1ldGhvZCA9IGdldE1ldGhvZCQzO1xuXG52YXIgaXRlcmF0b3JDbG9zZSQxID0gZnVuY3Rpb24gKGl0ZXJhdG9yLCBraW5kLCB2YWx1ZSkge1xuICB2YXIgaW5uZXJSZXN1bHQsIGlubmVyRXJyb3I7XG4gIGFuT2JqZWN0JDIoaXRlcmF0b3IpO1xuICB0cnkge1xuICAgIGlubmVyUmVzdWx0ID0gZ2V0TWV0aG9kKGl0ZXJhdG9yLCAncmV0dXJuJyk7XG4gICAgaWYgKCFpbm5lclJlc3VsdCkge1xuICAgICAgaWYgKGtpbmQgPT09ICd0aHJvdycpIHRocm93IHZhbHVlO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpbm5lclJlc3VsdCA9IGNhbGwkNChpbm5lclJlc3VsdCwgaXRlcmF0b3IpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlubmVyRXJyb3IgPSB0cnVlO1xuICAgIGlubmVyUmVzdWx0ID0gZXJyb3I7XG4gIH1cbiAgaWYgKGtpbmQgPT09ICd0aHJvdycpIHRocm93IHZhbHVlO1xuICBpZiAoaW5uZXJFcnJvcikgdGhyb3cgaW5uZXJSZXN1bHQ7XG4gIGFuT2JqZWN0JDIoaW5uZXJSZXN1bHQpO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG52YXIgYmluZCA9IGZ1bmN0aW9uQmluZENvbnRleHQ7XG52YXIgY2FsbCQzID0gZnVuY3Rpb25DYWxsO1xudmFyIGFuT2JqZWN0JDEgPSBhbk9iamVjdCRhO1xudmFyIHRyeVRvU3RyaW5nID0gdHJ5VG9TdHJpbmckNTtcbnZhciBpc0FycmF5SXRlcmF0b3JNZXRob2QgPSBpc0FycmF5SXRlcmF0b3JNZXRob2QkMTtcbnZhciBsZW5ndGhPZkFycmF5TGlrZSA9IGxlbmd0aE9mQXJyYXlMaWtlJDU7XG52YXIgaXNQcm90b3R5cGVPZiA9IG9iamVjdElzUHJvdG90eXBlT2Y7XG52YXIgZ2V0SXRlcmF0b3IgPSBnZXRJdGVyYXRvciQxO1xudmFyIGdldEl0ZXJhdG9yTWV0aG9kID0gZ2V0SXRlcmF0b3JNZXRob2QkMjtcbnZhciBpdGVyYXRvckNsb3NlID0gaXRlcmF0b3JDbG9zZSQxO1xuXG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxudmFyIFJlc3VsdCA9IGZ1bmN0aW9uIChzdG9wcGVkLCByZXN1bHQpIHtcbiAgdGhpcy5zdG9wcGVkID0gc3RvcHBlZDtcbiAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG59O1xuXG52YXIgUmVzdWx0UHJvdG90eXBlID0gUmVzdWx0LnByb3RvdHlwZTtcblxudmFyIGl0ZXJhdGUkMiA9IGZ1bmN0aW9uIChpdGVyYWJsZSwgdW5ib3VuZEZ1bmN0aW9uLCBvcHRpb25zKSB7XG4gIHZhciB0aGF0ID0gb3B0aW9ucyAmJiBvcHRpb25zLnRoYXQ7XG4gIHZhciBBU19FTlRSSUVTID0gISEob3B0aW9ucyAmJiBvcHRpb25zLkFTX0VOVFJJRVMpO1xuICB2YXIgSVNfSVRFUkFUT1IgPSAhIShvcHRpb25zICYmIG9wdGlvbnMuSVNfSVRFUkFUT1IpO1xuICB2YXIgSU5URVJSVVBURUQgPSAhIShvcHRpb25zICYmIG9wdGlvbnMuSU5URVJSVVBURUQpO1xuICB2YXIgZm4gPSBiaW5kKHVuYm91bmRGdW5jdGlvbiwgdGhhdCk7XG4gIHZhciBpdGVyYXRvciwgaXRlckZuLCBpbmRleCwgbGVuZ3RoLCByZXN1bHQsIG5leHQsIHN0ZXA7XG5cbiAgdmFyIHN0b3AgPSBmdW5jdGlvbiAoY29uZGl0aW9uKSB7XG4gICAgaWYgKGl0ZXJhdG9yKSBpdGVyYXRvckNsb3NlKGl0ZXJhdG9yLCAnbm9ybWFsJywgY29uZGl0aW9uKTtcbiAgICByZXR1cm4gbmV3IFJlc3VsdCh0cnVlLCBjb25kaXRpb24pO1xuICB9O1xuXG4gIHZhciBjYWxsRm4gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAoQVNfRU5UUklFUykge1xuICAgICAgYW5PYmplY3QkMSh2YWx1ZSk7XG4gICAgICByZXR1cm4gSU5URVJSVVBURUQgPyBmbih2YWx1ZVswXSwgdmFsdWVbMV0sIHN0b3ApIDogZm4odmFsdWVbMF0sIHZhbHVlWzFdKTtcbiAgICB9IHJldHVybiBJTlRFUlJVUFRFRCA/IGZuKHZhbHVlLCBzdG9wKSA6IGZuKHZhbHVlKTtcbiAgfTtcblxuICBpZiAoSVNfSVRFUkFUT1IpIHtcbiAgICBpdGVyYXRvciA9IGl0ZXJhYmxlO1xuICB9IGVsc2Uge1xuICAgIGl0ZXJGbiA9IGdldEl0ZXJhdG9yTWV0aG9kKGl0ZXJhYmxlKTtcbiAgICBpZiAoIWl0ZXJGbikgdGhyb3cgJFR5cGVFcnJvcih0cnlUb1N0cmluZyhpdGVyYWJsZSkgKyAnIGlzIG5vdCBpdGVyYWJsZScpO1xuICAgIC8vIG9wdGltaXNhdGlvbiBmb3IgYXJyYXkgaXRlcmF0b3JzXG4gICAgaWYgKGlzQXJyYXlJdGVyYXRvck1ldGhvZChpdGVyRm4pKSB7XG4gICAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gbGVuZ3RoT2ZBcnJheUxpa2UoaXRlcmFibGUpOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKykge1xuICAgICAgICByZXN1bHQgPSBjYWxsRm4oaXRlcmFibGVbaW5kZXhdKTtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiBpc1Byb3RvdHlwZU9mKFJlc3VsdFByb3RvdHlwZSwgcmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0gcmV0dXJuIG5ldyBSZXN1bHQoZmFsc2UpO1xuICAgIH1cbiAgICBpdGVyYXRvciA9IGdldEl0ZXJhdG9yKGl0ZXJhYmxlLCBpdGVyRm4pO1xuICB9XG5cbiAgbmV4dCA9IGl0ZXJhdG9yLm5leHQ7XG4gIHdoaWxlICghKHN0ZXAgPSBjYWxsJDMobmV4dCwgaXRlcmF0b3IpKS5kb25lKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGNhbGxGbihzdGVwLnZhbHVlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaXRlcmF0b3JDbG9zZShpdGVyYXRvciwgJ3Rocm93JywgZXJyb3IpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAnb2JqZWN0JyAmJiByZXN1bHQgJiYgaXNQcm90b3R5cGVPZihSZXN1bHRQcm90b3R5cGUsIHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XG4gIH0gcmV0dXJuIG5ldyBSZXN1bHQoZmFsc2UpO1xufTtcblxudmFyIHdlbGxLbm93blN5bWJvbCA9IHdlbGxLbm93blN5bWJvbCRlO1xuXG52YXIgSVRFUkFUT1IgPSB3ZWxsS25vd25TeW1ib2woJ2l0ZXJhdG9yJyk7XG52YXIgU0FGRV9DTE9TSU5HID0gZmFsc2U7XG5cbnRyeSB7XG4gIHZhciBjYWxsZWQgPSAwO1xuICB2YXIgaXRlcmF0b3JXaXRoUmV0dXJuID0ge1xuICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB7IGRvbmU6ICEhY2FsbGVkKysgfTtcbiAgICB9LFxuICAgICdyZXR1cm4nOiBmdW5jdGlvbiAoKSB7XG4gICAgICBTQUZFX0NMT1NJTkcgPSB0cnVlO1xuICAgIH1cbiAgfTtcbiAgaXRlcmF0b3JXaXRoUmV0dXJuW0lURVJBVE9SXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzLXgvbm8tYXJyYXktZnJvbSwgbm8tdGhyb3ctbGl0ZXJhbCAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xuICBBcnJheS5mcm9tKGl0ZXJhdG9yV2l0aFJldHVybiwgZnVuY3Rpb24gKCkgeyB0aHJvdyAyOyB9KTtcbn0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cblxudmFyIGNoZWNrQ29ycmVjdG5lc3NPZkl0ZXJhdGlvbiQxID0gZnVuY3Rpb24gKGV4ZWMsIFNLSVBfQ0xPU0lORykge1xuICBpZiAoIVNLSVBfQ0xPU0lORyAmJiAhU0FGRV9DTE9TSU5HKSByZXR1cm4gZmFsc2U7XG4gIHZhciBJVEVSQVRJT05fU1VQUE9SVCA9IGZhbHNlO1xuICB0cnkge1xuICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICBvYmplY3RbSVRFUkFUT1JdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiB7IGRvbmU6IElURVJBVElPTl9TVVBQT1JUID0gdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gICAgZXhlYyhvYmplY3QpO1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gIHJldHVybiBJVEVSQVRJT05fU1VQUE9SVDtcbn07XG5cbnZhciBOYXRpdmVQcm9taXNlQ29uc3RydWN0b3IkMSA9IHByb21pc2VOYXRpdmVDb25zdHJ1Y3RvcjtcbnZhciBjaGVja0NvcnJlY3RuZXNzT2ZJdGVyYXRpb24gPSBjaGVja0NvcnJlY3RuZXNzT2ZJdGVyYXRpb24kMTtcbnZhciBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiQzID0gcHJvbWlzZUNvbnN0cnVjdG9yRGV0ZWN0aW9uLkNPTlNUUlVDVE9SO1xuXG52YXIgcHJvbWlzZVN0YXRpY3NJbmNvcnJlY3RJdGVyYXRpb24gPSBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiQzIHx8ICFjaGVja0NvcnJlY3RuZXNzT2ZJdGVyYXRpb24oZnVuY3Rpb24gKGl0ZXJhYmxlKSB7XG4gIE5hdGl2ZVByb21pc2VDb25zdHJ1Y3RvciQxLmFsbChpdGVyYWJsZSkudGhlbih1bmRlZmluZWQsIGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfSk7XG59KTtcblxudmFyICQkNCA9IF9leHBvcnQ7XG52YXIgY2FsbCQyID0gZnVuY3Rpb25DYWxsO1xudmFyIGFDYWxsYWJsZSQxID0gYUNhbGxhYmxlJDk7XG52YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUkMiA9IG5ld1Byb21pc2VDYXBhYmlsaXR5JDI7XG52YXIgcGVyZm9ybSQxID0gcGVyZm9ybSQzO1xudmFyIGl0ZXJhdGUkMSA9IGl0ZXJhdGUkMjtcbnZhciBQUk9NSVNFX1NUQVRJQ1NfSU5DT1JSRUNUX0lURVJBVElPTiQxID0gcHJvbWlzZVN0YXRpY3NJbmNvcnJlY3RJdGVyYXRpb247XG5cbi8vIGBQcm9taXNlLmFsbGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXByb21pc2UuYWxsXG4kJDQoeyB0YXJnZXQ6ICdQcm9taXNlJywgc3RhdDogdHJ1ZSwgZm9yY2VkOiBQUk9NSVNFX1NUQVRJQ1NfSU5DT1JSRUNUX0lURVJBVElPTiQxIH0sIHtcbiAgYWxsOiBmdW5jdGlvbiBhbGwoaXRlcmFibGUpIHtcbiAgICB2YXIgQyA9IHRoaXM7XG4gICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZSQyLmYoQyk7XG4gICAgdmFyIHJlc29sdmUgPSBjYXBhYmlsaXR5LnJlc29sdmU7XG4gICAgdmFyIHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgIHZhciByZXN1bHQgPSBwZXJmb3JtJDEoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRwcm9taXNlUmVzb2x2ZSA9IGFDYWxsYWJsZSQxKEMucmVzb2x2ZSk7XG4gICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICB2YXIgY291bnRlciA9IDA7XG4gICAgICB2YXIgcmVtYWluaW5nID0gMTtcbiAgICAgIGl0ZXJhdGUkMShpdGVyYWJsZSwgZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gY291bnRlcisrO1xuICAgICAgICB2YXIgYWxyZWFkeUNhbGxlZCA9IGZhbHNlO1xuICAgICAgICByZW1haW5pbmcrKztcbiAgICAgICAgY2FsbCQyKCRwcm9taXNlUmVzb2x2ZSwgQywgcHJvbWlzZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICBpZiAoYWxyZWFkeUNhbGxlZCkgcmV0dXJuO1xuICAgICAgICAgIGFscmVhZHlDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgIHZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7XG4gICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTtcbiAgICB9KTtcbiAgICBpZiAocmVzdWx0LmVycm9yKSByZWplY3QocmVzdWx0LnZhbHVlKTtcbiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG59KTtcblxudmFyICQkMyA9IF9leHBvcnQ7XG52YXIgRk9SQ0VEX1BST01JU0VfQ09OU1RSVUNUT1IkMiA9IHByb21pc2VDb25zdHJ1Y3RvckRldGVjdGlvbi5DT05TVFJVQ1RPUjtcbnZhciBOYXRpdmVQcm9taXNlQ29uc3RydWN0b3IgPSBwcm9taXNlTmF0aXZlQ29uc3RydWN0b3I7XG52YXIgZ2V0QnVpbHRJbiQxID0gZ2V0QnVpbHRJbiQ4O1xudmFyIGlzQ2FsbGFibGUgPSBpc0NhbGxhYmxlJGw7XG52YXIgZGVmaW5lQnVpbHRJbiA9IGRlZmluZUJ1aWx0SW4kNTtcblxudmFyIE5hdGl2ZVByb21pc2VQcm90b3R5cGUgPSBOYXRpdmVQcm9taXNlQ29uc3RydWN0b3IgJiYgTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yLnByb3RvdHlwZTtcblxuLy8gYFByb21pc2UucHJvdG90eXBlLmNhdGNoYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcHJvbWlzZS5wcm90b3R5cGUuY2F0Y2hcbiQkMyh7IHRhcmdldDogJ1Byb21pc2UnLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiQyLCByZWFsOiB0cnVlIH0sIHtcbiAgJ2NhdGNoJzogZnVuY3Rpb24gKG9uUmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7XG4gIH1cbn0pO1xuXG4vLyBtYWtlcyBzdXJlIHRoYXQgbmF0aXZlIHByb21pc2UtYmFzZWQgQVBJcyBgUHJvbWlzZSNjYXRjaGAgcHJvcGVybHkgd29ya3Mgd2l0aCBwYXRjaGVkIGBQcm9taXNlI3RoZW5gXG5pZiAoaXNDYWxsYWJsZShOYXRpdmVQcm9taXNlQ29uc3RydWN0b3IpKSB7XG4gIHZhciBtZXRob2QgPSBnZXRCdWlsdEluJDEoJ1Byb21pc2UnKS5wcm90b3R5cGVbJ2NhdGNoJ107XG4gIGlmIChOYXRpdmVQcm9taXNlUHJvdG90eXBlWydjYXRjaCddICE9PSBtZXRob2QpIHtcbiAgICBkZWZpbmVCdWlsdEluKE5hdGl2ZVByb21pc2VQcm90b3R5cGUsICdjYXRjaCcsIG1ldGhvZCwgeyB1bnNhZmU6IHRydWUgfSk7XG4gIH1cbn1cblxudmFyICQkMiA9IF9leHBvcnQ7XG52YXIgY2FsbCQxID0gZnVuY3Rpb25DYWxsO1xudmFyIGFDYWxsYWJsZSA9IGFDYWxsYWJsZSQ5O1xudmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlJDEgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSQyO1xudmFyIHBlcmZvcm0gPSBwZXJmb3JtJDM7XG52YXIgaXRlcmF0ZSA9IGl0ZXJhdGUkMjtcbnZhciBQUk9NSVNFX1NUQVRJQ1NfSU5DT1JSRUNUX0lURVJBVElPTiA9IHByb21pc2VTdGF0aWNzSW5jb3JyZWN0SXRlcmF0aW9uO1xuXG4vLyBgUHJvbWlzZS5yYWNlYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcHJvbWlzZS5yYWNlXG4kJDIoeyB0YXJnZXQ6ICdQcm9taXNlJywgc3RhdDogdHJ1ZSwgZm9yY2VkOiBQUk9NSVNFX1NUQVRJQ1NfSU5DT1JSRUNUX0lURVJBVElPTiB9LCB7XG4gIHJhY2U6IGZ1bmN0aW9uIHJhY2UoaXRlcmFibGUpIHtcbiAgICB2YXIgQyA9IHRoaXM7XG4gICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZSQxLmYoQyk7XG4gICAgdmFyIHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgIHZhciByZXN1bHQgPSBwZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkcHJvbWlzZVJlc29sdmUgPSBhQ2FsbGFibGUoQy5yZXNvbHZlKTtcbiAgICAgIGl0ZXJhdGUoaXRlcmFibGUsIGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgIGNhbGwkMSgkcHJvbWlzZVJlc29sdmUsIEMsIHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLCByZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgaWYgKHJlc3VsdC5lcnJvcikgcmVqZWN0KHJlc3VsdC52YWx1ZSk7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7XG5cbnZhciAkJDEgPSBfZXhwb3J0O1xudmFyIGNhbGwgPSBmdW5jdGlvbkNhbGw7XG52YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSQyO1xudmFyIEZPUkNFRF9QUk9NSVNFX0NPTlNUUlVDVE9SJDEgPSBwcm9taXNlQ29uc3RydWN0b3JEZXRlY3Rpb24uQ09OU1RSVUNUT1I7XG5cbi8vIGBQcm9taXNlLnJlamVjdGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXByb21pc2UucmVqZWN0XG4kJDEoeyB0YXJnZXQ6ICdQcm9taXNlJywgc3RhdDogdHJ1ZSwgZm9yY2VkOiBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiQxIH0sIHtcbiAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3Qocikge1xuICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUuZih0aGlzKTtcbiAgICBjYWxsKGNhcGFiaWxpdHkucmVqZWN0LCB1bmRlZmluZWQsIHIpO1xuICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cbn0pO1xuXG52YXIgYW5PYmplY3QgPSBhbk9iamVjdCRhO1xudmFyIGlzT2JqZWN0ID0gaXNPYmplY3QkNztcbnZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5JDI7XG5cbnZhciBwcm9taXNlUmVzb2x2ZSQxID0gZnVuY3Rpb24gKEMsIHgpIHtcbiAgYW5PYmplY3QoQyk7XG4gIGlmIChpc09iamVjdCh4KSAmJiB4LmNvbnN0cnVjdG9yID09PSBDKSByZXR1cm4geDtcbiAgdmFyIHByb21pc2VDYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkuZihDKTtcbiAgdmFyIHJlc29sdmUgPSBwcm9taXNlQ2FwYWJpbGl0eS5yZXNvbHZlO1xuICByZXNvbHZlKHgpO1xuICByZXR1cm4gcHJvbWlzZUNhcGFiaWxpdHkucHJvbWlzZTtcbn07XG5cbnZhciAkID0gX2V4cG9ydDtcbnZhciBnZXRCdWlsdEluID0gZ2V0QnVpbHRJbiQ4O1xudmFyIEZPUkNFRF9QUk9NSVNFX0NPTlNUUlVDVE9SID0gcHJvbWlzZUNvbnN0cnVjdG9yRGV0ZWN0aW9uLkNPTlNUUlVDVE9SO1xudmFyIHByb21pc2VSZXNvbHZlID0gcHJvbWlzZVJlc29sdmUkMTtcblxuZ2V0QnVpbHRJbignUHJvbWlzZScpO1xuXG4vLyBgUHJvbWlzZS5yZXNvbHZlYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcHJvbWlzZS5yZXNvbHZlXG4kKHsgdGFyZ2V0OiAnUHJvbWlzZScsIHN0YXQ6IHRydWUsIGZvcmNlZDogRk9SQ0VEX1BST01JU0VfQ09OU1RSVUNUT1IgfSwge1xuICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHgpIHtcbiAgICByZXR1cm4gcHJvbWlzZVJlc29sdmUodGhpcywgeCk7XG4gIH1cbn0pO1xuXG5jb25zdCBIYXJkd2FyZVdhbGxldEFjY291bnRzRm9ybSA9ICh7XG4gIGFjY291bnRzLFxuICBvblNlbGVjdGVkQ2hhbmdlZCxcbiAgb25TdWJtaXRcbn0pID0+IHtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgY2xhc3NOYW1lOiBcImNob29zZS1sZWRnZXItYWNjb3VudC1mb3JtLXdyYXBwZXJcIlxuICB9LCB7XG4gICAgY2hpbGRyZW46IFtqc3hzKFwicFwiLCB7XG4gICAgICBjaGlsZHJlbjogW1wiV2UgZm91bmQgXCIsIGFjY291bnRzLmxlbmd0aCwgXCIgYWNjb3VudHMgb24geW91ciBkZXZpY2UuIFNlbGVjdCB0aGUgYWNjb3VudChzKSB5b3Ugd2lzaCB0byBjb25uZWN0LlwiXVxuICAgIH0pLCBqc3goXCJmb3JtXCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgY2xhc3NOYW1lOiBcImZvcm1cIixcbiAgICAgIG9uU3VibWl0OiBlID0+IHtcbiAgICAgICAgb25TdWJtaXQoYWNjb3VudHMsIGUpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGNoaWxkcmVuOiBqc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBjaGlsZHJlbjogYWNjb3VudHMubWFwKChhY2NvdW50LCBpbmRleCkgPT4ganN4cyhcImRpdlwiLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogW2pzeChcImlucHV0XCIsIHtcbiAgICAgICAgICAgICAgb25DaGFuZ2U6IGUgPT4ge1xuICAgICAgICAgICAgICAgIG9uU2VsZWN0ZWRDaGFuZ2VkKGluZGV4LCBlLnRhcmdldC5jaGVja2VkKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2hlY2tlZDogYWNjb3VudC5zZWxlY3RlZCxcbiAgICAgICAgICAgICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgICBpZDogYWNjb3VudC5hY2NvdW50SWQsXG4gICAgICAgICAgICAgIG5hbWU6IGFjY291bnQuYWNjb3VudElkLFxuICAgICAgICAgICAgICB2YWx1ZTogYWNjb3VudC5hY2NvdW50SWRcbiAgICAgICAgICAgIH0pLCBqc3hzKFwibGFiZWxcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgIGh0bWxGb3I6IGFjY291bnQuYWNjb3VudElkXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXCIgXCIsIGFjY291bnQuYWNjb3VudElkXVxuICAgICAgICAgICAgfSkpLCBqc3goXCJiclwiLCB7fSldXG4gICAgICAgICAgfSwgaW5kZXgpKVxuICAgICAgICB9KSksIGpzeChcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwiYWN0aW9uLWJ1dHRvbnNcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgY2hpbGRyZW46IGpzeChcImJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJyaWdodC1idXR0b25cIixcbiAgICAgICAgICAgIHR5cGU6IFwic3VibWl0XCIsXG4gICAgICAgICAgICBkaXNhYmxlZDogIWFjY291bnRzLnNvbWUoeCA9PiB4LnNlbGVjdGVkKVxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIkNvbnRpbnVlXCJcbiAgICAgICAgICB9KSlcbiAgICAgICAgfSkpXVxuICAgICAgfSlcbiAgICB9KSldXG4gIH0pKTtcbn07XG5cbmNvbnN0IFdhbGxldENvbm5lY3RpbmcgPSAoe1xuICB3YWxsZXQsXG4gIG9uQmFja1xufSkgPT4ge1xuICByZXR1cm4ganN4cyhcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICBjbGFzc05hbWU6IFwiY29ubmVjdGluZy13cmFwcGVyXCJcbiAgfSwge1xuICAgIGNoaWxkcmVuOiBbanN4cyhcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgIGNsYXNzTmFtZTogXCJjb250ZW50XCJcbiAgICB9LCB7XG4gICAgICBjaGlsZHJlbjogW2pzeChcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInNwaW5uZXJcIixcbiAgICAgICAgaWQ6IHdhbGxldCA9PT0gbnVsbCB8fCB3YWxsZXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdhbGxldC5pZFxuICAgICAgfSwge1xuICAgICAgICBjaGlsZHJlbjoganN4KFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJpY29uXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgIGNoaWxkcmVuOiBqc3goXCJpbWdcIiwge1xuICAgICAgICAgICAgc3JjOiB3YWxsZXQgPT09IG51bGwgfHwgd2FsbGV0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3YWxsZXQubWV0YWRhdGEuaWNvblVybCxcbiAgICAgICAgICAgIGFsdDogXCJcIlxuICAgICAgICAgIH0pXG4gICAgICAgIH0pKVxuICAgICAgfSkpLCBqc3goXCJzcGFuXCIsIHtcbiAgICAgICAgY2hpbGRyZW46IFwiQ29ubmVjdGluZy4uLlwiXG4gICAgICB9KV1cbiAgICB9KSksIGpzeChcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgIGNsYXNzTmFtZTogXCJhY3Rpb24tYnV0dG9uc1wiXG4gICAgfSwge1xuICAgICAgY2hpbGRyZW46IGpzeChcImJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImxlZnQtYnV0dG9uXCIsXG4gICAgICAgIG9uQ2xpY2s6IG9uQmFja1xuICAgICAgfSwge1xuICAgICAgICBjaGlsZHJlbjogXCJCYWNrXCJcbiAgICAgIH0pKVxuICAgIH0pKV1cbiAgfSkpO1xufTtcblxuY29uc3QgREVGQVVMVF9ERVJJVkFUSU9OX1BBVEggPSBcIjQ0Jy8zOTcnLzAnLzAnLzEnXCI7XG5jb25zdCBEZXJpdmF0aW9uUGF0aCA9ICh7XG4gIHNlbGVjdG9yLFxuICBvcHRpb25zLFxuICBvbkJhY2ssXG4gIG9uQ29ubmVjdGVkLFxuICBwYXJhbXMsXG4gIG9uRXJyb3Jcbn0pID0+IHtcbiAgY29uc3QgW3JvdXRlLCBzZXRSb3V0ZV0gPSB1c2VTdGF0ZShcIkVudGVyRGVyaXZhdGlvblBhdGhcIik7XG4gIGNvbnN0IFtkZXJpdmF0aW9uUGF0aCwgc2V0RGVyaXZhdGlvblBhdGhdID0gdXNlU3RhdGUoREVGQVVMVF9ERVJJVkFUSU9OX1BBVEgpO1xuICBjb25zdCBbYWNjb3VudHMsIHNldEFjY291bnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2hhcmR3YXJlV2FsbGV0LCBzZXRIYXJkd2FyZVdhbGxldF0gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBbY3VzdG9tQWNjb3VudElkLCBzZXRDdXN0b21BY2NvdW50SWRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtjb25uZWN0aW5nLCBzZXRDb25uZWN0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBnZXRBY2NvdW50SWRzID0gcHVibGljS2V5ID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgZmV0Y2goYCR7c2VsZWN0b3Iub3B0aW9ucy5uZXR3b3JrLmluZGV4ZXJVcmx9L3B1YmxpY0tleS9lZDI1NTE5OiR7cHVibGljS2V5fS9hY2NvdW50c2ApO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdldCBhY2NvdW50IGlkIGZyb20gcHVibGljIGtleVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBhY2NvdW50SWRzID0geWllbGQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFjY291bnRJZHMpIHx8ICFhY2NvdW50SWRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBhY2NvdW50SWRzO1xuICB9KTtcblxuICBjb25zdCByZXNvbHZlQWNjb3VudHMgPSB3YWxsZXQgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgcHVibGljS2V5ID0geWllbGQgd2FsbGV0LmdldFB1YmxpY0tleShkZXJpdmF0aW9uUGF0aCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgYWNjb3VudElkcyA9IHlpZWxkIGdldEFjY291bnRJZHMocHVibGljS2V5KTtcbiAgICAgIHJldHVybiBhY2NvdW50SWRzLm1hcCgoYWNjb3VudElkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRlcml2YXRpb25QYXRoLFxuICAgICAgICAgIHB1YmxpY0tleSxcbiAgICAgICAgICBhY2NvdW50SWQsXG4gICAgICAgICAgc2VsZWN0ZWQ6IGluZGV4ID09PSAwXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IGhhbmRsZVZhbGlkYXRlQWNjb3VudCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IHdhbGxldCA9IHlpZWxkIHNlbGVjdG9yLndhbGxldChwYXJhbXMud2FsbGV0SWQpO1xuXG4gICAgaWYgKHdhbGxldC50eXBlICE9PSBcImhhcmR3YXJlXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRDb25uZWN0aW5nKHRydWUpO1xuICAgIHNldEhhcmR3YXJlV2FsbGV0KHdhbGxldCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzb2x2ZWRBY2NvdW50cyA9IHlpZWxkIHJlc29sdmVBY2NvdW50cyh3YWxsZXQpO1xuXG4gICAgICBpZiAoIXJlc29sdmVkQWNjb3VudHMpIHtcbiAgICAgICAgc2V0Um91dGUoXCJBZGRDdXN0b21BY2NvdW50SWRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9BY2NvdW50cyA9IHJlc29sdmVkQWNjb3VudHMubGVuZ3RoID09PSAwO1xuICAgICAgY29uc3QgbXVsdGlwbGVBY2NvdW50cyA9IHJlc29sdmVkQWNjb3VudHMubGVuZ3RoID4gMTtcblxuICAgICAgaWYgKG5vQWNjb3VudHMpIHtcbiAgICAgICAgc2V0Um91dGUoXCJOb0FjY291bnRzRm91bmRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2V0QWNjb3VudHMocmVzb2x2ZWRBY2NvdW50cyk7XG5cbiAgICAgIGlmICghbXVsdGlwbGVBY2NvdW50cykge1xuICAgICAgICBzZXRSb3V0ZShcIk92ZXJ2aWV3QWNjb3VudHNcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRSb3V0ZShcIkNob29zZUFjY291bnRcIik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBzZXRDb25uZWN0aW5nKGZhbHNlKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xuICAgICAgb25FcnJvcihtZXNzYWdlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0Q29ubmVjdGluZyhmYWxzZSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBoYW5kbGVBZGRDdXN0b21BY2NvdW50SWQgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICB0cnkge1xuICAgICAgc2V0Q29ubmVjdGluZyh0cnVlKTtcbiAgICAgIGNvbnN0IHB1YmxpY0tleSA9IHlpZWxkIGhhcmR3YXJlV2FsbGV0LmdldFB1YmxpY0tleShkZXJpdmF0aW9uUGF0aCk7XG4gICAgICBzZXRBY2NvdW50cyhbe1xuICAgICAgICBkZXJpdmF0aW9uUGF0aDogZGVyaXZhdGlvblBhdGgsXG4gICAgICAgIHB1YmxpY0tleSxcbiAgICAgICAgYWNjb3VudElkOiBjdXN0b21BY2NvdW50SWQsXG4gICAgICAgIHNlbGVjdGVkOiB0cnVlXG4gICAgICB9XSk7XG4gICAgICBzZXRSb3V0ZShcIk92ZXJ2aWV3QWNjb3VudHNcIik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBzZXRDb25uZWN0aW5nKGZhbHNlKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xuICAgICAgb25FcnJvcihtZXNzYWdlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0Q29ubmVjdGluZyhmYWxzZSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBoYW5kbGVTaWduSW4gPSAoKSA9PiB7XG4gICAgY29uc3QgbWFwQWNjb3VudHMgPSBhY2NvdW50cy5tYXAoYWNjb3VudCA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZXJpdmF0aW9uUGF0aDogYWNjb3VudC5kZXJpdmF0aW9uUGF0aCxcbiAgICAgICAgcHVibGljS2V5OiBhY2NvdW50LnB1YmxpY0tleSxcbiAgICAgICAgYWNjb3VudElkOiBhY2NvdW50LmFjY291bnRJZFxuICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gaGFyZHdhcmVXYWxsZXQuc2lnbkluKHtcbiAgICAgIGNvbnRyYWN0SWQ6IG9wdGlvbnMuY29udHJhY3RJZCxcbiAgICAgIG1ldGhvZE5hbWVzOiBvcHRpb25zLm1ldGhvZE5hbWVzLFxuICAgICAgYWNjb3VudHM6IG1hcEFjY291bnRzXG4gICAgfSkudGhlbigoKSA9PiBvbkNvbm5lY3RlZCgpKS5jYXRjaChlcnIgPT4ge1xuICAgICAgb25FcnJvcihgRXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRW50ZXJDbGljayA9IGUgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgIHlpZWxkIGhhbmRsZVZhbGlkYXRlQWNjb3VudCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKGNvbm5lY3RpbmcpIHtcbiAgICByZXR1cm4ganN4KFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgY2xhc3NOYW1lOiBcImRlcml2YXRpb24tcGF0aC13cmFwcGVyXCJcbiAgICB9LCB7XG4gICAgICBjaGlsZHJlbjoganN4KFdhbGxldENvbm5lY3RpbmcsIHtcbiAgICAgICAgd2FsbGV0OiBoYXJkd2FyZVdhbGxldCxcbiAgICAgICAgb25CYWNrOiAoKSA9PiB7XG4gICAgICAgICAgc2V0Q29ubmVjdGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSkpO1xuICB9XG5cbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgY2xhc3NOYW1lOiBcImRlcml2YXRpb24tcGF0aC13cmFwcGVyXCJcbiAgfSwge1xuICAgIGNoaWxkcmVuOiBbcm91dGUgPT09IFwiRW50ZXJEZXJpdmF0aW9uUGF0aFwiICYmIGpzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICBjbGFzc05hbWU6IFwiZW50ZXItZGVyaXZhdGlvbi1wYXRoXCJcbiAgICB9LCB7XG4gICAgICBjaGlsZHJlbjogW2pzeHMoXCJkaXZcIiwge1xuICAgICAgICBjaGlsZHJlbjogW2pzeChcInBcIiwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIk1ha2Ugc3VyZSB5b3VyIGRldmljZSBpcyBwbHVnZ2VkIGluLCB0aGVuIGVudGVyIGEgZGVyaXZhdGlvbiBwYXRoIHRvIGNvbm5lY3Q6XCJcbiAgICAgICAgfSksIGpzeChcImlucHV0XCIsIHtcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICBwbGFjZWhvbGRlcjogXCJEZXJpdmF0aW9uIFBhdGhcIixcbiAgICAgICAgICB2YWx1ZTogZGVyaXZhdGlvblBhdGgsXG4gICAgICAgICAgb25DaGFuZ2U6IGUgPT4ge1xuICAgICAgICAgICAgc2V0RGVyaXZhdGlvblBhdGgoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25LZXlQcmVzczogaGFuZGxlRW50ZXJDbGlja1xuICAgICAgICB9KV1cbiAgICAgIH0pLCBqc3hzKFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICBjbGFzc05hbWU6IFwiYWN0aW9uLWJ1dHRvbnNcIlxuICAgICAgfSwge1xuICAgICAgICBjaGlsZHJlbjogW2pzeChcImJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwibGVmdC1idXR0b25cIixcbiAgICAgICAgICBvbkNsaWNrOiBvbkJhY2tcbiAgICAgICAgfSwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIkJhY2tcIlxuICAgICAgICB9KSksIGpzeChcImJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwicmlnaHQtYnV0dG9uXCIsXG4gICAgICAgICAgb25DbGljazogaGFuZGxlVmFsaWRhdGVBY2NvdW50XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBjaGlsZHJlbjogXCJDb250aW51ZVwiXG4gICAgICAgIH0pKV1cbiAgICAgIH0pKV1cbiAgICB9KSksIHJvdXRlID09PSBcIk5vQWNjb3VudHNGb3VuZFwiICYmIGpzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICBjbGFzc05hbWU6IFwibm8tYWNjb3VudHMtZm91bmQtd3JhcHBlclwiXG4gICAgfSwge1xuICAgICAgY2hpbGRyZW46IFtqc3hzKFwicFwiLCB7XG4gICAgICAgIGNoaWxkcmVuOiBbXCJDYW4ndCBmb3VuZCBhbnkgYWNjb3VudCBhc3NvY2lhdGVkIHdpdGggdGhpcyBMZWRnZXIuIFBsZWFzZSBjcmVhdGUgYSBuZXcgTkVBUiBhY2NvdW50IG9uXCIsIFwiIFwiLCBqc3goXCJhXCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgIGhyZWY6IGBodHRwczovLyR7c2VsZWN0b3Iub3B0aW9ucy5uZXR3b3JrLm5ldHdvcmtJZCA9PT0gXCJ0ZXN0bmV0XCIgPyBcInRlc3RuZXRcIiA6IFwiYXBwXCJ9Lm15bmVhcndhbGxldC5jb20vY3JlYXRlYCxcbiAgICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIk15TmVhcldhbGxldFwiXG4gICAgICAgIH0pKSwgXCIgXCIsIFwib3IgY29ubmVjdCBhbiBhbm90aGVyIExlZGdlci5cIl1cbiAgICAgIH0pLCBqc3goXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGNsYXNzTmFtZTogXCJhY3Rpb24tYnV0dG9uc1wiXG4gICAgICB9LCB7XG4gICAgICAgIGNoaWxkcmVuOiBqc3goXCJidXR0b25cIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcImxlZnQtYnV0dG9uXCIsXG4gICAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgc2V0Um91dGUoXCJFbnRlckRlcml2YXRpb25QYXRoXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIkJhY2tcIlxuICAgICAgICB9KSlcbiAgICAgIH0pKV1cbiAgICB9KSksIHJvdXRlID09PSBcIkNob29zZUFjY291bnRcIiAmJiBqc3goSGFyZHdhcmVXYWxsZXRBY2NvdW50c0Zvcm0sIHtcbiAgICAgIGFjY291bnRzOiBhY2NvdW50cyxcbiAgICAgIG9uU2VsZWN0ZWRDaGFuZ2VkOiAoaW5kZXgsIHNlbGVjdGVkKSA9PiB7XG4gICAgICAgIHNldEFjY291bnRzKHByZXZBY2NvdW50cyA9PiB7XG4gICAgICAgICAgY29uc3QgdXBkYXRlQWNjb3VudHMgPSBwcmV2QWNjb3VudHMubWFwKChhY2NvdW50LCBpZHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVmFsdWUgPSBpbmRleCA9PT0gaWR4ID8gc2VsZWN0ZWQgOiBhY2NvdW50LnNlbGVjdGVkO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYWNjb3VudCksIHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHNlbGVjdGVkVmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBbLi4udXBkYXRlQWNjb3VudHNdO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBvblN1Ym1pdDogKGFjYywgZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNldEFjY291bnRzKHByZXZBY2NvdW50cyA9PiB7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0ZWRBY2NvdW50cyA9IHByZXZBY2NvdW50cy5maWx0ZXIoYWNjb3VudCA9PiBhY2NvdW50LnNlbGVjdGVkKTtcbiAgICAgICAgICByZXR1cm4gWy4uLnNlbGVjdGVkQWNjb3VudHNdO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0Um91dGUoXCJPdmVydmlld0FjY291bnRzXCIpO1xuICAgICAgfVxuICAgIH0pLCByb3V0ZSA9PT0gXCJBZGRDdXN0b21BY2NvdW50SWRcIiAmJiBqc3hzKFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgY2xhc3NOYW1lOiBcImVudGVyLWN1c3RvbS1hY2NvdW50XCJcbiAgICB9LCB7XG4gICAgICBjaGlsZHJlbjogW2pzeChcInBcIiwge1xuICAgICAgICBjaGlsZHJlbjogXCJGYWlsZWQgdG8gYXV0b21hdGljYWxseSBmaW5kIGFjY291bnQgaWQuIFByb3ZpZGUgaXQgbWFudWFsbHk6XCJcbiAgICAgIH0pLCBqc3goXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGNsYXNzTmFtZTogXCJpbnB1dC13cmFwcGVyXCJcbiAgICAgIH0sIHtcbiAgICAgICAgY2hpbGRyZW46IGpzeChcImlucHV0XCIsIHtcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICBwbGFjZWhvbGRlcjogXCJBY2NvdW50IElEXCIsXG4gICAgICAgICAgdmFsdWU6IGN1c3RvbUFjY291bnRJZCxcbiAgICAgICAgICBvbkNoYW5nZTogZSA9PiB7XG4gICAgICAgICAgICBzZXRDdXN0b21BY2NvdW50SWQoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pKSwganN4KFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICBjbGFzc05hbWU6IFwiYWN0aW9uLWJ1dHRvbnNcIlxuICAgICAgfSwge1xuICAgICAgICBjaGlsZHJlbjoganN4KFwiYnV0dG9uXCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJyaWdodC1idXR0b25cIixcbiAgICAgICAgICBvbkNsaWNrOiBoYW5kbGVBZGRDdXN0b21BY2NvdW50SWRcbiAgICAgICAgfSwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIkNvbnRpbnVlXCJcbiAgICAgICAgfSkpXG4gICAgICB9KSldXG4gICAgfSkpLCByb3V0ZSA9PT0gXCJPdmVydmlld0FjY291bnRzXCIgJiYganN4cyhcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgIGNsYXNzTmFtZTogXCJvdmVydmlldy13cmFwcGVyXCJcbiAgICB9LCB7XG4gICAgICBjaGlsZHJlbjogW2pzeChcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm92ZXJ2aWV3LWhlYWRlclwiXG4gICAgICB9LCB7XG4gICAgICAgIGNoaWxkcmVuOiBqc3goXCJoNFwiLCB7XG4gICAgICAgICAgY2hpbGRyZW46IFwiQWNjb3VudHNcIlxuICAgICAgICB9KVxuICAgICAgfSkpLCBhY2NvdW50cy5tYXAoKGFjY291bnQsIGluZGV4KSA9PiBqc3goXCJkaXZcIiwge1xuICAgICAgICBjaGlsZHJlbjoganN4KFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJhY2NvdW50XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgIGNoaWxkcmVuOiBqc3goXCJzcGFuXCIsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBhY2NvdW50LmFjY291bnRJZFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pKVxuICAgICAgfSwgYWNjb3VudC5hY2NvdW50SWQpKSwganN4KFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICBjbGFzc05hbWU6IFwiYWN0aW9uLWJ1dHRvbnNcIlxuICAgICAgfSwge1xuICAgICAgICBjaGlsZHJlbjoganN4KFwiYnV0dG9uXCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJyaWdodC1idXR0b25cIixcbiAgICAgICAgICBvbkNsaWNrOiBoYW5kbGVTaWduSW4sXG4gICAgICAgICAgZGlzYWJsZWQ6IGFjY291bnRzLmxlbmd0aCA9PT0gMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgY2hpbGRyZW46IFwiQ29ubmVjdFwiXG4gICAgICAgIH0pKVxuICAgICAgfSkpXVxuICAgIH0pKV1cbiAgfSkpO1xufTtcblxuY29uc3QgV2FsbGV0Tm90SW5zdGFsbGVkID0gKHtcbiAgbW9kdWxlLFxuICBvbkJhY2tcbn0pID0+IHtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgY2xhc3NOYW1lOiBcIndhbGxldC1ub3QtaW5zdGFsbGVkLXdyYXBwZXJcIlxuICB9LCB7XG4gICAgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgY2xhc3NOYW1lOiBcIndhbGxldC1kYXRhXCJcbiAgICB9LCB7XG4gICAgICBjaGlsZHJlbjogW2pzeChcImRpdlwiLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgY2xhc3NOYW1lOiBgd2FsbGV0LWljb24tYm94ICR7bW9kdWxlLmlkfWBcbiAgICAgIH0sIHtcbiAgICAgICAgY2hpbGRyZW46IGpzeChcImltZ1wiLCB7XG4gICAgICAgICAgc3JjOiBtb2R1bGUubWV0YWRhdGEuaWNvblVybCxcbiAgICAgICAgICBhbHQ6IG1vZHVsZS5tZXRhZGF0YS5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9KSksIGpzeChcInBcIiwge1xuICAgICAgICBjaGlsZHJlbjogbW9kdWxlLm1ldGFkYXRhLm5hbWVcbiAgICAgIH0pXVxuICAgIH0pKSwganN4cyhcInBcIiwge1xuICAgICAgY2hpbGRyZW46IFtgWW91J2xsIG5lZWQgdG8gaW5zdGFsbCAke21vZHVsZS5tZXRhZGF0YS5uYW1lfSB0byBjb250aW51ZS4gQWZ0ZXIgaW5zdGFsbGluZ2AsIGpzeChcInNwYW5cIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGNsYXNzTmFtZTogXCJyZWZyZXNoLWxpbmtcIixcbiAgICAgICAgb25DbGljazogKCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICB9LCB7XG4gICAgICAgIGNoaWxkcmVuOiBcIlxcdTAwQTByZWZyZXNoIHRoZSBwYWdlLlwiXG4gICAgICB9KSldXG4gICAgfSksIGpzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICBjbGFzc05hbWU6IFwiYWN0aW9uLWJ1dHRvbnNcIlxuICAgIH0sIHtcbiAgICAgIGNoaWxkcmVuOiBbanN4KFwiYnV0dG9uXCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICBjbGFzc05hbWU6IFwibGVmdC1idXR0b25cIixcbiAgICAgICAgb25DbGljazogb25CYWNrXG4gICAgICB9LCB7XG4gICAgICAgIGNoaWxkcmVuOiBcIkJhY2tcIlxuICAgICAgfSkpLCBqc3goXCJidXR0b25cIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGNsYXNzTmFtZTogXCJyaWdodC1idXR0b25cIixcbiAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgIGlmIChtb2R1bGUudHlwZSAhPT0gXCJpbmplY3RlZFwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgd2luZG93Lm9wZW4obW9kdWxlLm1ldGFkYXRhLmRvd25sb2FkVXJsLCBcIl9ibGFua1wiKTtcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBjaGlsZHJlbjogYE9wZW4gJHttb2R1bGUubWV0YWRhdGEubmFtZX1gXG4gICAgICB9KSldXG4gICAgfSkpXVxuICB9KSk7XG59O1xuXG5jb25zdCBnZXRUaGVtZUNsYXNzID0gdGhlbWUgPT4ge1xuICBzd2l0Y2ggKHRoZW1lKSB7XG4gICAgY2FzZSBcImRhcmtcIjpcbiAgICAgIHJldHVybiBcImRhcmstdGhlbWVcIjtcblxuICAgIGNhc2UgXCJsaWdodFwiOlxuICAgICAgcmV0dXJuIFwibGlnaHQtdGhlbWVcIjtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gXCJcIjtcbiAgfVxufTtcblxuY29uc3QgTW9kYWwgPSAoe1xuICBzZWxlY3RvcixcbiAgb3B0aW9ucyxcbiAgdmlzaWJsZSxcbiAgaGlkZVxufSkgPT4ge1xuICB2YXIgX2EsIF9iO1xuXG4gIGNvbnN0IFtyb3V0ZSwgc2V0Um91dGVdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiV2FsbGV0T3B0aW9uc1wiXG4gIH0pO1xuICBjb25zdCBbYWxlcnRNZXNzYWdlLCBzZXRBbGVydE1lc3NhZ2VdID0gdXNlU3RhdGUobnVsbCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0Um91dGUoe1xuICAgICAgbmFtZTogXCJXYWxsZXRPcHRpb25zXCJcbiAgICB9KTtcbiAgfSwgW3Zpc2libGVdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBzZWxlY3Rvci5vbihcIm5ldHdvcmtDaGFuZ2VkXCIsICh7XG4gICAgICBuZXR3b3JrSWRcbiAgICB9KSA9PiB7XG4gICAgICAvLyBTd2l0Y2hlZCBiYWNrIHRvIHRoZSBjb3JyZWN0IG5ldHdvcmsuXG4gICAgICBpZiAobmV0d29ya0lkID09PSBzZWxlY3Rvci5vcHRpb25zLm5ldHdvcmsubmV0d29ya0lkKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVEaXNtaXNzQ2xpY2soKTtcbiAgICAgIH1cblxuICAgICAgc2V0Um91dGUoe1xuICAgICAgICBuYW1lOiBcIldhbGxldE5ldHdvcmtDaGFuZ2VkXCJcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiBzdWJzY3JpcHRpb24ucmVtb3ZlKCk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW10pO1xuICBjb25zdCBoYW5kbGVEaXNtaXNzQ2xpY2sgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0QWxlcnRNZXNzYWdlKG51bGwpO1xuICAgIHNldFJvdXRlKHtcbiAgICAgIG5hbWU6IFwiV2FsbGV0T3B0aW9uc1wiXG4gICAgfSk7XG4gICAgaGlkZSgpO1xuICB9LCBbaGlkZV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNsb3NlID0gZSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgaGFuZGxlRGlzbWlzc0NsaWNrKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZSk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZSk7XG4gIH0sIFtoYW5kbGVEaXNtaXNzQ2xpY2tdKTtcblxuICBpZiAoIXZpc2libGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBqc3hzKFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgIGNsYXNzTmFtZTogYG53cy1tb2RhbC13cmFwcGVyICR7Z2V0VGhlbWVDbGFzcyhvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudGhlbWUpfSAke3Zpc2libGUgPyBcIm9wZW5cIiA6IFwiXCJ9YFxuICB9LCB7XG4gICAgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm1vZGFsLW92ZXJsYXlcIixcbiAgICAgIG9uQ2xpY2s6IGhhbmRsZURpc21pc3NDbGlja1xuICAgIH0pLCBqc3hzKFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgY2xhc3NOYW1lOiBcIm1vZGFsXCJcbiAgICB9LCB7XG4gICAgICBjaGlsZHJlbjogW2pzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGNsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIlxuICAgICAgfSwge1xuICAgICAgICBjaGlsZHJlbjogW2pzeChcImgyXCIsIHtcbiAgICAgICAgICBjaGlsZHJlbjogXCJDb25uZWN0IFdhbGxldFwiXG4gICAgICAgIH0pLCBqc3goQ2xvc2VCdXR0b24sIHtcbiAgICAgICAgICBvbkNsaWNrOiBoYW5kbGVEaXNtaXNzQ2xpY2tcbiAgICAgICAgfSldXG4gICAgICB9KSksIGpzeHMoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGNsYXNzTmFtZTogXCJtb2RhbC1ib2R5XCJcbiAgICAgIH0sIHtcbiAgICAgICAgY2hpbGRyZW46IFtyb3V0ZS5uYW1lID09PSBcIkFsZXJ0TWVzc2FnZVwiICYmIGFsZXJ0TWVzc2FnZSAmJiBqc3goQWxlcnRNZXNzYWdlLCB7XG4gICAgICAgICAgbWVzc2FnZTogYWxlcnRNZXNzYWdlLFxuICAgICAgICAgIG9uQmFjazogKCkgPT4ge1xuICAgICAgICAgICAgc2V0QWxlcnRNZXNzYWdlKG51bGwpO1xuICAgICAgICAgICAgc2V0Um91dGUoe1xuICAgICAgICAgICAgICBuYW1lOiBcIldhbGxldE9wdGlvbnNcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSwgcm91dGUubmFtZSA9PT0gXCJXYWxsZXRPcHRpb25zXCIgJiYganN4KFdhbGxldE9wdGlvbnMsIHtcbiAgICAgICAgICBzZWxlY3Rvcjogc2VsZWN0b3IsXG4gICAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgICBvbldhbGxldE5vdEluc3RhbGxlZDogbW9kdWxlID0+IHtcbiAgICAgICAgICAgIHNldFJvdXRlKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJXYWxsZXROb3RJbnN0YWxsZWRcIixcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgbW9kdWxlOiBtb2R1bGVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvbkNvbm5lY3RIYXJkd2FyZVdhbGxldDogKCkgPT4ge1xuICAgICAgICAgICAgc2V0Um91dGUoe1xuICAgICAgICAgICAgICBuYW1lOiBcIkRlcml2YXRpb25QYXRoXCIsXG4gICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIHdhbGxldElkOiBzZWxlY3Rvci5zdG9yZS5nZXRTdGF0ZSgpLnNlbGVjdGVkV2FsbGV0SWQgfHwgXCJsZWRnZXJcIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uQ29ubmVjdGluZzogd2FsbGV0ID0+IHtcbiAgICAgICAgICAgIHNldFJvdXRlKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJXYWxsZXRDb25uZWN0aW5nXCIsXG4gICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIHdhbGxldDogd2FsbGV0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25Db25uZWN0ZWQ6IGhhbmRsZURpc21pc3NDbGljayxcbiAgICAgICAgICBvbkVycm9yOiBlcnIgPT4ge1xuICAgICAgICAgICAgc2V0QWxlcnRNZXNzYWdlKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHNldFJvdXRlKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJBbGVydE1lc3NhZ2VcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSwgcm91dGUubmFtZSA9PT0gXCJEZXJpdmF0aW9uUGF0aFwiICYmIGpzeChEZXJpdmF0aW9uUGF0aCwge1xuICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvcixcbiAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICAgIG9uQ29ubmVjdGVkOiBoYW5kbGVEaXNtaXNzQ2xpY2ssXG4gICAgICAgICAgcGFyYW1zOiByb3V0ZS5wYXJhbXMsXG4gICAgICAgICAgb25CYWNrOiAoKSA9PiBzZXRSb3V0ZSh7XG4gICAgICAgICAgICBuYW1lOiBcIldhbGxldE9wdGlvbnNcIlxuICAgICAgICAgIH0pLFxuICAgICAgICAgIG9uRXJyb3I6IG1lc3NhZ2UgPT4ge1xuICAgICAgICAgICAgc2V0QWxlcnRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgc2V0Um91dGUoe1xuICAgICAgICAgICAgICBuYW1lOiBcIkFsZXJ0TWVzc2FnZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLCByb3V0ZS5uYW1lID09PSBcIldhbGxldE5ldHdvcmtDaGFuZ2VkXCIgJiYganN4KFdhbGxldE5ldHdvcmtDaGFuZ2VkLCB7XG4gICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yLFxuICAgICAgICAgIG9uU3dpdGNoV2FsbGV0OiAoKSA9PiBzZXRSb3V0ZSh7XG4gICAgICAgICAgICBuYW1lOiBcIldhbGxldE9wdGlvbnNcIlxuICAgICAgICAgIH0pLFxuICAgICAgICAgIG9uRGlzbWlzczogaGFuZGxlRGlzbWlzc0NsaWNrXG4gICAgICAgIH0pLCByb3V0ZS5uYW1lID09PSBcIldhbGxldE5vdEluc3RhbGxlZFwiICYmIGpzeChXYWxsZXROb3RJbnN0YWxsZWQsIHtcbiAgICAgICAgICBtb2R1bGU6IChfYSA9IHJvdXRlLnBhcmFtcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1vZHVsZSxcbiAgICAgICAgICBvbkJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgIHNldFJvdXRlKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJXYWxsZXRPcHRpb25zXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksIHJvdXRlLm5hbWUgPT09IFwiV2FsbGV0Q29ubmVjdGluZ1wiICYmIGpzeChXYWxsZXRDb25uZWN0aW5nLCB7XG4gICAgICAgICAgd2FsbGV0OiAoX2IgPSByb3V0ZS5wYXJhbXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi53YWxsZXQsXG4gICAgICAgICAgb25CYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICBzZXRSb3V0ZSh7XG4gICAgICAgICAgICAgIG5hbWU6IFwiV2FsbGV0T3B0aW9uc1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXVxuICAgICAgfSkpXVxuICAgIH0pKV1cbiAgfSkpO1xufTtcblxuY29uc3QgTU9EQUxfRUxFTUVOVF9JRCA9IFwibmVhci13YWxsZXQtc2VsZWN0b3ItbW9kYWxcIjtcbmxldCBtb2RhbEluc3RhbmNlID0gbnVsbDtcbmNvbnN0IHNldHVwTW9kYWwgPSAoc2VsZWN0b3IsIG9wdGlvbnMpID0+IHtcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBlbC5pZCA9IE1PREFMX0VMRU1FTlRfSUQ7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChNT0RBTF9FTEVNRU5UX0lEKTtcbiAgY29uc3Qgcm9vdCA9IGNyZWF0ZVJvb3QoY29udGFpbmVyKTtcblxuICBjb25zdCByZW5kZXIgPSAodmlzaWJsZSA9IGZhbHNlKSA9PiB7XG4gICAgcm9vdC5yZW5kZXIoanN4KE1vZGFsLCB7XG4gICAgICBzZWxlY3Rvcjogc2VsZWN0b3IsXG4gICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgdmlzaWJsZTogdmlzaWJsZSxcbiAgICAgIGhpZGU6ICgpID0+IHJlbmRlcihmYWxzZSlcbiAgICB9KSk7XG4gIH07XG5cbiAgcmVuZGVyKCk7XG5cbiAgaWYgKCFtb2RhbEluc3RhbmNlKSB7XG4gICAgbW9kYWxJbnN0YW5jZSA9IHtcbiAgICAgIHNob3c6ICgpID0+IHtcbiAgICAgICAgcmVuZGVyKHRydWUpO1xuICAgICAgfSxcbiAgICAgIGhpZGU6ICgpID0+IHtcbiAgICAgICAgcmVuZGVyKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIG1vZGFsSW5zdGFuY2U7XG59O1xuXG5leHBvcnQgeyBzZXR1cE1vZGFsIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../dist/packages/modal-ui/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("./pages/index.tsx"));
module.exports = __webpack_exports__;

})();